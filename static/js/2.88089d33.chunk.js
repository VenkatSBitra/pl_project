/*! For license information please see 2.88089d33.chunk.js.LICENSE.txt */
(this["webpackJsonpreactblockly-customblocks"]=this["webpackJsonpreactblockly-customblocks"]||[]).push([[2],[function(t,e,n){"use strict";t.exports=n(152)},function(t,e,n){var o,r,i;r=[n(162)],void 0===(i="function"===typeof(o=function(t){"use strict";return t})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(3);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},o.apply(this,arguments)}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(71);var r=n(55),i=n(72);function s(t,e){return Object(o.a)(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return i}}(t,e)||Object(r.a)(t,e)||Object(i.a)()}},function(t,e,n){var o;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o)){if(o.length){var s=r.apply(null,o);s&&t.push(s)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var a in o)n.call(o,a)&&o[a]&&t.push(a);else t.push(o.toString())}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):void 0===(o=function(){return r}.apply(e,[]))||(t.exports=o)}()},function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(58);var r=n(73),i=n(55);function s(t){return function(t){if(Array.isArray(t))return Object(o.a)(t)}(t)||Object(r.a)(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"===typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var l,u=[],c=!1,h=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&d())}function d(){if(!c){var t=a(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";t.exports=n(252)},function(t,e,n){function o(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===o(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===o(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===o(t)},e.isError=function(t){return"[object Error]"===o(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=n(13).Buffer.isBuffer},function(t,e,n){"use strict";(function(t){var o=n(170),r=n(171),i=n(102);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,o){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,o){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,n):new Uint8Array(e,n,o);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=p(t,e);return t}(t,e,n,o):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|f(e,n),r=(t=a(t,o)).write(e,n);r!==o&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(o=e.length)!==o?a(t,0):p(t,e);if("Buffer"===e.type&&i(e.data))return p(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var o=0;o<n;o+=1)t[o]=255&e[o];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(o)return H(t).length;e=(""+e).toLowerCase(),o=!0}}function g(t,e,n){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return w(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function _(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function v(t,e,n,o,r){if(0===t.length)return-1;if("string"===typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof e&&(e=l.from(e,o)),l.isBuffer(e))return 0===e.length?-1:m(t,e,n,o,r);if("number"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,o,r);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,o,r){var i,s=1,a=t.length,l=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(i=n;i<a;i++)if(u(t,i)===u(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(n+l>a&&(n=a-l),i=n;i>=0;i--){for(var h=!0,p=0;p<l;p++)if(u(t,i+p)!==u(e,p)){h=!1;break}if(h)return i}return-1}function y(t,e,n,o){n=Number(n)||0;var r=t.length-n;o?(o=Number(o))>r&&(o=r):o=r;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var s=0;s<o;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,o){return V(H(e,t.length-n),t,n,o)}function E(t,e,n,o){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,o)}function T(t,e,n,o){return E(t,e,n,o)}function S(t,e,n,o){return V(W(e),t,n,o)}function k(t,e,n,o){return V(function(t,e){for(var n,o,r,i=[],s=0;s<t.length&&!((e-=2)<0);++s)o=(n=t.charCodeAt(s))>>8,r=n%256,i.push(r),i.push(o);return i}(e,t.length-n),t,n,o)}function C(t,e,n){return 0===e&&n===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var o=[],r=e;r<n;){var i,s,a,l,u=t[r],c=null,h=u>239?4:u>223?3:u>191?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128===(192&(i=t[r+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=t[r+1],s=t[r+2],128===(192&i)&&128===(192&s)&&(l=(15&u)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=t[r+1],s=t[r+2],a=t[r+3],128===(192&i)&&128===(192&s)&&128===(192&a)&&(l=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,o.push(c>>>10&1023|55296),c=56320|1023&c),o.push(c),r+=h}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var n="",o=0;for(;o<e;)n+=String.fromCharCode.apply(String,t.slice(o,o+=R));return n}(o)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,o){return c(e),e<=0?a(t,e):void 0!==n?"string"===typeof o?a(t,e).fill(n,o):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,o=e.length,r=0,i=Math.min(n,o);r<i;++r)if(t[r]!==e[r]){n=t[r],o=e[r];break}return n<o?-1:o<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var o=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,r),r+=s.length}return o},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,o,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),e<0||n>t.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&e>=n)return 0;if(o>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(r>>>=0)-(o>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(o,r),c=t.slice(e,n),h=0;h<a;++h)if(u[h]!==c[h]){i=u[h],s=c[h];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,o){if(void 0===e)o="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)o=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function w(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(127&t[r]);return o}function I(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(t[r]);return o}function A(t,e,n){var o=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>o)&&(n=o);for(var r="",i=e;i<n;++i)r+=j(t[i]);return r}function N(t,e,n){for(var o=t.slice(e,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function D(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,o,r,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<i)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function L(t,e,n,o){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-n,2);r<i;++r)t[n+r]=(e&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function x(t,e,n,o){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-n,4);r<i;++r)t[n+r]=e>>>8*(o?r:3-r)&255}function P(t,e,n,o,r,i){if(n+o>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,o,i){return i||P(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function F(t,e,n,o,i){return i||P(t,0,n,8),r.write(t,e,n,o,52,8),n+8}l.prototype.slice=function(t,e){var n,o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var o=this[t+--e],r=1;e>0&&(r*=256);)o+=this[t+--e]*r;return o},l.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var o=this[t],r=1,i=0;++i<e&&(r*=256);)o+=this[t+i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var o=e,r=1,i=this[t+--o];o>0&&(r*=256);)i+=this[t+--o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,o){(t=+t,e|=0,n|=0,o)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[e]=255&t;++i<n&&(r*=256);)this[e+i]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,o){(t=+t,e|=0,n|=0,o)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,o){if(t=+t,e|=0,!o){var r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,o){if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var r,i=o-n;if(this===t&&n<e&&e<o)for(r=i-1;r>=0;--r)t[r+e]=this[r+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},l.prototype.fill=function(t,e,n,o){if("string"===typeof t){if("string"===typeof e?(o=e,e=0,n=this.length):"string"===typeof n&&(o=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==o&&"string"!==typeof o)throw new TypeError("encoding must be a string");if("string"===typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=l.isBuffer(t)?t:H(new l(t,o).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var n;e=e||1/0;for(var o=t.length,r=null,i=[],s=0;s<o;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(e-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(t){return o.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function V(t,e,n,o){for(var r=0;r<o&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(36))},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return a}));var o=n(7),r=n(74);n(139);function i(t,e){"function"===typeof t?t(e):"object"===Object(o.a)(t)&&t&&"current"in t&&(t.current=e)}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=e.filter((function(t){return t}));return o.length<=1?o[0]:function(t){e.forEach((function(e){i(e,t)}))}}function a(t){var e,n,o=Object(r.isMemo)(t)?t.type.type:t.type;return!("function"===typeof o&&!(null===(e=o.prototype)||void 0===e?void 0:e.render))&&!("function"===typeof t&&!(null===(n=t.prototype)||void 0===n?void 0:n.render))}},function(t,e,n){"use strict";function o(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";var o={};function r(t,e){0}function i(t,e,n){e||o[n]||(t(!1,n),o[n]=!0)}e.a=function(t,e){i(r,t,e)}},function(t,e,n){"use strict";function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}n.d(e,"a",(function(){return a}));var r=n(7),i=n(44);function s(t,e){if(e&&("object"===Object(r.a)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Object(i.a)(t)}function a(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}},function(t,e,n){"use strict";function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var o=n(2),r=n(5),i=n(3),s=n(17),a=n(0),l=n.n(a),u=n(6),c=n.n(u),h=Object(a.createContext)({}),p=n(7);function d(t,e){(function(t){return"string"===typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"===typeof t&&-1!==t.indexOf("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function f(t){return t<=1?"".concat(100*Number(t),"%"):t}function g(t){return 1===t.length?"0"+t:String(t)}function _(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*n*(e-t):n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function v(t){return m(t)/255}function m(t){return parseInt(t,16)}var y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function b(t){var e,n,o,r={r:0,g:0,b:0},i=1,s=null,a=null,l=null,u=!1,c=!1;return"string"===typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;var e=!1;if(y[t])t=y[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var n=k.rgb.exec(t);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=k.rgba.exec(t))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=k.hsl.exec(t))return{h:n[1],s:n[2],l:n[3]};if(n=k.hsla.exec(t))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=k.hsv.exec(t))return{h:n[1],s:n[2],v:n[3]};if(n=k.hsva.exec(t))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=k.hex8.exec(t))return{r:m(n[1]),g:m(n[2]),b:m(n[3]),a:v(n[4]),format:e?"name":"hex8"};if(n=k.hex6.exec(t))return{r:m(n[1]),g:m(n[2]),b:m(n[3]),format:e?"name":"hex"};if(n=k.hex4.exec(t))return{r:m(n[1]+n[1]),g:m(n[2]+n[2]),b:m(n[3]+n[3]),a:v(n[4]+n[4]),format:e?"name":"hex8"};if(n=k.hex3.exec(t))return{r:m(n[1]+n[1]),g:m(n[2]+n[2]),b:m(n[3]+n[3]),format:e?"name":"hex"};return!1}(t)),"object"===typeof t&&(C(t.r)&&C(t.g)&&C(t.b)?(e=t.r,n=t.g,o=t.b,r={r:255*d(e,255),g:255*d(n,255),b:255*d(o,255)},u=!0,c="%"===String(t.r).substr(-1)?"prgb":"rgb"):C(t.h)&&C(t.s)&&C(t.v)?(s=f(t.s),a=f(t.v),r=function(t,e,n){t=6*d(t,360),e=d(e,100),n=d(n,100);var o=Math.floor(t),r=t-o,i=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),l=o%6;return{r:255*[n,s,i,i,a,n][l],g:255*[a,n,n,s,i,i][l],b:255*[i,i,a,n,n,s][l]}}(t.h,s,a),u=!0,c="hsv"):C(t.h)&&C(t.s)&&C(t.l)&&(s=f(t.s),l=f(t.l),r=function(t,e,n){var o,r,i;if(t=d(t,360),e=d(e,100),n=d(n,100),0===e)r=n,i=n,o=n;else{var s=n<.5?n*(1+e):n+e-n*e,a=2*n-s;o=_(a,s,t+1/3),r=_(a,s,t),i=_(a,s,t-1/3)}return{r:255*o,g:255*r,b:255*i}}(t.h,s,l),u=!0,c="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=function(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}(i),{ok:u,format:t.format||c,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:i}}var E="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),T="[\\s|\\(]+(".concat(E,")[,|\\s]+(").concat(E,")[,|\\s]+(").concat(E,")\\s*\\)?"),S="[\\s|\\(]+(".concat(E,")[,|\\s]+(").concat(E,")[,|\\s]+(").concat(E,")[,|\\s]+(").concat(E,")\\s*\\)?"),k={CSS_UNIT:new RegExp(E),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+S),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+S),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+S),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function C(t){return Boolean(k.CSS_UNIT.exec(String(t)))}var O=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function R(t){var e=function(t,e,n){t=d(t,255),e=d(e,255),n=d(n,255);var o=Math.max(t,e,n),r=Math.min(t,e,n),i=0,s=o,a=o-r,l=0===o?0:a/o;if(o===r)i=0;else{switch(o){case t:i=(e-n)/a+(e<n?6:0);break;case e:i=(n-t)/a+2;break;case n:i=(t-e)/a+4}i/=6}return{h:i,s:l,v:s}}(t.r,t.g,t.b);return{h:360*e.h,s:e.s,v:e.v}}function w(t){var e=t.r,n=t.g,o=t.b;return"#".concat(function(t,e,n,o){var r=[g(Math.round(t).toString(16)),g(Math.round(e).toString(16)),g(Math.round(n).toString(16))];return o&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}(e,n,o,!1))}function I(t,e,n){var o=n/100;return{r:(e.r-t.r)*o+t.r,g:(e.g-t.g)*o+t.g,b:(e.b-t.b)*o+t.b}}function A(t,e,n){var o;return(o=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-2*e:Math.round(t.h)+2*e:n?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?o+=360:o>=360&&(o-=360),o}function N(t,e,n){return 0===t.h&&0===t.s?t.s:((o=n?t.s-.16*e:4===e?t.s+.16:t.s+.05*e)>1&&(o=1),n&&5===e&&o>.1&&(o=.1),o<.06&&(o=.06),Number(o.toFixed(2)));var o}function D(t,e,n){var o;return(o=n?t.v+.05*e:t.v-.15*e)>1&&(o=1),Number(o.toFixed(2))}function M(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],o=b(t),r=5;r>0;r-=1){var i=R(o),s=w(b({h:A(i,r,!0),s:N(i,r,!0),v:D(i,r,!0)}));n.push(s)}n.push(w(o));for(var a=1;a<=4;a+=1){var l=R(o),u=w(b({h:A(l,a),s:N(l,a),v:D(l,a)}));n.push(u)}return"dark"===e.theme?O.map((function(t){var o=t.index,r=t.opacity;return w(I(b(e.backgroundColor||"#141414"),b(n[o]),100*r))})):n}var L={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},x={},P={};Object.keys(L).forEach((function(t){x[t]=M(L[t]),x[t].primary=x[t][5],P[t]=M(L[t],{theme:"dark",backgroundColor:"#141414"}),P[t].primary=P[t][5]}));x.red,x.volcano,x.gold,x.orange,x.yellow,x.lime,x.green,x.cyan,x.blue,x.geekblue,x.purple,x.magenta,x.grey;var B=n(18),F=n(75);function U(t){return"object"===Object(p.a)(t)&&"string"===typeof t.name&&"string"===typeof t.theme&&("object"===Object(p.a)(t.icon)||"function"===typeof t.icon)}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var o=t[n];if("class"===n)e.className=o,delete e.class;else e[n]=o;return e}),{})}function H(t,e,n){return n?l.a.createElement(t.tag,Object(o.a)(Object(o.a)({key:e},j(t.attrs)),n),(t.children||[]).map((function(n,o){return H(n,"".concat(e,"-").concat(t.tag,"-").concat(o))}))):l.a.createElement(t.tag,Object(o.a)({key:e},j(t.attrs)),(t.children||[]).map((function(n,o){return H(n,"".concat(e,"-").concat(t.tag,"-").concat(o))})))}function W(t){return M(t)[0]}function V(t){return t?Array.isArray(t)?t:[t]:[]}var G="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",z=["icon","className","onClick","style","primaryColor","secondaryColor"],X={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Y=function(t){var e,n,r=t.icon,i=t.className,l=t.onClick,u=t.style,c=t.primaryColor,p=t.secondaryColor,d=Object(s.a)(t,z),f=X;if(c&&(f={primaryColor:c,secondaryColor:p||W(c)}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=Object(a.useContext)(h).csp;Object(a.useEffect)((function(){Object(F.a)(t,"@ant-design-icons",{prepend:!0,csp:e})}),[])}(),e=U(r),n="icon should be icon definiton, but got ".concat(r),Object(B.a)(e,"[@ant-design/icons] ".concat(n)),!U(r))return null;var g=r;return g&&"function"===typeof g.icon&&(g=Object(o.a)(Object(o.a)({},g),{},{icon:g.icon(f.primaryColor,f.secondaryColor)})),H(g.icon,"svg-".concat(g.name),Object(o.a)({className:i,onClick:l,style:u,"data-icon":g.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},d))};Y.displayName="IconReact",Y.getTwoToneColors=function(){return Object(o.a)({},X)},Y.setTwoToneColors=function(t){var e=t.primaryColor,n=t.secondaryColor;X.primaryColor=e,X.secondaryColor=n||W(e),X.calculated=!!n};var K=Y;function J(t){var e=V(t),n=Object(r.a)(e,2),o=n[0],i=n[1];return K.setTwoToneColors({primaryColor:o,secondaryColor:i})}var q=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];J("#1890ff");var $=a.forwardRef((function(t,e){var n,l=t.className,u=t.icon,p=t.spin,d=t.rotate,f=t.tabIndex,g=t.onClick,_=t.twoToneColor,v=Object(s.a)(t,q),m=a.useContext(h).prefixCls,y=void 0===m?"anticon":m,b=c()(y,(n={},Object(i.a)(n,"".concat(y,"-").concat(u.name),!!u.name),Object(i.a)(n,"".concat(y,"-spin"),!!p||"loading"===u.name),n),l),E=f;void 0===E&&g&&(E=-1);var T=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,S=V(_),k=Object(r.a)(S,2),C=k[0],O=k[1];return a.createElement("span",Object(o.a)(Object(o.a)({role:"img","aria-label":u.name},v),{},{ref:e,tabIndex:E,onClick:g,className:b}),a.createElement(K,{icon:u,primaryColor:C,secondaryColor:O,style:T}))}));$.displayName="AntdIcon",$.getTwoToneColor=function(){var t=K.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor},$.setTwoToneColor=J;e.a=$},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},r=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}},function(t,e,n){t.exports=r;var o=n(33).EventEmitter;function r(){o.call(this)}n(10)(r,o),r.Readable=n(60),r.Writable=n(202),r.Duplex=n(203),r.Transform=n(204),r.PassThrough=n(205),r.Stream=r,r.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"===typeof t.destroy&&t.destroy())}function u(t){if(c(),0===o.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(2);function r(t,e){var n=Object(o.a)({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var o=n(0),r=o.isValidElement;function i(t,e){return function(t,e,n){return r(t)?o.cloneElement(t,"function"===typeof n?n(t.props||{}):n):e}(t,t,e)}},function(t,e,n){"use strict";var o=n(18);e.a=function(t,e,n){Object(o.a)(t,"[antd: ".concat(e,"] ").concat(n))}},function(t,e,n){"use strict";function o(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=function(t){return+setTimeout(t,16)},r=function(t){return clearTimeout(t)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(o=function(t){return window.requestAnimationFrame(t)},r=function(t){return window.cancelAnimationFrame(t)});var i=0,s=new Map;function a(t){s.delete(t)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=i+=1;function r(e){if(0===e)a(n),t();else{var i=o((function(){r(e-1)}));s.set(n,i)}}return r(e),n}l.cancel=function(t){var e=s.get(t);return a(e),r(e)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return N})),n.d(e,"c",(function(){return D})),n.d(e,"d",(function(){return M}));var o=n(4),r=n(3),i=n(7),s=n(0),a=n.n(s),l=n(6),u=n.n(l);function c(t){return!(!t.addonBefore&&!t.addonAfter)}function h(t){return!!(t.prefix||t.suffix||t.allowClear)}function p(t,e,n,o){if(n){var r=e;if("click"===e.type){var i=t.cloneNode(!0);return r=Object.create(e,{target:{value:i},currentTarget:{value:i}}),i.value="",void n(r)}if(void 0!==o)return r=Object.create(e,{target:{value:t},currentTarget:{value:t}}),t.value=o,void n(r);n(r)}}function d(t){return"undefined"===typeof t||null===t?"":String(t)}var f=function(t){var e=t.inputElement,n=t.prefixCls,o=t.prefix,l=t.suffix,p=t.addonBefore,d=t.addonAfter,f=t.className,g=t.style,_=t.affixWrapperClassName,v=t.groupClassName,m=t.wrapperClassName,y=t.disabled,b=t.readOnly,E=t.focused,T=t.triggerFocus,S=t.allowClear,k=t.value,C=t.handleReset,O=t.hidden,R=Object(s.useRef)(null),w=Object(s.cloneElement)(e,{value:k,hidden:O});if(h(t)){var I,A="".concat(n,"-affix-wrapper"),N=u()(A,(I={},Object(r.a)(I,"".concat(A,"-disabled"),y),Object(r.a)(I,"".concat(A,"-focused"),E),Object(r.a)(I,"".concat(A,"-readonly"),b),Object(r.a)(I,"".concat(A,"-input-with-clear-btn"),l&&S&&k),I),!c(t)&&f,_),D=(l||S)&&a.a.createElement("span",{className:"".concat(n,"-suffix")},function(){var t;if(!S)return null;var e=!y&&!b&&k,o="".concat(n,"-clear-icon"),s="object"===Object(i.a)(S)&&(null===S||void 0===S?void 0:S.clearIcon)?S.clearIcon:"\u2716";return a.a.createElement("span",{onClick:C,onMouseDown:function(t){return t.preventDefault()},className:u()(o,(t={},Object(r.a)(t,"".concat(o,"-hidden"),!e),Object(r.a)(t,"".concat(o,"-has-suffix"),!!l),t)),role:"button",tabIndex:-1},s)}(),l);w=a.a.createElement("span",{className:N,style:g,hidden:!c(t)&&O,onMouseDown:function(t){var e;(null===(e=R.current)||void 0===e?void 0:e.contains(t.target))&&(null===T||void 0===T||T())},ref:R},o&&a.a.createElement("span",{className:"".concat(n,"-prefix")},o),Object(s.cloneElement)(e,{style:null,value:k,hidden:null}),D)}if(c(t)){var M="".concat(n,"-group"),L="".concat(M,"-addon"),x=u()("".concat(n,"-wrapper"),M,m),P=u()("".concat(n,"-group-wrapper"),f,v);return a.a.createElement("span",{className:P,style:g,hidden:O},a.a.createElement("span",{className:x},p&&a.a.createElement("span",{className:L},p),Object(s.cloneElement)(w,{style:null,hidden:null}),d&&a.a.createElement("span",{className:L},d)))}return w},g=n(8),_=n(2),v=n(5),m=n(17),y=n(25),b=n(43),E=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName"],T=Object(s.forwardRef)((function(t,e){var n=t.autoComplete,o=t.onChange,l=t.onFocus,T=t.onBlur,S=t.onPressEnter,k=t.onKeyDown,C=t.prefixCls,O=void 0===C?"rc-input":C,R=t.disabled,w=t.htmlSize,I=t.className,A=t.maxLength,N=t.suffix,D=t.showCount,M=t.type,L=void 0===M?"text":M,x=t.inputClassName,P=Object(m.a)(t,E),B=Object(b.a)(t.defaultValue,{value:t.value}),F=Object(v.a)(B,2),U=F[0],j=F[1],H=Object(s.useState)(!1),W=Object(v.a)(H,2),V=W[0],G=W[1],z=Object(s.useRef)(null),X=function(t){z.current&&function(t,e){if(t){t.focus(e);var n=(e||{}).cursor;if(n){var o=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(o,o);break;default:t.setSelectionRange(0,o)}}}}(z.current,t)};Object(s.useImperativeHandle)(e,(function(){return{focus:X,blur:function(){var t;null===(t=z.current)||void 0===t||t.blur()},setSelectionRange:function(t,e,n){var o;null===(o=z.current)||void 0===o||o.setSelectionRange(t,e,n)},select:function(){var t;null===(t=z.current)||void 0===t||t.select()},input:z.current}})),Object(s.useEffect)((function(){G((function(t){return(!t||!R)&&t}))}),[R]);var Y=function(e){void 0===t.value&&j(e.target.value),z.current&&p(z.current,e,o)},K=function(t){S&&"Enter"===t.key&&S(t),null===k||void 0===k||k(t)},J=function(t){G(!0),null===l||void 0===l||l(t)},q=function(t){G(!1),null===T||void 0===T||T(t)};return a.a.createElement(f,Object(_.a)(Object(_.a)({},P),{},{prefixCls:O,className:I,inputElement:function(){var e=Object(y.a)(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName","htmlSize"]);return a.a.createElement("input",Object(_.a)(Object(_.a)({autoComplete:n},e),{},{onChange:Y,onFocus:J,onBlur:q,onKeyDown:K,className:u()(O,Object(r.a)({},"".concat(O,"-disabled"),R),x,!c(t)&&!h(t)&&I),ref:z,size:w,type:L}))}(),handleReset:function(t){j(""),X(),z.current&&p(z.current,t,o)},value:d(U),focused:V,triggerFocus:X,suffix:function(){var t=Number(A)>0;if(N||D){var e=Object(g.a)(d(U)).length,n="object"===Object(i.a)(D)?D.formatter({count:e,maxLength:A}):"".concat(e).concat(t?" / ".concat(A):"");return a.a.createElement(a.a.Fragment,null,!!D&&a.a.createElement("span",{className:u()("".concat(O,"-show-count-suffix"),Object(r.a)({},"".concat(O,"-show-count-has-suffix"),!!N))},n),N)}return null}(),disabled:R}))})),S=n(80),k=n(16),C=n(45),O=n(31),R=n(328),w=n(35);var I=n(27),A=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n};function N(t){return"undefined"===typeof t||null===t?"":String(t)}function D(t,e,n,o){if(n){var r=e;if("click"===e.type){var i=t.cloneNode(!0);return r=Object.create(e,{target:{value:i},currentTarget:{value:i}}),i.value="",void n(r)}if(void 0!==o)return r=Object.create(e,{target:{value:t},currentTarget:{value:t}}),t.value=o,void n(r);n(r)}}function M(t,e){if(t){t.focus(e);var n=(e||{}).cursor;if(n){var o=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(o,o);break;default:t.setSelectionRange(0,o)}}}}var L=Object(s.forwardRef)((function(t,e){var n,l,c,h=t.prefixCls,p=t.bordered,d=void 0===p||p,f=t.status,g=t.size,_=t.onBlur,v=t.onFocus,m=t.suffix,y=t.allowClear,b=t.addonAfter,E=t.addonBefore,N=A(t,["prefixCls","bordered","status","size","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore"]),D=a.a.useContext(R.b),M=D.getPrefixCls,L=D.direction,x=D.input,P=M("input",h),B=Object(s.useRef)(null),F=a.a.useContext(C.a),U=g||F,j=Object(s.useContext)(w.a),H=j.status,W=j.hasFeedback,V=j.feedbackIcon,G=Object(O.a)(H,f),z=function(t){return!!(t.prefix||t.suffix||t.allowClear)}(t)||!!W,X=Object(s.useRef)(z);Object(s.useEffect)((function(){var t;z&&!X.current&&Object(I.a)(document.activeElement===(null===(t=B.current)||void 0===t?void 0:t.input),"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),X.current=z}),[z]);var Y=Object(s.useRef)([]),K=function(){Y.current.push(window.setTimeout((function(){var t,e,n,o;(null===(t=B.current)||void 0===t?void 0:t.input)&&"password"===(null===(e=B.current)||void 0===e?void 0:e.input.getAttribute("type"))&&(null===(n=B.current)||void 0===n?void 0:n.input.hasAttribute("value"))&&(null===(o=B.current)||void 0===o||o.input.removeAttribute("value"))})))};Object(s.useEffect)((function(){return K(),function(){return Y.current.forEach((function(t){return window.clearTimeout(t)}))}}),[]);var J,q=(W||m)&&a.a.createElement(a.a.Fragment,null,m,W&&V);return"object"===Object(i.a)(y)&&(null===y||void 0===y?void 0:y.clearIcon)?J=y:y&&(J={clearIcon:a.a.createElement(S.a,null)}),a.a.createElement(T,Object(o.a)({ref:Object(k.a)(e,B),prefixCls:P,autoComplete:null===x||void 0===x?void 0:x.autoComplete},N,{onBlur:function(t){K(),null===_||void 0===_||_(t)},onFocus:function(t){K(),null===v||void 0===v||v(t)},suffix:q,allowClear:J,addonAfter:b&&a.a.createElement(w.b,null,b),addonBefore:E&&a.a.createElement(w.b,null,E),inputClassName:u()((n={},Object(r.a)(n,"".concat(P,"-sm"),"small"===U),Object(r.a)(n,"".concat(P,"-lg"),"large"===U),Object(r.a)(n,"".concat(P,"-rtl"),"rtl"===L),Object(r.a)(n,"".concat(P,"-borderless"),!d),n),!z&&Object(O.b)(P,G)),affixWrapperClassName:u()((l={},Object(r.a)(l,"".concat(P,"-affix-wrapper-sm"),"small"===U),Object(r.a)(l,"".concat(P,"-affix-wrapper-lg"),"large"===U),Object(r.a)(l,"".concat(P,"-affix-wrapper-rtl"),"rtl"===L),Object(r.a)(l,"".concat(P,"-affix-wrapper-borderless"),!d),l),Object(O.b)("".concat(P,"-affix-wrapper"),G,W)),wrapperClassName:u()(Object(r.a)({},"".concat(P,"-group-rtl"),"rtl"===L)),groupClassName:u()((c={},Object(r.a)(c,"".concat(P,"-group-wrapper-sm"),"small"===U),Object(r.a)(c,"".concat(P,"-group-wrapper-lg"),"large"===U),Object(r.a)(c,"".concat(P,"-group-wrapper-rtl"),"rtl"===L),c),Object(O.b)("".concat(P,"-group-wrapper"),G,W))}))}));e.a=L},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return l}));var o=n(3),r=n(6),i=n.n(r),s=n(22);Object(s.a)("warning","error","");function a(t,e,n){var r;return i()((r={},Object(o.a)(r,"".concat(t,"-status-success"),"success"===e),Object(o.a)(r,"".concat(t,"-status-warning"),"warning"===e),Object(o.a)(r,"".concat(t,"-status-error"),"error"===e),Object(o.a)(r,"".concat(t,"-status-validating"),"validating"===e),Object(o.a)(r,"".concat(t,"-has-feedback"),n),r))}var l=function(t,e){return e||t}},function(t,e,n){t.exports=n(254)},function(t,e,n){"use strict";var o,r="object"===typeof Reflect?Reflect:null,i=r&&"function"===typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};o=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,o){function r(n){t.removeListener(e,i),o(n)}function i(){"function"===typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}v(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&v(t,"error",e,n)}(t,r,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,o){var r,i,s,a;if(u(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"===typeof s?s=i[e]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var o={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=p.bind(o);return r.listener=n,o.wrapFn=r,r}function f(t,e,n){var o=t._events;if(void 0===o)return[];var r=o[e];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):_(r,r.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(t,e){for(var n=new Array(e),o=0;o<e;++o)n[o]=t[o];return n}function v(t,e,n,o){if("function"===typeof t.on)o.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(i){o.once&&t.removeEventListener(e,r),n(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[t];if(void 0===l)return!1;if("function"===typeof l)i(l,this,e);else{var u=l.length,c=_(l,u);for(n=0;n<u;++n)i(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,o,r,i,s;if(u(e),void 0===(o=this._events))return this;if(void 0===(n=o[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(o[t]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,i=Object.keys(n);for(o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(153)},function(t,e,n){"use strict";n.d(e,"a",(function(){return bt})),n.d(e,"b",(function(){return Et}));var o=n(0),r=(n(25),n(4)),i=n(17),s=n(3),a=n(2),l=n(8),u=n(14),c=n(15),h=n(44),p=n(20),d=n(19),f=n(46),g=n(18),_="RC_FORM_INTERNAL_HOOKS",v=function(){Object(g.a)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},m=o.createContext({getFieldValue:v,getFieldsValue:v,getFieldError:v,getFieldWarning:v,getFieldsError:v,isFieldsTouched:v,isFieldTouched:v,isFieldValidating:v,isFieldsValidating:v,resetFields:v,setFields:v,setFieldsValue:v,validateFields:v,submit:v,getInternalHooks:function(){return v(),{dispatch:v,initEntityValue:v,registerField:v,useSubscribe:v,setInitialValues:v,destroyForm:v,setCallbacks:v,registerWatch:v,getFields:v,setValidateMessages:v,setPreserve:v,getInitialValue:v}}});function y(t){return void 0===t||null===t?[]:Array.isArray(t)?t:[t]}var b=n(32),E=n.n(b),T=n(50),S=n(141),k="'${name}' is not a valid ${type}",C={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:k,method:k,array:k,object:k,number:k,date:k,boolean:k,integer:k,float:k,regexp:k,email:k,url:k,hex:k},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},O=n(7);function R(t,e){for(var n=t,o=0;o<e.length;o+=1){if(null===n||void 0===n)return;n=n[e[o]]}return n}var w=n(140);function I(t,e,n,o){if(!e.length)return n;var r,i=Object(w.a)(e),s=i[0],u=i.slice(1);return r=t||"number"!==typeof s?Array.isArray(t)?Object(l.a)(t):Object(a.a)({},t):[],o&&void 0===n&&1===u.length?delete r[s][u[0]]:r[s]=I(r[s],u,n,o),r}function A(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.length&&o&&void 0===n&&!R(t,e.slice(0,-1))?t:I(t,e,n,o)}function N(t){return Array.isArray(t)?function(t){return t.map((function(t){return N(t)}))}(t):"object"===Object(O.a)(t)&&null!==t?function(t){if(Object.getPrototypeOf(t)===Object.prototype){var e={};for(var n in t)e[n]=N(t[n]);return e}return t}(t):t}var D=N;function M(t){return y(t)}function L(t,e){return R(t,e)}function x(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=A(t,e,n,o);return r}function P(t,e){var n={};return e.forEach((function(e){var o=L(t,e);n=x(n,e,o)})),n}function B(t,e){return t&&t.some((function(t){return H(t,e)}))}function F(t){return"object"===Object(O.a)(t)&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function U(t,e){var n=Array.isArray(t)?Object(l.a)(t):Object(a.a)({},t);return e?(Object.keys(e).forEach((function(t){var o=n[t],r=e[t],i=F(o)&&F(r);n[t]=i?U(o,r||{}):D(r)})),n):n}function j(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.reduce((function(t,e){return U(t,e)}),t)}function H(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,n){return e[n]===t}))}function W(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&"object"===Object(O.a)(e.target)&&t in e.target?e.target[t]:e}function V(t,e,n){var o=t.length;if(e<0||e>=o||n<0||n>=o)return t;var r=t[e],i=e-n;return i>0?[].concat(Object(l.a)(t.slice(0,n)),[r],Object(l.a)(t.slice(n,e)),Object(l.a)(t.slice(e+1,o))):i<0?[].concat(Object(l.a)(t.slice(0,e)),Object(l.a)(t.slice(e+1,n+1)),[r],Object(l.a)(t.slice(n+1,o))):t}var G=S.a;function z(t,e){return t.replace(/\$\{\w+\}/g,(function(t){var n=t.slice(2,-1);return e[n]}))}var X="CODE_LOGIC_ERROR";function Y(t,e,n,o,r){return K.apply(this,arguments)}function K(){return K=Object(T.a)(E.a.mark((function t(e,n,r,i,u){var c,h,p,d,f,g,_,v,m;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(c=Object(a.a)({},r)).ruleIndex,c.validator&&(h=c.validator,c.validator=function(){try{return h.apply(void 0,arguments)}catch(t){return console.error(t),Promise.reject(X)}}),p=null,c&&"array"===c.type&&c.defaultField&&(p=c.defaultField,delete c.defaultField),d=new G(Object(s.a)({},e,[c])),f=j({},C,i.validateMessages),d.messages(f),g=[],t.prev=9,t.next=12,Promise.resolve(d.validate(Object(s.a)({},e,n),Object(a.a)({},i)));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),t.t0.errors&&(g=t.t0.errors.map((function(t,e){var n=t.message,r=n===X?f.default:n;return o.isValidElement(r)?o.cloneElement(r,{key:"error_".concat(e)}):r})));case 17:if(g.length||!p){t.next=22;break}return t.next=20,Promise.all(n.map((function(t,n){return Y("".concat(e,".").concat(n),t,p,i,u)})));case 20:return _=t.sent,t.abrupt("return",_.reduce((function(t,e){return[].concat(Object(l.a)(t),Object(l.a)(e))}),[]));case 22:return v=Object(a.a)(Object(a.a)({},r),{},{name:e,enum:(r.enum||[]).join(", ")},u),m=g.map((function(t){return"string"===typeof t?z(t,v):t})),t.abrupt("return",m);case 25:case"end":return t.stop()}}),t,null,[[9,14]])}))),K.apply(this,arguments)}function J(t,e,n,o,r,i){var s,l=t.join("."),u=n.map((function(t,e){var n=t.validator,o=Object(a.a)(Object(a.a)({},t),{},{ruleIndex:e});return n&&(o.validator=function(t,e,o){var r=!1,i=n(t,e,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Promise.resolve().then((function(){Object(g.a)(!r,"Your validator function has already return a promise. `callback` will be ignored."),r||o.apply(void 0,e)}))}));r=i&&"function"===typeof i.then&&"function"===typeof i.catch,Object(g.a)(r,"`callback` is deprecated. Please return a promise instead."),r&&i.then((function(){o()})).catch((function(t){o(t||" ")}))}),o})).sort((function(t,e){var n=t.warningOnly,o=t.ruleIndex,r=e.warningOnly,i=e.ruleIndex;return!!n===!!r?o-i:n?1:-1}));if(!0===r)s=new Promise(function(){var t=Object(T.a)(E.a.mark((function t(n,r){var s,a,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<u.length)){t.next=12;break}return a=u[s],t.next=5,Y(l,e,a,o,i);case 5:if(!(c=t.sent).length){t.next=9;break}return r([{errors:c,rule:a}]),t.abrupt("return");case 9:s+=1,t.next=1;break;case 12:n([]);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());else{var c=u.map((function(t){return Y(l,e,t,o,i).then((function(e){return{errors:e,rule:t}}))}));s=(r?function(t){return $.apply(this,arguments)}(c):function(t){return q.apply(this,arguments)}(c)).then((function(t){return Promise.reject(t)}))}return s.catch((function(t){return t})),s}function q(){return(q=Object(T.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e).then((function(t){var e;return(e=[]).concat.apply(e,Object(l.a)(t))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(){return($=Object(T.a)(E.a.mark((function t(e){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.abrupt("return",new Promise((function(t){e.forEach((function(o){o.then((function(o){o.errors.length&&t([o]),(n+=1)===e.length&&t([])}))}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=["name"],Q=[];function tt(t,e,n,o,r,i){return"function"===typeof t?t(e,n,"source"in i?{source:i.source}:{}):o!==r}var et=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(t){var r;(Object(u.a)(this,n),(r=e.call(this,t)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.prevValidating=void 0,r.errors=Q,r.warnings=Q,r.cancelRegister=function(){var t=r.props,e=t.preserve,n=t.isListField,o=t.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,e,M(o)),r.cancelRegisterFunc=null},r.getNamePath=function(){var t=r.props,e=t.name,n=t.fieldContext.prefixName,o=void 0===n?[]:n;return void 0!==e?[].concat(Object(l.a)(o),Object(l.a)(e)):[]},r.getRules=function(){var t=r.props,e=t.rules,n=void 0===e?[]:e,o=t.fieldContext;return n.map((function(t){return"function"===typeof t?t(o):t}))},r.refresh=function(){r.mounted&&r.setState((function(t){return{resetCount:t.resetCount+1}}))},r.triggerMetaEvent=function(t){var e=r.props.onMetaChange;null===e||void 0===e||e(Object(a.a)(Object(a.a)({},r.getMeta()),{},{destroy:t}))},r.onStoreChange=function(t,e,n){var o=r.props,i=o.shouldUpdate,s=o.dependencies,a=void 0===s?[]:s,l=o.onReset,u=n.store,c=r.getNamePath(),h=r.getValue(t),p=r.getValue(u),d=e&&B(e,c);switch("valueUpdate"===n.type&&"external"===n.source&&h!==p&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=Q,r.warnings=Q,r.triggerMetaEvent()),n.type){case"reset":if(!e||d)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=Q,r.warnings=Q,r.triggerMetaEvent(),null===l||void 0===l||l(),void r.refresh();break;case"remove":if(i)return void r.reRender();break;case"setField":if(d){var f=n.data;return"touched"in f&&(r.touched=f.touched),"validating"in f&&!("originRCField"in f)&&(r.validatePromise=f.validating?Promise.resolve([]):null),"errors"in f&&(r.errors=f.errors||Q),"warnings"in f&&(r.warnings=f.warnings||Q),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(i&&!c.length&&tt(i,t,u,h,p,n))return void r.reRender();break;case"dependenciesUpdate":if(a.map(M).some((function(t){return B(n.relatedFields,t)})))return void r.reRender();break;default:if(d||(!a.length||c.length||i)&&tt(i,t,u,h,p,n))return void r.reRender()}!0===i&&r.reRender()},r.validateRules=function(t){var e=r.getNamePath(),n=r.getValue(),o=Promise.resolve().then((function(){if(!r.mounted)return[];var i=r.props,s=i.validateFirst,a=void 0!==s&&s,u=i.messageVariables,c=(t||{}).triggerName,h=r.getRules();c&&(h=h.filter((function(t){var e=t.validateTrigger;return!e||y(e).includes(c)})));var p=J(e,n,h,t,a,u);return p.catch((function(t){return t})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;if(r.validatePromise===o){r.validatePromise=null;var e=[],n=[];t.forEach((function(t){var o=t.rule.warningOnly,r=t.errors,i=void 0===r?Q:r;o?n.push.apply(n,Object(l.a)(i)):e.push.apply(e,Object(l.a)(i))})),r.errors=e,r.warnings=n,r.triggerMetaEvent(),r.reRender()}})),p}));return r.validatePromise=o,r.dirty=!0,r.errors=Q,r.warnings=Q,r.triggerMetaEvent(),r.reRender(),o},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(_).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath()}},r.getOnlyChild=function(t){if("function"===typeof t){var e=r.getMeta();return Object(a.a)(Object(a.a)({},r.getOnlyChild(t(r.getControlled(),e,r.props.fieldContext))),{},{isFunction:!0})}var n=Object(f.a)(t);return 1===n.length&&o.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(t){var e=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return L(t||e(!0),n)},r.getControlled=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.props,n=e.trigger,o=e.validateTrigger,i=e.getValueFromEvent,l=e.normalize,u=e.valuePropName,c=e.getValueProps,h=e.fieldContext,p=void 0!==o?o:h.validateTrigger,d=r.getNamePath(),f=h.getInternalHooks,g=h.getFieldsValue,v=f(_),m=v.dispatch,b=r.getValue(),E=c||function(t){return Object(s.a)({},u,t)},T=t[n],S=Object(a.a)(Object(a.a)({},t),E(b));S[n]=function(){var t;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t=i?i.apply(void 0,n):W.apply(void 0,[u].concat(n)),l&&(t=l(t,b,g(!0))),m({type:"updateValue",namePath:d,value:t}),T&&T.apply(void 0,n)};var k=y(p||[]);return k.forEach((function(t){var e=S[t];S[t]=function(){e&&e.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&m({type:"validateField",namePath:d,triggerName:t})}})),S},t.fieldContext)&&(0,(0,t.fieldContext.getInternalHooks)(_).initEntityValue)(Object(h.a)(r));return r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.shouldUpdate,n=t.fieldContext;if(this.mounted=!0,n){var o=(0,n.getInternalHooks)(_).registerField;this.cancelRegisterFunc=o(this)}!0===e&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,e=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?t=i:o.isValidElement(i)?t=o.cloneElement(i,this.getControlled(i.props)):(Object(g.a)(!i,"`children` of Field is not validate ReactElement."),t=i),o.createElement(o.Fragment,{key:e},t)}}]),n}(o.Component);et.contextType=m,et.defaultProps={trigger:"onChange",valuePropName:"value"};var nt=function(t){var e=t.name,n=Object(i.a)(t,Z),s=o.useContext(m),a=void 0!==e?M(e):void 0,l="keep";return n.isListField||(l="_".concat((a||[]).join("_"))),o.createElement(et,Object(r.a)({key:l,name:a},n,{fieldContext:s}))},ot=o.createContext(null),rt=function(t){var e=t.name,n=t.initialValue,r=t.children,i=t.rules,s=t.validateTrigger,u=o.useContext(m),c=o.useRef({keys:[],id:0}).current,h=o.useMemo((function(){var t=M(u.prefixName)||[];return[].concat(Object(l.a)(t),Object(l.a)(M(e)))}),[u.prefixName,e]),p=o.useMemo((function(){return Object(a.a)(Object(a.a)({},u),{},{prefixName:h})}),[u,h]),d=o.useMemo((function(){return{getKey:function(t){var e=h.length,n=t[e];return[c.keys[n],t.slice(e+1)]}}}),[h]);if("function"!==typeof r)return Object(g.a)(!1,"Form.List only accepts function as children."),null;return o.createElement(ot.Provider,{value:d},o.createElement(m.Provider,{value:p},o.createElement(nt,{name:[],shouldUpdate:function(t,e,n){return"internal"!==n.source&&t!==e},rules:i,validateTrigger:s,initialValue:n,isList:!0},(function(t,e){var n=t.value,o=void 0===n?[]:n,i=t.onChange,s=u.getFieldValue,a=function(){return s(h||[])||[]},p={add:function(t,e){var n=a();e>=0&&e<=n.length?(c.keys=[].concat(Object(l.a)(c.keys.slice(0,e)),[c.id],Object(l.a)(c.keys.slice(e))),i([].concat(Object(l.a)(n.slice(0,e)),[t],Object(l.a)(n.slice(e))))):(c.keys=[].concat(Object(l.a)(c.keys),[c.id]),i([].concat(Object(l.a)(n),[t]))),c.id+=1},remove:function(t){var e=a(),n=new Set(Array.isArray(t)?t:[t]);n.size<=0||(c.keys=c.keys.filter((function(t,e){return!n.has(e)})),i(e.filter((function(t,e){return!n.has(e)}))))},move:function(t,e){if(t!==e){var n=a();t<0||t>=n.length||e<0||e>=n.length||(c.keys=V(c.keys,t,e),i(V(n,t,e)))}}},d=o||[];return Array.isArray(d)||(d=[]),r(d.map((function(t,e){var n=c.keys[e];return void 0===n&&(c.keys[e]=c.id,n=c.keys[e],c.id+=1),{name:e,key:n,isListField:!0}})),p,e)}))))},it=n(5);var st="__@field_split__";function at(t){return t.map((function(t){return"".concat(Object(O.a)(t),":").concat(t)})).join(st)}var lt=function(){function t(){Object(u.a)(this,t),this.kvs=new Map}return Object(c.a)(t,[{key:"set",value:function(t,e){this.kvs.set(at(t),e)}},{key:"get",value:function(t){return this.kvs.get(at(t))}},{key:"update",value:function(t,e){var n=e(this.get(t));n?this.set(t,n):this.delete(t)}},{key:"delete",value:function(t){this.kvs.delete(at(t))}},{key:"map",value:function(t){return Object(l.a)(this.kvs.entries()).map((function(e){var n=Object(it.a)(e,2),o=n[0],r=n[1],i=o.split(st);return t({key:i.map((function(t){var e=t.match(/^([^:]*):(.*)$/),n=Object(it.a)(e,3),o=n[1],r=n[2];return"number"===o?Number(r):r})),value:r})}))}},{key:"toJSON",value:function(){var t={};return this.map((function(e){var n=e.key,o=e.value;return t[n.join(".")]=o,null})),t}}]),t}(),ut=["name","errors"],ct=Object(c.a)((function t(e){var n=this;Object(u.a)(this,t),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(t){return t===_?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Object(g.a)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(t){n.subscribable=t},this.prevWithoutPreserves=null,this.setInitialValues=function(t,e){if(n.initialValues=t||{},e){var o,r=j({},t,n.store);null===(o=n.prevWithoutPreserves)||void 0===o||o.map((function(e){var n=e.key;r=x(r,n,L(t,n))})),n.prevWithoutPreserves=null,n.updateStore(r)}},this.destroyForm=function(){var t=new lt;n.getFieldEntities(!0).forEach((function(e){e.isPreserve()||t.set(e.getNamePath(),!0)})),n.prevWithoutPreserves=t},this.getInitialValue=function(t){var e=L(n.initialValues,t);return t.length?D(e):e},this.setCallbacks=function(t){n.callbacks=t},this.setValidateMessages=function(t){n.validateMessages=t},this.setPreserve=function(t){n.preserve=t},this.watchList=[],this.registerWatch=function(t){return n.watchList.push(t),function(){n.watchList=n.watchList.filter((function(e){return e!==t}))}},this.notifyWatch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var e=n.getFieldsValue();n.watchList.forEach((function(n){n(e,t)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(t){n.store=t},this.getFieldEntities=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?n.fieldEntities.filter((function(t){return t.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new lt;return n.getFieldEntities(t).forEach((function(t){var n=t.getNamePath();e.set(n,t)})),e},this.getFieldEntitiesForNamePathList=function(t){if(!t)return n.getFieldEntities(!0);var e=n.getFieldsMap(!0);return t.map((function(t){var n=M(t);return e.get(n)||{INVALIDATE_NAME_PATH:M(t)}}))},this.getFieldsValue=function(t,e){if(n.warningUnhooked(),!0===t&&!e)return n.store;var o=n.getFieldEntitiesForNamePathList(Array.isArray(t)?t:null),r=[];return o.forEach((function(n){var o,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(t||!(null===(o=n.isListField)||void 0===o?void 0:o.call(n)))if(e){var s="getMeta"in n?n.getMeta():null;e(s)&&r.push(i)}else r.push(i)})),P(n.store,r.map(M))},this.getFieldValue=function(t){n.warningUnhooked();var e=M(t);return L(n.store,e)},this.getFieldsError=function(t){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(t).map((function(e,n){return e&&!("INVALIDATE_NAME_PATH"in e)?{name:e.getNamePath(),errors:e.getErrors(),warnings:e.getWarnings()}:{name:M(t[n]),errors:[],warnings:[]}}))},this.getFieldError=function(t){n.warningUnhooked();var e=M(t);return n.getFieldsError([e])[0].errors},this.getFieldWarning=function(t){n.warningUnhooked();var e=M(t);return n.getFieldsError([e])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var r,i=e[0],s=e[1],a=!1;0===e.length?r=null:1===e.length?Array.isArray(i)?(r=i.map(M),a=!1):(r=null,a=i):(r=i.map(M),a=s);var u=n.getFieldEntities(!0),c=function(t){return t.isFieldTouched()};if(!r)return a?u.every(c):u.some(c);var h=new lt;r.forEach((function(t){h.set(t,[])})),u.forEach((function(t){var e=t.getNamePath();r.forEach((function(n){n.every((function(t,n){return e[n]===t}))&&h.update(n,(function(e){return[].concat(Object(l.a)(e),[t])}))}))}));var p=function(t){return t.some(c)},d=h.map((function(t){return t.value}));return a?d.every(p):d.some(p)},this.isFieldTouched=function(t){return n.warningUnhooked(),n.isFieldsTouched([t])},this.isFieldsValidating=function(t){n.warningUnhooked();var e=n.getFieldEntities();if(!t)return e.some((function(t){return t.isFieldValidating()}));var o=t.map(M);return e.some((function(t){var e=t.getNamePath();return B(o,e)&&t.isFieldValidating()}))},this.isFieldValidating=function(t){return n.warningUnhooked(),n.isFieldsValidating([t])},this.resetWithFieldInitialValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new lt,o=n.getFieldEntities(!0);o.forEach((function(t){var n=t.props.initialValue,o=t.getNamePath();if(void 0!==n){var r=e.get(o)||new Set;r.add({entity:t,value:n}),e.set(o,r)}}));var r,i=function(o){o.forEach((function(o){if(void 0!==o.props.initialValue){var r=o.getNamePath();if(void 0!==n.getInitialValue(r))Object(g.a)(!1,"Form already set 'initialValues' with path '".concat(r.join("."),"'. Field can not overwrite it."));else{var i=e.get(r);if(i&&i.size>1)Object(g.a)(!1,"Multiple Field with path '".concat(r.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var s=n.getFieldValue(r);t.skipExist&&void 0!==s||n.updateStore(x(n.store,r,Object(l.a)(i)[0].value))}}}}))};t.entities?r=t.entities:t.namePathList?(r=[],t.namePathList.forEach((function(t){var n,o=e.get(t);o&&(n=r).push.apply(n,Object(l.a)(Object(l.a)(o).map((function(t){return t.entity}))))}))):r=o,i(r)},this.resetFields=function(t){n.warningUnhooked();var e=n.store;if(!t)return n.updateStore(j({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(e,null,{type:"reset"}),void n.notifyWatch();var o=t.map(M);o.forEach((function(t){var e=n.getInitialValue(t);n.updateStore(x(n.store,t,e))})),n.resetWithFieldInitialValue({namePathList:o}),n.notifyObservers(e,o,{type:"reset"}),n.notifyWatch(o)},this.setFields=function(t){n.warningUnhooked();var e=n.store,o=[];t.forEach((function(t){var r=t.name,s=(t.errors,Object(i.a)(t,ut)),a=M(r);o.push(a),"value"in s&&n.updateStore(x(n.store,a,s.value)),n.notifyObservers(e,[a],{type:"setField",data:t})})),n.notifyWatch(o)},this.getFields=function(){return n.getFieldEntities(!0).map((function(t){var e=t.getNamePath(),o=t.getMeta(),r=Object(a.a)(Object(a.a)({},o),{},{name:e,value:n.getFieldValue(e)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(t){var e=t.props.initialValue;if(void 0!==e){var o=t.getNamePath();void 0===L(n.store,o)&&n.updateStore(x(n.store,o,e))}},this.registerField=function(t){n.fieldEntities.push(t);var e=t.getNamePath();if(n.notifyWatch([e]),void 0!==t.props.initialValue){var o=n.store;n.resetWithFieldInitialValue({entities:[t],skipExist:!0}),n.notifyObservers(o,[t.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter((function(e){return e!==t}));var s=void 0!==r?r:n.preserve;if(!1===s&&(!o||i.length>1)){var a=o?void 0:n.getInitialValue(e);if(e.length&&n.getFieldValue(e)!==a&&n.fieldEntities.every((function(t){return!H(t.getNamePath(),e)}))){var l=n.store;n.updateStore(x(l,e,a,!0)),n.notifyObservers(l,[e],{type:"remove"}),n.triggerDependenciesUpdate(l,e)}}n.notifyWatch([e])}},this.dispatch=function(t){switch(t.type){case"updateValue":var e=t.namePath,o=t.value;n.updateValue(e,o);break;case"validateField":var r=t.namePath,i=t.triggerName;n.validateFields([r],{triggerName:i})}},this.notifyObservers=function(t,e,o){if(n.subscribable){var r=Object(a.a)(Object(a.a)({},o),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(t,e,r)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(t,e){var o=n.getDependencyChildrenFields(e);return o.length&&n.validateFields(o),n.notifyObservers(t,o,{type:"dependenciesUpdate",relatedFields:[e].concat(Object(l.a)(o))}),o},this.updateValue=function(t,e){var o=M(t),r=n.store;n.updateStore(x(n.store,o,e)),n.notifyObservers(r,[o],{type:"valueUpdate",source:"internal"}),n.notifyWatch([o]);var i=n.triggerDependenciesUpdate(r,o),s=n.callbacks.onValuesChange;s&&s(P(n.store,[o]),n.getFieldsValue());n.triggerOnFieldsChange([o].concat(Object(l.a)(i)))},this.setFieldsValue=function(t){n.warningUnhooked();var e=n.store;if(t){var o=j(n.store,t);n.updateStore(o)}n.notifyObservers(e,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.getDependencyChildrenFields=function(t){var e=new Set,o=[],r=new lt;n.getFieldEntities().forEach((function(t){(t.props.dependencies||[]).forEach((function(e){var n=M(e);r.update(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.add(t),e}))}))}));return function t(n){(r.get(n)||new Set).forEach((function(n){if(!e.has(n)){e.add(n);var r=n.getNamePath();n.isFieldDirty()&&r.length&&(o.push(r),t(r))}}))}(t),o},this.triggerOnFieldsChange=function(t,e){var o=n.callbacks.onFieldsChange;if(o){var r=n.getFields();if(e){var i=new lt;e.forEach((function(t){var e=t.name,n=t.errors;i.set(e,n)})),r.forEach((function(t){t.errors=i.get(t.name)||t.errors}))}o(r.filter((function(e){var n=e.name;return B(t,n)})),r)}},this.validateFields=function(t,e){n.warningUnhooked();var o=!!t,r=o?t.map(M):[],i=[];n.getFieldEntities(!0).forEach((function(s){if(o||r.push(s.getNamePath()),(null===e||void 0===e?void 0:e.recursive)&&o){var u=s.getNamePath();u.every((function(e,n){return t[n]===e||void 0===t[n]}))&&r.push(u)}if(s.props.rules&&s.props.rules.length){var c=s.getNamePath();if(!o||B(r,c)){var h=s.validateRules(Object(a.a)({validateMessages:Object(a.a)(Object(a.a)({},C),n.validateMessages)},e));i.push(h.then((function(){return{name:c,errors:[],warnings:[]}})).catch((function(t){var e=[],n=[];return t.forEach((function(t){var o=t.rule.warningOnly,r=t.errors;o?n.push.apply(n,Object(l.a)(r)):e.push.apply(e,Object(l.a)(r))})),e.length?Promise.reject({name:c,errors:e,warnings:n}):{name:c,errors:e,warnings:n}})))}}}));var s=function(t){var e=!1,n=t.length,o=[];return t.length?new Promise((function(r,i){t.forEach((function(t,s){t.catch((function(t){return e=!0,t})).then((function(t){n-=1,o[s]=t,n>0||(e&&i(o),r(o))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=s,s.catch((function(t){return t})).then((function(t){var e=t.map((function(t){return t.name}));n.notifyObservers(n.store,e,{type:"validateFinish"}),n.triggerOnFieldsChange(e,t)}));var u=s.then((function(){return n.lastValidatePromise===s?Promise.resolve(n.getFieldsValue(r)):Promise.reject([])})).catch((function(t){var e=t.filter((function(t){return t&&t.errors.length}));return Promise.reject({values:n.getFieldsValue(r),errorFields:e,outOfDate:n.lastValidatePromise!==s})}));return u.catch((function(t){return t})),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(t){var e=n.callbacks.onFinish;if(e)try{e(t)}catch(o){console.error(o)}})).catch((function(t){var e=n.callbacks.onFinishFailed;e&&e(t)}))},this.forceRootUpdate=e}));var ht=function(t){var e=o.useRef(),n=o.useState({}),r=Object(it.a)(n,2)[1];if(!e.current)if(t)e.current=t;else{var i=new ct((function(){r({})}));e.current=i.getForm()}return[e.current]},pt=o.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),dt=function(t){var e=t.validateMessages,n=t.onFormChange,r=t.onFormFinish,i=t.children,l=o.useContext(pt),u=o.useRef({});return o.createElement(pt.Provider,{value:Object(a.a)(Object(a.a)({},l),{},{validateMessages:Object(a.a)(Object(a.a)({},l.validateMessages),e),triggerFormChange:function(t,e){n&&n(t,{changedFields:e,forms:u.current}),l.triggerFormChange(t,e)},triggerFormFinish:function(t,e){r&&r(t,{values:e,forms:u.current}),l.triggerFormFinish(t,e)},registerForm:function(t,e){t&&(u.current=Object(a.a)(Object(a.a)({},u.current),{},Object(s.a)({},t,e))),l.registerForm(t,e)},unregisterForm:function(t){var e=Object(a.a)({},u.current);delete e[t],u.current=e,l.unregisterForm(t)}})},i)},ft=pt,gt=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],_t=function(t,e){var n=t.name,s=t.initialValues,u=t.fields,c=t.form,h=t.preserve,p=t.children,d=t.component,f=void 0===d?"form":d,g=t.validateMessages,v=t.validateTrigger,y=void 0===v?"onChange":v,b=t.onValuesChange,E=t.onFieldsChange,T=t.onFinish,S=t.onFinishFailed,k=Object(i.a)(t,gt),C=o.useContext(ft),R=ht(c),w=Object(it.a)(R,1)[0],I=w.getInternalHooks(_),A=I.useSubscribe,N=I.setInitialValues,D=I.setCallbacks,M=I.setValidateMessages,L=I.setPreserve,x=I.destroyForm;o.useImperativeHandle(e,(function(){return w})),o.useEffect((function(){return C.registerForm(n,w),function(){C.unregisterForm(n)}}),[C,w,n]),M(Object(a.a)(Object(a.a)({},C.validateMessages),g)),D({onValuesChange:b,onFieldsChange:function(t){if(C.triggerFormChange(n,t),E){for(var e=arguments.length,o=new Array(e>1?e-1:0),r=1;r<e;r++)o[r-1]=arguments[r];E.apply(void 0,[t].concat(o))}},onFinish:function(t){C.triggerFormFinish(n,t),T&&T(t)},onFinishFailed:S}),L(h);var P,B=o.useRef(null);N(s,!B.current),B.current||(B.current=!0),o.useEffect((function(){return x}),[]);var F="function"===typeof p;F?P=p(w.getFieldsValue(!0),w):P=p;A(!F);var U=o.useRef();o.useEffect((function(){(function(t,e){if(t===e)return!0;if(!t&&e||t&&!e)return!1;if(!t||!e||"object"!==Object(O.a)(t)||"object"!==Object(O.a)(e))return!1;var n=Object.keys(t),o=Object.keys(e),r=new Set([].concat(Object(l.a)(n),Object(l.a)(o)));return Object(l.a)(r).every((function(n){var o=t[n],r=e[n];return"function"===typeof o&&"function"===typeof r||o===r}))})(U.current||[],u||[])||w.setFields(u||[]),U.current=u}),[u,w]);var j=o.useMemo((function(){return Object(a.a)(Object(a.a)({},w),{},{validateTrigger:y})}),[w,y]),H=o.createElement(m.Provider,{value:j},P);return!1===f?H:o.createElement(f,Object(r.a)({},k,{onSubmit:function(t){t.preventDefault(),t.stopPropagation(),w.submit()},onReset:function(t){var e;t.preventDefault(),w.resetFields(),null===(e=k.onReset)||void 0===e||e.call(k,t)}}),H)};function vt(t){try{return JSON.stringify(t)}catch(e){return Math.random()}}var mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=Object(o.useState)(),r=Object(it.a)(n,2),i=r[0],s=r[1],a=Object(o.useMemo)((function(){return vt(i)}),[i]),l=Object(o.useRef)(a);l.current=a;var u=Object(o.useContext)(m),c=e||u,h=c&&c._init,p=M(t),d=Object(o.useRef)(p);return d.current=p,Object(o.useEffect)((function(){if(h){var t=c.getFieldsValue,e=(0,(0,c.getInternalHooks)(_).registerWatch)((function(t){var e=L(t,d.current),n=vt(e);l.current!==n&&s(e)})),n=L(t(),d.current);return s(n),e}}),[]),i},yt=o.forwardRef(_t);yt.FormProvider=dt,yt.Field=nt,yt.List=rt,yt.useForm=ht,yt.useWatch=mt;var bt=o.createContext({}),Et=function(t){var e=t.children,n=Object(o.useMemo)((function(){return{}}),[]);return o.createElement(bt.Provider,{value:n},e)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(o){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o=n(62).Buffer,r=o.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(o.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var o=n.charCodeAt(n.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=i,i.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},i.prototype.text=function(t,e){var n=function(t,e,n){var o=e.length-1;if(o<n)return 0;var r=s(e[o]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--o<n||-2===r)return 0;if((r=s(e[o]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--o<n||-2===r)return 0;if((r=s(e[o]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var o=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,o),t.toString("utf8",e,o)},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(5),r=n(0);function i(t){var e=r.useRef(!1),n=r.useState(t),i=Object(o.a)(n,2),s=i[0],a=i[1];return r.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),[s,function(t,n){n&&e.current||a(t)}]}},function(t,e,n){(function(t){var o=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},o=0;o<e.length;o++)n[e[o]]=Object.getOwnPropertyDescriptor(t,e[o]);return n},r=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var o=arguments,i=o.length,s=String(t).replace(r,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return t}})),l=o[n];n<i;l=o[++n])g(l)||!b(l)?s+=" "+l:s+=" "+a(l);return s},e.deprecate=function(n,o){if("undefined"!==typeof t&&!0===t.noDeprecation)return n;if("undefined"===typeof t)return function(){return e.deprecate(n,o).apply(this,arguments)};var r=!1;return function(){if(!r){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),r=!0}return n.apply(this,arguments)}};var i,s={};function a(t,n){var o={seen:[],stylize:u};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),f(n)?o.showHidden=n:n&&e._extend(o,n),m(o.showHidden)&&(o.showHidden=!1),m(o.depth)&&(o.depth=2),m(o.colors)&&(o.colors=!1),m(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=l),c(o,t,o.depth)}function l(t,e){var n=a.styles[e];return n?"\x1b["+a.colors[n][0]+"m"+t+"\x1b["+a.colors[n][1]+"m":t}function u(t,e){return t}function c(t,n,o){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(o,t);return v(r)||(r=c(t,r,o)),r}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(_(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,n);if(i)return i;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(S(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(y(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return h(n)}var u,b="",k=!1,C=["{","}"];(d(n)&&(k=!0,C=["[","]"]),S(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(b=" "+RegExp.prototype.toString.call(n)),E(n)&&(b=" "+Date.prototype.toUTCString.call(n)),T(n)&&(b=" "+h(n)),0!==s.length||k&&0!=n.length?o<0?y(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=k?function(t,e,n,o,r){for(var i=[],s=0,a=e.length;s<a;++s)w(e,String(s))?i.push(p(t,e,n,o,String(s),!0)):i.push("");return r.forEach((function(r){r.match(/^\d+$/)||i.push(p(t,e,n,o,r,!0))})),i}(t,n,o,a,s):s.map((function(e){return p(t,n,o,a,e,k)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,b,C)):C[0]+b+C[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,o,r,i){var s,a,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),w(o,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=g(n)?c(t,l.value,null):c(t,l.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(i&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function f(t){return"boolean"===typeof t}function g(t){return null===t}function _(t){return"number"===typeof t}function v(t){return"string"===typeof t}function m(t){return void 0===t}function y(t){return b(t)&&"[object RegExp]"===k(t)}function b(t){return"object"===typeof t&&null!==t}function E(t){return b(t)&&"[object Date]"===k(t)}function T(t){return b(t)&&("[object Error]"===k(t)||t instanceof Error)}function S(t){return"function"===typeof t}function k(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(m(i)&&(i=Object({NODE_ENV:"production",PUBLIC_URL:"/pl_project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var o=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,o,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=f,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=_,e.isString=v,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=m,e.isRegExp=y,e.isObject=b,e.isDate=E,e.isError=T,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=n(176);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=n(177),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),o=n.length;o--;)t[n[o]]=e[n[o]];return t};var I="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(I&&t[I]){var e;if("function"!==typeof(e=t[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,o=new Promise((function(t,o){e=t,n=o})),r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);r.push((function(t,o){t?n(t):e(o)}));try{t.apply(this,r)}catch(s){n(s)}return o}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,o(t))},e.promisify.custom=I,e.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);var r=n.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return r.apply(i,arguments)};e.apply(this,n).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(A,e,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,o(e)),n}}).call(this,n(9))},function(t,e,n){var o=n(103).create,r=o("LevelUPError"),i=o("NotFoundError",r);i.prototype.notFound=!0,i.prototype.status=404,t.exports={LevelUPError:r,InitializationError:o("InitializationError",r),OpenError:o("OpenError",r),ReadError:o("ReadError",r),WriteError:o("WriteError",r),NotFoundError:i,EncodingError:o("EncodingError",r)}},function(t,e,n){var o=n(127),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();t.exports=i},function(t,e,n){"use strict";var o=n(0),r=n(28),i=Object(r.a)()?o.useLayoutEffect:o.useEffect;e.a=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(5),r=n(0),i=n(38);function s(t,e){var n=e||{},s=n.defaultValue,a=n.value,l=n.onChange,u=n.postState,c=Object(i.a)((function(){return void 0!==a?a:void 0!==s?"function"===typeof s?s():s:"function"===typeof t?t():t})),h=Object(o.a)(c,2),p=h[0],d=h[1],f=void 0!==a?a:p;u&&(f=u(f));var g=r.useRef(l);g.current=l;var _=r.useCallback((function(t,e){d(t,e),f!==t&&g.current&&g.current(t,f)}),[f,g]),v=r.useRef(a);return r.useEffect((function(){void 0===a&&a!==v.current&&d(a),v.current=a}),[a]),[f,_]}},function(t,e,n){"use strict";function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";var o=n(0),r=o.createContext(void 0);e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(0),r=n.n(o),i=n(74);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return r.a.Children.forEach(t,(function(t){(void 0!==t&&null!==t||e.keepEmpty)&&(Array.isArray(t)?n=n.concat(s(t)):Object(i.isFragment)(t)&&t.props?n=n.concat(s(t.props.children,e)):n.push(t))})),n}},function(t,e,n){"use strict";var o=n(3),r=n(2),i=n(5),s=n(7),a=n(0),l=n(49),u=n(16),c=n(6),h=n.n(c),p=n(28);function d(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}var f=function(t,e){var n={animationend:d("Animation","AnimationEnd"),transitionend:d("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}(Object(p.a)(),"undefined"!==typeof window?window:{}),g={};if(Object(p.a)()){var _=document.createElement("div");g=_.style}var v={};function m(t){if(v[t])return v[t];var e=f[t];if(e)for(var n=Object.keys(e),o=n.length,r=0;r<o;r+=1){var i=n[r];if(Object.prototype.hasOwnProperty.call(e,i)&&i in g)return v[t]=e[i],v[t]}return""}var y=m("animationend"),b=m("transitionend"),E=!(!y||!b),T=y||"animationend",S=b||"transitionend";function k(t,e){return t?"object"===Object(s.a)(t)?t[e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}))]:"".concat(t,"-").concat(e):null}var C="none",O="appear",R="enter",w="leave",I="none",A="prepare",N="start",D="active",M="end",L=n(38),x=n(29),P=Object(p.a)()?a.useLayoutEffect:a.useEffect,B=[A,N,D,M];function F(t){return t===D||t===M}var U=function(t,e){var n=Object(L.a)(I),o=Object(i.a)(n,2),r=o[0],s=o[1],l=function(){var t=a.useRef(null);function e(){x.a.cancel(t.current)}return a.useEffect((function(){return function(){e()}}),[]),[function n(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var i=Object(x.a)((function(){r<=1?o({isCanceled:function(){return i!==t.current}}):n(o,r-1)}));t.current=i},e]}(),u=Object(i.a)(l,2),c=u[0],h=u[1];return P((function(){if(r!==I&&r!==M){var t=B.indexOf(r),n=B[t+1],o=e(r);false===o?s(n,!0):c((function(t){function e(){t.isCanceled()||s(n,!0)}!0===o?e():Promise.resolve(o).then(e)}))}}),[t,r]),a.useEffect((function(){return function(){h()}}),[]),[function(){s(A,!0)},r]};function j(t,e,n,s){var l=s.motionEnter,u=void 0===l||l,c=s.motionAppear,h=void 0===c||c,p=s.motionLeave,d=void 0===p||p,f=s.motionDeadline,g=s.motionLeaveImmediately,_=s.onAppearPrepare,v=s.onEnterPrepare,m=s.onLeavePrepare,y=s.onAppearStart,b=s.onEnterStart,E=s.onLeaveStart,k=s.onAppearActive,I=s.onEnterActive,M=s.onLeaveActive,x=s.onAppearEnd,B=s.onEnterEnd,j=s.onLeaveEnd,H=s.onVisibleChanged,W=Object(L.a)(),V=Object(i.a)(W,2),G=V[0],z=V[1],X=Object(L.a)(C),Y=Object(i.a)(X,2),K=Y[0],J=Y[1],q=Object(L.a)(null),$=Object(i.a)(q,2),Z=$[0],Q=$[1],tt=Object(a.useRef)(!1),et=Object(a.useRef)(null);function nt(){return n()}var ot=Object(a.useRef)(!1);function rt(t){var e=nt();if(!t||t.deadline||t.target===e){var n,o=ot.current;K===O&&o?n=null===x||void 0===x?void 0:x(e,t):K===R&&o?n=null===B||void 0===B?void 0:B(e,t):K===w&&o&&(n=null===j||void 0===j?void 0:j(e,t)),K!==C&&o&&!1!==n&&(J(C,!0),Q(null,!0))}}var it=function(t){var e=Object(a.useRef)(),n=Object(a.useRef)(t);n.current=t;var o=a.useCallback((function(t){n.current(t)}),[]);function r(t){t&&(t.removeEventListener(S,o),t.removeEventListener(T,o))}return a.useEffect((function(){return function(){r(e.current)}}),[]),[function(t){e.current&&e.current!==t&&r(e.current),t&&t!==e.current&&(t.addEventListener(S,o),t.addEventListener(T,o),e.current=t)},r]}(rt),st=Object(i.a)(it,1)[0],at=a.useMemo((function(){var t,e,n;switch(K){case O:return t={},Object(o.a)(t,A,_),Object(o.a)(t,N,y),Object(o.a)(t,D,k),t;case R:return e={},Object(o.a)(e,A,v),Object(o.a)(e,N,b),Object(o.a)(e,D,I),e;case w:return n={},Object(o.a)(n,A,m),Object(o.a)(n,N,E),Object(o.a)(n,D,M),n;default:return{}}}),[K]),lt=U(K,(function(t){if(t===A){var e=at.prepare;return!!e&&e(nt())}var n;ht in at&&Q((null===(n=at[ht])||void 0===n?void 0:n.call(at,nt(),null))||null);return ht===D&&(st(nt()),f>0&&(clearTimeout(et.current),et.current=setTimeout((function(){rt({deadline:!0})}),f))),true})),ut=Object(i.a)(lt,2),ct=ut[0],ht=ut[1],pt=F(ht);ot.current=pt,P((function(){z(e);var n,o=tt.current;(tt.current=!0,t)&&(!o&&e&&h&&(n=O),o&&e&&u&&(n=R),(o&&!e&&d||!o&&g&&!e&&d)&&(n=w),n&&(J(n),ct()))}),[e]),Object(a.useEffect)((function(){(K===O&&!h||K===R&&!u||K===w&&!d)&&J(C)}),[h,u,d]),Object(a.useEffect)((function(){return function(){tt.current=!1,clearTimeout(et.current)}}),[]),Object(a.useEffect)((function(){void 0!==G&&K===C&&(null===H||void 0===H||H(G))}),[G,K]);var dt=Z;return at.prepare&&ht===N&&(dt=Object(r.a)({transition:"none"},dt)),[K,ht,dt,null!==G&&void 0!==G?G:e]}var H=n(14),W=n(15),V=n(20),G=n(19),z=function(t){Object(V.a)(n,t);var e=Object(G.a)(n);function n(){return Object(H.a)(this,n),e.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component),X=z;var Y=function(t){var e=t;function n(t){return!(!t.motionName||!e)}"object"===Object(s.a)(t)&&(e=t.transitionSupport);var c=a.forwardRef((function(t,e){var s=t.visible,c=void 0===s||s,p=t.removeOnLeave,d=void 0===p||p,f=t.forceRender,g=t.children,_=t.motionName,v=t.leavedClassName,m=t.eventProps,y=n(t),b=Object(a.useRef)(),E=Object(a.useRef)();var T=j(y,c,(function(){try{return b.current instanceof HTMLElement?b.current:Object(l.a)(E.current)}catch(t){return null}}),t),S=Object(i.a)(T,4),O=S[0],R=S[1],w=S[2],I=S[3],D=a.useRef(I);I&&(D.current=!0);var M,L=a.useCallback((function(t){b.current=t,Object(u.b)(e,t)}),[e]),x=Object(r.a)(Object(r.a)({},m),{},{visible:c});if(g)if(O!==C&&n(t)){var P,B;R===A?B="prepare":F(R)?B="active":R===N&&(B="start"),M=g(Object(r.a)(Object(r.a)({},x),{},{className:h()(k(_,O),(P={},Object(o.a)(P,k(_,"".concat(O,"-").concat(B)),B),Object(o.a)(P,_,"string"===typeof _),P)),style:w}),L)}else M=I?g(Object(r.a)({},x),L):!d&&D.current?g(Object(r.a)(Object(r.a)({},x),{},{className:v}),L):f?g(Object(r.a)(Object(r.a)({},x),{},{style:{display:"none"}}),L):null;else M=null;a.isValidElement(M)&&Object(u.c)(M)&&(M.ref||(M=a.cloneElement(M,{ref:L})));return a.createElement(X,{ref:E},M)}));return c.displayName="CSSMotion",c}(E),K=n(4),J=n(17),q="add",$="keep",Z="remove",Q="removed";function tt(t){var e;return e=t&&"object"===Object(s.a)(t)&&"key"in t?t:{key:t},Object(r.a)(Object(r.a)({},e),{},{key:String(e.key)})}function et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(tt)}function nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],o=0,i=e.length,s=et(t),a=et(e);s.forEach((function(t){for(var e=!1,s=o;s<i;s+=1){var l=a[s];if(l.key===t.key){o<s&&(n=n.concat(a.slice(o,s).map((function(t){return Object(r.a)(Object(r.a)({},t),{},{status:q})}))),o=s),n.push(Object(r.a)(Object(r.a)({},l),{},{status:$})),o+=1,e=!0;break}}e||n.push(Object(r.a)(Object(r.a)({},t),{},{status:Z}))})),o<i&&(n=n.concat(a.slice(o).map((function(t){return Object(r.a)(Object(r.a)({},t),{},{status:q})}))));var l={};n.forEach((function(t){var e=t.key;l[e]=(l[e]||0)+1}));var u=Object.keys(l).filter((function(t){return l[t]>1}));return u.forEach((function(t){(n=n.filter((function(e){var n=e.key,o=e.status;return n!==t||o!==Z}))).forEach((function(e){e.key===t&&(e.status=$)}))})),n}var ot=["component","children","onVisibleChanged","onAllRemoved"],rt=["status"],it=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y,n=function(t){Object(V.a)(o,t);var n=Object(G.a)(o);function o(){var t;Object(H.a)(this,o);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=n.call.apply(n,[this].concat(i))).state={keyEntities:[]},t.removeKey=function(e){var n=t.state.keyEntities.map((function(t){return t.key!==e?t:Object(r.a)(Object(r.a)({},t),{},{status:Q})}));return t.setState({keyEntities:n}),n.filter((function(t){return t.status!==Q})).length},t}return Object(W.a)(o,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,o=this.props,r=o.component,i=o.children,s=o.onVisibleChanged,l=o.onAllRemoved,u=Object(J.a)(o,ot),c=r||a.Fragment,h={};return it.forEach((function(t){h[t]=u[t],delete u[t]})),delete u.keys,a.createElement(c,u,n.map((function(n){var o=n.status,r=Object(J.a)(n,rt),u=o===q||o===$;return a.createElement(e,Object(K.a)({},h,{key:r.key,visible:u,eventProps:r,onVisibleChanged:function(e){(null===s||void 0===s||s(e,{key:r.key}),e)||0===t.removeKey(r.key)&&l&&l()}}),i)})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,o=e.keyEntities,r=et(n);return{keyEntities:nt(o,r).filter((function(t){var e=o.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==Q||t.status!==Z}))}}}]),o}(a.Component);n.defaultProps={component:"div"}})(E),e.a=Y},function(t,e,n){"use strict";var o=n(61),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var i=Object.create(n(12));i.inherits=n(10);var s=n(104),a=n(89);i.inherits(h,s);for(var l=r(a.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||o.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),o.nextTick(e,t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(34),r=n.n(o);function i(t){return t instanceof HTMLElement?t:r.a.findDOMNode(t)}},function(t,e,n){"use strict";function o(t,e,n,o,r,i,s){try{var a=t[i](s),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(o,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){o(s,r,i,a,l,"next",t)}function l(t){o(s,r,i,a,l,"throw",t)}a(void 0)}))}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(34),r=n.n(o);function i(t,e,n,o){var i=r.a.unstable_batchedUpdates?function(t){r.a.unstable_batchedUpdates(n,t)}:n;return t.addEventListener&&t.addEventListener(e,i,o),{remove:function(){t.removeEventListener&&t.removeEventListener(e,i)}}}},function(t,e,n){t.exports=n(159)()},function(t,e,n){(function(e){t.exports=a;var o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},r=n(12);r.inherits=n(10);var i=n(119),s=n(93);function a(t){if(!(this instanceof a))return new a(t);i.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}r.inherits(a,i),function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(o(s.prototype),(function(t){a.prototype[t]||(a.prototype[t]=s.prototype[t])}))}).call(this,n(9))},function(t,e,n){var o=n(269),r=n(274);t.exports=function(t,e){var n=r(t,e);return o(n)?n:void 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(58);function r(t,e){if(t){if("string"===typeof t)return Object(o.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(o.a)(t,e):void 0}}},function(t,e,n){"use strict";var o={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=o.F1&&e<=o.F12)return!1;switch(e){case o.ALT:case o.CAPS_LOCK:case o.CONTEXT_MENU:case o.CTRL:case o.DOWN:case o.END:case o.ESC:case o.HOME:case o.INSERT:case o.LEFT:case o.MAC_FF_META:case o.META:case o.NUMLOCK:case o.NUM_CENTER:case o.PAGE_DOWN:case o.PAGE_UP:case o.PAUSE:case o.PRINT_SCREEN:case o.RIGHT:case o.SHIFT:case o.UP:case o.WIN_KEY:case o.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=o.ZERO&&t<=o.NINE)return!0;if(t>=o.NUM_ZERO&&t<=o.NUM_MULTIPLY)return!0;if(t>=o.A&&t<=o.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case o.SPACE:case o.QUESTION_MARK:case o.NUM_PLUS:case o.NUM_MINUS:case o.NUM_PERIOD:case o.NUM_DIVISION:case o.SEMICOLON:case o.DASH:case o.EQUALS:case o.COMMA:case o.PERIOD:case o.SLASH:case o.APOSTROPHE:case o.SINGLE_QUOTE:case o.OPEN_SQUARE_BRACKET:case o.BACKSLASH:case o.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};e.a=o},function(t,e,n){"use strict";function o(t,e){return!!t&&t.contains(e)}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}n.d(e,"a",(function(){return o}))},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t}},function(t,e,n){(e=t.exports=n(104)).Stream=e,e.Readable=e,e.Writable=n(89),e.Duplex=n(48),e.Transform=n(107),e.PassThrough=n(201)},function(t,e,n){"use strict";(function(e){"undefined"===typeof e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,o,r){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var i,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,o)}));case 4:return e.nextTick((function(){t.call(null,n,o,r)}));default:for(i=new Array(a-1),s=0;s<i.length;)i[s++]=arguments[s];return e.nextTick((function(){t.apply(null,i)}))}}}:t.exports=e}).call(this,n(9))},function(t,e,n){var o=n(13),r=o.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=o:(i(o,e),e.Buffer=s),i(r,s),s.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var o=r(t);return void 0!==e?"string"===typeof n?o.fill(e,n):o.fill(e):o.fill(0),o},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t,e,n){(function(e,o){var r,i=n(59),s=n(40).LevelUPError,a=["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le"],l={createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0},u=function(){function t(t){return void 0===t||null===t||e.isBuffer(t)}var n={};return n.utf8=n["utf-8"]={encode:function(e){return t(e)?e:String(e)},decode:function(t){return t},buffer:!1,type:"utf8"},n.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},a.forEach((function(r){n[r]||(n[r]={encode:function(n){return t(n)?n:new e(n,r)},decode:function(t){return o.browser?t.toString(r):t},buffer:!0,type:r})})),n}(),c=function(){var t={};return a.forEach((function(e){t[e]={valueEncoding:e}})),t}();function h(t,e){var n=e&&e.keyEncoding||t.keyEncoding||"utf8";return u[n]||n}function p(t,e){var n=e&&(e.valueEncoding||e.encoding)||t.valueEncoding||t.encoding||"utf8";return u[n]||n}t.exports={defaultOptions:l,copy:function(t,e,n){t.readStream().pipe(e.writeStream()).on("close",n||function(){}).on("error",n||function(t){throw t})},getOptions:function(t,e){var n="string"==typeof e;return!n&&e&&e.encoding&&!e.valueEncoding&&(e.valueEncoding=e.encoding),i(t&&t.options||{},n?c[e]||c[l.valueEncoding]:e)},getLevelDOWN:function(){if(r)return r;var t,e=n(208).devDependencies.leveldown,o="Could not locate LevelDOWN, try `npm install leveldown`";try{t=n(209).version}catch(i){throw new s(o)}if(!n(210).satisfies(t,e))throw new s("Installed version of LevelDOWN ("+t+") does not match required version ("+e+")");try{return r=n(211)}catch(i){throw new s(o)}},dispatchError:function(t,e,n){return"function"==typeof n?n(e):t.emit("error",e)},encodeKey:function(t,e,n){return h(e,n).encode(t)},encodeValue:function(t,e,n){return p(e,n).encode(t)},isValueAsBuffer:function(t,e){return p(t,e).buffer},isKeyAsBuffer:function(t,e){return h(t,e).buffer},decodeValue:function(t,e){return p(e).decode(t)},decodeKey:function(t,e){return h(e).decode(t)}}}).call(this,n(13).Buffer,n(9))},function(t,e,n){(function(e){t.exports=a;var o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},r=n(12);r.inherits=n(10);var i=n(114),s=n(92);function a(t){if(!(this instanceof a))return new a(t);i.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}r.inherits(a,i),function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(o(s.prototype),(function(t){a.prototype[t]||(a.prototype[t]=s.prototype[t])}))}).call(this,n(9))},function(t,e,n){var o=n(259),r=n(260),i=n(261),s=n(262),a=n(263);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}l.prototype.clear=o,l.prototype.delete=r,l.prototype.get=i,l.prototype.has=s,l.prototype.set=a,t.exports=l},function(t,e,n){var o=n(125);t.exports=function(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}},function(t,e,n){var o=n(96),r=n(270),i=n(271),s=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?r(t):i(t)}},function(t,e,n){var o=n(54)(Object,"create");t.exports=o},function(t,e,n){var o=n(283);t.exports=function(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";function o(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";t.exports=n(253)},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(28),r="rc-util-key";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):r}function s(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(o.a)())return null;var r,i=document.createElement("style");(null===(e=n.csp)||void 0===e?void 0:e.nonce)&&(i.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);i.innerHTML=t;var a=s(n),l=a.firstChild;return n.prepend&&a.prepend?a.prepend(i):n.prepend&&l?a.insertBefore(i,l):a.appendChild(i),i}var l=new Map;function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(e);return Array.from(l.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(i(e))===t}))}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=s(n);if(!l.has(o)){var r=a("",n),c=r.parentNode;l.set(o,c),c.removeChild(r)}var h=u(e,n);if(h){var p,d,f;if((null===(p=n.csp)||void 0===p?void 0:p.nonce)&&h.nonce!==(null===(d=n.csp)||void 0===d?void 0:d.nonce))h.nonce=null===(f=n.csp)||void 0===f?void 0:f.nonce;return h.innerHTML!==t&&(h.innerHTML=t),h}var g=a(t,n);return g.setAttribute(i(n),e),g}},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,o){return t[0]===e&&(n=o,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),o=this.__entries__[n];return o&&o[1]},e.prototype.set=function(e,n){var o=t(this.__entries__,e);~o?this.__entries__[o][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,o=t(n,e);~o&&n.splice(o,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];t.call(e,r[1],r[0])}},e}()}(),o="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,r="undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),i="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],a="undefined"!==typeof MutationObserver,l=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,o=!1,r=0;function s(){n&&(n=!1,t()),o&&l()}function a(){i(s)}function l(){var t=Date.now();if(n){if(t-r<2)return;o=!0}else n=!0,o=!1,setTimeout(a,e);r=t}return l}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),a?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;s.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),u=function(t,e){for(var n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},c=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||r},h=v(0,0,0,0);function p(t){return parseFloat(t)||0}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+p(t["border-"+n+"-width"])}),0)}function f(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return h;var o=c(t).getComputedStyle(t),r=function(t){for(var e={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n],i=t["padding-"+r];e[r]=p(i)}return e}(o),i=r.left+r.right,s=r.top+r.bottom,a=p(o.width),l=p(o.height);if("border-box"===o.boxSizing&&(Math.round(a+i)!==e&&(a-=d(o,"left","right")+i),Math.round(l+s)!==n&&(l-=d(o,"top","bottom")+s)),!function(t){return t===c(t).document.documentElement}(t)){var u=Math.round(a+i)-e,f=Math.round(l+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(f)&&(l-=f)}return v(r.left,r.top,a,l)}var g="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof c(t).SVGGraphicsElement}:function(t){return t instanceof c(t).SVGElement&&"function"===typeof t.getBBox};function _(t){return o?g(t)?function(t){var e=t.getBBox();return v(0,0,e.width,e.height)}(t):f(t):h}function v(t,e,n,o){return{x:t,y:e,width:n,height:o}}var m=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=_(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),y=function(t,e){var n=function(t){var e=t.x,n=t.y,o=t.width,r=t.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(i.prototype);return u(s,{x:e,y:n,width:o,height:r,top:n,right:e+o,bottom:r+n,left:e}),s}(e);u(this,{target:t,contentRect:n})},b=function(){function t(t,e,o){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=o}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new m(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new y(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),E="undefined"!==typeof WeakMap?new WeakMap:new n,T=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),o=new b(e,n,this);E.set(this,o)};["observe","unobserve","disconnect"].forEach((function(t){T.prototype[t]=function(){var e;return(e=E.get(this))[t].apply(e,arguments)}}));var S="undefined"!==typeof r.ResizeObserver?r.ResizeObserver:T;e.a=S}).call(this,n(36))},function(t,e,n){"use strict";var o=n(0),r=Object(o.createContext)({});e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return _}));var o=n(4),r=n(14),i=n(15),s=n(20),a=n(19),l=n(0),u={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},c={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},h={lang:Object(o.a)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},u),timePickerLocale:Object(o.a)({},c)},p="${label} is not a valid ${type}",d={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:h,TimePicker:c,Calendar:h,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:p,method:p,array:p,object:p,number:p,date:p,boolean:p,integer:p,float:p,regexp:p,email:p,url:p,hex:p},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},f=Object(l.createContext)(void 0),g=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getLocale",value:function(){var t=this.props,e=t.componentName,n=t.defaultLocale||d[null!==e&&void 0!==e?e:"global"],r=this.context,i=e&&r?r[e]:{};return Object(o.a)(Object(o.a)({},n instanceof Function?n():n),i||{})}},{key:"getLocaleCode",value:function(){var t=this.context,e=t&&t.locale;return t&&t.exist&&!e?d.locale:e}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(l.Component);function _(t,e){var n=l.useContext(f);return[l.useMemo((function(){var r=e||d[t||"global"],i=t&&n?n[t]:{};return Object(o.a)(Object(o.a)({},"function"===typeof r?r():r),i||{})}),[t,e,n])]}g.defaultProps={componentName:"global"},g.contextType=f},function(t,e,n){"use strict";var o=n(4),r=n(0),i=n(46),s=(n(18),n(2)),a=n(16),l=n(49),u=n(76),c=new Map;var h=new u.a((function(t){t.forEach((function(t){var e,n=t.target;null===(e=c.get(n))||void 0===e||e.forEach((function(t){return t(n)}))}))}));var p=n(14),d=n(15),f=n(20),g=n(19),_=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(r.Component),v=r.createContext(null);function m(t){var e=t.children,n=t.disabled,o=r.useRef(null),i=r.useRef(null),u=r.useContext(v),p="function"===typeof e,d=p?e(o):e,f=r.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),g=!p&&r.isValidElement(d)&&Object(a.c)(d),m=g?d.ref:null,y=r.useMemo((function(){return Object(a.a)(m,o)}),[m,o]),b=r.useRef(t);b.current=t;var E=r.useCallback((function(t){var e=b.current,n=e.onResize,o=e.data,r=t.getBoundingClientRect(),i=r.width,a=r.height,l=t.offsetWidth,c=t.offsetHeight,h=Math.floor(i),p=Math.floor(a);if(f.current.width!==h||f.current.height!==p||f.current.offsetWidth!==l||f.current.offsetHeight!==c){var d={width:h,height:p,offsetWidth:l,offsetHeight:c};f.current=d;var g=l===Math.round(i)?i:l,_=c===Math.round(a)?a:c,v=Object(s.a)(Object(s.a)({},d),{},{offsetWidth:g,offsetHeight:_});null===u||void 0===u||u(v,t,o),n&&Promise.resolve().then((function(){n(v,t)}))}}),[]);return r.useEffect((function(){var t,e,r=Object(l.a)(o.current)||Object(l.a)(i.current);return r&&!n&&(t=r,e=E,c.has(t)||(c.set(t,new Set),h.observe(t)),c.get(t).add(e)),function(){return function(t,e){c.has(t)&&(c.get(t).delete(e),c.get(t).size||(h.unobserve(t),c.delete(t)))}(r,E)}}),[o.current,n]),r.createElement(_,{ref:i},g?r.cloneElement(d,{ref:y}):d)}function y(t){var e=t.children;return("function"===typeof e?[e]:Object(i.a)(e)).map((function(e,n){var i=(null===e||void 0===e?void 0:e.key)||"".concat("rc-observer-key","-").concat(n);return r.createElement(m,Object(o.a)({},t,{key:i}),e)}))}y.Collection=function(t){var e=t.children,n=t.onBatchResize,o=r.useRef(0),i=r.useRef([]),s=r.useContext(v),a=r.useCallback((function(t,e,r){o.current+=1;var a=o.current;i.current.push({size:t,element:e,data:r}),Promise.resolve().then((function(){a===o.current&&(null===n||void 0===n||n(i.current),i.current=[])})),null===s||void 0===s||s(t,e,r)}),[n,s]);return r.createElement(v.Provider,{value:a},e)};e.a=y},function(t,e,n){"use strict";var o=n(2),r=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},s=n(21),a=function(t,e){return r.createElement(s.a,Object(o.a)(Object(o.a)({},t),{},{ref:e,icon:i}))};a.displayName="CloseCircleFilled";e.a=r.forwardRef(a)},function(t,e,n){"use strict";var o=n(7),r=n(4),i=n(3),s=n(5),a=n(8),l=n(6),u=n.n(l),c=n(150),h=n(43),p=n(25),d=n(0),f=n(328),g=n(45),_=n(35),v=n(31),m=n(14),y=n(15),b=n(20),E=n(19),T=n(80),S=n(26),k=n(22),C=Object(k.a)("text","input");var O=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"renderClearIcon",value:function(t){var e,n=this.props,o=n.value,r=n.disabled,s=n.readOnly,a=n.handleReset,l=n.suffix,c=!r&&!s&&o,h="".concat(t,"-clear-icon");return d.createElement(T.a,{onClick:a,onMouseDown:function(t){return t.preventDefault()},className:u()((e={},Object(i.a)(e,"".concat(h,"-hidden"),!c),Object(i.a)(e,"".concat(h,"-has-suffix"),!!l),e),h),role:"button"})}},{key:"renderTextAreaWithClearIcon",value:function(t,e,n){var o,r=this.props,s=r.value,a=r.allowClear,l=r.className,c=r.style,h=r.direction,p=r.bordered,f=r.hidden,g=r.status,_=n.status,m=n.hasFeedback;if(!a)return Object(S.a)(e,{value:s});var y,b=u()("".concat(t,"-affix-wrapper"),"".concat(t,"-affix-wrapper-textarea-with-clear-btn"),Object(v.b)("".concat(t,"-affix-wrapper"),Object(v.a)(_,g),m),(o={},Object(i.a)(o,"".concat(t,"-affix-wrapper-rtl"),"rtl"===h),Object(i.a)(o,"".concat(t,"-affix-wrapper-borderless"),!p),Object(i.a)(o,"".concat(l),!((y=this.props).addonBefore||y.addonAfter)&&l),o));return d.createElement("span",{className:b,style:c,hidden:f},Object(S.a)(e,{style:null,value:s}),this.renderClearIcon(t))}},{key:"render",value:function(){var t=this;return d.createElement(_.a.Consumer,null,(function(e){var n=t.props,o=n.prefixCls,r=n.inputType,i=n.element;if(r===C[0])return t.renderTextAreaWithClearIcon(o,i,e)}))}}]),n}(d.Component),R=O,w=n(30),I=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n};function A(t,e){return Object(a.a)(t||"").slice(0,e).join("")}function N(t,e,n,o){var r=n;return t?r=A(n,o):Object(a.a)(e||"").length<n.length&&Object(a.a)(n||"").length>o&&(r=e),r}var D=d.forwardRef((function(t,e){var n,l=t.prefixCls,m=t.bordered,y=void 0===m||m,b=t.showCount,E=void 0!==b&&b,T=t.maxLength,S=t.className,k=t.style,C=t.size,O=t.onCompositionStart,D=t.onCompositionEnd,M=t.onChange,L=t.status,x=I(t,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange","status"]),P=d.useContext(f.b),B=P.getPrefixCls,F=P.direction,U=d.useContext(g.a),j=d.useContext(_.a),H=j.status,W=j.hasFeedback,V=j.isFormItemInput,G=j.feedbackIcon,z=Object(v.a)(H,L),X=d.useRef(null),Y=d.useRef(null),K=d.useState(!1),J=Object(s.a)(K,2),q=J[0],$=J[1],Z=d.useRef(),Q=d.useRef(0),tt=Object(h.a)(x.defaultValue,{value:x.value}),et=Object(s.a)(tt,2),nt=et[0],ot=et[1],rt=x.hidden,it=function(t,e){void 0===x.value&&(ot(t),null===e||void 0===e||e())},st=Number(T)>0,at=B("input",l);d.useImperativeHandle(e,(function(){var t;return{resizableTextArea:null===(t=X.current)||void 0===t?void 0:t.resizableTextArea,focus:function(t){var e,n;Object(w.d)(null===(n=null===(e=X.current)||void 0===e?void 0:e.resizableTextArea)||void 0===n?void 0:n.textArea,t)},blur:function(){var t;return null===(t=X.current)||void 0===t?void 0:t.blur()}}}));var lt=d.createElement(c.a,Object(r.a)({},Object(p.a)(x,["allowClear"]),{className:u()((n={},Object(i.a)(n,"".concat(at,"-borderless"),!y),Object(i.a)(n,S,S&&!E),Object(i.a)(n,"".concat(at,"-sm"),"small"===U||"small"===C),Object(i.a)(n,"".concat(at,"-lg"),"large"===U||"large"===C),n),Object(v.b)(at,z)),style:E?void 0:k,prefixCls:at,onCompositionStart:function(t){$(!0),Z.current=nt,Q.current=t.currentTarget.selectionStart,null===O||void 0===O||O(t)},onChange:function(t){var e=t.target.value;!q&&st&&(e=N(t.target.selectionStart>=T+1||t.target.selectionStart===e.length||!t.target.selectionStart,nt,e,T));it(e),Object(w.c)(t.currentTarget,t,M,e)},onCompositionEnd:function(t){var e;$(!1);var n=t.currentTarget.value;st&&(n=N(Q.current>=T+1||Q.current===(null===(e=Z.current)||void 0===e?void 0:e.length),Z.current,n,T));n!==nt&&(it(n),Object(w.c)(t.currentTarget,t,M,n)),null===D||void 0===D||D(t)},ref:X})),ut=Object(w.b)(nt);q||!st||null!==x.value&&void 0!==x.value||(ut=A(ut,T));var ct=d.createElement(R,Object(r.a)({},x,{prefixCls:at,direction:F,inputType:"text",value:ut,element:lt,handleReset:function(t){var e,n;it("",(function(){var t;null===(t=X.current)||void 0===t||t.focus()})),Object(w.c)(null===(n=null===(e=X.current)||void 0===e?void 0:e.resizableTextArea)||void 0===n?void 0:n.textArea,t,M)},ref:Y,bordered:y,status:L,style:E?void 0:k}));if(E||W){var ht,pt=Object(a.a)(ut).length,dt="";return dt="object"===Object(o.a)(E)?E.formatter({count:pt,maxLength:T}):"".concat(pt).concat(st?" / ".concat(T):""),d.createElement("div",{hidden:rt,className:u()("".concat(at,"-textarea"),(ht={},Object(i.a)(ht,"".concat(at,"-textarea-rtl"),"rtl"===F),Object(i.a)(ht,"".concat(at,"-textarea-show-count"),E),Object(i.a)(ht,"".concat(at,"-textarea-in-form-item"),V),ht),Object(v.b)("".concat(at,"-textarea"),z,W),S),style:k,"data-count":dt},ct,W&&d.createElement("span",{className:"".concat(at,"-textarea-suffix")},G))}return ct}));e.a=D},function(t,e,n){"use strict";var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(t){o[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,a,l=s(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(l[c]=n[c]);if(o){a=o(n);for(var h=0;h<a.length;h++)i.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},function(t,e,n){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return s(t)?t:Y(t)}function o(t){return a(t)?t:K(t)}function r(t){return l(t)?t:J(t)}function i(t){return s(t)&&!u(t)?t:q(t)}function s(t){return!(!t||!t[h])}function a(t){return!(!t||!t[p])}function l(t){return!(!t||!t[d])}function u(t){return a(t)||l(t)}function c(t){return!(!t||!t[f])}e(o,n),e(r,n),e(i,n),n.isIterable=s,n.isKeyed=a,n.isIndexed=l,n.isAssociative=u,n.isOrdered=c,n.Keyed=o,n.Indexed=r,n.Set=i;var h="@@__IMMUTABLE_ITERABLE__@@",p="@@__IMMUTABLE_KEYED__@@",d="@@__IMMUTABLE_INDEXED__@@",f="@@__IMMUTABLE_ORDERED__@@",g="delete",_=5,v=1<<_,m=v-1,y={},b={value:!1},E={value:!1};function T(t){return t.value=!1,t}function S(t){t&&(t.value=!0)}function k(){}function C(t,e){e=e||0;for(var n=Math.max(0,t.length-e),o=new Array(n),r=0;r<n;r++)o[r]=t[r+e];return o}function O(t){return void 0===t.size&&(t.size=t.__iterate(w)),t.size}function R(t,e){if("number"!==typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?O(t)+e:e}function w(){return!0}function I(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function A(t,e){return D(t,e,0)}function N(t,e){return D(t,e,e)}function D(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var M=0,L=1,x=2,P="function"===typeof Symbol&&Symbol.iterator,B="@@iterator",F=P||B;function U(t){this.next=t}function j(t,e,n,o){var r=0===t?e:1===t?n:[e,n];return o?o.value=r:o={value:r,done:!1},o}function H(){return{value:void 0,done:!0}}function W(t){return!!z(t)}function V(t){return t&&"function"===typeof t.next}function G(t){var e=z(t);return e&&e.call(t)}function z(t){var e=t&&(P&&t[P]||t[B]);if("function"===typeof e)return e}function X(t){return t&&"number"===typeof t.length}function Y(t){return null===t||void 0===t?st():s(t)?t.toSeq():ut(t)}function K(t){return null===t||void 0===t?st().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():at(t)}function J(t){return null===t||void 0===t?st():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():lt(t)}function q(t){return(null===t||void 0===t?st():s(t)?a(t)?t.entrySeq():t:lt(t)).toSetSeq()}U.prototype.toString=function(){return"[Iterator]"},U.KEYS=M,U.VALUES=L,U.ENTRIES=x,U.prototype.inspect=U.prototype.toSource=function(){return this.toString()},U.prototype[F]=function(){return this},e(Y,n),Y.of=function(){return Y(arguments)},Y.prototype.toSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq {","}")},Y.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Y.prototype.__iterate=function(t,e){return ht(this,t,e,!0)},Y.prototype.__iterator=function(t,e){return pt(this,t,e,!0)},e(K,Y),K.prototype.toKeyedSeq=function(){return this},e(J,Y),J.of=function(){return J(arguments)},J.prototype.toIndexedSeq=function(){return this},J.prototype.toString=function(){return this.__toString("Seq [","]")},J.prototype.__iterate=function(t,e){return ht(this,t,e,!1)},J.prototype.__iterator=function(t,e){return pt(this,t,e,!1)},e(q,Y),q.of=function(){return q(arguments)},q.prototype.toSetSeq=function(){return this},Y.isSeq=it,Y.Keyed=K,Y.Set=q,Y.Indexed=J;var $,Z,Q,tt="@@__IMMUTABLE_SEQ__@@";function et(t){this._array=t,this.size=t.length}function nt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function ot(t){this._iterable=t,this.size=t.length||t.size}function rt(t){this._iterator=t,this._iteratorCache=[]}function it(t){return!(!t||!t[tt])}function st(){return $||($=new et([]))}function at(t){var e=Array.isArray(t)?new et(t).fromEntrySeq():V(t)?new rt(t).fromEntrySeq():W(t)?new ot(t).fromEntrySeq():"object"===typeof t?new nt(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function lt(t){var e=ct(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ut(t){var e=ct(t)||"object"===typeof t&&new nt(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function ct(t){return X(t)?new et(t):V(t)?new rt(t):W(t)?new ot(t):void 0}function ht(t,e,n,o){var r=t._cache;if(r){for(var i=r.length-1,s=0;s<=i;s++){var a=r[n?i-s:s];if(!1===e(a[1],o?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function pt(t,e,n,o){var r=t._cache;if(r){var i=r.length-1,s=0;return new U((function(){var t=r[n?i-s:s];return s++>i?H():j(e,o?t[0]:s-1,t[1])}))}return t.__iteratorUncached(e,n)}function dt(t,e){return e?ft(e,t,"",{"":t}):gt(t)}function ft(t,e,n,o){return Array.isArray(e)?t.call(o,n,J(e).map((function(n,o){return ft(t,n,o,e)}))):_t(e)?t.call(o,n,K(e).map((function(n,o){return ft(t,n,o,e)}))):e}function gt(t){return Array.isArray(t)?J(t).map(gt).toList():_t(t)?K(t).map(gt).toMap():t}function _t(t){return t&&(t.constructor===Object||void 0===t.constructor)}function vt(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"===typeof t.valueOf&&"function"===typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!==typeof t.equals||"function"!==typeof e.equals||!t.equals(e))}function mt(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||l(t)!==l(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(c(t)){var o=t.entries();return e.every((function(t,e){var r=o.next().value;return r&&vt(r[1],t)&&(n||vt(r[0],e))}))&&o.next().done}var r=!1;if(void 0===t.size)if(void 0===e.size)"function"===typeof t.cacheResult&&t.cacheResult();else{r=!0;var i=t;t=e,e=i}var h=!0,p=e.__iterate((function(e,o){if(n?!t.has(e):r?!vt(e,t.get(o,y)):!vt(t.get(o,y),e))return h=!1,!1}));return h&&t.size===p}function yt(t,e){if(!(this instanceof yt))return new yt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Z)return Z;Z=this}}function bt(t,e){if(!t)throw new Error(e)}function Et(t,e,n){if(!(this instanceof Et))return new Et(t,e,n);if(bt(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Q)return Q;Q=this}}function Tt(){throw TypeError("Abstract")}function St(){}function kt(){}function Ct(){}Y.prototype[tt]=!0,e(et,J),et.prototype.get=function(t,e){return this.has(t)?this._array[R(this,t)]:e},et.prototype.__iterate=function(t,e){for(var n=this._array,o=n.length-1,r=0;r<=o;r++)if(!1===t(n[e?o-r:r],r,this))return r+1;return r},et.prototype.__iterator=function(t,e){var n=this._array,o=n.length-1,r=0;return new U((function(){return r>o?H():j(t,r,n[e?o-r++:r++])}))},e(nt,K),nt.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},nt.prototype.has=function(t){return this._object.hasOwnProperty(t)},nt.prototype.__iterate=function(t,e){for(var n=this._object,o=this._keys,r=o.length-1,i=0;i<=r;i++){var s=o[e?r-i:i];if(!1===t(n[s],s,this))return i+1}return i},nt.prototype.__iterator=function(t,e){var n=this._object,o=this._keys,r=o.length-1,i=0;return new U((function(){var s=o[e?r-i:i];return i++>r?H():j(t,s,n[s])}))},nt.prototype[f]=!0,e(ot,J),ot.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=G(this._iterable),o=0;if(V(n))for(var r;!(r=n.next()).done&&!1!==t(r.value,o++,this););return o},ot.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=G(this._iterable);if(!V(n))return new U(H);var o=0;return new U((function(){var e=n.next();return e.done?e:j(t,o++,e.value)}))},e(rt,J),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,o=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(!1===t(r[i],i++,this))return i;for(;!(n=o.next()).done;){var s=n.value;if(r[i]=s,!1===t(s,i++,this))break}return i},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,o=this._iteratorCache,r=0;return new U((function(){if(r>=o.length){var e=n.next();if(e.done)return e;o[r]=e.value}return j(t,r,o[r++])}))},e(yt,J),yt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},yt.prototype.get=function(t,e){return this.has(t)?this._value:e},yt.prototype.includes=function(t){return vt(this._value,t)},yt.prototype.slice=function(t,e){var n=this.size;return I(t,e,n)?this:new yt(this._value,N(e,n)-A(t,n))},yt.prototype.reverse=function(){return this},yt.prototype.indexOf=function(t){return vt(this._value,t)?0:-1},yt.prototype.lastIndexOf=function(t){return vt(this._value,t)?this.size:-1},yt.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},yt.prototype.__iterator=function(t,e){var n=this,o=0;return new U((function(){return o<n.size?j(t,o++,n._value):H()}))},yt.prototype.equals=function(t){return t instanceof yt?vt(this._value,t._value):mt(t)},e(Et,J),Et.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Et.prototype.get=function(t,e){return this.has(t)?this._start+R(this,t)*this._step:e},Et.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Et.prototype.slice=function(t,e){return I(t,e,this.size)?this:(t=A(t,this.size),(e=N(e,this.size))<=t?new Et(0,0):new Et(this.get(t,this._end),this.get(e,this._end),this._step))},Et.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Et.prototype.lastIndexOf=function(t){return this.indexOf(t)},Et.prototype.__iterate=function(t,e){for(var n=this.size-1,o=this._step,r=e?this._start+n*o:this._start,i=0;i<=n;i++){if(!1===t(r,i,this))return i+1;r+=e?-o:o}return i},Et.prototype.__iterator=function(t,e){var n=this.size-1,o=this._step,r=e?this._start+n*o:this._start,i=0;return new U((function(){var s=r;return r+=e?-o:o,i>n?H():j(t,i++,s)}))},Et.prototype.equals=function(t){return t instanceof Et?this._start===t._start&&this._end===t._end&&this._step===t._step:mt(this,t)},e(Tt,n),e(St,Tt),e(kt,Tt),e(Ct,Tt),Tt.Keyed=St,Tt.Indexed=kt,Tt.Set=Ct;var Ot="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),o=65535&(e|=0);return n*o+((t>>>16)*o+n*(e>>>16)<<16>>>0)|0};function Rt(t){return t>>>1&1073741824|3221225471&t}function wt(t){if(!1===t||null===t||void 0===t)return 0;if("function"===typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return Rt(n)}if("string"===e)return t.length>Ut?It(t):At(t);if("function"===typeof t.hashCode)return t.hashCode();if("object"===e)return Nt(t);if("function"===typeof t.toString)return At(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function It(t){var e=Wt[t];return void 0===e&&(e=At(t),Ht===jt&&(Ht=0,Wt={}),Ht++,Wt[t]=e),e}function At(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return Rt(e)}function Nt(t){var e;if(Pt&&void 0!==(e=xt.get(t)))return e;if(void 0!==(e=t[Ft]))return e;if(!Mt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ft]))return e;if(void 0!==(e=Lt(t)))return e}if(e=++Bt,1073741824&Bt&&(Bt=0),Pt)xt.set(t,e);else{if(void 0!==Dt&&!1===Dt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Mt)Object.defineProperty(t,Ft,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ft]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Ft]=e}}return e}var Dt=Object.isExtensible,Mt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Lt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var xt,Pt="function"===typeof WeakMap;Pt&&(xt=new WeakMap);var Bt=0,Ft="__immutablehash__";"function"===typeof Symbol&&(Ft=Symbol(Ft));var Ut=16,jt=255,Ht=0,Wt={};function Vt(t){bt(t!==1/0,"Cannot perform this action with an infinite size.")}function Gt(t){return null===t||void 0===t?re():zt(t)&&!c(t)?t:re().withMutations((function(e){var n=o(t);Vt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function zt(t){return!(!t||!t[Yt])}e(Gt,St),Gt.of=function(){var e=t.call(arguments,0);return re().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},Gt.prototype.toString=function(){return this.__toString("Map {","}")},Gt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Gt.prototype.set=function(t,e){return ie(this,t,e)},Gt.prototype.setIn=function(t,e){return this.updateIn(t,y,(function(){return e}))},Gt.prototype.remove=function(t){return ie(this,t,y)},Gt.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return y}))},Gt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Gt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var o=_e(this,Tn(t),e,n);return o===y?void 0:o},Gt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):re()},Gt.prototype.merge=function(){return pe(this,void 0,arguments)},Gt.prototype.mergeWith=function(e){return pe(this,e,t.call(arguments,1))},Gt.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,re(),(function(t){return"function"===typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},Gt.prototype.mergeDeep=function(){return pe(this,de,arguments)},Gt.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return pe(this,fe(e),n)},Gt.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,re(),(function(t){return"function"===typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},Gt.prototype.sort=function(t){return We(hn(this,t))},Gt.prototype.sortBy=function(t,e){return We(hn(this,e,t))},Gt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Gt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new k)},Gt.prototype.asImmutable=function(){return this.__ensureOwner()},Gt.prototype.wasAltered=function(){return this.__altered},Gt.prototype.__iterator=function(t,e){return new te(this,t,e)},Gt.prototype.__iterate=function(t,e){var n=this,o=0;return this._root&&this._root.iterate((function(e){return o++,t(e[1],e[0],n)}),e),o},Gt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?oe(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Gt.isMap=zt;var Xt,Yt="@@__IMMUTABLE_MAP__@@",Kt=Gt.prototype;function Jt(t,e){this.ownerID=t,this.entries=e}function qt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function $t(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Zt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Qt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function te(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&ne(t._root)}function ee(t,e){return j(t,e[0],e[1])}function ne(t,e){return{node:t,index:0,__prev:e}}function oe(t,e,n,o){var r=Object.create(Kt);return r.size=t,r._root=e,r.__ownerID=n,r.__hash=o,r.__altered=!1,r}function re(){return Xt||(Xt=oe(0))}function ie(t,e,n){var o,r;if(t._root){var i=T(b),s=T(E);if(o=se(t._root,t.__ownerID,0,void 0,e,n,i,s),!s.value)return t;r=t.size+(i.value?n===y?-1:1:0)}else{if(n===y)return t;r=1,o=new Jt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=r,t._root=o,t.__hash=void 0,t.__altered=!0,t):o?oe(r,o):re()}function se(t,e,n,o,r,i,s,a){return t?t.update(e,n,o,r,i,s,a):i===y?t:(S(a),S(s),new Qt(e,o,[r,i]))}function ae(t){return t.constructor===Qt||t.constructor===Zt}function le(t,e,n,o,r){if(t.keyHash===o)return new Zt(e,o,[t.entry,r]);var i,s=(0===n?t.keyHash:t.keyHash>>>n)&m,a=(0===n?o:o>>>n)&m;return new qt(e,1<<s|1<<a,s===a?[le(t,e,n+_,o,r)]:(i=new Qt(e,o,r),s<a?[t,i]:[i,t]))}function ue(t,e,n,o){t||(t=new k);for(var r=new Qt(t,wt(n),[n,o]),i=0;i<e.length;i++){var s=e[i];r=r.update(t,0,void 0,s[0],s[1])}return r}function ce(t,e,n,o){for(var r=0,i=0,s=new Array(n),a=0,l=1,u=e.length;a<u;a++,l<<=1){var c=e[a];void 0!==c&&a!==o&&(r|=l,s[i++]=c)}return new qt(t,r,s)}function he(t,e,n,o,r){for(var i=0,s=new Array(v),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[i++]:void 0;return s[o]=r,new $t(t,i+1,s)}function pe(t,e,n){for(var r=[],i=0;i<n.length;i++){var a=n[i],l=o(a);s(a)||(l=l.map((function(t){return dt(t)}))),r.push(l)}return ge(t,e,r)}function de(t,e,n){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):vt(t,e)?t:e}function fe(t){return function(e,n,o){if(e&&e.mergeDeepWith&&s(n))return e.mergeDeepWith(t,n);var r=t(e,n,o);return vt(e,r)?e:r}}function ge(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var o=e?function(n,o){t.update(o,y,(function(t){return t===y?n:e(t,n,o)}))}:function(e,n){t.set(n,e)},r=0;r<n.length;r++)n[r].forEach(o)})):t.constructor(n[0])}function _e(t,e,n,o){var r=t===y,i=e.next();if(i.done){var s=r?n:t,a=o(s);return a===s?t:a}bt(r||t&&t.set,"invalid keyPath");var l=i.value,u=r?y:t.get(l,y),c=_e(u,e,n,o);return c===u?t:c===y?t.remove(l):(r?re():t).set(l,c)}function ve(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function me(t,e,n,o){var r=o?t:C(t);return r[e]=n,r}function ye(t,e,n,o){var r=t.length+1;if(o&&e+1===r)return t[e]=n,t;for(var i=new Array(r),s=0,a=0;a<r;a++)a===e?(i[a]=n,s=-1):i[a]=t[a+s];return i}function be(t,e,n){var o=t.length-1;if(n&&e===o)return t.pop(),t;for(var r=new Array(o),i=0,s=0;s<o;s++)s===e&&(i=1),r[s]=t[s+i];return r}Kt[Yt]=!0,Kt[g]=Kt.remove,Kt.removeIn=Kt.deleteIn,Jt.prototype.get=function(t,e,n,o){for(var r=this.entries,i=0,s=r.length;i<s;i++)if(vt(n,r[i][0]))return r[i][1];return o},Jt.prototype.update=function(t,e,n,o,r,i,s){for(var a=r===y,l=this.entries,u=0,c=l.length;u<c&&!vt(o,l[u][0]);u++);var h=u<c;if(h?l[u][1]===r:a)return this;if(S(s),(a||!h)&&S(i),!a||1!==l.length){if(!h&&!a&&l.length>=Ee)return ue(t,l,o,r);var p=t&&t===this.ownerID,d=p?l:C(l);return h?a?u===c-1?d.pop():d[u]=d.pop():d[u]=[o,r]:d.push([o,r]),p?(this.entries=d,this):new Jt(t,d)}},qt.prototype.get=function(t,e,n,o){void 0===e&&(e=wt(n));var r=1<<((0===t?e:e>>>t)&m),i=this.bitmap;return 0===(i&r)?o:this.nodes[ve(i&r-1)].get(t+_,e,n,o)},qt.prototype.update=function(t,e,n,o,r,i,s){void 0===n&&(n=wt(o));var a=(0===e?n:n>>>e)&m,l=1<<a,u=this.bitmap,c=0!==(u&l);if(!c&&r===y)return this;var h=ve(u&l-1),p=this.nodes,d=c?p[h]:void 0,f=se(d,t,e+_,n,o,r,i,s);if(f===d)return this;if(!c&&f&&p.length>=Te)return he(t,p,u,a,f);if(c&&!f&&2===p.length&&ae(p[1^h]))return p[1^h];if(c&&f&&1===p.length&&ae(f))return f;var g=t&&t===this.ownerID,v=c?f?u:u^l:u|l,b=c?f?me(p,h,f,g):be(p,h,g):ye(p,h,f,g);return g?(this.bitmap=v,this.nodes=b,this):new qt(t,v,b)},$t.prototype.get=function(t,e,n,o){void 0===e&&(e=wt(n));var r=(0===t?e:e>>>t)&m,i=this.nodes[r];return i?i.get(t+_,e,n,o):o},$t.prototype.update=function(t,e,n,o,r,i,s){void 0===n&&(n=wt(o));var a=(0===e?n:n>>>e)&m,l=r===y,u=this.nodes,c=u[a];if(l&&!c)return this;var h=se(c,t,e+_,n,o,r,i,s);if(h===c)return this;var p=this.count;if(c){if(!h&&--p<Se)return ce(t,u,p,a)}else p++;var d=t&&t===this.ownerID,f=me(u,a,h,d);return d?(this.count=p,this.nodes=f,this):new $t(t,p,f)},Zt.prototype.get=function(t,e,n,o){for(var r=this.entries,i=0,s=r.length;i<s;i++)if(vt(n,r[i][0]))return r[i][1];return o},Zt.prototype.update=function(t,e,n,o,r,i,s){void 0===n&&(n=wt(o));var a=r===y;if(n!==this.keyHash)return a?this:(S(s),S(i),le(this,t,e,n,[o,r]));for(var l=this.entries,u=0,c=l.length;u<c&&!vt(o,l[u][0]);u++);var h=u<c;if(h?l[u][1]===r:a)return this;if(S(s),(a||!h)&&S(i),a&&2===c)return new Qt(t,this.keyHash,l[1^u]);var p=t&&t===this.ownerID,d=p?l:C(l);return h?a?u===c-1?d.pop():d[u]=d.pop():d[u]=[o,r]:d.push([o,r]),p?(this.entries=d,this):new Zt(t,this.keyHash,d)},Qt.prototype.get=function(t,e,n,o){return vt(n,this.entry[0])?this.entry[1]:o},Qt.prototype.update=function(t,e,n,o,r,i,s){var a=r===y,l=vt(o,this.entry[0]);return(l?r===this.entry[1]:a)?this:(S(s),a?void S(i):l?t&&t===this.ownerID?(this.entry[1]=r,this):new Qt(t,this.keyHash,[o,r]):(S(i),le(this,t,e,wt(o),[o,r])))},Jt.prototype.iterate=Zt.prototype.iterate=function(t,e){for(var n=this.entries,o=0,r=n.length-1;o<=r;o++)if(!1===t(n[e?r-o:o]))return!1},qt.prototype.iterate=$t.prototype.iterate=function(t,e){for(var n=this.nodes,o=0,r=n.length-1;o<=r;o++){var i=n[e?r-o:o];if(i&&!1===i.iterate(t,e))return!1}},Qt.prototype.iterate=function(t,e){return t(this.entry)},e(te,U),te.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,o=e.node,r=e.index++;if(o.entry){if(0===r)return ee(t,o.entry)}else if(o.entries){if(r<=(n=o.entries.length-1))return ee(t,o.entries[this._reverse?n-r:r])}else if(r<=(n=o.nodes.length-1)){var i=o.nodes[this._reverse?n-r:r];if(i){if(i.entry)return ee(t,i.entry);e=this._stack=ne(i,e)}continue}e=this._stack=this._stack.__prev}return H()};var Ee=v/4,Te=v/2,Se=v/4;function ke(t){var e=Le();if(null===t||void 0===t)return e;if(Ce(t))return t;var n=r(t),o=n.size;return 0===o?e:(Vt(o),o>0&&o<v?Me(0,o,_,null,new we(n.toArray())):e.withMutations((function(t){t.setSize(o),n.forEach((function(e,n){return t.set(n,e)}))})))}function Ce(t){return!(!t||!t[Oe])}e(ke,kt),ke.of=function(){return this(arguments)},ke.prototype.toString=function(){return this.__toString("List [","]")},ke.prototype.get=function(t,e){if((t=R(this,t))>=0&&t<this.size){var n=Fe(this,t+=this._origin);return n&&n.array[t&m]}return e},ke.prototype.set=function(t,e){return xe(this,t,e)},ke.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},ke.prototype.insert=function(t,e){return this.splice(t,0,e)},ke.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=_,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Le()},ke.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){Ue(n,0,e+t.length);for(var o=0;o<t.length;o++)n.set(e+o,t[o])}))},ke.prototype.pop=function(){return Ue(this,0,-1)},ke.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){Ue(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},ke.prototype.shift=function(){return Ue(this,1)},ke.prototype.merge=function(){return je(this,void 0,arguments)},ke.prototype.mergeWith=function(e){return je(this,e,t.call(arguments,1))},ke.prototype.mergeDeep=function(){return je(this,de,arguments)},ke.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return je(this,fe(e),n)},ke.prototype.setSize=function(t){return Ue(this,0,t)},ke.prototype.slice=function(t,e){var n=this.size;return I(t,e,n)?this:Ue(this,A(t,n),N(e,n))},ke.prototype.__iterator=function(t,e){var n=0,o=De(this,e);return new U((function(){var e=o();return e===Ne?H():j(t,n++,e)}))},ke.prototype.__iterate=function(t,e){for(var n,o=0,r=De(this,e);(n=r())!==Ne&&!1!==t(n,o++,this););return o},ke.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Me(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},ke.isList=Ce;var Oe="@@__IMMUTABLE_LIST__@@",Re=ke.prototype;function we(t,e){this.array=t,this.ownerID=e}Re[Oe]=!0,Re[g]=Re.remove,Re.setIn=Kt.setIn,Re.deleteIn=Re.removeIn=Kt.removeIn,Re.update=Kt.update,Re.updateIn=Kt.updateIn,Re.mergeIn=Kt.mergeIn,Re.mergeDeepIn=Kt.mergeDeepIn,Re.withMutations=Kt.withMutations,Re.asMutable=Kt.asMutable,Re.asImmutable=Kt.asImmutable,Re.wasAltered=Kt.wasAltered,we.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var o=n>>>e&m;if(o>=this.array.length)return new we([],t);var r,i=0===o;if(e>0){var s=this.array[o];if((r=s&&s.removeBefore(t,e-_,n))===s&&i)return this}if(i&&!r)return this;var a=Be(this,t);if(!i)for(var l=0;l<o;l++)a.array[l]=void 0;return r&&(a.array[o]=r),a},we.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var o,r=n-1>>>e&m;if(r>=this.array.length)return this;if(e>0){var i=this.array[r];if((o=i&&i.removeAfter(t,e-_,n))===i&&r===this.array.length-1)return this}var s=Be(this,t);return s.array.splice(r+1),o&&(s.array[r]=o),s};var Ie,Ae,Ne={};function De(t,e){var n=t._origin,o=t._capacity,r=He(o),i=t._tail;return s(t._root,t._level,0);function s(t,e,n){return 0===e?a(t,n):l(t,e,n)}function a(t,s){var a=s===r?i&&i.array:t&&t.array,l=s>n?0:n-s,u=o-s;return u>v&&(u=v),function(){if(l===u)return Ne;var t=e?--u:l++;return a&&a[t]}}function l(t,r,i){var a,l=t&&t.array,u=i>n?0:n-i>>r,c=1+(o-i>>r);return c>v&&(c=v),function(){for(;;){if(a){var t=a();if(t!==Ne)return t;a=null}if(u===c)return Ne;var n=e?--c:u++;a=s(l&&l[n],r-_,i+(n<<r))}}}}function Me(t,e,n,o,r,i,s){var a=Object.create(Re);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=o,a._tail=r,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function Le(){return Ie||(Ie=Me(0,0,_))}function xe(t,e,n){if((e=R(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?Ue(t,e).set(0,n):Ue(t,0,e+1).set(e,n)}));e+=t._origin;var o=t._tail,r=t._root,i=T(E);return e>=He(t._capacity)?o=Pe(o,t.__ownerID,0,e,n,i):r=Pe(r,t.__ownerID,t._level,e,n,i),i.value?t.__ownerID?(t._root=r,t._tail=o,t.__hash=void 0,t.__altered=!0,t):Me(t._origin,t._capacity,t._level,r,o):t}function Pe(t,e,n,o,r,i){var s,a=o>>>n&m,l=t&&a<t.array.length;if(!l&&void 0===r)return t;if(n>0){var u=t&&t.array[a],c=Pe(u,e,n-_,o,r,i);return c===u?t:((s=Be(t,e)).array[a]=c,s)}return l&&t.array[a]===r?t:(S(i),s=Be(t,e),void 0===r&&a===s.array.length-1?s.array.pop():s.array[a]=r,s)}function Be(t,e){return e&&t&&e===t.ownerID?t:new we(t?t.array.slice():[],e)}function Fe(t,e){if(e>=He(t._capacity))return t._tail;if(e<1<<t._level+_){for(var n=t._root,o=t._level;n&&o>0;)n=n.array[e>>>o&m],o-=_;return n}}function Ue(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var o=t.__ownerID||new k,r=t._origin,i=t._capacity,s=r+e,a=void 0===n?i:n<0?i+n:r+n;if(s===r&&a===i)return t;if(s>=a)return t.clear();for(var l=t._level,u=t._root,c=0;s+c<0;)u=new we(u&&u.array.length?[void 0,u]:[],o),c+=1<<(l+=_);c&&(s+=c,r+=c,a+=c,i+=c);for(var h=He(i),p=He(a);p>=1<<l+_;)u=new we(u&&u.array.length?[u]:[],o),l+=_;var d=t._tail,f=p<h?Fe(t,a-1):p>h?new we([],o):d;if(d&&p>h&&s<i&&d.array.length){for(var g=u=Be(u,o),v=l;v>_;v-=_){var y=h>>>v&m;g=g.array[y]=Be(g.array[y],o)}g.array[h>>>_&m]=d}if(a<i&&(f=f&&f.removeAfter(o,0,a)),s>=p)s-=p,a-=p,l=_,u=null,f=f&&f.removeBefore(o,0,s);else if(s>r||p<h){for(c=0;u;){var b=s>>>l&m;if(b!==p>>>l&m)break;b&&(c+=(1<<l)*b),l-=_,u=u.array[b]}u&&s>r&&(u=u.removeBefore(o,l,s-c)),u&&p<h&&(u=u.removeAfter(o,l,p-c)),c&&(s-=c,a-=c)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=l,t._root=u,t._tail=f,t.__hash=void 0,t.__altered=!0,t):Me(s,a,l,u,f)}function je(t,e,n){for(var o=[],i=0,a=0;a<n.length;a++){var l=n[a],u=r(l);u.size>i&&(i=u.size),s(l)||(u=u.map((function(t){return dt(t)}))),o.push(u)}return i>t.size&&(t=t.setSize(i)),ge(t,e,o)}function He(t){return t<v?0:t-1>>>_<<_}function We(t){return null===t||void 0===t?ze():Ve(t)?t:ze().withMutations((function(e){var n=o(t);Vt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Ve(t){return zt(t)&&c(t)}function Ge(t,e,n,o){var r=Object.create(We.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=n,r.__hash=o,r}function ze(){return Ae||(Ae=Ge(re(),Le()))}function Xe(t,e,n){var o,r,i=t._map,s=t._list,a=i.get(e),l=void 0!==a;if(n===y){if(!l)return t;s.size>=v&&s.size>=2*i.size?(o=(r=s.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(o.__ownerID=r.__ownerID=t.__ownerID)):(o=i.remove(e),r=a===s.size-1?s.pop():s.set(a,void 0))}else if(l){if(n===s.get(a)[1])return t;o=i,r=s.set(a,[e,n])}else o=i.set(e,s.size),r=s.set(s.size,[e,n]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=r,t.__hash=void 0,t):Ge(o,r)}function Ye(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Ke(t){this._iter=t,this.size=t.size}function Je(t){this._iter=t,this.size=t.size}function qe(t){this._iter=t,this.size=t.size}function $e(t){var e=yn(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=bn,e.__iterateUncached=function(e,n){var o=this;return t.__iterate((function(t,n){return!1!==e(n,t,o)}),n)},e.__iteratorUncached=function(e,n){if(e===x){var o=t.__iterator(e,n);return new U((function(){var t=o.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===L?M:L,n)},e}function Ze(t,e,n){var o=yn(t);return o.size=t.size,o.has=function(e){return t.has(e)},o.get=function(o,r){var i=t.get(o,y);return i===y?r:e.call(n,i,o,t)},o.__iterateUncached=function(o,r){var i=this;return t.__iterate((function(t,r,s){return!1!==o(e.call(n,t,r,s),r,i)}),r)},o.__iteratorUncached=function(o,r){var i=t.__iterator(x,r);return new U((function(){var r=i.next();if(r.done)return r;var s=r.value,a=s[0];return j(o,a,e.call(n,s[1],a,t),r)}))},o}function Qe(t,e){var n=yn(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=$e(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,o){return t.get(e?n:-1-n,o)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=bn,n.__iterate=function(e,n){var o=this;return t.__iterate((function(t,n){return e(t,n,o)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function tn(t,e,n,o){var r=yn(t);return o&&(r.has=function(o){var r=t.get(o,y);return r!==y&&!!e.call(n,r,o,t)},r.get=function(o,r){var i=t.get(o,y);return i!==y&&e.call(n,i,o,t)?i:r}),r.__iterateUncached=function(r,i){var s=this,a=0;return t.__iterate((function(t,i,l){if(e.call(n,t,i,l))return a++,r(t,o?i:a-1,s)}),i),a},r.__iteratorUncached=function(r,i){var s=t.__iterator(x,i),a=0;return new U((function(){for(;;){var i=s.next();if(i.done)return i;var l=i.value,u=l[0],c=l[1];if(e.call(n,c,u,t))return j(r,o?u:a++,c,i)}}))},r}function en(t,e,n){var o=Gt().asMutable();return t.__iterate((function(r,i){o.update(e.call(n,r,i,t),0,(function(t){return t+1}))})),o.asImmutable()}function nn(t,e,n){var o=a(t),r=(c(t)?We():Gt()).asMutable();t.__iterate((function(i,s){r.update(e.call(n,i,s,t),(function(t){return(t=t||[]).push(o?[s,i]:i),t}))}));var i=mn(t);return r.map((function(e){return gn(t,i(e))}))}function on(t,e,n,o){var r=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=r:n|=0),I(e,n,r))return t;var i=A(e,r),s=N(n,r);if(i!==i||s!==s)return on(t.toSeq().cacheResult(),e,n,o);var a,l=s-i;l===l&&(a=l<0?0:l);var u=yn(t);return u.size=0===a?a:t.size&&a||void 0,!o&&it(t)&&a>=0&&(u.get=function(e,n){return(e=R(this,e))>=0&&e<a?t.get(e+i,n):n}),u.__iterateUncached=function(e,n){var r=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,l=!0,u=0;return t.__iterate((function(t,n){if(!l||!(l=s++<i))return u++,!1!==e(t,o?n:u-1,r)&&u!==a})),u},u.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var r=0!==a&&t.__iterator(e,n),s=0,l=0;return new U((function(){for(;s++<i;)r.next();if(++l>a)return H();var t=r.next();return o||e===L?t:j(e,l-1,e===M?void 0:t.value[1],t)}))},u}function rn(t,e,n){var o=yn(t);return o.__iterateUncached=function(o,r){var i=this;if(r)return this.cacheResult().__iterate(o,r);var s=0;return t.__iterate((function(t,r,a){return e.call(n,t,r,a)&&++s&&o(t,r,i)})),s},o.__iteratorUncached=function(o,r){var i=this;if(r)return this.cacheResult().__iterator(o,r);var s=t.__iterator(x,r),a=!0;return new U((function(){if(!a)return H();var t=s.next();if(t.done)return t;var r=t.value,l=r[0],u=r[1];return e.call(n,u,l,i)?o===x?t:j(o,l,u,t):(a=!1,H())}))},o}function sn(t,e,n,o){var r=yn(t);return r.__iterateUncached=function(r,i){var s=this;if(i)return this.cacheResult().__iterate(r,i);var a=!0,l=0;return t.__iterate((function(t,i,u){if(!a||!(a=e.call(n,t,i,u)))return l++,r(t,o?i:l-1,s)})),l},r.__iteratorUncached=function(r,i){var s=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(x,i),l=!0,u=0;return new U((function(){var t,i,c;do{if((t=a.next()).done)return o||r===L?t:j(r,u++,r===M?void 0:t.value[1],t);var h=t.value;i=h[0],c=h[1],l&&(l=e.call(n,c,i,s))}while(l);return r===x?t:j(r,i,c,t)}))},r}function an(t,e){var n=a(t),r=[t].concat(e).map((function(t){return s(t)?n&&(t=o(t)):t=n?at(t):lt(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&a(i)||l(t)&&l(i))return i}var u=new et(r);return n?u=u.toKeyedSeq():l(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=r.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),u}function ln(t,e,n){var o=yn(t);return o.__iterateUncached=function(o,r){var i=0,a=!1;function l(t,u){var c=this;t.__iterate((function(t,r){return(!e||u<e)&&s(t)?l(t,u+1):!1===o(t,n?r:i++,c)&&(a=!0),!a}),r)}return l(t,0),i},o.__iteratorUncached=function(o,r){var i=t.__iterator(o,r),a=[],l=0;return new U((function(){for(;i;){var t=i.next();if(!1===t.done){var u=t.value;if(o===x&&(u=u[1]),e&&!(a.length<e)||!s(u))return n?t:j(o,l++,u,t);a.push(i),i=u.__iterator(o,r)}else i=a.pop()}return H()}))},o}function un(t,e,n){var o=mn(t);return t.toSeq().map((function(r,i){return o(e.call(n,r,i,t))})).flatten(!0)}function cn(t,e){var n=yn(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,o){var r=this,i=0;return t.__iterate((function(t,o){return(!i||!1!==n(e,i++,r))&&!1!==n(t,i++,r)}),o),i},n.__iteratorUncached=function(n,o){var r,i=t.__iterator(L,o),s=0;return new U((function(){return(!r||s%2)&&(r=i.next()).done?r:s%2?j(n,s++,e):j(n,s++,r.value,r)}))},n}function hn(t,e,n){e||(e=En);var o=a(t),r=0,i=t.toSeq().map((function(e,o){return[o,e,r++,n?n(e,o,t):e]})).toArray();return i.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(o?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),o?K(i):l(t)?J(i):q(i)}function pn(t,e,n){if(e||(e=En),n){var o=t.toSeq().map((function(e,o){return[e,n(e,o,t)]})).reduce((function(t,n){return dn(e,t[1],n[1])?n:t}));return o&&o[0]}return t.reduce((function(t,n){return dn(e,t,n)?n:t}))}function dn(t,e,n){var o=t(n,e);return 0===o&&n!==e&&(void 0===n||null===n||n!==n)||o>0}function fn(t,e,o){var r=yn(t);return r.size=new et(o).map((function(t){return t.size})).min(),r.__iterate=function(t,e){for(var n,o=this.__iterator(L,e),r=0;!(n=o.next()).done&&!1!==t(n.value,r++,this););return r},r.__iteratorUncached=function(t,r){var i=o.map((function(t){return t=n(t),G(r?t.reverse():t)})),s=0,a=!1;return new U((function(){var n;return a||(n=i.map((function(t){return t.next()})),a=n.some((function(t){return t.done}))),a?H():j(t,s++,e.apply(null,n.map((function(t){return t.value}))))}))},r}function gn(t,e){return it(t)?e:t.constructor(e)}function _n(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function vn(t){return Vt(t.size),O(t)}function mn(t){return a(t)?o:l(t)?r:i}function yn(t){return Object.create((a(t)?K:l(t)?J:q).prototype)}function bn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Y.prototype.cacheResult.call(this)}function En(t,e){return t>e?1:t<e?-1:0}function Tn(t){var e=G(t);if(!e){if(!X(t))throw new TypeError("Expected iterable or array-like: "+t);e=G(n(t))}return e}function Sn(t,e){var n,o=function(i){if(i instanceof o)return i;if(!(this instanceof o))return new o(i);if(!n){n=!0;var s=Object.keys(t);Rn(r,s),r.size=s.length,r._name=e,r._keys=s,r._defaultValues=t}this._map=Gt(i)},r=o.prototype=Object.create(kn);return r.constructor=o,o}e(We,Gt),We.of=function(){return this(arguments)},We.prototype.toString=function(){return this.__toString("OrderedMap {","}")},We.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},We.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ze()},We.prototype.set=function(t,e){return Xe(this,t,e)},We.prototype.remove=function(t){return Xe(this,t,y)},We.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},We.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},We.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},We.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Ge(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},We.isOrderedMap=Ve,We.prototype[f]=!0,We.prototype[g]=We.prototype.remove,e(Ye,K),Ye.prototype.get=function(t,e){return this._iter.get(t,e)},Ye.prototype.has=function(t){return this._iter.has(t)},Ye.prototype.valueSeq=function(){return this._iter.valueSeq()},Ye.prototype.reverse=function(){var t=this,e=Qe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Ye.prototype.map=function(t,e){var n=this,o=Ze(this,t,e);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().map(t,e)}),o},Ye.prototype.__iterate=function(t,e){var n,o=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,o)}:(n=e?vn(this):0,function(r){return t(r,e?--n:n++,o)}),e)},Ye.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(L,e),o=e?vn(this):0;return new U((function(){var r=n.next();return r.done?r:j(t,e?--o:o++,r.value,r)}))},Ye.prototype[f]=!0,e(Ke,J),Ke.prototype.includes=function(t){return this._iter.includes(t)},Ke.prototype.__iterate=function(t,e){var n=this,o=0;return this._iter.__iterate((function(e){return t(e,o++,n)}),e)},Ke.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e),o=0;return new U((function(){var e=n.next();return e.done?e:j(t,o++,e.value,e)}))},e(Je,q),Je.prototype.has=function(t){return this._iter.includes(t)},Je.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},Je.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new U((function(){var e=n.next();return e.done?e:j(t,e.value,e.value,e)}))},e(qe,K),qe.prototype.entrySeq=function(){return this._iter.toSeq()},qe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){_n(e);var o=s(e);return t(o?e.get(1):e[1],o?e.get(0):e[0],n)}}),e)},qe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new U((function(){for(;;){var e=n.next();if(e.done)return e;var o=e.value;if(o){_n(o);var r=s(o);return j(t,r?o.get(0):o[0],r?o.get(1):o[1],e)}}}))},Ke.prototype.cacheResult=Ye.prototype.cacheResult=Je.prototype.cacheResult=qe.prototype.cacheResult=bn,e(Sn,St),Sn.prototype.toString=function(){return this.__toString(On(this)+" {","}")},Sn.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Sn.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Sn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Cn(this,re()))},Sn.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+On(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Cn(this,n)},Sn.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Cn(this,e)},Sn.prototype.wasAltered=function(){return this._map.wasAltered()},Sn.prototype.__iterator=function(t,e){var n=this;return o(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},Sn.prototype.__iterate=function(t,e){var n=this;return o(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},Sn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Cn(this,e,t):(this.__ownerID=t,this._map=e,this)};var kn=Sn.prototype;function Cn(t,e,n){var o=Object.create(Object.getPrototypeOf(t));return o._map=e,o.__ownerID=n,o}function On(t){return t._name||t.constructor.name||"Record"}function Rn(t,e){try{e.forEach(wn.bind(void 0,t))}catch(n){}}function wn(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){bt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function In(t){return null===t||void 0===t?Pn():An(t)&&!c(t)?t:Pn().withMutations((function(e){var n=i(t);Vt(n.size),n.forEach((function(t){return e.add(t)}))}))}function An(t){return!(!t||!t[Dn])}kn[g]=kn.remove,kn.deleteIn=kn.removeIn=Kt.removeIn,kn.merge=Kt.merge,kn.mergeWith=Kt.mergeWith,kn.mergeIn=Kt.mergeIn,kn.mergeDeep=Kt.mergeDeep,kn.mergeDeepWith=Kt.mergeDeepWith,kn.mergeDeepIn=Kt.mergeDeepIn,kn.setIn=Kt.setIn,kn.update=Kt.update,kn.updateIn=Kt.updateIn,kn.withMutations=Kt.withMutations,kn.asMutable=Kt.asMutable,kn.asImmutable=Kt.asImmutable,e(In,Ct),In.of=function(){return this(arguments)},In.fromKeys=function(t){return this(o(t).keySeq())},In.prototype.toString=function(){return this.__toString("Set {","}")},In.prototype.has=function(t){return this._map.has(t)},In.prototype.add=function(t){return Ln(this,this._map.set(t,!0))},In.prototype.remove=function(t){return Ln(this,this._map.remove(t))},In.prototype.clear=function(){return Ln(this,this._map.clear())},In.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},In.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},In.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},In.prototype.merge=function(){return this.union.apply(this,arguments)},In.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},In.prototype.sort=function(t){return Bn(hn(this,t))},In.prototype.sortBy=function(t,e){return Bn(hn(this,e,t))},In.prototype.wasAltered=function(){return this._map.wasAltered()},In.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,o){return t(o,o,n)}),e)},In.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},In.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},In.isSet=An;var Nn,Dn="@@__IMMUTABLE_SET__@@",Mn=In.prototype;function Ln(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function xn(t,e){var n=Object.create(Mn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Pn(){return Nn||(Nn=xn(re()))}function Bn(t){return null===t||void 0===t?Wn():Fn(t)?t:Wn().withMutations((function(e){var n=i(t);Vt(n.size),n.forEach((function(t){return e.add(t)}))}))}function Fn(t){return An(t)&&c(t)}Mn[Dn]=!0,Mn[g]=Mn.remove,Mn.mergeDeep=Mn.merge,Mn.mergeDeepWith=Mn.mergeWith,Mn.withMutations=Kt.withMutations,Mn.asMutable=Kt.asMutable,Mn.asImmutable=Kt.asImmutable,Mn.__empty=Pn,Mn.__make=xn,e(Bn,In),Bn.of=function(){return this(arguments)},Bn.fromKeys=function(t){return this(o(t).keySeq())},Bn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Bn.isOrderedSet=Fn;var Un,jn=Bn.prototype;function Hn(t,e){var n=Object.create(jn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Wn(){return Un||(Un=Hn(ze()))}function Vn(t){return null===t||void 0===t?Jn():Gn(t)?t:Jn().unshiftAll(t)}function Gn(t){return!(!t||!t[Xn])}jn[f]=!0,jn.__empty=Wn,jn.__make=Hn,e(Vn,kt),Vn.of=function(){return this(arguments)},Vn.prototype.toString=function(){return this.__toString("Stack [","]")},Vn.prototype.get=function(t,e){var n=this._head;for(t=R(this,t);n&&t--;)n=n.next;return n?n.value:e},Vn.prototype.peek=function(){return this._head&&this._head.value},Vn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Kn(t,e)},Vn.prototype.pushAll=function(t){if(0===(t=r(t)).size)return this;Vt(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Kn(e,n)},Vn.prototype.pop=function(){return this.slice(1)},Vn.prototype.unshift=function(){return this.push.apply(this,arguments)},Vn.prototype.unshiftAll=function(t){return this.pushAll(t)},Vn.prototype.shift=function(){return this.pop.apply(this,arguments)},Vn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Jn()},Vn.prototype.slice=function(t,e){if(I(t,e,this.size))return this;var n=A(t,this.size);if(N(e,this.size)!==this.size)return kt.prototype.slice.call(this,t,e);for(var o=this.size-n,r=this._head;n--;)r=r.next;return this.__ownerID?(this.size=o,this._head=r,this.__hash=void 0,this.__altered=!0,this):Kn(o,r)},Vn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Kn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Vn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,o=this._head;o&&!1!==t(o.value,n++,this);)o=o.next;return n},Vn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,o=this._head;return new U((function(){if(o){var e=o.value;return o=o.next,j(t,n++,e)}return H()}))},Vn.isStack=Gn;var zn,Xn="@@__IMMUTABLE_STACK__@@",Yn=Vn.prototype;function Kn(t,e,n,o){var r=Object.create(Yn);return r.size=t,r._head=e,r.__ownerID=n,r.__hash=o,r.__altered=!1,r}function Jn(){return zn||(zn=Kn(0))}function qn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}Yn[Xn]=!0,Yn.withMutations=Kt.withMutations,Yn.asMutable=Kt.asMutable,Yn.asImmutable=Kt.asImmutable,Yn.wasAltered=Kt.wasAltered,n.Iterator=U,qn(n,{toArray:function(){Vt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new Ke(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"===typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"===typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Ye(this,!0)},toMap:function(){return Gt(this.toKeyedSeq())},toObject:function(){Vt(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return We(this.toKeyedSeq())},toOrderedSet:function(){return Bn(a(this)?this.valueSeq():this)},toSet:function(){return In(a(this)?this.valueSeq():this)},toSetSeq:function(){return new Je(this)},toSeq:function(){return l(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Vn(a(this)?this.valueSeq():this)},toList:function(){return ke(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return gn(this,an(this,t.call(arguments,0)))},includes:function(t){return this.some((function(e){return vt(e,t)}))},entries:function(){return this.__iterator(x)},every:function(t,e){Vt(this.size);var n=!0;return this.__iterate((function(o,r,i){if(!t.call(e,o,r,i))return n=!1,!1})),n},filter:function(t,e){return gn(this,tn(this,t,e,!0))},find:function(t,e,n){var o=this.findEntry(t,e);return o?o[1]:n},forEach:function(t,e){return Vt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Vt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(o){n?n=!1:e+=t,e+=null!==o&&void 0!==o?o.toString():""})),e},keys:function(){return this.__iterator(M)},map:function(t,e){return gn(this,Ze(this,t,e))},reduce:function(t,e,n){var o,r;return Vt(this.size),arguments.length<2?r=!0:o=e,this.__iterate((function(e,i,s){r?(r=!1,o=e):o=t.call(n,o,e,i,s)})),o},reduceRight:function(t,e,n){var o=this.toKeyedSeq().reverse();return o.reduce.apply(o,arguments)},reverse:function(){return gn(this,Qe(this,!0))},slice:function(t,e){return gn(this,on(this,t,e,!0))},some:function(t,e){return!this.every(eo(t),e)},sort:function(t){return gn(this,hn(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return O(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return en(this,t,e)},equals:function(t){return mt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new et(t._cache);var e=t.toSeq().map(to).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(eo(t),e)},findEntry:function(t,e,n){var o=n;return this.__iterate((function(n,r,i){if(t.call(e,n,r,i))return o=[r,n],!1})),o},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(w)},flatMap:function(t,e){return gn(this,un(this,t,e))},flatten:function(t){return gn(this,ln(this,t,!0))},fromEntrySeq:function(){return new qe(this)},get:function(t,e){return this.find((function(e,n){return vt(n,t)}),void 0,e)},getIn:function(t,e){for(var n,o=this,r=Tn(t);!(n=r.next()).done;){var i=n.value;if((o=o&&o.get?o.get(i,y):y)===y)return e}return o},groupBy:function(t,e){return nn(this,t,e)},has:function(t){return this.get(t,y)!==y},hasIn:function(t){return this.getIn(t,y)!==y},isSubset:function(t){return t="function"===typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"===typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return vt(e,t)}))},keySeq:function(){return this.toSeq().map(Qn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return pn(this,t)},maxBy:function(t,e){return pn(this,e,t)},min:function(t){return pn(this,t?no(t):io)},minBy:function(t,e){return pn(this,e?no(e):io,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return gn(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return gn(this,sn(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(eo(t),e)},sortBy:function(t,e){return gn(this,hn(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return gn(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return gn(this,rn(this,t,e))},takeUntil:function(t,e){return this.takeWhile(eo(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=so(this))}});var $n=n.prototype;$n[h]=!0,$n[F]=$n.values,$n.__toJS=$n.toArray,$n.__toStringMapper=oo,$n.inspect=$n.toSource=function(){return this.toString()},$n.chain=$n.flatMap,$n.contains=$n.includes,qn(o,{flip:function(){return gn(this,$e(this))},mapEntries:function(t,e){var n=this,o=0;return gn(this,this.toSeq().map((function(r,i){return t.call(e,[i,r],o++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return gn(this,this.toSeq().flip().map((function(o,r){return t.call(e,o,r,n)})).flip())}});var Zn=o.prototype;function Qn(t,e){return e}function to(t,e){return[e,t]}function eo(t){return function(){return!t.apply(this,arguments)}}function no(t){return function(){return-t.apply(this,arguments)}}function oo(t){return"string"===typeof t?JSON.stringify(t):String(t)}function ro(){return C(arguments)}function io(t,e){return t<e?1:t>e?-1:0}function so(t){if(t.size===1/0)return 0;var e=c(t),n=a(t),o=e?1:0;return ao(t.__iterate(n?e?function(t,e){o=31*o+lo(wt(t),wt(e))|0}:function(t,e){o=o+lo(wt(t),wt(e))|0}:e?function(t){o=31*o+wt(t)|0}:function(t){o=o+wt(t)|0}),o)}function ao(t,e){return e=Ot(e,3432918353),e=Ot(e<<15|e>>>-15,461845907),e=Ot(e<<13|e>>>-13,5),e=Ot((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Rt((e=Ot(e^e>>>13,3266489909))^e>>>16)}function lo(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Zn[p]=!0,Zn[F]=$n.entries,Zn.__toJS=$n.toObject,Zn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+oo(t)},qn(r,{toKeyedSeq:function(){return new Ye(this,!1)},filter:function(t,e){return gn(this,tn(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return gn(this,Qe(this,!1))},slice:function(t,e){return gn(this,on(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=A(t,t<0?this.count():this.size);var o=this.slice(0,t);return gn(this,1===n?o:o.concat(C(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return gn(this,ln(this,t,!1))},get:function(t,e){return(t=R(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=R(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return gn(this,cn(this,t))},interleave:function(){var t=[this].concat(C(arguments)),e=fn(this.toSeq(),J.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),gn(this,n)},keySeq:function(){return Et(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return gn(this,sn(this,t,e,!1))},zip:function(){return gn(this,fn(this,ro,[this].concat(C(arguments))))},zipWith:function(t){var e=C(arguments);return e[0]=this,gn(this,fn(this,t,e))}}),r.prototype[d]=!0,r.prototype[f]=!0,qn(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=$n.includes,i.prototype.contains=i.prototype.includes,qn(K,o.prototype),qn(J,r.prototype),qn(q,i.prototype),qn(St,o.prototype),qn(kt,r.prototype),qn(Ct,i.prototype),{Iterable:n,Seq:Y,Collection:Tt,Map:Gt,OrderedMap:We,List:ke,Stack:Vn,Set:In,OrderedSet:Bn,Record:Sn,Range:Et,Repeat:yt,is:vt,fromJS:dt}}()},function(t,e,n){"use strict";var o,r=n(83),i="<<anonymous>>",s=function(){invariant(!1,"ImmutablePropTypes type checking code is stripped in production.")};s.isRequired=s;var a=function(){return s};function l(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":t instanceof r.Iterable?"Immutable."+t.toSource().split(" ")[0]:e}function u(t){function e(e,n,o,r,s,a){for(var l=arguments.length,u=Array(l>6?l-6:0),c=6;c<l;c++)u[c-6]=arguments[c];if(a=a||o,r=r||i,null!=n[o])return t.apply(void 0,[n,o,r,s,a].concat(u));var h=s;return e?new Error("Required "+h+" `"+a+"` was not specified in `"+r+"`."):void 0}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function c(t,e){return n="Iterable."+t,o=function(t){return r.Iterable.isIterable(t)&&e(t)},u((function(t,e,r,i,s){var a=t[e];if(!o(a)){var u=l(a);return new Error("Invalid "+i+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `"+n+"`.")}return null}));var n,o}(o={listOf:a,mapOf:a,orderedMapOf:a,setOf:a,orderedSetOf:a,stackOf:a,iterableOf:a,recordOf:a,shape:a,contains:a,mapContains:a,orderedMapContains:a,list:s,map:s,orderedMap:s,set:s,orderedSet:s,stack:s,seq:s,record:s,iterable:s}).iterable.indexed=c("Indexed",r.Iterable.isIndexed),o.iterable.keyed=c("Keyed",r.Iterable.isKeyed),t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n(0)),r=s(n(52)),i=s(n(84));function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,o=p(t);if(e()){var r=p(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return c(this,n)}}(n);function n(){var t;l(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return d(h(t=e.call.apply(e,[this].concat(i))),"componentDidMount",(function(){t.props.mutation&&t.props.mutation.get("attributes").forEach((function(e,n){return t.mutationElement.setAttribute(n,e),!0}))})),d(h(t),"render",(function(){var e=[],r=[],i=[],s=null,a=null;return t.props.fields&&(e=t.props.fields.map((function(t,e,n){return o.default.createElement("field",{name:e,key:"field_".concat(e,"_").concat(n),is:"div"},t)})).valueSeq()),t.props.values&&(r=t.props.values.map((function(t,e,r){return o.default.createElement("value",{name:e,key:"value_".concat(e,"_").concat(r),is:"div"},n.renderBlock(t))})).valueSeq()),t.props.statements&&(i=t.props.statements.map((function(t,e,r){return o.default.createElement("statement",{name:e,key:"statement_".concat(e,"_").concat(r),is:"div"},n.renderBlock(t))})).valueSeq()),t.props.mutation&&(s=o.default.createElement("mutation",{dangerouslySetInnerHTML:{__html:t.props.mutation.get("innerContent")},ref:function(e){t.mutationElement=e},is:"div"})),t.props.next&&(a=o.default.createElement("next",{is:"div"},n.renderBlock(t.props.next))),t.props.shadow?o.default.createElement("shadow",{type:t.props.type,is:"div"},s,e,r,i,a):o.default.createElement("block",{type:t.props.type,is:"div"},s,e,r,i,a)})),t}return n}(o.default.PureComponent);d(f,"propTypes",{type:r.default.string.isRequired,shadow:r.default.bool,fields:i.default.map,values:i.default.map,statements:i.default.map,next:i.default.map,mutation:i.default.mapContains({attributes:i.default.map,innerContent:r.default.string})}),d(f,"defaultProps",{shadow:!1,fields:null,values:null,statements:null,next:null,mutation:null}),d(f,"renderBlock",(function(t,e){return o.default.createElement(f,{type:t.get("type"),key:e,fields:t.get("fields"),values:t.get("values"),statements:t.get("statements"),mutation:t.get("mutation"),shadow:t.get("shadow"),next:t.get("next")})}));var g=f;e.default=g},function(t,e,n){var o,r,i;r=[n(163)],void 0===(i="function"===typeof(o=function(t){"use strict";return t.setLocale=function(e){t.Msg=t.Msg||{},Object.keys(e).forEach((function(n){t.Msg[n]=e[n]}))},t})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){(function(n){var o,r,i;r=[],void 0===(i="function"===typeof(o=function(){"use strict";var t={constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.INPUT_VALUE=1,t.OUTPUT_VALUE=2,t.NEXT_STATEMENT=3,t.PREVIOUS_STATEMENT=4,t.DUMMY_INPUT=5,t.ALIGN_LEFT=-1,t.ALIGN_CENTRE=0,t.ALIGN_RIGHT=1,t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.INPUT_VALUE]=t.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.OUTPUT_VALUE]=t.INPUT_VALUE,t.OPPOSITE_TYPE[t.NEXT_STATEMENT]=t.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.PREVIOUS_STATEMENT]=t.NEXT_STATEMENT,t.TOOLBOX_AT_TOP=0,t.TOOLBOX_AT_BOTTOM=1,t.TOOLBOX_AT_LEFT=2,t.TOOLBOX_AT_RIGHT=3,t.DELETE_AREA_NONE=null,t.DELETE_AREA_TRASH=1,t.DELETE_AREA_TOOLBOX=2,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.registry={},t.registry.typeMap_={},t.registry.DEFAULT="default",t.registry.Type=function(t){this.name_=t},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.register=function(e,n,o,r){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var i=t.registry.typeMap_[e];if(i||(i=t.registry.typeMap_[e]={}),t.registry.validate_(e,o),!r&&i[n])throw Error('Name "'+n+'" with type "'+e+'" already registered.');i[n]=o},t.registry.validate_=function(e,n){if(e===String(t.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},t.registry.unregister=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var o=t.registry.typeMap_[e];o?o[n]?delete t.registry.typeMap_[e][n]:console.warn('No name "'+n+'" with type "'+e+'" found'):console.warn('No type "'+e+'" found')},t.registry.getItem_=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var o=t.registry.typeMap_[e];return o?o[n]?o[n]:(console.warn('No name "'+n+'" with type "'+e+'" found'),null):(console.warn('No type "'+e+'" found'),null)},t.registry.hasItem=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[n]},t.registry.getClass=function(e,n){return t.registry.getItem_(e,n)},t.registry.getObject=function(e,n){return t.registry.getItem_(e,n)},t.registry.getClassFromOptions=function(e,n){return"function"==typeof(n=n.plugins[e.toString()]||t.registry.DEFAULT)?n:t.registry.getClass(e,n)},t.utils={},t.utils.global=function(){return"object"===typeof self?self:"object"===typeof window?window:"object"===typeof n?n:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var n=t.utils.colour.names[e];if(n)return n;if(n="#"==(n="0x"==e.substring(0,2)?"#"+e.substring(2):e)[0]?n:"#"+n,/^#[0-9a-f]{6}$/.test(n))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=e&&256>e&&0<=n&&256>n&&0<=o&&256>o)?t.utils.colour.rgbToHex(e,n,o):null},t.utils.colour.rgbToHex=function(t,e,n){return e=t<<16|e<<8|n,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,n,o){var r=0,i=0,s=0;if(0==n)s=i=r=o;else{var a=Math.floor(e/60),l=e/60-a;e=o*(1-n);var u=o*(1-n*l);switch(n=o*(1-n*(1-l)),a){case 1:r=u,i=o,s=e;break;case 2:r=e,i=o,s=n;break;case 3:r=e,i=u,s=o;break;case 4:r=n,i=e,s=o;break;case 5:r=o,i=e,s=u;break;case 6:case 0:r=o,i=n,s=e}}return t.utils.colour.rgbToHex(Math.floor(r),Math.floor(i),Math.floor(s))},t.utils.colour.blend=function(e,n,o){return(e=t.utils.colour.parse(e))&&(n=t.utils.colour.parse(n))?(e=t.utils.colour.hexToRgb(e),n=t.utils.colour.hexToRgb(n),t.utils.colour.rgbToHex(Math.round(n[0]+o*(e[0]-n[0])),Math.round(n[1]+o*(e[1]-n[1])),Math.round(n[2]+o*(e[2]-n[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(t,e){this.x=t,this.y=e},t.utils.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&t.x==e.x&&t.y==e.y},t.utils.Coordinate.distance=function(t,e){var n=t.x-e.x;return t=t.y-e.y,Math.sqrt(n*n+t*t)},t.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.utils.Coordinate.difference=function(e,n){return new t.utils.Coordinate(e.x-n.x,e.y-n.y)},t.utils.Coordinate.sum=function(e,n){return new t.utils.Coordinate(e.x+n.x,e.y+n.y)},t.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.utils.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this},t.utils.Rect=function(t,e,n,o){this.top=t,this.bottom=e,this.left=n,this.right=o},t.utils.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t.utils.string={},t.utils.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},t.utils.string.shortestStringLength=function(t){return t.length?t.reduce((function(t,e){return t.length<e.length?t:e})).length:0},t.utils.string.commonWordPrefix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var o=0;n=n||t.utils.string.shortestStringLength(e);for(var r=0;r<n;r++){for(var i=e[0][r],s=1;s<e.length;s++)if(i!=e[s][r])return o;" "==i&&(o=r+1)}for(s=1;s<e.length;s++)if((i=e[s][r])&&" "!=i)return o;return n},t.utils.string.commonWordSuffix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var o=0;n=n||t.utils.string.shortestStringLength(e);for(var r=0;r<n;r++){for(var i=e[0].substr(-r-1,1),s=1;s<e.length;s++)if(i!=e[s].substr(-r-1,1))return o;" "==i&&(o=r+1)}for(s=1;s<e.length;s++)if((i=e[s].charAt(e[s].length-r-1))&&" "!=i)return o;return n},t.utils.string.wrap=function(e,n){e=e.split("\n");for(var o=0;o<e.length;o++)e[o]=t.utils.string.wrapLine_(e[o],n);return e.join("\n")},t.utils.string.wrapLine_=function(e,n){if(e.length<=n)return e;for(var o=e.trim().split(/\s+/),r=0;r<o.length;r++)o[r].length>n&&(n=o[r].length);r=-1/0;var i=1;do{var s=r,a=e;e=[];var l=o.length/i,u=1;for(r=0;r<o.length-1;r++)u<(r+1.5)/l?(u++,e[r]=!0):e[r]=!1;e=t.utils.string.wrapMutate_(o,e,n),r=t.utils.string.wrapScore_(o,e,n),e=t.utils.string.wrapToText_(o,e),i++}while(r>s);return a},t.utils.string.wrapScore_=function(t,e,n){for(var o=[0],r=[],i=0;i<t.length;i++)o[o.length-1]+=t[i].length,!0===e[i]?(o.push(0),r.push(t[i].charAt(t[i].length-1))):!1===e[i]&&o[o.length-1]++;for(t=Math.max.apply(Math,o),i=e=0;i<o.length;i++)e-=2*Math.pow(Math.abs(n-o[i]),1.5),e-=Math.pow(t-o[i],1.5),-1!=".?!".indexOf(r[i])?e+=n/3:-1!=",;)]}".indexOf(r[i])&&(e+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(e+=.5),e},t.utils.string.wrapMutate_=function(e,n,o){for(var r,i=t.utils.string.wrapScore_(e,n,o),s=0;s<n.length-1;s++)if(n[s]!=n[s+1]){var a=[].concat(n);a[s]=!a[s],a[s+1]=!a[s+1];var l=t.utils.string.wrapScore_(e,a,o);l>i&&(i=l,r=a)}return r?t.utils.string.wrapMutate_(e,r,o):n},t.utils.string.wrapToText_=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(t[o]),void 0!==e[o]&&n.push(e[o]?"\n":" ");return n.join("")},t.utils.Size=function(t,e){this.width=t,this.height=e},t.utils.Size.equals=function(t,e){return t==e||!(!t||!e)&&t.width==e.width&&t.height==e.height},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var n=e.style,o=n.display,r=n.visibility,i=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var s=e.offsetWidth;return e=e.offsetHeight,n.display=o,n.position=i,n.visibility=r,new t.utils.Size(s,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,n){return t.utils.style.getComputedStyle(e,n)||t.utils.style.getCascadedStyle(e,n)||e.style&&e.style[n]},t.utils.style.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},t.utils.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},t.utils.style.getPageOffset=function(e){var n=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new t.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=e.left+o.x,n.y=e.top+o.y,n},t.utils.style.getViewportPageOffset=function(){var e=document.body,n=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},t.utils.style.setElementShown=function(t,e){t.style.display=e?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var n=t.utils.style.getComputedStyle(e,"borderLeftWidth"),o=t.utils.style.getComputedStyle(e,"borderRightWidth"),r=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(r),right:parseFloat(o),bottom:parseFloat(e),left:parseFloat(n)}},t.utils.style.scrollIntoContainerView=function(e,n,o){e=t.utils.style.getContainerOffsetToScrollInto(e,n,o),n.scrollLeft=e.x,n.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,n,o){var r=t.utils.style.getPageOffset(e),i=t.utils.style.getPageOffset(n),s=t.utils.style.getBorderBox(n),a=r.x-i.x-s.left;return r=r.y-i.y-s.top,i=t.utils.style.getSizeWithDisplay_(e),e=n.clientWidth-i.width,i=n.clientHeight-i.height,s=n.scrollLeft,n=n.scrollTop,o?(s+=a-e/2,n+=r-i/2):(s+=Math.min(a,Math.max(a-e,0)),n+=Math.min(r,Math.max(r-i,0))),new t.utils.Coordinate(s,n)},t.utils.userAgent={},function(e){function n(t){return-1!=o.indexOf(t.toUpperCase())}t.utils.userAgent.raw=e;var o=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=n("Trident")||n("MSIE"),t.utils.userAgent.EDGE=n("Edge"),t.utils.userAgent.JAVA_FX=n("JavaFX"),t.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=n("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=n("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=n("Android"),t.utils.userAgent.IPAD=n("iPad"),t.utils.userAgent.IPOD=n("iPod"),t.utils.userAgent.IPHONE=n("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=n("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||n("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},t.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var n=new t.utils.Coordinate(0,0),o=e.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=e.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=e.getAttribute("transform"))&&o.match(t.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},t.utils.getInjectionDivXY_=function(e){for(var n=0,o=0;e;){var r=t.utils.getRelativeXY(e);if(n+=r.x,o+=r.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(n,o)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(t,e,n){var o=e.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,n||(n=e.getScreenCTM().inverse()),o.matrixTransform(n)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var n=!0,o=t.Msg,r=e.match(/%{BKY_[A-Z]\w*}/gi),i=0;i<r.length;i++)void 0==o[r[i].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+r[i]+" in "+e),n=!1);return n},t.utils.tokenizeInterpolation_=function(e,n){var o=[],r=e.split("");r.push("");var i=0;e=[];for(var s=null,a=0;a<r.length;a++){var l=r[a];0==i?"%"==l?((l=e.join(""))&&o.push(l),e.length=0,i=1):e.push(l):1==i?"%"==l?(e.push(l),i=0):n&&"0"<=l&&"9">=l?(i=2,s=l,(l=e.join(""))&&o.push(l),e.length=0):"{"==l?i=3:(e.push("%",l),i=0):2==i?"0"<=l&&"9">=l?s+=l:(o.push(parseInt(s,10)),a--,i=0):3==i&&(""==l?(e.splice(0,0,"%{"),a--,i=0):"}"!=l?e.push(l):(i=e.join(""),/[A-Z]\w*/i.test(i)?(l=i.toUpperCase(),(l=t.utils.string.startsWith(l,"BKY_")?l.substring(4):null)&&l in t.Msg?"string"==typeof(i=t.Msg[l])?Array.prototype.push.apply(o,t.utils.tokenizeInterpolation_(i,n)):n?o.push(String(i)):o.push(i):o.push("%{"+i+"}")):o.push("%{"+i+"}"),i=e.length=0))}for((l=e.join(""))&&o.push(l),n=[],a=e.length=0;a<o.length;++a)"string"==typeof o[a]?e.push(o[a]):((l=e.join(""))&&n.push(l),e.length=0,n.push(o[a]));return(l=e.join(""))&&n.push(l),e.length=0,n},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=t.utils.genUid.soup_.charAt(Math.random()*e);return n.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in document.body.insertBefore(e,null),o)if(void 0!==e.style[r]){if(e.style[r]="translate3d(1px,1px,1px)",!(n=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;n=n.getPropertyValue(o[r])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==n,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var e=setInterval((function(){"complete"==document.readyState&&(clearInterval(e),t())}),10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(t,e){return-1!=(e=t.indexOf(e))&&(t.splice(e,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,n=window;return t.utils.userAgent.IE&&n.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(t,e){var n=Object.create(null),o=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=o.indexOf(t),o.splice(t,o.length-t)),t=0;e=o[t];t++)n[e.type]?n[e.type]++:n[e.type]=1;return n},t.utils.screenToWsCoordinates=function(e,n){var o=n.x;n=n.y;var r=e.getInjectionDiv().getBoundingClientRect();return o=new t.utils.Coordinate(o-r.left,n-r.top),n=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(o,n).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var n="string"==typeof e?t.utils.replaceMessageReferences(e):e,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:t.utils.colour.hsvToHex(o,t.HSV_SATURATION,255*t.HSV_VALUE)};if(o=t.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',e!=n&&(o+=' (from "'+e+'")'),Error(o)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var e,n=t.Events.filter(t.Events.FIRE_QUEUE_,!0),o=t.Events.FIRE_QUEUE_.length=0;e=n[o];o++)if(e.workspaceId){var r=t.Workspace.getById(e.workspaceId);r&&r.fireChangeListener(e)}},t.Events.filter=function(e,n){e=e.slice(),n||e.reverse();for(var o,r=[],i=Object.create(null),s=0;o=e[s];s++)if(!o.isNull()){var a=[o.type,o.blockId,o.workspaceId].join(" "),l=i[a],u=l?l.event:null;l?o.type==t.Events.MOVE&&l.index==s-1?(u.newParentId=o.newParentId,u.newInputName=o.newInputName,u.newCoordinate=o.newCoordinate,l.index=s):o.type==t.Events.CHANGE&&o.element==u.element&&o.name==u.name?u.newValue=o.newValue:(o.type!=t.Events.UI||"click"!=o.element||"commentOpen"!=u.element&&"mutatorOpen"!=u.element&&"warningOpen"!=u.element)&&(i[a]={event:o,index:1},r.push(o)):(i[a]={event:o,index:s},r.push(o))}for(e=r.filter((function(t){return!t.isNull()})),n||e.reverse(),s=1;o=e[s];s++)o.type==t.Events.CHANGE&&"mutation"==o.element&&e.unshift(e.splice(s,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var e,n=0;e=t.Events.FIRE_QUEUE_[n];n++)e.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var n,o=0;n=t[o];o++)e[o]=n.id;return e},t.Events.fromJson=function(e,n){var o=t.registry.getClass(t.registry.Type.EVENT,e.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(e),o.workspaceId=n.id,o},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var n=t.Workspace.getById(e.workspaceId);if(e=n.getBlockById(e.blockId)){var o=e.getParent();if(o&&o.isEnabled())for(n=e.getDescendants(!1),e=0;o=n[e];e++)o.setEnabled(!0);else if((e.outputConnection||e.previousConnection)&&!n.isDragging())do{e.setEnabled(!1),e=e.getNextBlock()}while(e)}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},t.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(t){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(t,e){t.superClass_=e.prototype,t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t.utils.object.mixin=function(t,e){for(var n in e)t[n]=e[n]},t.utils.object.deepMerge=function(e,n){for(var o in n)e[o]=null!=n[o]&&"object"===typeof n[o]?t.utils.object.deepMerge(e[o]||Object.create(null),n[o]):n[o];return e},t.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))},t.Events.Ui=function(e,n,o,r){t.Events.Ui.superClass_.constructor.call(this),this.isBlank="undefined"==typeof e,this.blockId=e?e.id:null,this.workspaceId=e?e.workspace.id:void 0,this.element="undefined"==typeof n?"":n,this.oldValue="undefined"==typeof o?"":o,this.newValue="undefined"==typeof r?"":r,this.recordUndo=!1},t.utils.object.inherits(t.Events.Ui,t.Events.Abstract),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.utils.Svg=function(t){this.tagName_=t},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,n,o){for(var r in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),n)e.setAttribute(r,n[r]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),o&&o.appendChild(e),e},t.utils.dom.addClass=function(t,e){var n=t.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+e+" ")&&(n&&(n+=" "),t.setAttribute("class",n+e),!0)},t.utils.dom.removeClasses=function(e,n){n=n.split(" ");for(var o=0;o<n.length;o++)t.utils.dom.removeClass(e,n[o])},t.utils.dom.removeClass=function(t,e){var n=t.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+e+" "))return!1;n=n.split(/\s+/);for(var o=0;o<n.length;o++)n[o]&&n[o]!=e||(n.splice(o,1),o--);return n.length?t.setAttribute("class",n.join(" ")):t.removeAttribute("class"),!0},t.utils.dom.hasClass=function(t,e){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},t.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},t.utils.dom.insertAfter=function(t,e){var n=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");n?e.insertBefore(t,n):e.appendChild(t)},t.utils.dom.containsNode=function(e,n){return!!(e.compareDocumentPosition(n)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_={})},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var n,o=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(n=t.utils.dom.cacheWidths_[o]))return n;try{n=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(r){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[o]=n),n},t.utils.dom.getFastTextWidth=function(e,n,o,r){return t.utils.dom.getFastTextWidthWithSizeString(e,n+"pt",o,r)},t.utils.dom.getFastTextWidthWithSizeString=function(e,n,o,r){var i,s=e.textContent;return e=s+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(i=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((i=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(i),t.utils.dom.canvasContext_=i.getContext("2d")),t.utils.dom.canvasContext_.font=o+" "+n+" "+r,i=t.utils.dom.canvasContext_.measureText(s).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=i)),i},t.utils.dom.measureFontMetrics=function(t,e,n,o){var r=document.createElement("span");r.style.font=n+" "+e+" "+o,r.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(e=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(r),e.appendChild(t),document.body.appendChild(e);try{n={},e.style.alignItems="baseline",n.baseline=t.offsetTop-r.offsetTop,e.style.alignItems="flex-end",n.height=t.offsetTop-r.offsetTop}finally{document.body.removeChild(e)}return n},t.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,n){this.scale_=n,t=t.toFixed(0),e=e.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+n+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,n=this.surfaceXY_.y;e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,n){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.Component=function(){this.rightToLeft_=t.Component.defaultRightToLeft,this.id_=null,this.inDocument_=!1,this.parent_=this.element_=null,this.children_=[],this.childIndex_={},this.disposed_=!1},t.Component.defaultRightToLeft=!1,t.Component.Error={ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",ABSTRACT_METHOD:"Unimplemented abstract method"},t.Component.prototype.getId=function(){return this.id_||(this.id_=t.utils.IdGenerator.getNextUniqueId())},t.Component.prototype.getElement=function(){return this.element_},t.Component.prototype.setElementInternal=function(t){this.element_=t},t.Component.prototype.setParent=function(e){if(this==e)throw Error(t.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(t.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e},t.Component.prototype.getParent=function(){return this.parent_},t.Component.prototype.isInDocument=function(){return this.inDocument_},t.Component.prototype.createDom=function(){throw Error(t.Component.Error.ABSTRACT_METHOD)},t.Component.prototype.render=function(t){this.render_(t)},t.Component.prototype.render_=function(e,n){if(this.inDocument_)throw Error(t.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),e?e.insertBefore(this.element_,n||null):document.body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},t.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild((function(t){!t.isInDocument()&&t.getElement()&&t.enterDocument()}))},t.Component.prototype.exitDocument=function(){this.forEachChild((function(t){t.isInDocument()&&t.exitDocument()})),this.inDocument_=!1},t.Component.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.forEachChild((function(t){t.dispose()})),this.element_&&t.utils.dom.removeNode(this.element_),this.parent_=this.element_=this.childIndex_=this.children_=null},t.Component.prototype.addChild=function(t,e){this.addChildAt(t,this.getChildCount(),e)},t.Component.prototype.addChildAt=function(e,n,o){if(e.inDocument_&&(o||!this.inDocument_))throw Error(t.Component.Error.ALREADY_RENDERED);if(0>n||n>this.getChildCount())throw Error(t.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);if(this.childIndex_[e.getId()]=e,e.getParent()==this){var r=this.children_.indexOf(e);-1<r&&this.children_.splice(r,1)}e.setParent(this),this.children_.splice(n,0,e),e.inDocument_&&this.inDocument_&&e.getParent()==this?(n=(o=this.getContentElement()).childNodes[n]||null)!=e.getElement()&&o.insertBefore(e.getElement(),n):o?(this.element_||this.createDom(),n=this.getChildAt(n+1),e.render_(this.getContentElement(),n?n.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&e.enterDocument()},t.Component.prototype.getContentElement=function(){return this.element_},t.Component.prototype.hasChildren=function(){return 0!=this.children_.length},t.Component.prototype.getChildCount=function(){return this.children_.length},t.Component.prototype.getChild=function(t){return t&&this.childIndex_[t]||null},t.Component.prototype.getChildAt=function(t){return this.children_[t]||null},t.Component.prototype.forEachChild=function(t,e){for(var n=0;n<this.children_.length;n++)t.call(e,this.children_[n],n)},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,n){if(!t.Css.injected_){t.Css.injected_=!0;var o=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),e.appendChild(o),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.utils.math={},t.utils.math.toRadians=function(t){return t*Math.PI/180},t.utils.math.toDegrees=function(t){return 180*t/Math.PI},t.utils.math.clamp=function(t,e,n){if(n<t){var o=n;n=t,t=o}return Math.max(t,Math.min(e,n))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var n=document.createElement("div");n.className="blocklyDropDownContent",e.appendChild(n),t.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(n),t.DropDownDiv.arrow_=n,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",(function(){t.utils.dom.addClass(e,"blocklyFocused")})),e.addEventListener("focusout",(function(){t.utils.dom.removeClass(e,"blocklyFocused")}))}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,n){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=n},t.DropDownDiv.showPositionedByBlock=function(e,n,o,r){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(n),e,o,r)},t.DropDownDiv.showPositionedByField=function(e,n,o){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,n,o)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var n=e.getSvgRoot(),o=n.getBBox(),r=e.workspace.scale;return e=o.height*r,o=o.width*r,n=t.utils.style.getPageOffset(n),new t.utils.Rect(n.y,n.y+e,n.x,n.x+o)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,n,o,r){var i=e.left+(e.right-e.left)/2,s=e.bottom;e=e.top,r&&(e+=r);for(var a=(r=n.getSourceBlock()).workspace;a.options.parentWorkspace;)a=a.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(a.getParentSvg().parentNode),t.DropDownDiv.show(n,r.RTL,i,s,i,e,o)},t.DropDownDiv.show=function(e,n,o,r,i,s,a){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=a||null,(e=t.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(o,r,i,s)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),n=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},t.DropDownDiv.getPositionMetrics_=function(e,n,o,r){var i=t.DropDownDiv.getBoundsInfo_(),s=t.utils.style.getSize(t.DropDownDiv.DIV_);return n+s.height<i.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,n,i,s):r-s.height>i.top?t.DropDownDiv.getPositionAboveMetrics_(o,r,i,s):n+s.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,n,i,s):r-s.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(o,r,i,s):t.DropDownDiv.getPositionTopOfPageMetrics_(e,i,s)},t.DropDownDiv.getPositionBelowMetrics_=function(e,n,o,r){return{initialX:(e=t.DropDownDiv.getPositionX(e,o.left,o.right,r.width)).divX,initialY:n,finalX:e.divX,finalY:n+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,n,o,r){return{initialX:(e=t.DropDownDiv.getPositionX(e,o.left,o.right,r.width)).divX,initialY:n-r.height,finalX:e.divX,finalY:n-r.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:r.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,n,o){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,n,o,r){var i=e;return e=t.utils.math.clamp(n,e-r/2,o-r),i-=t.DropDownDiv.ARROW_SIZE/2,n=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:r=t.utils.math.clamp(n,i-e,r-n-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,n){return t.DropDownDiv.owner_===e&&(n?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout((function(){t.DropDownDiv.hideWithoutAnimation()}),1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,n,o,r){(e=t.DropDownDiv.getPositionMetrics_(e,n,o,r)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",n=Math.floor(e.initialX),o=Math.floor(e.initialY),r=Math.floor(e.finalX);var i=Math.floor(e.finalY),s=t.DropDownDiv.DIV_;return s.style.left=n+"px",s.style.top=o+"px",s.style.display="block",s.style.opacity=1,s.style.transform="translate("+(r-n)+"px,"+(i-o)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,n=e.getSourceBlock();n=(e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(n)).left+(e.right-e.left)/2,t.DropDownDiv.positionInternal_(n,e.bottom,n,e.top)}else t.DropDownDiv.hide()},t.Grid=function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e);var n=(e=Math.floor(this.spacing_/2)+.5)-this.length_/2,o=e+this.length_/2;e*=t,n*=t,o*=t,this.setLineAttributes_(this.line1_,t,n,o,e,e),this.setLineAttributes_(this.line2_,t,e,e,n,o)},t.Grid.prototype.setLineAttributes_=function(t,e,n,o,r,i){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",n),t.setAttribute("y1",r),t.setAttribute("x2",o),t.setAttribute("y2",i))},t.Grid.prototype.moveTo=function(e,n){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",n),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,n,o){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e),1<n.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,n,o,r){this.name=e,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=r||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},t.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},t.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},t.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},t.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},t.Theme.prototype.setStartHats=function(t){this.startHats=t},t.Theme.defineTheme=function(e,n){var o=new t.Theme(e),r=n.base;return r&&("string"==typeof r&&(r=t.registry.getObject(t.registry.Type.THEME,r)),r instanceof t.Theme&&(t.utils.object.deepMerge(o,r),o.name=e)),t.utils.object.deepMerge(o.blockStyles,n.blockStyles),t.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),t.utils.object.deepMerge(o.componentStyles,n.componentStyles),t.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.user={},t.user.keyMap={},t.user.keyMap.map_={},t.user.keyMap.modifierKeys={SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",META:"Meta"},t.user.keyMap.setActionForKey=function(e,n){var o=t.user.keyMap.getKeyByAction(n);o&&delete t.user.keyMap.map_[o],t.user.keyMap.map_[e]=n},t.user.keyMap.setKeyMap=function(e){t.user.keyMap.map_=e},t.user.keyMap.getKeyMap=function(){var e={};return t.utils.object.mixin(e,t.user.keyMap.map_),e},t.user.keyMap.getActionByKeyCode=function(e){return t.user.keyMap.map_[e]},t.user.keyMap.getKeyByAction=function(e){for(var n,o=Object.keys(t.user.keyMap.map_),r=0;n=o[r];r++)if(t.user.keyMap.map_[n].name===e.name)return n;return null},t.user.keyMap.serializeKeyEvent=function(e){for(var n,o=t.utils.object.values(t.user.keyMap.modifierKeys),r="",i=0;n=o[i];i++)e.getModifierState(n)&&(r+=n);return r+e.keyCode},t.user.keyMap.checkModifiers_=function(t,e){for(var n,o=0;n=t[o];o++)if(0>e.indexOf(n))throw Error(n+" is not a valid modifier key.")},t.user.keyMap.createSerializedKey=function(e,n){var o="",r=t.utils.object.values(t.user.keyMap.modifierKeys);t.user.keyMap.checkModifiers_(n,r);for(var i,s=0;i=r[s];s++)-1<n.indexOf(i)&&(o+=i);return o+e},t.user.keyMap.createDefaultKeyMap=function(){var e={},n=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.K,[t.user.keyMap.modifierKeys.CONTROL,t.user.keyMap.modifierKeys.SHIFT]),o=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.W,[t.user.keyMap.modifierKeys.SHIFT]),r=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.A,[t.user.keyMap.modifierKeys.SHIFT]),i=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.S,[t.user.keyMap.modifierKeys.SHIFT]),s=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.D,[t.user.keyMap.modifierKeys.SHIFT]);return e[t.utils.KeyCodes.W]=t.navigation.ACTION_PREVIOUS,e[t.utils.KeyCodes.A]=t.navigation.ACTION_OUT,e[t.utils.KeyCodes.S]=t.navigation.ACTION_NEXT,e[t.utils.KeyCodes.D]=t.navigation.ACTION_IN,e[t.utils.KeyCodes.I]=t.navigation.ACTION_INSERT,e[t.utils.KeyCodes.ENTER]=t.navigation.ACTION_MARK,e[t.utils.KeyCodes.X]=t.navigation.ACTION_DISCONNECT,e[t.utils.KeyCodes.T]=t.navigation.ACTION_TOOLBOX,e[t.utils.KeyCodes.E]=t.navigation.ACTION_EXIT,e[t.utils.KeyCodes.ESC]=t.navigation.ACTION_EXIT,e[n]=t.navigation.ACTION_TOGGLE_KEYBOARD_NAV,e[o]=t.navigation.ACTION_MOVE_WS_CURSOR_UP,e[r]=t.navigation.ACTION_MOVE_WS_CURSOR_LEFT,e[i]=t.navigation.ACTION_MOVE_WS_CURSOR_DOWN,e[s]=t.navigation.ACTION_MOVE_WS_CURSOR_RIGHT,e},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:t.TOOLBOX_AT_TOP,BOTTOM:t.TOOLBOX_AT_BOTTOM,LEFT:t.TOOLBOX_AT_LEFT,RIGHT:t.TOOLBOX_AT_RIGHT},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var n=e.kind;if(e=e.contents,n&&n!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var n=e.kind;return n?n==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length},t.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents)&&!!t.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length},t.utils.toolbox.convertToToolboxJson_=function(e){var n={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,n),n},t.utils.toolbox.xmlToJsonArray_=function(e){var n,o=[],r=e.childNodes;for(r||(r=e),e=0;n=r[e];e++)if(n.tagName){var i={},s=n.tagName.toUpperCase();i.kind=s,"BLOCK"==s?i.blockxml=n:"CATEGORY"==s&&(i.contents=t.utils.toolbox.xmlToJsonArray_(n)),t.utils.toolbox.addAttributes_(n,i),o.push(i)}return o},t.utils.toolbox.addAttributes_=function(t,e){for(var n=0;n<t.attributes.length;n++){var o=t.attributes[n];-1<o.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[o.nodeName.replace("css-","")]=o.value):e[o.nodeName]=o.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},t.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank="undefined"==typeof e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.Change=function(e,n,o,r,i){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element="undefined"==typeof n?"":n,this.name="undefined"==typeof o?"":o,this.oldValue="undefined"==typeof r?"":r,this.newValue="undefined"==typeof i?"":i)},t.utils.object.inherits(t.Events.Change,t.Events.BlockBase),t.Events.BlockChange=t.Events.Change,t.Events.Change.prototype.type=t.Events.CHANGE,t.Events.Change.prototype.toJson=function(){var e=t.Events.Change.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.newValue=this.newValue,e},t.Events.Change.prototype.fromJson=function(e){t.Events.Change.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.newValue=e.newValue},t.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.Change.prototype.run=function(e){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&t.Xml.domToText(o)),n.domToMutation){var r=t.Xml.textToDom(e||"<mutation/>");n.domToMutation(r)}t.Events.fire(new t.Events.Change(n,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids},t.Events.Create.prototype.run=function(e){var n=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,n);else{e=0;for(var o;o=this.ids[e];e++){var r=n.getBlockById(o);r?r.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.ids=this.ids,e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.ids=e.ids},t.Events.Delete.prototype.run=function(e){var n=this.getEventWorkspace_();if(e){e=0;for(var o;o=this.ids[e];e++){var r=n.getBlockById(o);r?r.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,n)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),e},t.Events.Move.prototype.fromJson=function(e){t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate=new t.utils.Coordinate(Number(e[0]),Number(e[1])))},t.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},t.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var r=e?this.newParentId:this.oldParentId,i=e?this.newInputName:this.oldInputName;e=e?this.newCoordinate:this.oldCoordinate;var s=null;if(r&&!(s=n.getBlockById(r)))return void console.warn("Can't connect to non-existent block: "+r);if(o.getParent()&&o.unplug(),e)i=o.getRelativeToSurfaceXY(),o.moveBy(e.x-i.x,e.y-i.y);else{if(o=o.outputConnection||o.previousConnection,i){if(n=s.getInput(i))var a=n.connection}else o.type==t.PREVIOUS_STATEMENT&&(a=s.nextConnection);a?o.connect(a):console.warn("Can't connect to non-existent input: "+i)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.Change),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank="undefined"==typeof e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Ui),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},t.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank="undefined"==typeof e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,n){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName="undefined"==typeof n?"":n)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.Xml={},t.Xml.workspaceToDom=function(e,n){var o=t.utils.xml.createElement("xml"),r=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));r.hasChildNodes()&&o.appendChild(r);var i,s=e.getTopComments(!0);for(r=0;i=s[r];r++)o.appendChild(i.toXmlWithXY(n));for(e=e.getTopBlocks(!0),r=0;s=e[r];r++)o.appendChild(t.Xml.blockToDomWithXY(s,n));return o},t.Xml.variablesToDom=function(e){for(var n,o=t.utils.xml.createElement("variables"),r=0;n=e[r];r++){var i=t.utils.xml.createElement("variable");i.appendChild(t.utils.xml.createTextNode(n.name)),n.type&&i.setAttribute("type",n.type),i.id=n.getId(),o.appendChild(i)}return o},t.Xml.blockToDomWithXY=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var o;e.workspace.RTL&&(o=e.workspace.getWidth()),n=t.Xml.blockToDom(e,n);var r=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?o-r.x:r.x)),n.setAttribute("y",Math.round(r.y)),n},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var n=t.utils.xml.createElement("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},t.Xml.allFieldsToDom_=function(e,n){for(var o,r=0;o=e.inputList[r];r++)for(var i,s=0;i=o.fieldRow[s];s++)(i=t.Xml.fieldToDom_(i))&&n.appendChild(i)},t.Xml.blockToDom=function(e,n){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var o=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),n||o.setAttribute("id",e.id),e.mutationToDom){var r=e.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&o.appendChild(r)}if(t.Xml.allFieldsToDom_(e,o),r=e.getCommentText()){var i=e.commentModel.size,s=e.commentModel.pinned,a=t.utils.xml.createElement("comment");a.appendChild(t.utils.xml.createTextNode(r)),a.setAttribute("pinned",s),a.setAttribute("h",i.height),a.setAttribute("w",i.width),o.appendChild(a)}for(e.data&&((r=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),o.appendChild(r)),r=0;i=e.inputList[r];r++){var l;if(s=!0,i.type!=t.DUMMY_INPUT){var u=i.connection.targetBlock();i.type==t.INPUT_VALUE?l=t.utils.xml.createElement("value"):i.type==t.NEXT_STATEMENT&&(l=t.utils.xml.createElement("statement")),!(a=i.connection.getShadowDom())||u&&u.isShadow()||l.appendChild(t.Xml.cloneShadow_(a,n)),u&&(a=t.Xml.blockToDom(u,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(l.appendChild(a),s=!1),l.setAttribute("name",i.name),s||o.appendChild(l)}}return void 0!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&o.setAttribute("inline",e.inputsInline),e.isCollapsed()&&o.setAttribute("collapsed",!0),e.isEnabled()||o.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||o.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||o.setAttribute("movable",!1),e.isEditable()||o.setAttribute("editable",!1),(r=e.getNextBlock())&&(a=t.Xml.blockToDom(r,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((l=t.utils.xml.createElement("next")).appendChild(a),o.appendChild(l)),!(a=e.nextConnection&&e.nextConnection.getShadowDom())||r&&r.isShadow()||l.appendChild(t.Xml.cloneShadow_(a,n)),o},t.Xml.cloneShadow_=function(e,n){for(var o,r=e=e.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)o=r,r=r.parentNode,o.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==o.data.trim()&&r.firstChild!=o&&t.utils.dom.removeNode(o);r&&(o=r,r=r.nextSibling,o.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==o.data.trim()&&t.utils.dom.removeNode(o))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var n="",o=1;o<e.length;o++){var r=e[o];"/"==r[0]&&(n=n.substring(2)),e[o]=n+"<"+r,"/"!=r[0]&&"/>"!=r.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var n=t.utils.xml.textToDomDocument(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=t.Xml.domToWorkspace(e,n),n.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,n){if(e instanceof t.Workspace){var o=e;e=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var r;n.RTL&&(r=n.getWidth()),o=[],t.utils.dom.startTextWidthCache();var i=t.Events.getGroup();i||t.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var s=!0;try{for(var a,l=0;a=e.childNodes[l];l++){var u=a.nodeName.toLowerCase(),c=a;if("block"==u||"shadow"==u&&!t.Events.recordUndo){var h=t.Xml.domToBlock(c,n);o.push(h.id);var p=c.hasAttribute("x")?parseInt(c.getAttribute("x"),10):10,d=c.hasAttribute("y")?parseInt(c.getAttribute("y"),10):10;isNaN(p)||isNaN(d)||h.moveBy(n.RTL?r-p:p,d),s=!1}else{if("shadow"==u)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==u)n.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(c,n,r):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(c,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==u){if(!s)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(c,n),s=!1}}}}finally{i||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),t.Events.fire(new t.Events.FinishedLoading(n)),o},t.Xml.appendDomToWorkspace=function(e,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,n),o&&o.top!=o.bottom){var r=o.bottom,i=n.RTL?o.right:o.left,s=1/0,a=-1/0,l=1/0;for(o=0;o<e.length;o++){var u=n.getBlockById(e[o]).getRelativeToSurfaceXY();u.y<l&&(l=u.y),u.x<s&&(s=u.x),u.x>a&&(a=u.x)}for(r=r-l+10,i=n.RTL?i-a:i-s,o=0;o<e.length;o++)n.getBlockById(e[o]).moveBy(i,r)}return e},t.Xml.domToBlock=function(e,n){if(e instanceof t.Workspace){var o=e;e=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),o=n.getAllVariables();try{var r=t.Xml.domToBlockHeadless_(e,n),i=r.getDescendants(!1);if(n.rendered){r.setConnectionTracking(!1);for(var s=i.length-1;0<=s;s--)i[s].initSvg();for(s=i.length-1;0<=s;s--)i[s].render(!1);setTimeout((function(){r.disposed||r.setConnectionTracking(!0)}),1),r.updateDisabled(),n.resizeContents()}else for(s=i.length-1;0<=s;s--)i[s].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(n,o),s=0;s<e.length;s++)t.Events.fire(new t.Events.VarCreate(e[s]));t.Events.fire(new t.Events.BlockCreate(r))}return r},t.Xml.domToVariables=function(e,n){for(var o,r=0;o=e.childNodes[r];r++)if(o.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var i=o.getAttribute("type"),s=o.getAttribute("id");n.createVariable(o.textContent,i,s)}},t.Xml.domToBlockHeadless_=function(e,n){var o=null,r=e.getAttribute("type");if(!r)throw TypeError("Block type unspecified: "+e.outerHTML);var i=e.getAttribute("id");o=n.newBlock(r,i);var s,a=null;for(i=0;s=e.childNodes[i];i++)if(s.nodeType!=t.utils.dom.NodeType.TEXT_NODE){for(var l,u=a=null,c=0;l=s.childNodes[c];c++)l.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==l.nodeName.toLowerCase()?a=l:"shadow"==l.nodeName.toLowerCase()&&(u=l));c=!1;var h=s.getAttribute("name");switch(l=s,s.nodeName.toLowerCase()){case"mutation":o.domToMutation&&(o.domToMutation(l),o.initSvg&&(c=!0));break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}u=l.textContent,a="true"==l.getAttribute("pinned"),s=parseInt(l.getAttribute("w"),10),l=parseInt(l.getAttribute("h"),10),o.setCommentText(u),o.commentModel.pinned=a,isNaN(s)||isNaN(l)||(o.commentModel.size=new t.utils.Size(s,l)),a&&o.getCommentIcon&&!o.isInFlyout&&setTimeout((function(){o.getCommentIcon().setVisible(!0)}),1);break;case"data":o.data=s.textContent;break;case"title":case"field":t.Xml.domToField_(o,h,l);break;case"value":case"statement":if(!(l=o.getInput(h))){console.warn("Ignoring non-existent input "+h+" in block "+r);break}if(a)if((a=t.Xml.domToBlockHeadless_(a,n)).outputConnection)l.connection.connect(a.outputConnection);else{if(!a.previousConnection)throw TypeError("Child block does not have output or previous statement.");l.connection.connect(a.previousConnection)}u&&l.connection.setShadowDom(u);break;case"next":if(a){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");if(!(a=t.Xml.domToBlockHeadless_(a,n)).previousConnection)throw TypeError("Next block does not have previous statement.");o.nextConnection.connect(a.previousConnection)}u&&o.nextConnection&&o.nextConnection.setShadowDom(u);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}}if(c&&o.initSvg(),(i=e.getAttribute("inline"))&&o.setInputsInline("true"==i),(i=e.getAttribute("disabled"))&&o.setEnabled("true"!=i&&"disabled"!=i),(i=e.getAttribute("deletable"))&&o.setDeletable("true"==i),(i=e.getAttribute("movable"))&&o.setMovable("true"==i),(i=e.getAttribute("editable"))&&o.setEditable("true"==i),(i=e.getAttribute("collapsed"))&&o.setCollapsed("true"==i),"shadow"==e.nodeName.toLowerCase()){for(e=o.getChildren(!1),i=0;n=e[i];i++)if(!n.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(o.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");o.setShadow(!0)}return o},t.Xml.domToField_=function(t,e,n){var o=t.getField(e);o?o.fromXml(n):console.warn("Ignoring non-existent field "+e+" in block "+t.type)},t.Xml.deleteNext=function(t){for(var e,n=0;e=t.childNodes[n];n++)if("next"==e.nodeName.toLowerCase()){t.removeChild(e);break}},t.Options=function(e){var n=!!e.readOnly;if(n)var o=null,r=!1,i=!1,s=!1,a=!1,l=!1,u=!1;else{o=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),r=t.utils.toolbox.hasCategories(o),void 0===(i=e.trashcan)&&(i=r);var c=e.maxTrashcanContents;i?void 0===c&&(c=32):c=0,void 0===(s=e.collapse)&&(s=r),void 0===(a=e.comments)&&(a=r),void 0===(l=e.disable)&&(l=r),void 0===(u=e.sounds)&&(u=!0)}var h=!!e.rtl,p=e.horizontalLayout;void 0===p&&(p=!1);var d=e.toolboxPosition;d="end"!==d,d=p?d?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:d==h?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var f=e.css;void 0===f&&(f=!0);var g="https://blockly-demo.appspot.com/static/media/";e.media?g=e.media:e.path&&(g=e.path+"media/");var _=void 0===e.oneBasedIndex||!!e.oneBasedIndex,v=e.keyMap||t.user.keyMap.createDefaultKeyMap(),m=e.renderer||"geras",y=e.plugins||{};this.RTL=h,this.oneBasedIndex=_,this.collapse=s,this.comments=a,this.disable=l,this.readOnly=n,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=g,this.hasCategories=r,this.moveOptions=t.Options.parseMoveOptions_(e,r),this.hasScrollbars=this.moveOptions.scrollbars,this.hasTrashcan=i,this.maxTrashcanContents=c,this.hasSounds=u,this.hasCss=f,this.horizontalLayout=p,this.languageTree=o,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=d,this.theme=t.Options.parseThemeOptions_(e),this.keyMap=v,this.renderer=m,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=y},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(t,e){var n=t.move||{},o={};return o.scrollbars=void 0===n.scrollbars&&void 0===t.scrollbars?e:!!n.scrollbars||!!t.scrollbars,o.wheel=!(!o.scrollbars||void 0===n.wheel)&&!!n.wheel,o.drag=!!o.scrollbars&&(void 0===n.drag||!!n.drag),o},t.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e},t.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,n){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout((function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n&&n.handleRightClick(e)}),t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(t){return void 0!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&void 0!==t.changedTouches[0].identifier&&null!==t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);return void 0!==t.Touch.touchIdentifier_&&null!==t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==n:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=n,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var n=0;n<t.changedTouches.length;n++)e[n]={type:t.type,changedTouches:[t.changedTouches[n]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e},t.ScrollbarPair=function(e){this.workspace_=e,this.hScroll=new t.Scrollbar(e,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new t.Scrollbar(e,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas()),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==e.contentWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.contentLeft==e.contentLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==e.contentHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.contentTop==e.contentTop||(o=!0)):o=n=!0,n||o){try{t.Events.disable(),n&&this.hScroll.resize(e),o&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.set=function(t,e){var n={};t*=this.hScroll.ratio,e*=this.vScroll.ratio;var o=this.vScroll.scrollViewSize_;n.x=this.getRatio_(t,this.hScroll.scrollViewSize_),n.y=this.getRatio_(e,o),this.workspace_.setMetrics(n),this.hScroll.setHandlePosition(t),this.vScroll.setHandlePosition(e)},t.ScrollbarPair.prototype.getRatio_=function(t,e){return t/=e,isNaN(t)?0:t},t.Scrollbar=function(e,n,o,r){this.workspace_=e,this.pair_=o||!1,this.horizontal_=n,this.ratio=this.oldHostMetrics_=null,this.createDom_(r),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollViewSize_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.metricsAreEquivalent_=function(t,e){return!(!t||!e||t.viewWidth!=e.viewWidth||t.viewHeight!=e.viewHeight||t.viewLeft!=e.viewLeft||t.viewTop!=e.viewTop||t.absoluteTop!=e.absoluteTop||t.absoluteLeft!=e.absoluteLeft||t.contentWidth!=e.contentWidth||t.contentHeight!=e.contentHeight||t.contentLeft!=e.contentLeft||t.contentTop!=e.contentTop)},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollViewSize_=function(t){this.scrollViewSize_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},t.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll.setContainerVisible(t),this.vScroll.setContainerVisible(t)},t.Scrollbar.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){(e||(e=this.workspace_.getMetrics()))&&(t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.oldHostMetrics_=e,this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.onScroll_()))},t.Scrollbar.prototype.resizeHorizontal_=function(t){this.resizeViewHorizontal(t)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var n=e.viewWidth-1;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,n)),n=e.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(n+=t.Scrollbar.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentWidth),this.ratio=this.scrollViewSize_/t.contentWidth,(-1/0==this.ratio||1/0==this.ratio||isNaN(this.ratio))&&(this.ratio=0),this.setHandleLength_(Math.max(0,t.viewWidth*this.ratio)),this.setHandlePosition(this.constrainHandle_((t.viewLeft-t.contentLeft)*this.ratio))},t.Scrollbar.prototype.resizeVertical_=function(t){this.resizeViewVertical(t)},t.Scrollbar.prototype.resizeViewVertical=function(e){var n=e.viewHeight-1;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,n)),n=e.absoluteLeft+.5,this.workspace_.RTL||(n+=e.viewWidth-t.Scrollbar.scrollbarThickness-1),this.setPosition(n,e.absoluteTop+.5),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentHeight),this.ratio=this.scrollViewSize_/t.contentHeight,(-1/0==this.ratio||1/0==this.ratio||isNaN(this.ratio))&&(this.ratio=0),this.setHandleLength_(Math.max(0,t.viewHeight*this.ratio)),this.setHandlePosition(this.constrainHandle_((t.viewTop-t.contentTop)*this.ratio))},t.Scrollbar.prototype.createDom_=function(e){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(n+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:n},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(t){var e=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var n=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=t.utils.getInjectionDivXY_(this.svgHandle_);o=this.horizontal_?o.x:o.y;var r=this.handlePosition_,i=.95*this.handleLength_;n<=o?r-=i:n>=o+this.handleLength_&&(r+=i),this.setHandlePosition(this.constrainHandle_(r)),this.onScroll_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.onScroll_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.unbindEvent_(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.unbindEvent_(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.constrainHandle_=function(t){return 0>=t||isNaN(t)||this.scrollViewSize_<this.handleLength_?0:Math.min(t,this.scrollViewSize_-this.handleLength_)},t.Scrollbar.prototype.onScroll_=function(){var t=this.handlePosition_/this.scrollViewSize_;isNaN(t)&&(t=0);var e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},t.Scrollbar.prototype.set=function(t){this.setHandlePosition(this.constrainHandle_(t*this.ratio)),this.onScroll_()},t.Scrollbar.prototype.setOrigin=function(e,n){this.origin_=new t.utils.Coordinate(e,n)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.bindEvent_(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.bindEvent_(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.unbindEvent_(e.mouseOverWrapper_),t.unbindEvent_(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout((function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()}),1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var n=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(n*n+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var n=0;n<e.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(e[n])),t.Tooltip.DIV.appendChild(o)}e=t.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var r=t.Tooltip.lastX_;r=e?r-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):r+t.Tooltip.OFFSET_X;var i=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;i+t.Tooltip.DIV.offsetHeight>o+window.scrollY&&(i-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?r=Math.max(t.Tooltip.MARGINS-window.scrollX,r):r+t.Tooltip.DIV.offsetWidth>n+window.scrollX-2*t.Tooltip.MARGINS&&(r=n-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=i+"px",t.Tooltip.DIV.style.left=r+"px"}},t.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,n){e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&t.utils.dom.hasClass(n,"blocklyBlockCanvas")&&t.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(n,this.previousSibling_):e.insertBefore(n,e.firstChild),t.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,n,o,r,i){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n,t.setAttribute("transform","translate(0, 0) scale("+i+")"),e.setAttribute("transform","translate(0, 0) scale("+i+")"),this.SVG_.setAttribute("width",o),this.SVG_.setAttribute("height",r),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"},t.ASTNode=function(e,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){return e?e.type==t.INPUT_VALUE||e.type==t.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):e.type==t.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):e.type==t.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):e.type==t.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null:null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,n){return n&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:n}):null},t.ASTNode.createTopNode=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var e,n=this.location_.getParentInput(),o=n.getSourceBlock();for(n=o.inputList.indexOf(n)+1;e=o.inputList[n];n++){for(var r,i=e.fieldRow,s=0;r=i[s];s++)if(r.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(r);if(e.connection)return t.ASTNode.createInputNode(e)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,n=e.getParentInput(),o=e.getSourceBlock(),r=o.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;n=o.inputList[r];r++){for(var i=n.fieldRow;e<i.length;){if(i[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(i[e]);e++}if(e=0,n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var e,n=this.location_.getParentInput(),o=n.getSourceBlock(),r=o.inputList.indexOf(n);e=o.inputList[r];r--){if(e.connection&&e!==n)return t.ASTNode.createInputNode(e);for(var i,s=(e=e.fieldRow).length-1;i=e[s];s--)if(i.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(i)}return null},t.ASTNode.prototype.findPrevForField_=function(){var e,n=this.location_,o=n.getParentInput(),r=n.getSourceBlock(),i=r.inputList.indexOf(o);for(n=o.fieldRow.indexOf(n)-1;e=r.inputList[i];i--){if(e.connection&&e!==o)return t.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<n;){if(e[n].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(e[n]);n--}0<=i-1&&(n=r.inputList[i-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var n=this.getLocation();if(n instanceof t.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var r,i=0;r=n[i];i++)if(o.id==r.id)return-1==(e=i+(e?1:-1))||e==n.length?null:t.ASTNode.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var n=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?t.ASTNode.createInputNode(n.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var n,o=0;n=e[o];o++){for(var r,i=n.fieldRow,s=0;r=i[s];s++)if(r.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(r);if(n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createConnectionNode(e.targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return e=this.location_,this.findTopASTNodeForBlock_(e);case t.ASTNode.types.BLOCK:return e=this.location_,this.findFirstFieldOrInput_(e);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new t.utils.Coordinate(n.x,n.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,n);case t.ASTNode.types.OUTPUT:return(n=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(n):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.BLOCK:return e=this.location_,this.getOutAstNodeForBlock_(e);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return e=this.location_,this.getOutAstNodeForBlock_(e.getSourceBlock())}return null},t.Blocks=Object.create(null),t.utils.deprecation={},t.utils.deprecation.warn=function(t,e,n,o){t=t+" was deprecated on "+e+" and will be deleted on "+n+".",o&&(t+="\nUse "+o+" instead."),console.warn(t)},t.Connection=function(t,e){this.sourceBlock_=t,this.type=e},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var n,o=this,r=o.getSourceBlock(),i=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),o.isConnected()){var s=o.targetBlock(),a=o.getShadowDom();if(o.shadowDom_=null,s.isShadow())a=t.Xml.blockToDom(s),s.dispose(!1),s=null;else if(o.type==t.INPUT_VALUE){if(!s.outputConnection)throw Error("Orphan block does not have an output connection.");var l=t.Connection.lastConnectionInRow(i,s);l&&(s.outputConnection.connect(l),s=null)}else if(o.type==t.NEXT_STATEMENT){if(!s.previousConnection)throw Error("Orphan block does not have a previous connection.");for(l=i;l.nextConnection;){var u=l.getNextBlock();if(!u||u.isShadow()){s.workspace.connectionChecker.canConnect(s.previousConnection,l.nextConnection,!1)&&(l.nextConnection.connect(s.previousConnection),s=null);break}l=u}}if(s&&(o.disconnect(),t.Events.recordUndo)){var c=t.Events.getGroup();setTimeout((function(){s.workspace&&!s.getParent()&&(t.Events.setGroup(c),s.outputConnection?s.outputConnection.onFailedConnect(o):s.previousConnection&&s.previousConnection.onFailedConnect(o),t.Events.setGroup(!1))}),t.BUMP_DELAY)}o.shadowDom_=a}t.Events.isEnabled()&&(n=new t.Events.BlockMove(i)),t.Connection.connectReciprocally_(o,e),i.setParent(r),n&&(n.recordNew(),t.Events.fire(n))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.INPUT_VALUE||this.type==t.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,e,!1);if(o!=t.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(t){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var n=t.Events.getGroup();n||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},t.Connection.singleConnection_=function(e,n){var o=null;n=n.outputConnection;for(var r=0;r<e.inputList.length;r++){var i=e.inputList[r].connection,s=n.getConnectionChecker();if(i&&i.type==t.INPUT_VALUE&&s.canConnect(n,i,!1)){if(o)return null;o=i}}return o},t.Connection.lastConnectionInRow=function(e,n){for(var o;o=t.Connection.singleConnection_(e,n);)if(!(e=o.targetBlock())||e.isShadow())return o;return null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=e.getSourceBlock();e=this}else n=e.getSourceBlock(),o=this.sourceBlock_;var r=t.Events.getGroup();r||t.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||e.respawnShadow_(),r||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,n){var o;t.Events.isEnabled()&&(o=new t.Events.BlockMove(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),t.Events.fire(o))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),n=this.getShadowDom();if(e.workspace&&n)if((e=t.Xml.domToBlock(n,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(){return this.shadowDom_},t.Connection.prototype.neighbours=function(t){return[]},t.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,n=e.inputList,o=0;o<e.inputList.length;o++)if(n[o].connection===this){t=n[o];break}return t},t.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var e="Output Connection of ";else if(t.previousConnection==this)e="Previous Connection of ";else if(t.nextConnection==this)e="Next Connection of ";else{e=null;for(var n,o=0;n=t.inputList[o];o++)if(n.connection==this){e=n;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},t.Extensions={},t.Extensions.ALL_={},t.Extensions.register=function(e,n){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=n},t.Extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,(function(){this.mixin(n)}))},t.Extensions.registerMutator=function(e,n,o,r){var i='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(i,n.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(i,n.mutationToDom,"mutationToDom");var s=t.Extensions.checkMutatorDialog_(n,i);if(o&&"function"!=typeof o)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,(function(){if(s){if(!t.Mutator)throw Error(i+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(r||[]))}this.mixin(n),o&&o.apply(this)}))},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,n,o){var r=t.Extensions.ALL_[e];if("function"!=typeof r)throw Error('Error: Extension "'+e+'" not found.');if(o)t.Extensions.checkNoMutatorProperties_(e,n);else var i=t.Extensions.getMutatorProperties_(n);if(r.apply(n),o)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',n);else if(!t.Extensions.mutatorPropertiesMatch_(i,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(t,e,n){if(!e)throw Error(t+'missing required property "'+n+'"');if("function"!=typeof e)throw Error(t+'" required property "'+n+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,n){if(t.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},t.Extensions.checkMutatorDialog_=function(t,e){var n=void 0!==t.compose,o=void 0!==t.decompose;if(n&&o){if("function"!=typeof t.compose)throw Error(e+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(e+"decompose must be a function.");return!0}if(n||o)throw Error(e+'Must have both or neither of "compose" and "decompose"');return!1},t.Extensions.checkBlockHasMutatorProperties_=function(e,n){if("function"!=typeof n.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(n,e)},t.Extensions.getMutatorProperties_=function(t){var e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},t.Extensions.mutatorPropertiesMatch_=function(e,n){if((n=t.Extensions.getMutatorProperties_(n)).length!=e.length)return!1;for(var o=0;o<n.length;o++)if(e[o]!=n[o])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,n){var o=[];return"object"==typeof document&&t.utils.runAfterPageLoad((function(){for(var e in n)t.utils.checkMessageReferences(n[e])})),function(){this.type&&-1==o.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,n),o.push(this.type)),this.setTooltip(function(){var r=String(this.getFieldValue(e)),i=n[r];return null==i?-1==o.indexOf(this.type)&&(r="No tooltip mapping for value "+r+" of field "+e,null!=this.type&&(r+=" of block type "+this.type),console.warn(r+".")):i=t.utils.replaceMessageReferences(i),i}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(t,e,n){var o=t.getField(e);if(!o.isOptionListDynamic()){o=o.getOptions();for(var r=0;r<o.length;++r){var i=o[r][1];null==n[i]&&console.warn("No tooltip mapping for value "+i+" of field "+e+" of block type "+t.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&t.utils.runAfterPageLoad((function(){t.utils.checkMessageReferences(e)})),function(){this.setTooltip(function(){var o=this.getField(n);return t.utils.replaceMessageReferences(e).replace("%1",o?o.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,n){t.registry.register(t.registry.Type.FIELD,e,n)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var n=t.registry.getObject(t.registry.Type.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var n=e.workspace,o=e.getSvgRoot();n.getAudioManager().play("delete"),e=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=e.x,o.translateY_=e.y,o.setAttribute("transform","translate("+e.x+","+e.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),t.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},t.blockAnimations.disposeUiStep_=function(e,n,o,r){var i=(new Date-o)/150;1<i?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(n?-1:1)*e.bBox_.width*r/2*i)+","+(e.translateY_+e.bBox_.height*r*i)+") scale("+(1-i)*r+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,n,o,r))},t.blockAnimations.connectionUiEffect=function(e){var n=e.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var r=n.getSvgXY(e.getSvgRoot());e.outputConnection?(r.x+=(e.RTL?3:-3)*o,r.y+=13*o):e.previousConnection&&(r.x+=(e.RTL?-23:23)*o,r.y+=3*o),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:r.x,cy:r.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,o)}},t.blockAnimations.connectionUiStep_=function(e,n,o){var r=(new Date-n)/150;1<r?t.utils.dom.removeNode(e):(e.setAttribute("r",25*r*o),e.style.opacity=1-r,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,n,o))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),n,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,n,o){var r=(new Date-o)/200;1<r?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(r*Math.PI*3)*(1-r)*n)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,n,o)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,n){var o=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,e))&&(t.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var n=e.type;t.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),e.mutationToDom){var r=e.mutationToDom();r&&o.domToMutation(r)}for(n=0;n<e.inputList.length;n++){var i=e.inputList[n];if(i.name!=t.Block.COLLAPSED_INPUT_NAME){var s=o.inputList[n];for(r=0;r<i.fieldRow.length;r++)s.fieldRow[r].setValue(i.fieldRow[r].getValue())}}o.setCollapsed(e.isCollapsed()),o.setInputsInline(e.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return o},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack();if(n&&n!=this.topBlock_.nextConnection){if(e.push(n),this.lastOnStack_=n,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,n){var o=e.local,r=e.closest;return e=e.radius,o&&r?this.localConnection_&&this.closestConnection_?(this.closestConnection_!=r||this.localConnection_!=o)&&(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),!(r&&e>n-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),n=null,o=null,r=0;r<this.availableConnections_.length;r++){var i=this.availableConnections_[r],s=i.closest(e,t);s.connection&&(n=s.connection,o=i,e=s.radius)}return{closest:n,local:o,radius:e}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,n){return e=e&&!!e.closest&&n!=t.DELETE_AREA_TOOLBOX,!!n&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!e},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e==this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&n.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,n=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=n.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),t&&e&&n.positionNearConnection(t,e),e&&t.connect(e),this.markerConnection_=t},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,n=e.getSourceBlock(),o=n.nextConnection,r=n.previousConnection,i=n.outputConnection;if(i=e.type==t.INPUT_VALUE&&!(i&&i.targetConnection),!(e!=o||r&&r.targetConnection)||i?e.targetBlock().unplug(!1):e.type==t.NEXT_STATEMENT&&e!=o?((o=e.targetConnection).getSourceBlock().unplug(!1),r=r?r.targetConnection:null,n.unplug(!0),r&&r.connect(o)):n.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,n.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},t.BlockDragger=function(e,n){this.draggingBlock_=e,this.workspace_=n,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(t){var e=[];t=t.getDescendants(!1);for(var n,o=0;n=t[o];o++){n=n.getIcons();for(var r=0;r<n.length;r++){var i={location:n[r].getIconLocation(),icon:n[r]};e.push(i)}}return e},t.BlockDragger.prototype.startBlockDrag=function(e,n){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(n),e=this.pixelsToWorkspaceUnits_(e),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface(),(e=this.workspace_.getToolbox())&&"function"==typeof e.addStyle&&(n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.addStyle(n))},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new t.Events.Ui(this.draggingBlock_,"dragStart",null,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.dragBlock=function(e,n){n=this.pixelsToWorkspaceUnits_(n);var o=t.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),this.deleteArea_=this.workspace_.isDeleteArea(e),this.draggedConnectionManager_.update(n,this.deleteArea_),this.updateCursorDuringBlockDrag_()},t.BlockDragger.prototype.endBlockDrag=function(e,n){this.dragBlock(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),e=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.moveOffDragSurface(n),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(e.x,e.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(n)),t.Events.setGroup(!1)},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new t.Events.Ui(this.draggingBlock_,"dragStop",this.draggingBlock_.getDescendants(!1),null);t.Events.fire(e)},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new t.Events.BlockMove(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&setTimeout(e.closeLid.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[]):e&&e.closeLid(),this.wouldDeleteBlock_},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(t.utils.Coordinate.sum(o.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,n,o,r){return this.canConnectWithReason(e,n,o,r)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,n,o,r){var i=this.doSafetyChecks(e,n);return i!=t.Connection.CAN_CONNECT?i:this.doTypeChecks(e,n)?o&&!this.doDragChecks(e,n,r||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,n,o){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,n){if(!e||!n)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var o=e.getSourceBlock(),r=n.getSourceBlock();else r=e.getSourceBlock(),o=n.getSourceBlock();return o==r?t.Connection.REASON_SELF_CONNECTION:n.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:o.workspace!==r.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!r.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var n=0;n<t.length;n++)if(-1!=e.indexOf(t[n]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,n,o){if(e.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case t.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case t.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case t.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(n)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,n){return!e.targetConnection&&-1==t.draggingConnections.indexOf(n)&&(!n.targetConnection||!!(e=n.targetBlock()).isInsertionMarker()&&!e.getPreviousBlock())},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,n){var o=this.getVariable(n,e.type),r=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{o&&o.getId()!=e.getId()?this.renameVariableWithConflict_(e,n,o,r):this.renameVariableAndUses_(e,n,r)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(t,e){var n=this.getVariableById(t);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(n,e)},t.VariableMap.prototype.renameVariableAndUses_=function(e,n,o){for(t.Events.fire(new t.Events.VarRename(e,n)),e.name=n,n=0;n<o.length;n++)o[n].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,n,o,r){var i=e.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,r),n=0;n<r.length;n++)r[n].renameVarById(e.getId(),o.getId());t.Events.fire(new t.Events.VarDelete(e)),e=this.getVariablesOfType(i).indexOf(e),this.variableMap_[i].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,n,o){var r=this.getVariable(e,n);if(r){if(o&&r.getId()!=o)throw Error('Variable "'+e+'" is already in use and its id is "'+r.getId()+'" which conflicts with the passed in id, "'+o+'".');return r}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return r=o||t.utils.genUid(),n=n||"",r=new t.VariableModel(this.workspace,e,n,r),(e=this.variableMap_[n]||[]).push(r),delete this.variableMap_[n],this.variableMap_[n]=e,r},t.VariableMap.prototype.deleteVariable=function(e){for(var n,o=this.variableMap_[e.type],r=0;n=o[r];r++)if(n.getId()==e.getId()){o.splice(r,1),t.Events.fire(new t.Events.VarDelete(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var n=this.getVariableById(e);if(n){var o,r=n.name,i=this.getVariableUsesById(e);for(e=0;o=i[e];e++)if("procedures_defnoreturn"==o.type||"procedures_defreturn"==o.type)return e=o.getFieldValue("NAME"),r=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",e),void t.alert(r);var s=this;1<i.length?(r=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(i.length)).replace("%2",r),t.confirm(r,(function(t){t&&n&&s.deleteVariableInternal(n,i)}))):s.deleteVariableInternal(n,i)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,n){var o=t.Events.getGroup();o||t.Events.setGroup(!0);try{for(var r=0;r<n.length;r++)n[r].dispose(!0);this.deleteVariable(e)}finally{o||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,n){if(n=this.variableMap_[n||""])for(var o,r=0;o=n[r];r++)if(t.Names.equals(o.name,e))return o;return null},t.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),n=0;n<e.length;n++)for(var o,r=e[n],i=0;o=this.variableMap_[r][i];i++)if(o.getId()==t)return o;return null},t.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var n={};t.utils.object.mixin(n,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(n,e.getPotentialVariableMap().variableMap_),e=Object.keys(n),n=!1;for(var o=0;o<e.length;o++)""==e[o]&&(n=!0);return n||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var t,e=[];for(t in this.variableMap_)e=e.concat(this.variableMap_[t]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var t,e=[];for(t in this.variableMap_)for(var n,o=this.variableMap_[t],r=0;n=o[r];r++)e.push(n.name);return e},t.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],n=this.workspace.getAllBlocks(!1),o=0;o<n.length;o++){var r=n[o].getVarModels();if(r)for(var i=0;i<r.length;i++)r[i].getId()==t&&e.push(n[o])}return e},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(n.y+t.Workspace.prototype.sortObjects_.offset*n.x)},t.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var n=[].concat(this.topBlocks_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},t.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},t.Workspace.prototype.getBlocksByType=function(e,n){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),n&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var n=[].concat(this.topComments_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var e=[],n=0;n<t.length;n++)e.push.apply(e,t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push.apply(e,e[n].getChildren(!1));return e.filter((function(t){return!t.isInsertionMarker()}))},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},t.Workspace.prototype.createVariable=function(t,e,n){return this.variableMap_.createVariable(t,e,n)},t.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},t.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},t.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},t.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},t.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,n){return new t.Block(this,e,n)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var e,n=0;for(e in t){if(t[e]>this.remainingCapacityOfType(e))return!1;n+=t[e]}return!(n>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var n=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_,r=n.pop();if(r){for(var i=[r];n.length&&r.group&&r.group==n[n.length-1].group;)i.push(n.pop());for(n=0;r=i[n];n++)o.push(r);i=t.Events.filter(i,e),t.Events.recordUndo=!1;try{for(n=0;r=i[n];n++)r.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e,n=0;e=this.listeners_[n];n++)e(t)},t.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},t.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},t.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},t.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},t.Workspace.prototype.allInputsFilled=function(t){for(var e,n=this.getTopBlocks(!1),o=0;e=n[o];o++)if(!e.allInputsFilled(t))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var e,n=[];for(e in t.Workspace.WorkspaceDB_)n.push(t.Workspace.WorkspaceDB_[e]);return n},t.Bubble=function(e,n,o,r,i,s){this.workspace_=e,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=t.utils.math.toRadians(o),e.getBubbleCanvas().appendChild(this.createDom_(n,!(!i||!s))),this.setAnchorLocation(r),i&&s||(i=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,s=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(i,s),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.unbindEvent_(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.unbindEvent_(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,n){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(o={}),o=t.utils.dom.createSvgElement(t.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},o),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),n=2*t.Bubble.BORDER_WIDTH,t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,n.toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},t.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},t.Bubble.prototype.showContextMenu=function(t){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(t){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.bindEventWithChecks_(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},t.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},t.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetrics();t.viewLeft/=this.workspace_.scale,t.viewWidth/=this.workspace_.scale,t.viewTop/=this.workspace_.scale,t.viewHeight/=this.workspace_.scale;var e=this.getOptimalRelativeLeft_(t),n=this.getOptimalRelativeTop_(t),o=this.shape_.getBBox(),r={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},i={x:-this.width_-30,y:n};n={x:o.width,y:n};var s={x:e,y:o.height};e=o.width<o.height?n:s,o=o.width<o.height?s:n,n=this.getOverlap_(r,t),s=this.getOverlap_(i,t);var a=this.getOverlap_(e,t);t=this.getOverlap_(o,t),n==(t=Math.max(n,s,a,t))?(this.relativeLeft_=r.x,this.relativeTop_=r.y):s==t?(this.relativeLeft_=i.x,this.relativeTop_=i.y):a==t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=o.x,this.relativeTop_=o.y)},t.Bubble.prototype.getOverlap_=function(t,e){var n=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(n+this.width_,e.viewLeft+e.viewWidth)-Math.max(n,e.viewLeft))*(Math.min(t+this.height_,e.viewTop+e.viewHeight)-Math.max(t,e.viewTop))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var n=-this.width_/4;if(this.width_>e.viewWidth)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,r=o-this.width_,i=e.viewLeft+e.viewWidth,s=e.viewLeft+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(r=n+this.anchorXY_.x)+this.width_,s=e.viewLeft,i=e.viewLeft+e.viewWidth-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?r<s?n=-(s-this.anchorXY_.x+this.width_):o>i&&(n=-(i-this.anchorXY_.x)):r<s?n=s-this.anchorXY_.x:o>i&&(n=i-this.anchorXY_.x-this.width_),n},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var n=-this.height_/4;if(this.height_>e.viewHeight)return n;var o=this.anchorXY_.y+n,r=o+this.height_,i=e.viewTop;e=e.viewTop+e.viewHeight-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var s=this.anchorXY_.y;return o<i?n=i-s:r>e&&(n=e-s-this.height_),n},t.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.moveTo(t,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},t.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,n){var o=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,o+45),n=Math.max(n,o+20),this.width_=e,this.height_=n,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*t.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-o)+","+(n-o)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],n=this.width_/2,o=this.height_/2,r=-this.relativeLeft_,i=-this.relativeTop_;if(n==r&&o==i)e.push("M "+n+","+o);else{i-=o,r-=n,this.workspace_.RTL&&(r*=-1);var s=Math.sqrt(i*i+r*r),a=Math.acos(r/s);0>i&&(a=2*Math.PI-a);var l=a+Math.PI/2;l>2*Math.PI&&(l-=2*Math.PI);var u=Math.sin(l),c=Math.cos(l),h=this.getBubbleSize();l=(h.width+h.height)/t.Bubble.ARROW_THICKNESS,l=Math.min(l,h.width,h.height)/4,r=n+(h=1-t.Bubble.ANCHOR_RADIUS/s)*r,i=o+h*i,h=n+l*c;var p=o+l*u;n-=l*c,o-=l*u,(u=a+this.arrow_radians_)>2*Math.PI&&(u-=2*Math.PI),a=Math.sin(u)*s/t.Bubble.ARROW_BEND,s=Math.cos(u)*s/t.Bubble.ARROW_BEND,e.push("M"+h+","+p),e.push("C"+(h+s)+","+(p+a)+" "+r+","+i+" "+r+","+i),e.push("C"+r+","+i+" "+(n+s)+","+(o+a)+" "+n+","+o)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.unbindEvent_(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.unbindEvent_(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},t.Events.CommentBase=function(e){this.commentId=(this.isBlank="undefined"==typeof e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,n,o){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_="undefined"==typeof n?"":n,this.newContents_="undefined"==typeof o?"":o)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.newContents_=e.newValue},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,n){var o=e.getEventWorkspace_();n?((n=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(n,o)):(o=o.getCommentById(e.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){t.Events.CommentMove.superClass_.fromJson.call(this,e),e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(e[0]),Number(e[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var n=e.getXY();e.moveBy(t.x-n.x,t.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,n){this.draggingBubble_=e,this.workspace_=n,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e=this.workspace_.getToolbox();if(e&&"function"==typeof e.addStyle){var n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e.addStyle(n)}},t.BubbleDragger.prototype.dragBubble=function(e,n){n=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())},t.BubbleDragger.prototype.maybeDeleteBubble_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBubble_?(t&&setTimeout(t.closeLid.bind(t),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):t&&t.closeLid(),this.wouldDeleteBubble_},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=t.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BubbleDragger.prototype.endBubbleDrag=function(e,n){this.dragBubble(e,n),e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveTo(e.x,e.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(n)),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new t.Events.CommentMove(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.WorkspaceDragger=function(e){this.workspace_=e,this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.workspace_.scroll(e.x,e.y)},t.FlyoutDragger=function(e){t.FlyoutDragger.superClass_.constructor.call(this,e.getWorkspace()),this.scrollbar_=e.scrollbar,this.horizontalLayout_=e.horizontalLayout},t.utils.object.inherits(t.FlyoutDragger,t.WorkspaceDragger),t.FlyoutDragger.prototype.drag=function(e){e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalLayout_?this.scrollbar_.set(-e.x):this.scrollbar_.set(-e.y)},t.Action=function(t,e){this.name=t,this.desc=e},t.navigation={},t.navigation.loggingCallback=null,t.navigation.STATE_FLYOUT=1,t.navigation.STATE_WS=2,t.navigation.STATE_TOOLBOX=3,t.navigation.WS_MOVE_DISTANCE=40,t.navigation.currentState_=t.navigation.STATE_WS,t.navigation.actionNames={PREVIOUS:"previous",NEXT:"next",IN:"in",OUT:"out",INSERT:"insert",MARK:"mark",DISCONNECT:"disconnect",TOOLBOX:"toolbox",EXIT:"exit",TOGGLE_KEYBOARD_NAV:"toggle_keyboard_nav",MOVE_WS_CURSOR_UP:"move workspace cursor up",MOVE_WS_CURSOR_DOWN:"move workspace cursor down",MOVE_WS_CURSOR_LEFT:"move workspace cursor left",MOVE_WS_CURSOR_RIGHT:"move workspace cursor right"},t.navigation.MARKER_NAME="local_marker_1",t.navigation.getMarker=function(){return t.navigation.getNavigationWorkspace().getMarker(t.navigation.MARKER_NAME)},t.navigation.getNavigationWorkspace=function(){return t.getMainWorkspace()},t.navigation.focusToolbox_=function(){var e=t.navigation.getNavigationWorkspace().getToolbox();e&&(t.navigation.currentState_=t.navigation.STATE_TOOLBOX,t.navigation.resetFlyout_(!1),t.navigation.getMarker().getCurNode()||t.navigation.markAtCursor_(),e.getSelectedItem()||e.selectItemByPosition(0))},t.navigation.focusFlyout_=function(){t.navigation.currentState_=t.navigation.STATE_FLYOUT;var e=t.navigation.getNavigationWorkspace(),n=e.getToolbox();e=n?n.getFlyout():e.getFlyout(),t.navigation.getMarker().getCurNode()||t.navigation.markAtCursor_(),e&&e.getWorkspace()&&0<(e=e.getWorkspace().getTopBlocks(!0)).length&&(e=e[0],e=t.ASTNode.createStackNode(e),t.navigation.getFlyoutCursor_().setCurNode(e))},t.navigation.focusWorkspace_=function(){t.hideChaff();var e=t.navigation.getNavigationWorkspace(),n=e.getCursor(),o=!!e.getToolbox(),r=e.getTopBlocks(!0);t.navigation.resetFlyout_(o),t.navigation.currentState_=t.navigation.STATE_WS,0<r.length?n.setCurNode(t.ASTNode.createTopNode(r[0])):(o=new t.utils.Coordinate(100,100),e=t.ASTNode.createWorkspaceNode(e,o),n.setCurNode(e))},t.navigation.getFlyoutCursor_=function(){var e=t.navigation.getNavigationWorkspace(),n=null;return e.rendered&&(n=(e=(n=e.getToolbox())?n.getFlyout():e.getFlyout())?e.getWorkspace().getCursor():null),n},t.navigation.insertFromFlyout=function(){var e=t.navigation.getNavigationWorkspace(),n=e.getFlyout();if(n&&n.isVisible()){var o=t.navigation.getFlyoutCursor_().getCurNode().getLocation();o.isEnabled()?((n=n.createBlock(o)).render(),n.setConnectionTracking(!0),e.getCursor().setCurNode(t.ASTNode.createBlockNode(n)),t.navigation.modify_()||t.navigation.warn_("Something went wrong while inserting a block from the flyout."),t.navigation.focusWorkspace_(),e.getCursor().setCurNode(t.ASTNode.createTopNode(n)),t.navigation.removeMark_()):t.navigation.warn_("Can't insert a disabled block.")}else t.navigation.warn_("Trying to insert from the flyout when the flyout does not  exist or is not visible")},t.navigation.resetFlyout_=function(e){t.navigation.getFlyoutCursor_()&&(t.navigation.getFlyoutCursor_().hide(),e&&t.navigation.getNavigationWorkspace().getFlyout().hide())},t.navigation.modifyWarn_=function(){var e=t.navigation.getMarker().getCurNode(),n=t.navigation.getNavigationWorkspace().getCursor().getCurNode();return e?n?(e=e.getType(),n=n.getType(),e==t.ASTNode.types.FIELD?(t.navigation.warn_("Should not have been able to mark a field."),!1):e==t.ASTNode.types.BLOCK?(t.navigation.warn_("Should not have been able to mark a block."),!1):e==t.ASTNode.types.STACK?(t.navigation.warn_("Should not have been able to mark a stack."),!1):n==t.ASTNode.types.FIELD?(t.navigation.warn_("Cannot attach a field to anything else."),!1):n!=t.ASTNode.types.WORKSPACE||(t.navigation.warn_("Cannot attach a workspace to anything else."),!1)):(t.navigation.warn_("Cannot insert with no cursor node."),!1):(t.navigation.warn_("Cannot insert with no marked node."),!1)},t.navigation.moveBlockToWorkspace_=function(e,n){return!!e&&(e.isShadow()?(t.navigation.warn_("Cannot move a shadow block to the workspace."),!1):(e.getParent()&&e.unplug(!1),e.moveTo(n.getWsCoordinate()),!0))},t.navigation.modify_=function(){var e=t.navigation.getMarker().getCurNode(),n=t.navigation.getNavigationWorkspace().getCursor().getCurNode();if(!t.navigation.modifyWarn_())return!1;var o=e.getType(),r=n.getType(),i=n.getLocation(),s=e.getLocation();return e.isConnection()&&n.isConnection()?t.navigation.connect_(i,s):!e.isConnection()||r!=t.ASTNode.types.BLOCK&&r!=t.ASTNode.types.STACK?o==t.ASTNode.types.WORKSPACE?(n=n?n.getSourceBlock():null,t.navigation.moveBlockToWorkspace_(n,e)):(t.navigation.warn_("Unexpected state in Blockly.navigation.modify_."),!1):t.navigation.insertBlock(i,s)},t.navigation.disconnectChild_=function(e,n){var o=e.getSourceBlock(),r=n.getSourceBlock();o.getRootBlock()==r.getRootBlock()&&(-1<o.getDescendants(!1).indexOf(r)?t.navigation.getInferiorConnection_(n).disconnect():t.navigation.getInferiorConnection_(e).disconnect())},t.navigation.moveAndConnect_=function(e,n){if(!e||!n)return!1;var o=e.getSourceBlock();return!!e.getConnectionChecker().canConnect(e,n,!1)&&(t.navigation.disconnectChild_(e,n),n.isSuperior()||o.getRootBlock().positionNearConnection(e,n),n.connect(e),!0)},t.navigation.getInferiorConnection_=function(t){var e=t.getSourceBlock();return t.isSuperior()?e.previousConnection?e.previousConnection:e.outputConnection?e.outputConnection:null:t},t.navigation.getSuperiorConnection_=function(t){return t.isSuperior()?t:t.targetConnection?t.targetConnection:null},t.navigation.connect_=function(e,n){if(!e||!n)return!1;var o=t.navigation.getInferiorConnection_(e),r=t.navigation.getSuperiorConnection_(n),i=t.navigation.getSuperiorConnection_(e),s=t.navigation.getInferiorConnection_(n);return!!(o&&r&&t.navigation.moveAndConnect_(o,r)||i&&s&&t.navigation.moveAndConnect_(i,s)||t.navigation.moveAndConnect_(e,n))||(r=(o=e.getConnectionChecker()).canConnectWithReason(e,n,!1),t.navigation.warn_("Connection failed with error: "+o.getErrorMessage(r,e,n)),!1)},t.navigation.insertBlock=function(e,n){switch(n.type){case t.PREVIOUS_STATEMENT:if(t.navigation.connect_(e.nextConnection,n))return!0;break;case t.NEXT_STATEMENT:if(t.navigation.connect_(e.previousConnection,n))return!0;break;case t.INPUT_VALUE:if(t.navigation.connect_(e.outputConnection,n))return!0;break;case t.OUTPUT_VALUE:for(var o=0;o<e.inputList.length;o++){var r=e.inputList[o].connection;if(r&&r.type===t.INPUT_VALUE&&t.navigation.connect_(r,n))return!0}if(e.outputConnection&&t.navigation.connect_(e.outputConnection,n))return!0}return t.navigation.warn_("This block can not be inserted at the marked location."),!1},t.navigation.disconnectBlocks_=function(){var e=t.navigation.getNavigationWorkspace(),n=e.getCursor().getCurNode();if(n.isConnection()){var o=n.getLocation();o.isConnected()?(n=o.isSuperior()?o:o.targetConnection,(o=o.isSuperior()?o.targetConnection:o).getSourceBlock().isShadow()?t.navigation.log_("Cannot disconnect a shadow block"):(n.disconnect(),o.bumpAwayFrom(n),n.getSourceBlock().getRootBlock().bringToFront(),n=t.ASTNode.createConnectionNode(n),e.getCursor().setCurNode(n))):t.navigation.log_("Cannot disconnect unconnected connection")}else t.navigation.log_("Cannot disconnect blocks when the cursor is not on a connection")},t.navigation.markAtCursor_=function(){t.navigation.getMarker().setCurNode(t.navigation.getNavigationWorkspace().getCursor().getCurNode())},t.navigation.removeMark_=function(){var e=t.navigation.getMarker();e.setCurNode(null),e.hide()},t.navigation.setState=function(e){t.navigation.currentState_=e},t.navigation.moveCursorOnBlockDelete=function(e){var n=t.navigation.getNavigationWorkspace();if(n&&(n=n.getCursor())){var o=n.getCurNode();(o=o?o.getSourceBlock():null)===e?o.getParent()?(e=o.previousConnection||o.outputConnection)&&n.setCurNode(t.ASTNode.createConnectionNode(e.targetConnection)):n.setCurNode(t.ASTNode.createWorkspaceNode(o.workspace,o.getRelativeToSurfaceXY())):o&&-1<e.getChildren(!1).indexOf(o)&&n.setCurNode(t.ASTNode.createWorkspaceNode(o.workspace,o.getRelativeToSurfaceXY()))}},t.navigation.moveCursorOnBlockMutation=function(e){var n=t.navigation.getNavigationWorkspace().getCursor();if(n){var o=n.getCurNode();(o=o?o.getSourceBlock():null)===e&&n.setCurNode(t.ASTNode.createBlockNode(o))}},t.navigation.enableKeyboardAccessibility=function(){var e=t.navigation.getNavigationWorkspace();e.keyboardAccessibilityMode||(e.keyboardAccessibilityMode=!0,t.navigation.focusWorkspace_())},t.navigation.disableKeyboardAccessibility=function(){var e=t.navigation.getNavigationWorkspace();e.keyboardAccessibilityMode&&(e.keyboardAccessibilityMode=!1,e.getCursor().hide(),t.navigation.getMarker().hide(),t.navigation.getFlyoutCursor_()&&t.navigation.getFlyoutCursor_().hide())},t.navigation.log_=function(e){t.navigation.loggingCallback?t.navigation.loggingCallback("log",e):console.log(e)},t.navigation.warn_=function(e){t.navigation.loggingCallback?t.navigation.loggingCallback("warn",e):console.warn(e)},t.navigation.error_=function(e){t.navigation.loggingCallback?t.navigation.loggingCallback("error",e):console.error(e)},t.navigation.onKeyPress=function(e){return e=t.user.keyMap.serializeKeyEvent(e),!!(e=t.user.keyMap.getActionByKeyCode(e))&&t.navigation.onBlocklyAction(e)},t.navigation.onBlocklyAction=function(e){var n=t.navigation.getNavigationWorkspace(),o=n.options.readOnly,r=!1;return n.keyboardAccessibilityMode?o?-1<t.navigation.READONLY_ACTION_LIST.indexOf(e)&&(r=t.navigation.handleActions_(e)):r=t.navigation.handleActions_(e):e.name===t.navigation.actionNames.TOGGLE_KEYBOARD_NAV&&(t.navigation.enableKeyboardAccessibility(),r=!0),r},t.navigation.handleActions_=function(e){return e.name==t.navigation.actionNames.TOOLBOX||t.navigation.currentState_==t.navigation.STATE_TOOLBOX?t.navigation.toolboxOnAction_(e):e.name==t.navigation.actionNames.TOGGLE_KEYBOARD_NAV?(t.navigation.disableKeyboardAccessibility(),!0):t.navigation.currentState_==t.navigation.STATE_WS?t.navigation.workspaceOnAction_(e):t.navigation.currentState_==t.navigation.STATE_FLYOUT&&t.navigation.flyoutOnAction_(e)},t.navigation.flyoutOnAction_=function(e){var n=t.navigation.getNavigationWorkspace(),o=n.getToolbox();if((n=o?o.getFlyout():n.getFlyout())&&n.onBlocklyAction(e))return!0;switch(e.name){case t.navigation.actionNames.OUT:return t.navigation.focusToolbox_(),!0;case t.navigation.actionNames.MARK:return t.navigation.insertFromFlyout(),!0;case t.navigation.actionNames.EXIT:return t.navigation.focusWorkspace_(),!0;default:return!1}},t.navigation.toolboxOnAction_=function(e){var n=t.navigation.getNavigationWorkspace(),o=n.getToolbox();return!(!o||"function"!=typeof o.onBlocklyAction||!o.onBlocklyAction(e))||(e.name===t.navigation.actionNames.TOOLBOX?(n.getToolbox()?t.navigation.focusToolbox_():t.navigation.focusFlyout_(),!0):e.name===t.navigation.actionNames.IN?(t.navigation.focusFlyout_(),!0):e.name===t.navigation.actionNames.EXIT&&(t.navigation.focusWorkspace_(),!0))},t.navigation.moveWSCursor_=function(e,n){var o=t.navigation.getNavigationWorkspace(),r=o.getCursor(),i=o.getCursor().getCurNode();return i.getType()===t.ASTNode.types.WORKSPACE&&(i=i.getWsCoordinate(),r.setCurNode(t.ASTNode.createWorkspaceNode(o,new t.utils.Coordinate(e*t.navigation.WS_MOVE_DISTANCE+i.x,n*t.navigation.WS_MOVE_DISTANCE+i.y))),!0)},t.navigation.workspaceOnAction_=function(e){if(t.navigation.getNavigationWorkspace().getCursor().onBlocklyAction(e))return!0;switch(e.name){case t.navigation.actionNames.INSERT:return t.navigation.modify_(),!0;case t.navigation.actionNames.MARK:return t.navigation.handleEnterForWS_(),!0;case t.navigation.actionNames.DISCONNECT:return t.navigation.disconnectBlocks_(),!0;case t.navigation.actionNames.MOVE_WS_CURSOR_UP:return t.navigation.moveWSCursor_(0,-1);case t.navigation.actionNames.MOVE_WS_CURSOR_DOWN:return t.navigation.moveWSCursor_(0,1);case t.navigation.actionNames.MOVE_WS_CURSOR_LEFT:return t.navigation.moveWSCursor_(-1,0);case t.navigation.actionNames.MOVE_WS_CURSOR_RIGHT:return t.navigation.moveWSCursor_(1,0);default:return!1}},t.navigation.handleEnterForWS_=function(){var e=t.navigation.getNavigationWorkspace().getCursor().getCurNode(),n=e.getType();n==t.ASTNode.types.FIELD?e.getLocation().showEditor():e.isConnection()||n==t.ASTNode.types.WORKSPACE?t.navigation.markAtCursor_():n==t.ASTNode.types.BLOCK?t.navigation.warn_("Cannot mark a block."):n==t.ASTNode.types.STACK&&t.navigation.warn_("Cannot mark a stack.")},t.navigation.ACTION_PREVIOUS=new t.Action(t.navigation.actionNames.PREVIOUS,"Go to the previous location."),t.navigation.ACTION_OUT=new t.Action(t.navigation.actionNames.OUT,"Go to the parent of the current location."),t.navigation.ACTION_NEXT=new t.Action(t.navigation.actionNames.NEXT,"Go to the next location."),t.navigation.ACTION_IN=new t.Action(t.navigation.actionNames.IN,"Go to the first child of the current location."),t.navigation.ACTION_INSERT=new t.Action(t.navigation.actionNames.INSERT,"Connect the current location to the marked location."),t.navigation.ACTION_MARK=new t.Action(t.navigation.actionNames.MARK,"Mark the current location."),t.navigation.ACTION_DISCONNECT=new t.Action(t.navigation.actionNames.DISCONNECT,"Disconnect the block at the current location from its parent."),t.navigation.ACTION_TOOLBOX=new t.Action(t.navigation.actionNames.TOOLBOX,"Open the toolbox."),t.navigation.ACTION_EXIT=new t.Action(t.navigation.actionNames.EXIT,"Close the current modal, such as a toolbox or field editor."),t.navigation.ACTION_TOGGLE_KEYBOARD_NAV=new t.Action(t.navigation.actionNames.TOGGLE_KEYBOARD_NAV,"Turns on and off keyboard navigation."),t.navigation.ACTION_MOVE_WS_CURSOR_LEFT=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_LEFT,"Move the workspace cursor to the lefts."),t.navigation.ACTION_MOVE_WS_CURSOR_RIGHT=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,"Move the workspace cursor to the right."),t.navigation.ACTION_MOVE_WS_CURSOR_UP=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_UP,"Move the workspace cursor up."),t.navigation.ACTION_MOVE_WS_CURSOR_DOWN=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_DOWN,"Move the workspace cursor down."),t.navigation.READONLY_ACTION_LIST=[t.navigation.ACTION_PREVIOUS,t.navigation.ACTION_OUT,t.navigation.ACTION_IN,t.navigation.ACTION_NEXT,t.navigation.ACTION_TOGGLE_KEYBOARD_NAV],t.Gesture=function(e,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&t.unbindEvent_(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var n=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_))&&!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0)},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new t.FlyoutDragger(this.flyout_):new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new t.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&e.shiftKey&&this.targetBlock_.workspace.keyboardAccessibilityMode?this.creatorWorkspace_.getCursor().setCurNode(t.ASTNode.createTopNode(this.targetBlock_)):this.targetBlock_.select()),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=e,this.doStart(e),this.startWorkspace_.keyboardAccessibilityMode&&t.navigation.setState(t.navigation.STATE_WS)},t.Gesture.prototype.fireWorkspaceClick_=function(e){var n=new t.Events.Ui(null,"click",null,"workspace");n.workspaceId=e.id,t.Events.fire(n)},t.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},t.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):t.Events.fire(new t.Events.Ui(this.startBlock_,"click",void 0,"block")),this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){var n=this.creatorWorkspace_;e.shiftKey&&n.keyboardAccessibilityMode?(e=new t.utils.Coordinate(e.clientX,e.clientY),e=t.utils.screenToWsCoordinates(n,e),e=t.ASTNode.createWorkspaceNode(n,e),n.getCursor().setCurNode(e)):t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||n)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},t.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},t.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},t.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},t.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},t.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.inProgress=function(){for(var e,n=t.Workspace.getAll(),o=0;e=n[o];o++)if(e.currentGesture_)return!0;return!1},t.Field=function(e,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP="\xa0",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var n=e.tooltip;"string"==typeof n&&(n=t.utils.replaceMessageReferences(e.tooltip)),n&&this.setTooltip(n)},t.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},t.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.unbindEvent_(this.mouseDownWrapper_),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"===typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},t.Field.prototype.setValidator=function(t){this.validator_=t},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.classValidator=function(e){return t.utils.deprecation.warn("Field.prototype.classValidator","May 2019","December 2020","Blockly.Field.prototype.doClassValidation_"),e},t.Field.prototype.callValidator=function(e){t.utils.deprecation.warn("Field.prototype.callValidator","May 2019","December 2020");var n=this.classValidator(e);if(null===n)return null;if(void 0!==n&&(e=n),n=this.getValidator()){if(null===(n=n.call(this,e)))return null;void 0!==n&&(e=n)}return e},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},t.Field.prototype.updateWidth=function(){t.utils.deprecation.warn("Field.prototype.updateWidth","May 2019","December 2020","Blockly.Field.prototype.updateSize_ or Blockly.utils.dom.getTextWidth"),this.updateSize_()},t.Field.prototype.updateSize_=function(e){var n=this.getConstants(),o=2*(e=void 0!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),r=n.FIELD_TEXT_HEIGHT,i=0;this.textElement_&&(o+=i=t.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(r=Math.max(r,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=r,this.size_.width=o,this.positionTextElement_(e,i),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var n=this.getConstants(),o=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",n.FIELD_TEXT_BASELINE_CENTER?o:o-n.FIELD_TEXT_HEIGHT/2+n.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),o=t.utils.style.getPageOffset(this.borderRect_),r=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),r=e.width*n;e=e.height*n,t.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),r+=1*n,e+=1*n}return new t.utils.Rect(o.y,o.y+e,o.x,o.x+r)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},t.Field.prototype.setText=function(e){throw t.utils.deprecation.warn("Field.prototype.setText","May 2019","December 2020","Blockly.Field.prototype.setValue"),Error("setText method is deprecated")},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o!==e&&(n&&t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockChange(n,"field",this.name||null,o,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},t.Field.prototype.processValidation_=function(t,e){return null===e?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==e&&(t=e),t)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(t){return null===t||void 0===t?null:t=this.classValidator(t)},t.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(t){},t.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},t.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return e?t.Tooltip.getTooltipOfObject(e):t.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,n=e.inputList,o=0;o<e.inputList.length;o++)for(var r=n[o],i=r.fieldRow,s=0;s<i.length;s++)if(i[s]===this){t=r;break}return t},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onBlocklyAction=function(t){return!1},t.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.navigation.MARKER_NAME).draw()},t.FieldLabel=function(e,n,o){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,o),o||(this.class_=n||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(n,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(t){return null===t||void 0===t?null:String(t)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,n,o,r){if(e!=t.DUMMY_INPUT&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=n,this.sourceBlock_=o,this.connection=r,this.fieldRow=[]},t.Input.prototype.align=t.ALIGN_LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},t.Input.prototype.insertFieldAt=function(e,n,o){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return n||""==n&&o?("string"==typeof n&&(n=new t.FieldLabel(n)),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),(o=n).prefixField&&(e=this.insertFieldAt(e,o.prefixField)),this.fieldRow.splice(e,0,n),++e,o.suffixField&&(e=this.insertFieldAt(e,o.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),e):e},t.Input.prototype.removeField=function(t,e){for(var n,o=0;n=this.fieldRow[o];o++)if(n.name===t)return n.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(t){var e=[];if(this.visible_==t)return e;this.visible_=t;for(var n,o=0;n=this.fieldRow[o];o++)n.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),e},t.Input.prototype.markDirty=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.markDirty()},t.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},t.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},t.Input.prototype.dispose=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,n,o){if(t.Generator&&"undefined"!=typeof t.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!e.getBlockById(o)?o:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=t.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);t.utils.object.mixin(this,o)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),n=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=n),t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockCreate(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.Block.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_=null,t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockDelete(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var r,i=this.getConnections_(!0);for(n=0;r=i[n];n++)r.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var t,e=0;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.initModel&&n.initModel()},t.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},t.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==t.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e},t.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();t&&n&&!n.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},t.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e,n=0;e=this.inputList[n];n++)e.connection&&t.push(e.connection);return t},t.Block.prototype.lastConnectionInStack=function(){for(var t=this.nextConnection;t;){var e=t.targetBlock();if(!e)return t;t=e.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){console.warn("Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead.")},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(t){for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&e.connection.targetBlock()==t)return e;return null},t.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==e);return t},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&e.connection.type==t.NEXT_STATEMENT)return e.connection;return null},t.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},t.Block.prototype.getTopStackBlock=function(){var t=this;do{var e=t.getPreviousBlock()}while(e&&e.getNextBlock()==t&&(t=e));return t},t.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var e,n=0;e=this.inputList[n];n++)e.connection&&(e=e.connection.targetBlock())&&t.push(e);return(n=this.getNextBlock())&&t.push(n),t},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(t){for(var e,n=[this],o=this.getChildren(t),r=0;e=o[r];r++)n.push.apply(n,e.getDescendants(t));return n},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(t){this.deletable_=t},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(t){this.movable_=t},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(t){this.isShadow_=t},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(t,e){var n=this.getConnections_(!0);if(t=t.getConnections_(!0),n.length!=t.length)throw Error("Connection lists did not match in length.");for(var o=0;o<t.length;o++)if(t[o]==e)return n[o];return null},t.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},t.Block.prototype.setTooltip=function(t){this.tooltip=t},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(t){this.styleName_=t},t.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)if(o.name==t)return o;return null},t.Block.prototype.getVars=function(){for(var t,e=[],n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)o.referencesVariables()&&e.push(o.getValue());return e},t.Block.prototype.getVarModels=function(){for(var t,e=[],n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)o.referencesVariables()&&(o=this.workspace.getVariableById(o.getValue()))&&e.push(o);return e},t.Block.prototype.updateVarName=function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)o.referencesVariables()&&t.getId()==o.getValue()&&o.refreshVariableName()},t.Block.prototype.renameVarById=function(t,e){for(var n,o=0;n=this.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)r.referencesVariables()&&t==r.getValue()&&r.setValue(e)},t.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},t.Block.prototype.setFieldValue=function(t,e){var n=this.getField(e);if(!n)throw Error('Field "'+e+'" not found.');n.setValue(t)},t.Block.prototype.setPreviousStatement=function(e,n){if(e){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,n){if(e){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new t.Events.BlockChange(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(void 0!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.DUMMY_INPUT&&this.inputList[e].type==t.DUMMY_INPUT)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.INPUT_VALUE&&this.inputList[e].type==t.DUMMY_INPUT)return!0;return!1},t.Block.prototype.setOutputShape=function(t){this.outputShape_=t},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.setDisabled=function(e){t.utils.deprecation.warn("Block.prototype.setDisabled","May 2019","May 2020","Block.prototype.setEnabled"),this.setEnabled(!e)},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new t.Events.BlockChange(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new t.Events.BlockChange(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,n){function o(t){var e=t.getCheck();return!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),!!e&&(-1!=e.indexOf("Boolean")||-1!=e.indexOf("Number"))}function r(){a&&a.getType()==l.getType()&&a.getLocation()==l.getLocation()&&(a=null)}var i=[];n=n||"?";var s=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var a=t.ASTNode.createBlockNode(this),l=a;a;){switch(a.getType()){case t.ASTNode.types.INPUT:var u=a.getLocation();a.in()?o(u)&&i.push("("):i.push(n);break;case t.ASTNode.types.FIELD:(u=a.getLocation()).name!=t.Block.COLLAPSED_FIELD_NAME&&i.push(u.getText())}if(!(a=(u=a).in()||u.next())){for(a=u.out(),r();a&&!a.next();)a=a.out(),r(),a&&a.getType()==t.ASTNode.types.INPUT&&o(a.getLocation())&&i.push(")");a&&(a=a.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=s,n=2,s=i.length;n<s;n++)"("==i[n-2]&&")"==i[n]&&(i[n-2]=i[n-1],i.splice(n-1,2),s-=2);return i=i.join(" ").replace(/(\() | (\))/gim,"$1$2").trim()||"???",e&&i.length>e&&(i=i.substring(0,e-3)+"..."),i},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.INPUT_VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.NEXT_STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.DUMMY_INPUT,e||"")},t.Block.prototype.jsonInit=function(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var o=0;void 0!==e["message"+o];)this.interpolate_(e["message"+o],e["args"+o]||[],e["lastDummyAlign"+o],n),o++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(o=e.tooltip,o=t.utils.replaceMessageReferences(o),this.setTooltip(o)),void 0!==e.enableContextMenu&&(o=e.enableContextMenu,this.contextMenu=!!o),void 0!==e.helpUrl&&(o=e.helpUrl,o=t.utils.replaceMessageReferences(o),this.setHelpUrl(o)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),Array.isArray(e.extensions))for(e=e.extensions,n=0;n<e.length;++n)t.Extensions.apply(e[n],this,!1)},t.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(n){console.warn(e+"Illegal colour value: ",t)}}},t.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch(n){console.warn(e+"Style does not exist: ",t)}},t.Block.prototype.mixin=function(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],e)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,n,o,r){var i=t.utils.tokenizeInterpolation(e),s=[],a=0;e=[];for(var l=0;l<i.length;l++){var u=i[l];if("number"==typeof u){if(0>=u||u>n.length)throw Error('Block "'+this.type+'": Message index %'+u+" out of range.");if(s[u])throw Error('Block "'+this.type+'": Message index %'+u+" duplicated.");s[u]=!0,a++,e.push(n[u-1])}else(u=u.trim())&&e.push(u)}if(a!=n.length)throw Error('Block "'+this.type+'": Message does not reference all '+n.length+" arg(s).");for(e.length&&("string"==typeof e[e.length-1]||t.utils.string.startsWith(e[e.length-1].type,"field_"))&&(l={type:"input_dummy"},o&&(l.align=o),e.push(l)),o={LEFT:t.ALIGN_LEFT,RIGHT:t.ALIGN_RIGHT,CENTRE:t.ALIGN_CENTRE,CENTER:t.ALIGN_CENTRE},n=[],l=0;l<e.length;l++)if("string"==typeof(s=e[l]))n.push([s,void 0]);else{i=a=null;do{if(u=!1,"string"==typeof s)a=new t.FieldLabel(s);else switch(s.type){case"input_value":i=this.appendValueInput(s.name);break;case"input_statement":i=this.appendStatementInput(s.name);break;case"input_dummy":i=this.appendDummyInput(s.name);break;default:!(a=t.fieldRegistry.fromJson(s))&&s.alt&&(s=s.alt,u=!0)}}while(u);if(a)n.push([a,s.name]);else if(i){for(s.check&&i.setCheck(s.check),s.align&&(void 0===(a=o[s.align.toUpperCase()])?console.warn(r+"Illegal align value: ",s.align):i.setAlign(a)),s=0;s<n.length;s++)i.appendField(n[s][0],n[s][1]);n.length=0}}},t.Block.prototype.appendInput_=function(e,n){var o=null;return e!=t.INPUT_VALUE&&e!=t.NEXT_STATEMENT||(o=this.makeConnection_(e)),e==t.NEXT_STATEMENT&&this.statementInputCount++,e=new t.Input(e,n,this,o),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(t,e){if(t!=e){for(var n,o=-1,r=e?-1:this.inputList.length,i=0;n=this.inputList[i];i++)if(n.name==t){if(o=i,-1!=r)break}else if(e&&n.name==e&&(r=i,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==r)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(o,r)}},t.Block.prototype.moveNumberedInputBefore=function(t,e){if(t==e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var n=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,n)},t.Block.prototype.removeInput=function(e,n){for(var o,r=0;o=this.inputList[r];r++)if(o.name==e)return o.type==t.NEXT_STATEMENT&&this.statementInputCount--,o.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(t){for(var e,n=0;e=this.inputList[n];n++)if(e.name==t)return e;return null},t.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new t.Events.BlockChange(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(t,e){},t.Block.prototype.setMutator=function(t){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new t.Events.BlockMove(this);this.xy_.translate(e,n),o.recordNew(),t.Events.fire(o)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&(!(e=e.connection.targetBlock())||!e.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},t.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},t.blockRendering={},t.blockRendering.IPathObject=function(t,e){},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,n){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,n)},t.utils.aria.setState=function(e,n,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+n,o)},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},t.Menu.prototype.render=function(e){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&t.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var o,r=0;o=this.menuItems_[r];r++)n.appendChild(o.createDom());this.mouseOverHandler_=t.bindEventWithChecks_(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.bindEventWithChecks_(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.bindEventWithChecks_(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.bindEventWithChecks_(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.bindEventWithChecks_(n,"keydown",this,this.handleKeyEvent_),e.appendChild(n)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(t){this.roleName_=t},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.unbindEvent_(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.unbindEvent_(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.unbindEvent_(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.unbindEvent_(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.unbindEvent_(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var e,n=0;e=this.menuItems_[n];n++)e.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var n=this.getElement();e&&e!=n;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var o,r=0;o=this.menuItems_[r];r++)if(o.getElement()==e)return o;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,n=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),n),t.utils.aria.setState(n,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},t.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var n;n=this.menuItems_[t];){if(n.isEnabled()){this.setHighlighted(n);break}t+=e}},t.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){var o=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(n,o))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(t){this.focus()},t.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:n&&n.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),n=t.utils.style.getSize(e);return n.height=e.scrollHeight,n},t.MenuItem=function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),e.appendChild(n),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},t.MenuItem.prototype.setRole=function(t){this.roleName_=t},t.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},t.MenuItem.prototype.setChecked=function(t){this.checked_=t},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var n=this.getElement();n&&this.isEnabled()&&(e?(t.utils.dom.addClass(n,"blocklyMenuItemHighlight"),t.utils.dom.addClass(n,"goog-menuitem-highlight")):(t.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(n,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,n,o){if(t.WidgetDiv.show(t.ContextMenu,o,t.ContextMenu.dispose),n.length){var r=t.ContextMenu.populate_(n,o);t.ContextMenu.menu_=r,t.ContextMenu.position_(r,e,o),setTimeout((function(){r.focus()}),1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,n){var o=new t.Menu;o.setRole(t.utils.aria.Role.MENU);for(var r,i=0;r=e[i];i++){var s=new t.MenuItem(r.text);s.setRightToLeft(n),s.setRole(t.utils.aria.Role.MENUITEM),o.addChild(s),s.setEnabled(r.enabled),r.enabled&&s.onAction((function(e){t.ContextMenu.hide(),this.callback(this.scope)}),r)}return o},t.ContextMenu.position_=function(e,n,o){var r=t.utils.getViewportBBox();n=new t.utils.Rect(n.clientY+r.top,n.clientY+r.top,n.clientX+r.left,n.clientX+r.left),t.ContextMenu.createWidget_(e);var i=e.getSize();o&&(n.left+=i.width,n.right+=i.width,r.left+=i.width,r.right+=i.width),t.WidgetDiv.positionWithAnchor(r,n,i,o),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var n=e.getElement();t.utils.dom.addClass(n,"blocklyContextMenu"),t.bindEventWithChecks_(n,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,n){return function(){t.Events.disable();try{var o=t.Xml.domToBlock(n,e.workspace),r=e.getRelativeToSurfaceXY();r.x=e.RTL?r.x-t.SNAP_RADIUS:r.x+t.SNAP_RADIUS,r.y+=2*t.SNAP_RADIUS,o.moveBy(r.x,r.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!o.isShadow()&&t.Events.fire(new t.Events.BlockCreate(o)),o.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,n){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!t.utils.userAgent.IE};return o.text=t.Msg.ADD_COMMENT,o.callback=function(){var o=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),r=e.getInjectionDiv().getBoundingClientRect();r=new t.utils.Coordinate(n.clientX-r.left,n.clientY-r.top);var i=e.getOriginOffsetInPixels();(r=t.utils.Coordinate.difference(r,i)).scale(1/e.scale),o.moveBy(r.x,r.y),e.rendered&&(o.initSvg(),o.render(),o.select())},o},t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:0})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:0})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:0})},t.ContextMenuItems.toggleOption_=function(t,e){for(var n=0,o=0;o<e.length;o++)for(var r=e[o];r;)setTimeout(r.setCollapsed.bind(r,t),n),r=r.getNextBlock(),n+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var n=t[e];n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:0})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var n=t[e];n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:0})},t.ContextMenuItems.addDeletableBlocks_=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(var o=0;o<e.length;o++)t.ContextMenuItems.addDeletableBlocks_(e[o],n)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var n=[];e=e.getTopBlocks(!0);for(var o=0;o<e.length;o++)t.ContextMenuItems.addDeletableBlocks_(e[o],n);return n},t.ContextMenuItems.deleteNext_=function(e,n){t.Events.setGroup(n);var o=e.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,n)):t.ContextMenuItems.deleteNext_(e,n)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=t.ContextMenuItems.getDeletableBlocks_(e.workspace),o=t.utils.genUid();2>n.length?t.ContextMenuItems.deleteNext_(n,o):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),(function(e){e&&t.ContextMenuItems.deleteNext_(n,o)}))}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:0})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:0})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:0})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!=t.NEXT_STATEMENT&&e.inputList[n].type!=t.NEXT_STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:0})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:0})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var n=t.Events.getGroup();n||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),n||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:0})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block.dispose(!0,!0),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:0})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:0})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_={},t.ContextMenuItems.registerDefaultOptions()},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with id "'+t.id+'" is already registered.');this.registry_[t.id]=t},t.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with id "'+t+'" not found.');delete this.registry_[t]},t.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]?this.registry_[t]:null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var n=[],o=this.registry_;return Object.keys(o).forEach((function(r){if(r=o[r],t==r.scopeType){var i=r.preconditionFn(e);"hidden"!=i&&(r={text:"function"==typeof r.displayText?r.displayText(e):r.displayText,enabled:"enabled"==i,callback:r.callback,scope:e,weight:r.weight},n.push(r))}})),n.sort((function(t,e){return t.weight-e.weight})),n},new t.ContextMenuRegistry,t.RenderedConnection=function(e,n){t.RenderedConnection.superClass_.constructor.call(this,e,n),this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[n]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,o=!0}var r=t.selected==n;r||n.addSelect();var i=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,s=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;o&&(s=-s),n.RTL&&(i=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),n.moveBy(i,s),r||n.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,n){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n},t.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},t.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=e||0!=n){var o=this.targetBlock(),r=o.getSvgRoot();if(!r)throw Error("block is not rendered.");r=t.utils.getRelativeXY(r),o.getSvgRoot().setAttribute("transform","translate("+(r.x-e)+","+(r.y-n)+")"),o.moveConnections(-e,-n)}},t.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);this.type==t.INPUT_VALUE||this.type==t.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,n=t.utils.svgPaths.moveBy(0,-e)+t.utils.svgPaths.lineOnAxis("v",e)+n.pathDown+t.utils.svgPaths.lineOnAxis("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(-e,0)+t.utils.svgPaths.lineOnAxis("h",e)+n.pathLeft+t.utils.svgPaths.lineOnAxis("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var n=t[e],o=n.getConnections_(!0),r=0;r<o.length;r++)o[r].setTracking(!1);for(n=n.getIcons(),r=0;r<n.length;r++)n[r].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.INPUT_VALUE&&this.type!=t.NEXT_STATEMENT)return e;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var r=0;r<o.length;r++)e.push.apply(e,o[r].startTrackingAll());e.length||(e[0]=n)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,n){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>n)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(t){this.bumpAwayFrom(t)},t.RenderedConnection.prototype.disconnectInternal_=function(e,n){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var n=this.getSourceBlock();e=e.getSourceBlock();var o=n.rendered,r=e.rendered;o&&n.updateDisabled(),r&&e.updateDisabled(),o&&r&&(this.type==t.NEXT_STATEMENT||this.type==t.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(t){this.drawer_=t},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?(e.getType()!=t.ASTNode.types.PREVIOUS&&e.getType()!=t.ASTNode.types.OUTPUT||(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.Cursor.prototype.onBlocklyAction=function(e){if(this.getCurNode()&&this.getCurNode().getType()===t.ASTNode.types.FIELD&&this.getCurNode().getLocation().onBlocklyAction(e))return!0;switch(e.name){case t.navigation.actionNames.PREVIOUS:return this.prev(),!0;case t.navigation.actionNames.OUT:return this.out(),!0;case t.navigation.actionNames.NEXT:return this.next(),!0;case t.navigation.actionNames.IN:return this.in(),!0;default:return!1}},t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var n=t.in()||t.next();return e(n)?n:n?this.getNextNode_(n,e):e(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,e):null},t.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var n=t.prev();return e(n=n?this.getRightMostChild_(n):t.out())?n:n?this.getPreviousNode_(n,e):null},t.BasicCursor.prototype.validNode_=function(e){var n=!1;return(e=e&&e.getType())!=t.ASTNode.types.OUTPUT&&e!=t.ASTNode.types.INPUT&&e!=t.ASTNode.types.FIELD&&e!=t.ASTNode.types.NEXT&&e!=t.ASTNode.types.PREVIOUS&&e!=t.ASTNode.types.WORKSPACE||(n=!0),n},t.BasicCursor.prototype.findSiblingOrParent_=function(t){if(!t)return null;var e=t.next();return e||this.findSiblingOrParent_(t.out())},t.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var n=!1,o=e&&e.getType();return e&&(e=e.getLocation(),o==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n},t.BlockSvg=function(e,n,o){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var r=this.pathObject.svgPath;r.tooltip=this,t.Tooltip.bindMouseEvents(r),t.BlockSvg.superClass_.constructor.call(this,e,n,o),this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,n=0;e=this.inputList[n];n++)e.init();for(e=this.getIcons(),n=0;n<e.length;n++)e[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||t.bindEventWithChecks_(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}(e=new t.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id,t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new t.Events.Ui(null,"selected",this.id,null);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},t.BlockSvg.prototype.setParent=function(e){var n=this.parentBlock_;if(e!=n){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var r=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(o),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-r.x,e.y-r.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(r.x,r.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,r=this.getSvgRoot();if(r)do{var i=t.utils.getRelativeXY(r);e+=i.x,n+=i.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==r&&(e+=(i=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=i.y),r=r.parentNode}while(r&&r!=this.workspace.getCanvas()&&r!=o);return new t.utils.Coordinate(e,n)},t.BlockSvg.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var o=t.Events.isEnabled();if(o)var r=new t.Events.BlockMove(this);var i=this.getRelativeToSurfaceXY();this.translate(i.x+e,i.y+n),this.moveConnections(e,n),o&&(r.recordNew(),t.Events.fire(r)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},t.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},t.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),n=e/2,o=this.getRelativeToSurfaceXY();t=Math.round((o.x-n)/e)*e+n-o.x,e=Math.round((o.y-n)/e)*e+n-o.y,t=Math.round(t),e=Math.round(e),0==t&&0==e||this.moveBy(t,e)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=e.x-n.width,r=e.x;else o=e.x,r=e.x+n.width;return new t.utils.Rect(e.y,e.y+n.height,o,r)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var t,e=0;t=this.inputList[e];e++)t.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var e,n=this.isCollapsed(),o=t.Block.COLLAPSED_INPUT_NAME,r=t.Block.COLLAPSED_FIELD_NAME,i=0;e=this.inputList[i];i++)e.name!=o&&e.setVisible(!n);if(n){for(e=this.getIcons(),i=0;n=e[i];i++)n.setVisible(!1);i=this.toString(t.COLLAPSE_CHARS),(e=this.getField(r))?e.setValue(i):(e=this.getInput(o)||this.appendDummyInput(o)).appendField(new t.FieldLabel(i),r)}else this.removeInput(o)},t.BlockSvg.prototype.tab=function(e,n){var o=new t.TabNavigateCursor;o.setCurNode(t.ASTNode.createFieldNode(e)),e=o.getCurNode(),o.onBlocklyAction(n?t.navigation.ACTION_NEXT:t.navigation.ACTION_PREVIOUS),(n=o.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},t.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},t.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var n=this.generateContextMenu();n&&n.length&&(t.ContextMenu.show(e,n,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(t,e);for(n=this.getIcons(),o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(t,e)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var n=0;n<e.length;n++)e[n].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,n){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var o=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),this.workspace.keyboardAccessibilityMode&&t.navigation.moveCursorOnBlockDelete(this),n&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]);this.warningTextDb_=null}for(n=this.getIcons(),r=0;r<n.length;r++)n[r].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-n.x:n.x),e.setAttribute("y",n.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var e,n=0;e=t[n];n++)e.rendered&&e.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),e=null!=e,!!this.commentIcon_==e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,n){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r];if(this.workspace.isDragging()){var i=this;this.warningTextDb_[o]=setTimeout((function(){i.workspace&&(delete i.warningTextDb_[o],i.setWarningText(e,o))}),100)}else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){r=this.getSurroundParent();for(var s=null;r;)r.isCollapsed()&&(s=r),r=r.getSurroundParent();s&&s.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),n=!0),this.warning.setText(e,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(r=this.warning.getText())||this.warning.dispose(),n=n!=r);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setDisabled=function(e){t.utils.deprecation.warn("BlockSvg.prototype.setDisabled","May 2019","May 2020","BlockSvg.prototype.setEnabled"),this.setEnabled(!e)},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),n=e.parentNode,o=n.childNodes;o[o.length-1]!==e&&n.appendChild(e),t=t.getParent()}while(t)},t.BlockSvg.prototype.setPreviousStatement=function(e,n){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,n){t.BlockSvg.superClass_.setNextStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,n){t.BlockSvg.superClass_.setOutput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,n){return e=t.BlockSvg.superClass_.removeInput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,n){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,n){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;n&&(n.setTracking(t),(n=n.targetBlock())&&n.setConnectionTracking(t))}},t.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var n;n=this.inputList[t];t++)n.connection&&e.push(n.connection)}return e},t.BlockSvg.prototype.lastConnectionInStack=function(){return t.BlockSvg.superClass_.lastConnectionInStack.call(this)},t.BlockSvg.prototype.getMatchingConnection=function(e,n){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,n)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var n,o=this.getConnections_(!1),r=0;n=o[r];r++){n.isConnected()&&n.isSuperior()&&n.targetBlock().bumpNeighbours();for(var i,s=n.neighbours(t.SNAP_RADIUS),a=0;i=s[a];a++)n.isConnected()&&i.isConnected()||i.getSourceBlock().getRootBlock()!=e&&(n.isSuperior()?i.bumpAwayFrom(n):n.bumpAwayFrom(i))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,n=t.Events.getGroup();setTimeout((function(){t.Events.setGroup(n),e.snapToGrid(),t.Events.setGroup(!1)}),t.BUMP_DELAY/2),setTimeout((function(){t.Events.setGroup(n),e.bumpNeighbours(),t.Events.setGroup(!1)}),t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,n){e.type!=t.NEXT_STATEMENT&&e.type!=t.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.navigation.MARKER_NAME).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;n&&(n.moveToOffset(t),n.isConnected()&&n.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},t.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},t.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,n=this.getNextBlock();if(n){n=n.getHeightWidth();var o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=n.height-o,e=Math.max(e,n.width)}return{height:t,width:e}},t.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},t.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,n){t.registry.register(t.registry.Type.RENDERER,e,n)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,n,o){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(n,o),e},t.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},t.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},t.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var n=this.calculateIndexForYPos_(e);if(n>=this.connections_.length)return-1;e=t.y;for(var o=n;0<=o&&this.connections_[o].y==e;){if(this.connections_[o]==t)return o;o--}for(;n<this.connections_.length&&this.connections_[n].y==e;){if(this.connections_[n]==t)return n;n++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,n=this.connections_.length;e<n;){var o=Math.floor((e+n)/2);if(this.connections_[o].y<t)e=o+1;else{if(!(this.connections_[o].y>t)){e=o;break}n=o}}return e},t.ConnectionDB.prototype.removeConnection=function(t,e){if(-1==(t=this.findIndexOfConnection_(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},t.ConnectionDB.prototype.getNeighbours=function(t,e){function n(t){var n=r-o[t].x,s=i-o[t].y;return Math.sqrt(n*n+s*s)<=e&&l.push(o[t]),s<e}var o=this.connections_,r=t.x,i=t.y;t=0;for(var s=o.length-2,a=s;t<a;)o[a].y<i?t=a:s=a,a=Math.floor((t+s)/2);var l=[];if(s=t=a,o.length){for(;0<=t&&n(t);)t--;do{s++}while(s<o.length&&n(s))}return l},t.ConnectionDB.prototype.isInYRange_=function(t,e,n){return Math.abs(this.connections_[t].y-e)<=n},t.ConnectionDB.prototype.searchForClosest=function(t,e,n){if(!this.connections_.length)return{connection:null,radius:e};var o=t.y,r=t.x;t.x=r+n.x,t.y=o+n.y;var i=this.calculateIndexForYPos_(t.y);n=null;for(var s,a=e,l=i-1;0<=l&&this.isInYRange_(l,t.y,e);)s=this.connections_[l],this.connectionChecker_.canConnect(t,s,!0,a)&&(n=s,a=s.distanceFrom(t)),l--;for(;i<this.connections_.length&&this.isInYRange_(i,t.y,e);)s=this.connections_[i],this.connectionChecker_.canConnect(t,s,!0,a)&&(n=s,a=s.distanceFrom(t)),i++;return t.x=r,t.y=o,{connection:n,radius:a}},t.ConnectionDB.init=function(e){var n=[];return n[t.INPUT_VALUE]=new t.ConnectionDB(e),n[t.OUTPUT_VALUE]=new t.ConnectionDB(e),n[t.NEXT_STATEMENT]=new t.ConnectionDB(e),n[t.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),n},t.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_={},this.workspace_=t},t.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},t.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(!e)throw Error("Marker with id "+t+" does not exist. Can only unregistermarkers that exist.");e.dispose(),delete this.markers_[t]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]},t.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var t,e=Object.keys(this.markers_),n=0;t=e[n];n++)this.unregisterMarker(t);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.ThemeManager=function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var n,o=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(o&&t.utils.dom.removeClass(e,o.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),o=0;e=this.subscribedWorkspaces_[o];o++)e.refreshTheme();for(o=0,e=Object.keys(this.componentDB_);n=e[o];o++)for(var r,i=0;r=this.componentDB_[n][i];i++){var s=r.element;r=r.propertyName;var a=this.theme_&&this.theme_.getComponentStyle(n);s.style[r]=a||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},t.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},t.ThemeManager.prototype.subscribe=function(t,e,n){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:n}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[n]=e||""},t.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var e,n=Object.keys(this.componentDB_),o=0;e=n[o];o++){for(var r=this.componentDB_[e],i=r.length-1;0<=i;i--)r[i].element===t&&r.splice(i,1);this.componentDB_[e].length||delete this.componentDB_[e]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,n){t.TouchGesture.superClass_.constructor.call(this,e,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.unbindEvent_(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var n=Object.keys(this.cachedPoints_);if(n=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*t.TouchGesture.ZOOM_IN_MULTIPLIER:o*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var r=this.startWorkspace_,i=t.utils.mouseToSvg(e,r.getParentSvg(),r.getInverseScreenCTM());r.zoom(i.x,i.y,o)}this.previousScale_=n,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,n){if(e.length){try{var o=new t.utils.global.Audio}catch(l){return}for(var r,i=0;i<e.length;i++){var s=e[i],a=s.match(/\.(\w+)$/);if(a&&o.canPlayType("audio/"+a[1])){r=new t.utils.global.Audio(s);break}}r&&r.play&&(this.SOUNDS_[n]=r)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var n=this.SOUNDS_[e];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch((function(){})):n.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,n){var o=this.SOUNDS_[e];o?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(o=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,n)},t.WorkspaceSvg=function(e,n,o){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.getMetrics=e.getMetrics||t.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_={},this.flyoutButtonCallbacks_={},t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[]},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},t.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},t.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(t){return void 0!==t.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new t.Events.Ui(null,"theme",null,null);e.workspaceId=this.id,t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var e,n=0;e=t[n];n++){var o=e.getStyleName();o&&(e.setStyle(o),e.mutator&&e.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var n=0,o=0,r=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(r=this.scale);do{var i=t.utils.getRelativeXY(e);e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(r=1),n+=i.x*r,o+=i.y*r,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(n,o)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},t.WorkspaceSvg.prototype.createDom=function(e){if(this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories){if(!t.Toolbox)throw Error("Missing require for Blockly.Toolbox");this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options))(this)}return this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.markerManager_.setCursor(new t.Cursor),this.markerManager_.registerMarker(t.navigation.MARKER_NAME,new t.Marker),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,n){return new t.BlockSvg(this,e,n)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},t.WorkspaceSvg.prototype.addFlyout=function(e){var n=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides});if(n.toolboxPosition=this.options.toolboxPosition,this.horizontalLayout){if(!t.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new t.HorizontalFlyout(n)}else{if(!t.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new t.VerticalFlyout(n)}return this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){},t.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var n="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),r=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,n,o,this.scale),this.workspaceDragSurface_.translateSurface(r.x,r.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,n){if(void 0===n){for(var o,r=0;o=this.highlightedBlocks_[r];r++)o.setHighlighted(!1);this.highlightedBlocks_.length=0}(o=e?this.getBlockById(e):null)&&((e=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(o)&&this.highlightedBlocks_.push(o):t.utils.arrayRemove(this.highlightedBlocks_,o),o.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var n=t.Xml.domToBlock(e,this),o=this.getMarker(t.navigation.MARKER_NAME).getCurNode();if(this.keyboardAccessibilityMode&&o&&o.isConnection()){var r=o.getLocation();return void t.navigation.insertBlock(n,r)}var i=parseInt(e.getAttribute("x"),10),s=parseInt(e.getAttribute("y"),10);if(!isNaN(i)&&!isNaN(s)){this.RTL&&(i=-i);do{e=!1;var a,l=this.getAllBlocks(!1);for(o=0;a=l[o];o++){var u=a.getRelativeToSurfaceXY();if(1>=Math.abs(i-u.x)&&1>=Math.abs(s-u.y)){e=!0;break}}if(!e){var c,h=n.getConnections_(!1);for(o=0;c=h[o];o++)if(c.closest(t.SNAP_RADIUS,new t.utils.Coordinate(i,s)).connection){e=!0;break}}e&&(i=this.RTL?i-t.SNAP_RADIUS:i+t.SNAP_RADIUS,s+=2*t.SNAP_RADIUS)}while(e);n.moveBy(i,s)}}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new t.Events.BlockCreate(n)),n.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var n=t.WorkspaceCommentSvg.fromXml(e,this),o=parseInt(e.getAttribute("x"),10),r=parseInt(e.getAttribute("y"),10);isNaN(o)||isNaN(r)||(this.RTL&&(o=-o),n.moveBy(o+50,r+50))}finally{t.Events.enable()}t.Events.isEnabled(),n.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,n){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,n),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,n,o){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,n,o),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_&&"function"==typeof this.toolbox_.getClientRect?this.toolbox_.getClientRect():null},t.WorkspaceSvg.prototype.isDeleteArea=function(e){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TOOLBOX:t.DELETE_AREA_NONE},t.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},t.WorkspaceSvg.prototype.startDrag=function(e,n){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(n,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var r=t.utils.getScrollDeltaPixels(e);!n||!e.ctrlKey&&o?(n=this.scrollX-r.x,o=this.scrollY-r.y,e.shiftKey&&!r.x&&(n=this.scrollX-r.y,o=this.scrollY),this.scroll(n,o)):(r=-r.y/50,n=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,r)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var n=e[0].getBoundingRectangle(),o=1;o<e.length;o++){var r=e[o].getBoundingRectangle();r.top<n.top&&(n.top=r.top),r.bottom>n.bottom&&(n.bottom=r.bottom),r.left<n.left&&(n.left=r.left),r.right>n.right&&(n.right=r.right)}return n},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var e,n=this.getTopBlocks(!0),o=0,r=0;e=n[r];r++)if(e.isMovable()){var i=e.getRelativeToSurfaceXY();e.moveBy(-i.x,o-i.y),e.snapToGrid(),o=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var n=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),t.ContextMenu.show(e,n,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(t,e,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var o=this.scale*n;if(this.scale!=o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var r=this.getCanvas().getCTM(),i=this.getParentSvg().createSVGPoint();i.x=t,i.y=e,t=(i=i.matrixTransform(r.inverse())).x,e=i.y,r=r.translate(t*(1-n),e*(1-n)).scale(n),this.scrollX=r.e,this.scrollY=r.f,this.setScale(o)}},t.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var n=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else n=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(n,e,t)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),r=o.right-o.left;if(o=o.bottom-o.top,r){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),r+=this.flyout_.getWidth()/this.scale)),n/=r,e/=o,t.Events.disable();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.contentWidth-t.viewWidth)/2,n=(t.contentHeight-t.viewHeight)/2;e=-e-t.contentLeft,n=-n-t.contentTop,this.scroll(e,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),n=t.getHeightWidth(),o=this.scale;t=(e.x+(this.RTL?-1:1)*n.width/2)*o,e=(e.y+n.height/2)*o,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(e),this.scrollbar.vScroll.resizeViewVertical(e)):(this.scrollbar.hScroll.resizeContentHorizontal(e),this.scrollbar.vScroll.resizeContentVertical(e)))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,n){t.hideChaff(!0);var o=this.getMetrics(),r=o.contentWidth+o.contentLeft-o.viewWidth,i=o.contentHeight+o.contentTop-o.viewHeight;e=Math.min(e,-o.contentLeft),n=Math.min(n,-o.contentTop),e=Math.max(e,-r),n=Math.max(n,-i),this.scrollX=e,this.scrollY=n,this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(e+o.contentLeft)*this.scrollbar.hScroll.ratio),this.scrollbar.vScroll.setHandlePosition(-(n+o.contentTop)*this.scrollbar.vScroll.ratio)),e+=o.absoluteLeft,n+=o.absoluteTop,this.translate(e,n)},t.WorkspaceSvg.getDimensionsPx_=function(e){var n=0,o=0;return e&&(n=e.getWidth(),o=e.getHeight()),new t.utils.Size(n,o)},t.WorkspaceSvg.getContentDimensions_=function(e,n){return e.isContentBounded()?t.WorkspaceSvg.getContentDimensionsBounded_(e,n):t.WorkspaceSvg.getContentDimensionsExact_(e)},t.WorkspaceSvg.getContentDimensionsExact_=function(t){var e=t.getBlocksBoundingBox(),n=t.scale;t=e.top*n;var o=e.bottom*n,r=e.left*n;return{top:t,bottom:o,left:r,right:e=e.right*n,width:e-r,height:o-t}},t.WorkspaceSvg.getContentDimensionsBounded_=function(e,n){e=t.WorkspaceSvg.getContentDimensionsExact_(e);var o=n.width,r=o/2,i=(n=n.height)/2,s=Math.min(e.left-r,e.right-o),a=Math.min(e.top-i,e.bottom-n);return{left:s,top:a,height:Math.max(e.bottom+i,e.top+n)-a,width:Math.max(e.right+r,e.left+o)-s}},t.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var e=t.WorkspaceSvg.getDimensionsPx_(this.toolbox_),n=t.WorkspaceSvg.getDimensionsPx_(this.flyout_),o=t.svgSize(this.getParentSvg()),r={height:o.height,width:o.width};this.toolbox_?this.toolboxPosition==t.TOOLBOX_AT_TOP||this.toolboxPosition==t.TOOLBOX_AT_BOTTOM?r.height-=e.height:this.toolboxPosition!=t.TOOLBOX_AT_LEFT&&this.toolboxPosition!=t.TOOLBOX_AT_RIGHT||(r.width-=e.width):this.flyout_&&(this.toolboxPosition==t.TOOLBOX_AT_TOP||this.toolboxPosition==t.TOOLBOX_AT_BOTTOM?r.height-=n.height:this.toolboxPosition!=t.TOOLBOX_AT_LEFT&&this.toolboxPosition!=t.TOOLBOX_AT_RIGHT||(r.width-=n.width));var i=t.WorkspaceSvg.getContentDimensions_(this,r),s=0;this.toolbox_&&this.toolboxPosition==t.TOOLBOX_AT_LEFT?s=e.width:this.flyout_&&this.toolboxPosition==t.TOOLBOX_AT_LEFT&&(s=n.width);var a=0;return this.toolbox_&&this.toolboxPosition==t.TOOLBOX_AT_TOP?a=e.height:this.flyout_&&this.toolboxPosition==t.TOOLBOX_AT_TOP&&(a=n.height),{contentHeight:i.height,contentWidth:i.width,contentTop:i.top,contentLeft:i.left,viewHeight:r.height,viewWidth:r.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:a,absoluteLeft:s,svgHeight:o.height,svgWidth:o.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:this.toolboxPosition,flyoutWidth:n.width,flyoutHeight:n.height}},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-e.contentWidth*t.x-e.contentLeft),"number"==typeof t.y&&(this.scrollY=-e.contentHeight*t.y-e.contentTop),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},t.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var n="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,n){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");n=new t.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,t.utils.aria.setState(o,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(o),e=t.createDom_(o,n);var r=new t.BlockDragSurfaceSvg(o),i=new t.WorkspaceDragSurfaceSvg(o),s=t.createMainWorkspace_(e,n,r,i);return t.user.keyMap.setKeyMap(n.keyMap),t.init_(s),t.mainWorkspace=s,t.svgResize(s),o.addEventListener("focusin",(function(){t.mainWorkspace=s})),s},t.createDom_=function(e,n){e.setAttribute("dir","LTR"),t.Component.defaultRightToLeft=n.RTL,t.Css.inject(n.hasCss,n.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var o=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),r=String(Math.random()).substring(2);return n.gridPattern=t.Grid.createDom(r,n.gridOptions,o),e},t.createMainWorkspace_=function(e,n,o,r){n.parentWorkspace=null;var i=new t.WorkspaceSvg(n,o,r);return n=i.options,i.scale=n.zoomOptions.startScale,e.appendChild(i.createDom("blocklyMainBackground")),t.utils.dom.addClass(i.getInjectionDiv(),i.getRenderer().getClassName()),t.utils.dom.addClass(i.getInjectionDiv(),i.getTheme().getClassName()),!n.hasCategories&&n.languageTree&&(o=i.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(o,e)),n.hasTrashcan&&i.addTrashcan(),n.zoomOptions&&n.zoomOptions.controls&&i.addZoomControls(),i.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),i.translate(0,0),n.readOnly||i.isMovable()||i.addChangeListener((function(e){if(!i.isDragging()&&!i.isMovable()&&-1!=t.Events.BUMP_EVENTS.indexOf(e.type)){var n=Object.create(null),o=i.getMetrics(),r=i.scale;if(n.RTL=i.RTL,n.viewLeft=o.viewLeft/r,n.viewTop=o.viewTop/r,n.viewRight=(o.viewLeft+o.viewWidth)/r,n.viewBottom=(o.viewTop+o.viewHeight)/r,i.isContentBounded()?(o=i.getBlocksBoundingBox(),n.contentLeft=o.left,n.contentTop=o.top,n.contentRight=o.right,n.contentBottom=o.bottom):(n.contentLeft=o.contentLeft/r,n.contentTop=o.contentTop/r,n.contentRight=(o.contentLeft+o.contentWidth)/r,n.contentBottom=(o.contentTop+o.contentHeight)/r),n.contentTop<n.viewTop||n.contentBottom>n.viewBottom||n.contentLeft<n.viewLeft||n.contentRight>n.viewRight){switch(o=null,e&&(o=t.Events.getGroup(),t.Events.setGroup(e.group)),e.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:var s=i.getBlockById(e.blockId);s&&(s=s.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:s=i.getCommentById(e.commentId)}if(s){(r=s.getBoundingRectangle()).height=r.bottom-r.top,r.width=r.right-r.left;var a=n.viewTop,l=n.viewBottom-r.height;l=Math.max(a,l),a=t.utils.math.clamp(a,r.top,l)-r.top,l=n.viewLeft;var u=n.viewRight-r.width;n.RTL?l=Math.min(u,l):u=Math.max(l,u),n=t.utils.math.clamp(l,r.left,u)-r.left,s.moveBy(n,a)}e&&(!e.group&&s&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==o&&t.Events.setGroup(o))}}})),t.svgResize(i),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),i},t.init_=function(e){var n=e.options,o=e.getParentSvg();if(t.bindEventWithChecks_(o.parentNode,"contextmenu",null,(function(e){t.utils.isTargetInput(e)||e.preventDefault()})),o=t.bindEventWithChecks_(window,"resize",null,(function(){t.hideChaff(!0),t.svgResize(e)})),e.setResizeHandlerWrapper(o),t.inject.bindDocumentEvents_(),n.languageTree){o=e.getToolbox();var r=e.getFlyout(!0);o?o.init():r&&(r.init(e),r.show(n.languageTree),"function"==typeof r.scrollToStart&&r.scrollToStart())}o=t.Scrollbar.scrollbarThickness,n.hasTrashcan&&(o=e.trashcan.init(o)),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(o),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&t.inject.loadSounds_(n.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.bindEventWithChecks_(document,"scroll",null,(function(){for(var e,n=t.Workspace.getAll(),o=0;e=n[o];o++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()})),t.bindEventWithChecks_(document,"keydown",null,t.onKeyDown),t.bindEvent_(document,"touchend",null,t.longStop_),t.bindEvent_(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.bindEventWithChecks_(window,"orientationchange",document,(function(){t.svgResize(t.getMainWorkspace())}))),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,n){var o=n.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var r=[];e=function(){for(;r.length;)t.unbindEvent_(r.pop());o.preload()},r.push(t.bindEventWithChecks_(document,"mousemove",null,e,!0)),r.push(t.bindEventWithChecks_(document,"touchstart",null,e,!0))},t.Names=function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(t){this.variableMap_=t},t.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},t.Names.prototype.getName=function(e,n){if(n==t.VARIABLE_CATEGORY_NAME){var o=this.getNameForUserVariable_(e);o&&(e=o)}o=e.toLowerCase()+"_"+n;var r=n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";return o in this.db_?r+this.db_[o]:(e=this.getDistinctName(e,n),this.db_[o]=e.substr(r.length),e)},t.Names.prototype.getDistinctName=function(e,n){e=this.safeName_(e);for(var o="";this.dbReverse_[e+o]||e+o in this.reservedDict_;)o=o?o+1:2;return e+=o,this.dbReverse_[e]=!0,(n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(t,e){return t.toLowerCase()==e.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var n=e.getBlocksByType("procedures_defnoreturn",!1).map((function(t){return t.getProcedureDef()}));return e=e.getBlocksByType("procedures_defreturn",!1).map((function(t){return t.getProcedureDef()})),n.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[n,e]},t.Procedures.procTupleComparator_=function(t,e){return t[0].toLowerCase().localeCompare(e[0].toLowerCase())},t.Procedures.findLegalName=function(e,n){if(n.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,n.workspace,n);){var o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,n,o){return!t.Procedures.isNameUsed(e,n,o)},t.Procedures.isNameUsed=function(e,n,o){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r]!=o&&n[r].getProcedureDef){var i=n[r].getProcedureDef();if(t.Names.equals(i[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var n=t.Procedures.findLegalName(e,this.getSourceBlock()),o=this.getValue();if(o!=e&&o!=n){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var r=0;r<e.length;r++)e[r].renameProcedure&&e[r].renameProcedure(o,n)}return n},t.Procedures.flyoutCategory=function(e){function n(e,n){for(var r=0;r<e.length;r++){var i=e[r][0],s=e[r][1],a=t.utils.xml.createElement("block");a.setAttribute("type",n),a.setAttribute("gap",16);var l=t.utils.xml.createElement("mutation");for(l.setAttribute("name",i),a.appendChild(l),i=0;i<s.length;i++){var u=t.utils.xml.createElement("arg");u.setAttribute("name",s[i]),l.appendChild(u)}o.push(a)}}var o=[];if(t.Blocks.procedures_defnoreturn){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_defnoreturn"),r.setAttribute("gap",16);var i=t.utils.xml.createElement("field");i.setAttribute("name","NAME"),i.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),r.appendChild(i),o.push(r)}return t.Blocks.procedures_defreturn&&((r=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),r.setAttribute("gap",16),(i=t.utils.xml.createElement("field")).setAttribute("name","NAME"),i.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),r.appendChild(i),o.push(r)),t.Blocks.procedures_ifreturn&&((r=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),r.setAttribute("gap",16),o.push(r)),o.length&&o[o.length-1].setAttribute("gap",24),n((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),o},t.Procedures.updateMutatorFlyout_=function(e){for(var n,o=[],r=e.getBlocksByType("procedures_mutatorarg",!1),i=0;n=r[i];i++)o.push(n.getFieldValue("NAME"));r=t.utils.xml.createElement("xml"),(i=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(n=t.utils.xml.createElement("field")).setAttribute("name","NAME"),o=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,o),o=t.utils.xml.createTextNode(o),n.appendChild(o),i.appendChild(n),r.appendChild(i),e.updateToolbox(r)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.UI&&"mutatorOpen"==e.element&&e.newValue){var n=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!=n&&"procedures_defreturn"!=n||(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){e.type!=t.Events.BLOCK_CREATE&&e.type!=t.Events.BLOCK_DELETE&&e.type!=t.Events.BLOCK_CHANGE||(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,n){var o=[];n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureCall){var i=n[r].getProcedureCall();i&&t.Names.equals(i,e)&&o.push(n[r])}return o},t.Procedures.mutateCallers=function(e){var n,o=t.Events.recordUndo,r=e.getProcedureDef()[0],i=e.mutationToDom(!0);for(e=t.Procedures.getCallers(r,e.workspace),r=0;n=e[r];r++){var s=n.mutationToDom();s=s&&t.Xml.domToText(s),n.domToMutation(i);var a=n.mutationToDom();s!=(a=a&&t.Xml.domToText(a))&&(t.Events.recordUndo=!1,t.Events.fire(new t.Events.BlockChange(n,"mutation",null,s,a)),t.Events.recordUndo=o)}},t.Procedures.getDefinition=function(e,n){n=n.getTopBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var r=n[o].getProcedureDef();if(r&&t.Names.equals(r[0],e))return n[o]}return null},t.VariableModel=function(e,n,o,r){this.workspace=e,this.name=n,this.type=o||"",this.id_=r||t.utils.genUid(),t.Events.fire(new t.Events.VarCreate(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(t,e){return(t=t.name.toLowerCase())<(e=e.name.toLowerCase())?-1:t==e?0:1},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var n=0;n<e.length;n++){var o=e[n].getVarModels();if(o)for(var r=0;r<o.length;r++){var i=o[r],s=i.getId();s&&(t[s]=i)}}for(s in e=[],t)e.push(t[s]);return e},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var n,o=Object.create(null),r=0;n=e[r];r++){var i=n.getDeveloperVariables;if(!i&&n.getDeveloperVars&&(i=n.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+n.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]=!0)),i)for(n=i(),i=0;i<n.length;i++)o[n[i]]=!0}return Object.keys(o)},t.Variables.flyoutCategory=function(e){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",(function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace())})),n.push(o),e=t.Variables.flyoutCategoryBlocks(e),n.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getVariablesOfType("")).length){var o=e[e.length-1];if(t.Blocks.variables_set){var r=t.utils.xml.createElement("block");r.setAttribute("type","variables_set"),r.setAttribute("gap",t.Blocks.math_change?8:24),r.appendChild(t.Variables.generateVariableFieldDom(o)),n.push(r)}if(t.Blocks.math_change&&((r=t.utils.xml.createElement("block")).setAttribute("type","math_change"),r.setAttribute("gap",t.Blocks.variables_get?20:8),r.appendChild(t.Variables.generateVariableFieldDom(o)),o=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),r.appendChild(o),n.push(r)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),o=0;for(var i;i=e[o];o++)(r=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.setAttribute("gap",8),r.appendChild(t.Variables.generateVariableFieldDom(i)),n.push(r)}}return n},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,n){if(!n.length)return e;for(var o=t.Variables.VAR_LETTER_OPTIONS,r="",i=o.indexOf(e);;){for(var s=!1,a=0;a<n.length;a++)if(n[a].toLowerCase()==e){s=!0;break}if(!s)return e;++i==o.length&&(i=0,r=Number(r)+1),e=o.charAt(i)+r}},t.Variables.createVariableButtonHandler=function(e,n,o){var r=o||"";!function o(i){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,i,(function(i){if(i){var s=t.Variables.nameUsedWithAnyType(i,e);if(s){if(s.type==r)var a=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",s.name);else a=(a=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",s.name).replace("%2",s.type);t.alert(a,(function(){o(i)}))}else e.createVariable(i,r),n&&n(i)}else n&&n(null)}))}("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,n,o){!function r(i){var s=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);t.Variables.promptName(s,i,(function(i){if(i){var s=t.Variables.nameUsedWithOtherType_(i,n.type,e);s?(s=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",s.name).replace("%2",s.type),t.alert(s,(function(){r(i)}))):(e.renameVariableById(n.getId(),i),o&&o(i))}else o&&o(null)}))}("")},t.Variables.promptName=function(e,n,o){t.prompt(e,n,(function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||e==t.Msg.NEW_VARIABLE)&&(e=null),o(e)}))},t.Variables.nameUsedWithOtherType_=function(t,e,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var o,r=0;o=n[r];r++)if(o.name.toLowerCase()==t&&o.type!=e)return o;return null},t.Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var n,o=0;n=e[o];o++)if(n.name.toLowerCase()==t)return n;return null},t.Variables.generateVariableFieldDom=function(e){var n=t.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),n.appendChild(e),n},t.Variables.getOrCreateVariablePackage=function(e,n,o,r){var i=t.Variables.getVariable(e,n,o,r);return i||(i=t.Variables.createVariable_(e,n,o,r)),i},t.Variables.getVariable=function(t,e,n,o){var r=t.getPotentialVariableMap(),i=null;if(e&&(!(i=t.getVariableById(e))&&r&&(i=r.getVariableById(e)),i))return i;if(n){if(void 0==o)throw Error("Tried to look up a variable by name without a type");!(i=t.getVariable(n,o))&&r&&(i=r.getVariable(n,o))}return i},t.Variables.createVariable_=function(e,n,o,r){var i=e.getPotentialVariableMap();return o||(o=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),i?i.createVariable(o,r,n):e.createVariable(o,r,n)},t.Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var n=[];if(e.length!=t.length)for(var o=0;o<t.length;o++){var r=t[o];-1==e.indexOf(r)&&n.push(r)}return n},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,n,o){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=o,(e=t.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",e.style.display="block",n=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,n,o){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=n+"px",t.WidgetDiv.DIV.style.height=o+"px"},t.WidgetDiv.positionWithAnchor=function(e,n,o,r){var i=t.WidgetDiv.calculateY_(e,n,o);e=t.WidgetDiv.calculateX_(e,n,o,r),0>i?t.WidgetDiv.positionInternal_(e,0,o.height+i):t.WidgetDiv.positionInternal_(e,i,o.height)},t.WidgetDiv.calculateX_=function(t,e,n,o){return o?(e=Math.max(e.right-n.width,t.left),Math.min(e,t.right-n.width)):(e=Math.min(e.left,t.right-n.width),Math.max(e,t.left))},t.WidgetDiv.calculateY_=function(t,e,n){return e.bottom+n.height>=t.bottom?e.top-n.height:e.bottom},t.VERSION="3.20200924.4",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(t){t.resizeContents()},t.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),n=e.parentNode;if(n){var o=n.offsetWidth;n=n.offsetHeight,e.cachedWidth_!=o&&(e.setAttribute("width",o+"px"),e.cachedWidth_=o),e.cachedHeight_!=n&&(e.setAttribute("height",n+"px"),e.cachedHeight_=n),t.resize()}},t.onKeyDown=function(e){var n=t.mainWorkspace;if(n&&!(t.utils.isTargetInput(e)||n.rendered&&!n.isVisible()))if(n.options.readOnly)t.navigation.onKeyPress(e);else{var o=!1;if(e.keyCode==t.utils.KeyCodes.ESC)t.hideChaff(),t.navigation.onBlocklyAction(t.navigation.ACTION_EXIT);else{if(!t.Gesture.inProgress()&&t.navigation.onKeyPress(e))return;if(e.keyCode==t.utils.KeyCodes.BACKSPACE||e.keyCode==t.utils.KeyCodes.DELETE){if(e.preventDefault(),t.Gesture.inProgress())return;t.selected&&t.selected.isDeletable()&&(o=!0)}else if(e.altKey||e.ctrlKey||e.metaKey){if(t.Gesture.inProgress())return;t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&(e.keyCode==t.utils.KeyCodes.C?(t.hideChaff(),t.copy_(t.selected)):e.keyCode!=t.utils.KeyCodes.X||t.selected.workspace.isFlyout||(t.copy_(t.selected),o=!0)),e.keyCode==t.utils.KeyCodes.V?t.clipboardXml_&&((e=t.clipboardSource_).isFlyout&&(e=e.targetWorkspace),t.clipboardTypeCounts_&&e.isCapacityAvailable(t.clipboardTypeCounts_)&&(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1))):e.keyCode==t.utils.KeyCodes.Z?(t.hideChaff(),n.undo(e.shiftKey)):e.ctrlKey&&e.keyCode==t.utils.KeyCodes.Y&&(t.hideChaff(),n.undo(!0))}}o&&!t.selected.workspace.isFlyout&&(t.Events.setGroup(!0),t.hideChaff(),t.selected.dispose(!0,!0),t.Events.setGroup(!1))}},t.copy_=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.duplicate=function(e){var n=t.clipboardXml_,o=t.clipboardSource_;t.copy_(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=n,t.clipboardSource_=o},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),e||((e=t.getMainWorkspace()).trashcan&&e.trashcan.flyout&&e.trashcan.closeFlyout(),(e=e.getToolbox())&&e.getFlyout()&&e.getFlyout().autoClose&&e.clearSelection())},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(t,e){alert(t),e&&e()},t.confirm=function(t,e){e(confirm(t))},t.prompt=function(t,e,n){n(prompt(t,e))},t.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},t.defineBlocksWithJsonArray=function(e){for(var n=0;n<e.length;n++){var o=e[n];if(o){var r=o.type;null==r||""===r?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[r]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+r+'".'),t.Blocks[r]={init:t.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},t.bindEventWithChecks_=function(e,n,o,r,i,s){var a=!1,l=function(e){var n=!i;e=t.Touch.splitEventByTouches(e);for(var s,l=0;s=e[l];l++)n&&!t.Touch.shouldHandleEvent(s)||(t.Touch.setClientFromTouch(s),o?r.call(o,s):r(s),a=!0)},u=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var c,h=0;c=t.Touch.TOUCH_MAP[n][h];h++)e.addEventListener(c,l,!1),u.push([e,c,l]);else if(e.addEventListener(n,l,!1),u.push([e,n,l]),n in t.Touch.TOUCH_MAP){var p=function(t){l(t),a&&!s&&t.preventDefault()};for(h=0;c=t.Touch.TOUCH_MAP[n][h];h++)e.addEventListener(c,p,!1),u.push([e,c,p])}return u},t.bindEvent_=function(e,n,o,r){var i=function(t){o?r.call(o,t):r(t)},s=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var a,l=0;a=t.Touch.TOUCH_MAP[n][l];l++)e.addEventListener(a,i,!1),s.push([e,a,i]);else if(e.addEventListener(n,i,!1),s.push([e,n,i]),n in t.Touch.TOUCH_MAP){var u=function(t){if(t.changedTouches&&1==t.changedTouches.length){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}i(t),t.preventDefault()};for(l=0;a=t.Touch.TOUCH_MAP[n][l];l++)e.addEventListener(a,u,!1),s.push([e,a,u])}return s},t.unbindEvent_=function(t){for(;t.length;){var e=t.pop(),n=e[2];e[0].removeEventListener(e[1],n,!1)}return n},t.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,n,o){for(var r="Blockly",i=t,s=0;s<n.length;++s)r+="."+n[s],i&&(i=i[n[s]]);i&&i!==o&&(e=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",r).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.Icon=function(t){this.block_=t,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),n=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_={}},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.textToDom_=function(e){var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var o=0;o<e.length;o++){var r=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},n),i=document.createTextNode(e[o]);r.appendChild(i)}return n},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new t.Events.Ui(this.block_,"warningOpen",!e,e)),e?this.createBubble():this.disposeBubble())},t.Warning.prototype.createBubble=function(){if(this.paragraphElement_=t.Warning.textToDom_(this.getText()),this.bubble_=new t.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.block_.RTL)for(var e,n=this.paragraphElement_.getBBox().width,o=0;e=this.paragraphElement_.childNodes[o];o++)e.setAttribute("text-anchor","end"),e.setAttribute("x",n+t.Bubble.BORDER_WIDTH);this.applyColour()},t.Warning.prototype.disposeBubble=function(){this.bubble_.dispose(),this.paragraphElement_=this.body_=this.bubble_=null},t.Warning.prototype.setText=function(t,e){this.text_[e]!=t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var t,e=[];for(t in this.text_)e.push(this.text_[t]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),e.appendChild(n),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.bindEventWithChecks_(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.bindEventWithChecks_(n,"wheel",this,(function(t){t.stopPropagation()})),this.onChangeWrapper_=t.bindEventWithChecks_(n,"change",this,(function(e){this.cachedText_!=this.model_.text&&t.Events.fire(new t.Events.BlockChange(this.block_,"comment",null,this.cachedText_,this.model_.text))})),this.onInputWrapper_=t.bindEventWithChecks_(n,"input",this,(function(t){this.model_.text=n.value})),setTimeout(n.focus.bind(n),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,n=2*t.Bubble.BORDER_WIDTH,o=e.width-n;e=e.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new t.Events.Ui(this.block_,"commentOpen",!e,e)),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){t.Warning.prototype.createBubble.call(this)},t.Comment.prototype.disposeBubble_=function(){this.paragraphElement_?t.Warning.prototype.disposeBubble.call(this):(this.onMouseUpWrapper_&&(t.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.unbindEvent_(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.unbindEvent_(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.unbindEvent_(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null)},t.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},t.Comment.prototype.getText=function(){return t.utils.deprecation.warn("Comment.prototype.getText","August 2019","December 2020","block.getCommentText"),this.model_.text||""},t.Comment.prototype.setText=function(e){t.utils.deprecation.warn("Comment.prototype.setText","August 2019","December 2020","block.setCommentText"),this.model_.text!=e&&(this.model_.text=e,this.updateText())},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,overflow: hidden;,}".split(",")),t.FlyoutCursor=function(){t.FlyoutCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.FlyoutCursor,t.Cursor),t.FlyoutCursor.prototype.onBlocklyAction=function(e){switch(e.name){case t.navigation.actionNames.PREVIOUS:return this.prev(),!0;case t.navigation.actionNames.NEXT:return this.next(),!0;default:return!1}},t.FlyoutCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=t.next())&&this.setCurNode(t),t):null},t.FlyoutCursor.prototype.in=function(){return null},t.FlyoutCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=t.prev())&&this.setCurNode(t),t):null},t.FlyoutCursor.prototype.out=function(){return null},t.Flyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_PADDING=2,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.workspace_.getMarkerManager().setCursor(new t.FlyoutCursor),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.scrollbar=new t.Scrollbar(this.workspace_,this.horizontalLayout,!1,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap()},t.Flyout.prototype.dispose=function(){this.hide(),t.unbindEvent_(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(t){var e=t!=this.isVisible();this.isVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.scrollbar.setContainerVisible(t)},t.Flyout.prototype.positionAt_=function(e,n,o,r){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",n),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+r+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+r+")"),this.scrollbar&&(this.scrollbar.setOrigin(o,r),this.scrollbar.resize(),this.scrollbar.setPosition(this.scrollbar.position.x,this.scrollbar.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,n=0;e=this.listeners_[n];n++)t.unbindEvent_(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.bindEventWithChecks_(this.svgBackground_,"mouseover",this,(function(){for(var t,e=this.workspace_.getTopBlocks(!1),n=0;t=e[n];n++)t.removeSelect()}))),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var r,i=this.horizontalLayout?this.GAP_X:this.GAP_Y,s=0;r=e[s];s++)switch(r.custom&&(r=this.getDynamicCategoryContents_(r.custom),r=t.utils.toolbox.convertFlyoutDefToJsonArray(r),e.splice.apply(e,[s,1].concat(r)),r=e[s]),r.kind.toUpperCase()){case"BLOCK":var a=r,l=this.getBlockXml_(a);r=this.createBlock_(l),a=parseInt(a.gap||l.getAttribute("gap"),10),o.push(isNaN(a)?i:a),n.push({type:"block",block:r});break;case"SEP":this.addSeparatorGap_(r,o,i);break;case"LABEL":r=this.createButton_(r,!0),n.push({type:"button",button:r}),o.push(i);break;case"BUTTON":r=this.createButton_(r,!1),n.push({type:"button",button:r}),o.push(i)}return{contents:n,gaps:o}},t.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},t.Flyout.prototype.createButton_=function(e,n){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,n)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var n=null,o=e.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=t.Xml.textToDom(o),e.blockxml=n):e.type&&((n=t.utils.xml.createElement("xml")).setAttribute("type",e.type),n.setAttribute("disabled",e.disabled),e.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},t.Flyout.prototype.addSeparatorGap_=function(t,e,n){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(n)},t.Flyout.prototype.clearOldBlocks_=function(){for(var e,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(o=0;o<this.mats_.length;o++)(n=this.mats_[o])&&(t.Tooltip.unbindMouseEvents(n),t.utils.dom.removeNode(n));for(o=this.mats_.length=0;n=this.buttons_[o];o++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,n,o){this.listeners_.push(t.bindEventWithChecks_(e,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.bindEventWithChecks_(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.bindEvent_(e,"mouseenter",n,n.addSelect)),this.listeners_.push(t.bindEvent_(e,"mouseleave",n,n.removeSelect)),this.listeners_.push(t.bindEvent_(o,"mouseenter",n,n.addSelect)),this.listeners_.push(t.bindEvent_(o,"mouseleave",n,n.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(n){var o=e.targetWorkspace.getGesture(n);o&&(o.setStartBlock(t),o.handleFlyoutStart(n,e))}},t.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},t.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},t.Flyout.prototype.createBlock=function(e){var n=null;t.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,o),t.Events.isEnabled()){for(t.Events.setGroup(!0),o=0;o<e.length;o++)t.Events.fire(new t.Events.VarCreate(e[o]));t.Events.fire(new t.Events.Create(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},t.Flyout.prototype.initFlyoutButton_=function(e,n,o){var r=e.createDom();e.moveTo(n,o),e.show(),this.listeners_.push(t.bindEventWithChecks_(r,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,n,o,r,i){return(n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:r.height,width:r.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),e.flyoutRect_=n,this.mats_[i]=n},t.Flyout.prototype.moveRectToBlock_=function(t,e){var n=e.getHeightWidth();t.setAttribute("width",n.width),t.setAttribute("height",n.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-n.width:e.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var e,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var r=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(e));e;)e.setEnabled(r),e=e.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.scrollbar&&this.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var o=t.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),!(o=t.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var r=n.getOriginOffsetInPixels(),i=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(i,e),(r=t.utils.Coordinate.difference(e,r)).scale(1/n.scale),o.moveBy(r.x,r.y),o},t.Flyout.prototype.onBlocklyAction=function(t){return this.workspace_.getCursor().onBlocklyAction(t)},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var e=this.workspace_.getCanvas().getBBox()}catch(i){e={height:0,y:0,width:0,x:0}}var n=this.SCROLLBAR_PADDING,o=this.SCROLLBAR_PADDING;this.toolboxPosition_==t.TOOLBOX_AT_BOTTOM&&(n=0);var r=this.height_;return this.toolboxPosition_==t.TOOLBOX_AT_TOP&&(r-=this.SCROLLBAR_PADDING),{contentHeight:(e.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(e.width+2*this.MARGIN)*this.workspace_.scale,contentTop:0,contentLeft:0,viewHeight:r,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,absoluteTop:n,absoluteLeft:o}},t.HorizontalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&("number"==typeof t.x&&(this.workspace_.scrollX=-e.contentWidth*t.x),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace.getMetrics();e&&(this.width_=e.viewWidth,this.setBackgroundPath_(e.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,0,this.targetWorkspace.toolboxPosition==this.toolboxPosition_?e.toolboxHeight?this.toolboxPosition_==t.TOOLBOX_AT_TOP?e.toolboxHeight:e.viewHeight-this.height_:this.toolboxPosition_==t.TOOLBOX_AT_TOP?0:e.viewHeight:this.toolboxPosition_==t.TOOLBOX_AT_TOP?0:e.viewHeight+e.absoluteTop-this.height_))}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,n){var o=this.toolboxPosition_==t.TOOLBOX_AT_TOP,r=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(r.push("h",e+2*this.CORNER_RADIUS),r.push("v",n),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",-e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),r.push("h",e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",n),r.push("h",-e-2*this.CORNER_RADIUS)),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e),o=n.x||n.y;o&&(o=(n=this.getMetrics_()).viewLeft+o,o=Math.min(o,n.contentWidth-n.viewWidth),o=Math.max(o,0),this.scrollbar.set(o),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()),e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN,o=n+this.tabWidth_;this.RTL&&(t=t.reverse());for(var r,i=0;r=t[i];i++)if("block"==r.type){for(var s,a=(r=r.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;r.render(),a=r.getSvgRoot(),l=r.getHeightWidth(),s=r.outputConnection?this.tabWidth_:0,s=this.RTL?o+l.width:o-s,r.moveBy(s,n),s=this.createRect_(r,s,n,l,i),o+=l.width+e[i],this.addBlockListeners_(a,r,s)}else"button"==r.type&&(this.initFlyoutButton_(r.button,o,n),o+=r.button.width+e[i])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_==t.TOOLBOX_AT_TOP?new t.utils.Rect(-1e9,n+e.height,-1e9,1e9):new t.utils.Rect(n,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var e,n=0,o=this.workspace_.getTopBlocks(!1),r=0;e=o[r];r++)n=Math.max(n,e.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,n+=t.Scrollbar.scrollbarThickness,this.height_!=n){for(r=0;e=o[r];r++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.TOOLBOX_AT_TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(r){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,n=this.height_-2*this.SCROLLBAR_PADDING,o=this.width_;return this.RTL||(o-=this.SCROLLBAR_PADDING),{contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,contentTop:t.y,contentLeft:t.x,viewHeight:n,viewWidth:o,viewTop:-this.workspace_.scrollY+t.y,viewLeft:-this.workspace_.scrollX,absoluteTop:e,absoluteLeft:0}},t.VerticalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&("number"==typeof t.y&&(this.workspace_.scrollY=-e.contentHeight*t.y),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace.getMetrics();e&&(this.height_=e.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.viewHeight-2*this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,this.targetWorkspace.toolboxPosition==this.toolboxPosition_?e.toolboxWidth?this.toolboxPosition_==t.TOOLBOX_AT_LEFT?e.toolboxWidth:e.viewWidth-this.width_:this.toolboxPosition_==t.TOOLBOX_AT_LEFT?0:e.viewWidth:this.toolboxPosition_==t.TOOLBOX_AT_LEFT?0:e.viewWidth+e.absoluteLeft-this.width_,0))}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,n){var o=this.toolboxPosition_==t.TOOLBOX_AT_RIGHT,r=e+this.CORNER_RADIUS;(r=["M "+(o?r:0)+",0"]).push("h",o?-e:e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",Math.max(0,n)),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",o?e:-e),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(0)},t.VerticalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n.y){var o=this.getMetrics_();n=o.viewTop-o.contentTop+n.y,n=Math.min(n,o.contentHeight-o.viewHeight),n=Math.max(n,0),this.scrollbar.set(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var n,o=this.MARGIN,r=this.RTL?o:o+this.tabWidth_,i=0;n=t[i];i++)if("block"==n.type){for(var s,a=(n=n.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;n.render(),a=n.getSvgRoot(),l=n.getHeightWidth(),s=n.outputConnection?r-this.tabWidth_:r,n.moveBy(s,o),s=this.createRect_(n,this.RTL?s-l.width:s,o,l,i),this.addBlockListeners_(a,n,s),o+=l.height+e[i]}else"button"==n.type&&(this.initFlyoutButton_(n.button,r,o),o+=n.button.height+e[i])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_==t.TOOLBOX_AT_LEFT?new t.utils.Rect(-1e9,1e9,-1e9,n+e.width):new t.utils.Rect(-1e9,1e9,n,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var e,n=0,o=this.workspace_.getTopBlocks(!1),r=0;e=o[r];r++){var i=e.getHeightWidth().width;e.outputConnection&&(i-=this.tabWidth_),n=Math.max(n,i)}for(r=0;e=this.buttons_[r];r++)n=Math.max(n,e.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,n+=t.Scrollbar.scrollbarThickness,this.width_!=n){for(r=0;e=o[r];r++){if(this.RTL){i=e.getRelativeToSurfaceXY().x;var s=n/this.workspace_.scale-this.MARGIN;e.outputConnection||(s-=this.tabWidth_),e.moveBy(s-i,0)}e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e)}if(this.RTL)for(r=0;e=this.buttons_[r];r++)o=e.getPosition().y,e.moveTo(n/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,o);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.TOOLBOX_AT_LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,n,o,r){this.workspace_=e,this.targetWorkspace_=n,this.text_=o.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=r,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),r=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(r+="\u200f"),o.textContent=r,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var i=t.utils.style.getComputedStyle(o,"fontSize"),s=t.utils.style.getComputedStyle(o,"fontWeight"),a=t.utils.style.getComputedStyle(o,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(o,i,s,a),r=t.utils.dom.measureFontMetrics(r,i,s,a),this.height=r.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-r.height/2+r.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.NAME_TYPE="generated_function",t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var n=[];this.init(e),e=e.getTopBlocks(!0);for(var o,r=0;o=e[r];r++){var i=this.blockToCode(o);Array.isArray(i)&&(i=i[0]),i&&(o.outputConnection&&(i=this.scrubNakedValue(i),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,o)+i),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,o))),n.push(i))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},t.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var n=0;n<t.length;n++){var o=t[n].getCommentText();o&&e.push(o)}return e.length&&e.push(""),e.join("\n")},t.Generator.prototype.blockToCode=function(t,e){if(!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var n=this[t.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+t.type+'".');if(n=n.call(t,t),Array.isArray(n)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,n[0],e),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,t)+n),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,n,e);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)},t.Generator.prototype.valueToCode=function(t,e,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+t.type);var o=t.getInputTargetBlock(e);if(!o)return"";if(""===(e=this.blockToCode(o)))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+o.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+o.type);if(!t)return"";o=!1;var r=Math.floor(n),i=Math.floor(e);if(r<=i&&(r!=i||0!=r&&99!=r))for(o=!0,r=0;r<this.ORDER_OVERRIDES.length;r++)if(this.ORDER_OVERRIDES[r][0]==n&&this.ORDER_OVERRIDES[r][1]==e){o=!1;break}return o&&(t="("+t+")"),t},t.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),"string"!=typeof(e=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},t.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},t.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",t.Generator.prototype.provideFunction_=function(e,n){if(!this.definitions_[e]){var o,r=this.variableDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);o!=n;)o=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]},t.Generator.prototype.init=function(t){},t.Generator.prototype.scrub_=function(t,e,n){return e},t.Generator.prototype.finish=function(t){return t},t.Generator.prototype.scrubNakedValue=function(t){return t},t.ToolboxItem=function(e,n,o){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,n,o){t.ToolboxCategory.superClass_.constructor.call(this,e,n,o),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e){t=0;for(var n;n=e[t];t++)this.flyoutItems_.push(n)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.setAttribute("id",this.id_),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_);var e=this.createLabelDom_(this.name_);return this.rowContents_.appendChild(e),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,e.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var n=t.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,t.utils.dom.addClass(n,this.cssConfig_.label),n},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;return(t=t.colour)&&e?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):e?this.getColourfromStyle_(e):this.parseColour_(t)},t.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=t.utils.colour.parse(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(n)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(t){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var n=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,n){t.ToolboxSeparator.superClass_.constructor.call(this,e,n),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var n=e.contents,o=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var r;r=n[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,r.kind)||r.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(r),o=!0):(this.createToolboxItem_(r),o=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var n=document.createElement("div");t.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<e.length;o++){var r=e[o];r.init(),r=r.getDiv(),n.appendChild(r)}return n},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e,n=0;e=this.getChildToolboxItems()[n];n++)e.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Toolbox=function(t){this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_={},this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.Toolbox.prototype.init=function(){var e=this.workspace_,n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color")},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,n){e=t.bindEventWithChecks_(e,"mousedown",this,this.onClick_,!1,!0),this.boundEvents_.push(e),n=t.bindEventWithChecks_(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},t.Toolbox.prototype.onClick_=function(e){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var n=e.srcElement.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e)),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()},t.Toolbox.prototype.onKeyDown_=function(e){var n=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:n=this.selectNext_();break;case t.utils.KeyCodes.UP:n=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:n=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}n&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,n=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides});if(n.toolboxPosition=e.options.toolboxPosition,!(e=e.horizontalLayout?t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.options):t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options)))throw Error("Blockly.VerticalFlyout, Blockly.HorizontalFlyout or your own custom flyout must be required.");return new e(n)},t.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var n=this.contents_[e];n&&n.dispose()}this.contents_=[],this.contentMap_={},this.renderContents_(t.contents),this.position()},t.Toolbox.prototype.renderContents_=function(t){for(var e,n=document.createDocumentFragment(),o=0;e=t[o];o++)this.createToolboxItem_(e,n);this.contentsDiv_.appendChild(n)},t.Toolbox.prototype.createToolboxItem_=function(e,n){var o=e.kind;"CATEGORY"==o.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(o=t.CollapsibleToolboxCategory.registrationName),(o=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),this.addToolboxItem_(e),e.init(),(e=e.getDiv())&&n.appendChild(e))},t.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var e,n=0;e=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(e)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var e=this.HtmlDiv.getBoundingClientRect(),n=e.top,o=n+e.height,r=e.left;return e=r+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,r,1e7)},t.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.HtmlDiv;e&&(this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width="100%",this.height_=e.offsetHeight,this.toolboxPosition==t.TOOLBOX_AT_TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition==t.TOOLBOX_AT_RIGHT?e.style.right="0":e.style.left="0",e.style.height="100%",this.width_=e.offsetWidth),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.TOOLBOX_AT_LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition==t.TOOLBOX_AT_TOP?e.scrollY+n.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(t){this.HtmlDiv.style.display=t?"block":"none"},t.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&null!=e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!=t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},t.Toolbox.prototype.shouldDeselectItem_=function(t,e){return null!=t&&(!t.isCollapsible()||t!=e)},t.Toolbox.prototype.shouldSelectItem_=function(t,e){return null!=e&&e!=t},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,n.getId())},t.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},t.Toolbox.prototype.updateFlyout_=function(t,e){(t!=e||e.isCollapsible())&&e&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,n){var o=e&&e.getName(),r=n&&n.getName();e==n&&(r=null),(e=new t.Events.Ui(null,"category",o,r)).workspaceId=this.workspace_.id,t.Events.fire(e)},t.Toolbox.prototype.onBlocklyAction=function(e){if(!this.selectedItem_)return!1;switch(e.name){case t.navigation.actionNames.PREVIOUS:return this.selectPrevious_();case t.navigation.actionNames.OUT:return this.selectParent_();case t.navigation.actionNames.NEXT:return this.selectNext_();case t.navigation.actionNames.IN:return this.selectChild_();default:return!1}},t.Toolbox.prototype.selectParent_=function(){return!!this.selectedItem_&&(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):!(!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable())&&(this.setSelectedItem(this.selectedItem_.getParent()),!0))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.dispose=function(){this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.unbindEvent_(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Trashcan=function(e){if(this.workspace_=e,this.contents_=[],this.flyout=null,!(0>=this.workspace_.options.maxTrashcanContents)){if(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides}),this.workspace_.horizontalLayout){if(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,!t.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout=new t.HorizontalFlyout(e)}else{if(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,!t.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout=new t.VerticalFlyout(e)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}},t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_BOTTOM_=20,t.Trashcan.prototype.MARGIN_SIDE_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return o.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click),t.bindEvent_(o,"mouseover",this,this.mouseOver_),t.bindEvent_(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(e){return 0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.setLidOpen(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},t.Trashcan.prototype.dispose=function(){this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){for(var e,n=[],o=0;e=this.contents_[o];o++)n[o]=t.Xml.textToDom(e);this.flyout.show(n),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(){if(this.verticalSpacing_){var e=this.workspace_.getMetrics();e&&(this.left_=e.toolboxPosition==t.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness,this.top_=e.toolboxPosition==t.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:e.viewHeight+e.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.verticalSpacing_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new t.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),n=t.Trashcan.OPACITY_MIN_,this.svgGroup_.style.opacity=n+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var n=this.workspace_.toolboxPosition==t.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},t.Trashcan.prototype.fireUiEvent_=function(e){(e=new t.Events.Ui(null,"trashcanOpen",null,e)).workspaceId=this.workspace_.id,t.Events.fire(e)},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var n=e=e.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var n=[],o=document.createElement("button");return o.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),n.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var o=e[e.length-1],r=t.utils.xml.createElement("block");r.setAttribute("type","variables_set_dynamic"),r.setAttribute("gap",24),r.appendChild(t.Variables.generateVariableFieldDom(o)),n.push(r)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),o=0;for(var i;i=e[o];o++)(r=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),r.setAttribute("gap",8),r.appendChild(t.Variables.generateVariableFieldDom(i)),n.push(r)}}return n},t.ZoomControls=function(t){this.workspace_=t,this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.verticalSpacing_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=110,t.ZoomControls.prototype.MARGIN_BOTTOM_=20,t.ZoomControls.prototype.MARGIN_SIDE_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(t){return this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.verticalSpacing_+this.HEIGHT_},t.ZoomControls.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.unbindEvent_(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.unbindEvent_(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.unbindEvent_(this.onZoomOutWrapper_)},t.ZoomControls.prototype.position=function(){if(this.verticalSpacing_){var e=this.workspace_.getMetrics();e&&(this.left_=e.toolboxPosition==t.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness,e.toolboxPosition==t.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)")):(this.top_=e.viewHeight+e.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.bindEventWithChecks_(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.bindEventWithChecks_(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,n){this.workspace_.markFocused();var o=this.workspace_.scale;this.workspace_.zoomCenter(e),this.fireZoomEvent_(o),t.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.bindEventWithChecks_(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var n=this.workspace_.scale;this.workspace_.setScale(this.workspace_.options.zoomOptions.startScale),this.workspace_.beginCanvasTransition(),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(n),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(e){(e=new t.Events.Ui(null,"zoom",e,this.workspace_.scale)).workspaceId=this.workspace_.id,t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(t){this.block_=t},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,n=t.utils.xml.createElement("xml"),o=0;e=this.quarkNames_[o];o++){var r=t.utils.xml.createElement("block");r.setAttribute("type",e),n.appendChild(r)}else n=null;return(o=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(e=!!n)&&(o.languageTree=t.utils.toolbox.convertToolboxDefToJson(n),o.getMetrics=this.getFlyoutMetrics_.bind(this)),this.workspace_=new t.WorkspaceSvg(o),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),n=e?this.workspace_.addFlyout(t.utils.Svg.G):null,o=this.workspace_.createDom("blocklyMutatorBackground"),n&&o.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(o),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,r=n.height+3*e,i=this.workspace_.getFlyout();if(i){var s=i.getMetrics_();r=Math.max(r,s.contentHeight+20),o+=i.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*e,(Math.abs(this.workspaceWidth_-o)>e||Math.abs(this.workspaceHeight_-r)>e)&&(this.workspaceWidth_=o,this.workspaceHeight_=r,this.bubble_.setBubbleSize(o+e,r+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new t.Events.Ui(this.block_,"mutatorOpen",!e,e)),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),n&&(e.init(this.workspace_),e.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var o,r=0;o=n[r];r++)o.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(n=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+n:n):e=n=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,n),this.block_.saveConnections){var i=this,s=this.block_;s.saveConnections(this.rootBlock_),this.sourceListener_=function(){s.saveConnections(i.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(e.type!=t.Events.UI&&(e.type!=t.Events.CHANGE||"disabled"!=e.element)){if(!this.workspace_.isDragging())for(var n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++){var r=e.getRelativeToSurfaceXY();if(20>r.y&&e.moveBy(0,20-r.y),e.RTL){var i=-20,s=this.workspace_.getFlyout();s&&(i-=s.getWidth()),r.x>i&&e.moveBy(i-r.x,0)}else 20>r.x&&e.moveBy(20-r.x,0)}this.rootBlock_.workspace==this.workspace_&&(t.Events.setGroup(!0),n=(n=(e=this.block_).mutationToDom())&&t.Xml.domToText(n),o=e.rendered,e.rendered=!1,e.compose(this.rootBlock_),e.rendered=o,e.initSvg(),t.getMainWorkspace().keyboardAccessibilityMode&&t.navigation.moveCursorOnBlockMutation(e),e.rendered&&e.render(),n!=(o=(o=e.mutationToDom())&&t.Xml.domToText(o))&&t.Events.fire(new t.Events.BlockChange(e,"mutation",null,n,o)),this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1))}},t.Mutator.prototype.getFlyoutMetrics_=function(){var t=this.workspace_.getFlyout();return t=t?t.getWidth():0,{contentHeight:0,contentWidth:0,contentTop:0,contentLeft:0,viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-t,viewTop:0,viewLeft:0,absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:t}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var e=t.getAllBlocks(!1),n=0;n<e.length;n++){var o=e[n];o.setStyle(o.getStyleName())}if(n=t.getFlyout())for(t=n.workspace_.getAllBlocks(!1),n=0;n<t.length;n++)(o=t[n]).setStyle(o.getStyleName())}},t.Mutator.reconnect=function(t,e,n){if(!t||!t.getSourceBlock().workspace)return!1;n=e.getInput(n).connection;var o=t.targetBlock();return!(o&&o!=e||n.targetConnection==t)&&(n.isConnected()&&n.disconnect(),n.connect(t),!0)},t.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var n=t.options.parentWorkspace;t.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n)}return e},t.FieldTextInput=function(e,n,o){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(n,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var t,e=0,n=0,o=0;t=this.sourceBlock_.inputList[o];o++){for(var r=0;t.fieldRow[r];r++)e++;t.connection&&n++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(t){return null===t||void 0===t?null:String(t)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockChange(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){var e=this;t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),(function(t){e.setValue(t)}))},t.FieldTextInput.prototype.showInlineEditor_=function(e){t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),r=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(e.style.fontSize=r,n.style.fontSize=r,r=t.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){r=((r=this.getScaledBBox()).bottom-r.top)/2+"px";var i=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+i,e.style.borderRadius=r,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=r,e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.bindEventWithChecks_(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.bindEventWithChecks_(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.unbindEvent_(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,n=this.getScaledBBox();e.style.width=n.right-n.left+"px",e.style.height=n.bottom-n.top+"px",n=new t.utils.Coordinate(this.sourceBlock_.RTL?n.right-e.offsetWidth:n.left,n.top),e.style.left=n.x+"px",e.style.top=n.y+"px"},t.FieldTextInput.numberValidator=function(t){return console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."),null===t?null:(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,""),t=Number(t||0),isNaN(t)?null:String(t))},t.FieldTextInput.nonnegativeIntegerValidator=function(e){return(e=t.FieldTextInput.numberValidator(e))&&(e=String(Math.max(0,Math.floor(e)))),e},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},t.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,n,o){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=e.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=e.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=e.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),e=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(e),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var o=0;360>o;o+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(0==o%45?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);return this.clickWrapper_=t.bindEventWithChecks_(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.bindEventWithChecks_(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.bindEventWithChecks_(n,"mousemove",this,this.onMouseMove_,!0,!0),e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.unbindEvent_(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.unbindEvent_(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.unbindEvent_(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=e.clientX-n.left-t.FieldAngle.HALF;e=e.clientY-n.top-t.FieldAngle.HALF,n=Math.atan(-e/o),isNaN(n)||(n=t.utils.math.toDegrees(n),0>o?n+=180:0<e&&(n+=360),n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n),this.displayMouseOrKeyboardValue_(n))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var o=t.FieldAngle.HALF,r=t.FieldAngle.HALF;if(!isNaN(n)){var i=Number(this.clockwise_),s=t.utils.math.toRadians(this.offset_),a=Math.cos(s)*t.FieldAngle.RADIUS,l=Math.sin(s)*-t.FieldAngle.RADIUS;i&&(n=2*s-n),o+=Math.cos(n)*t.FieldAngle.RADIUS,r-=Math.sin(n)*t.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-s)/Math.PI)%2),i&&(n=1-n),e.push(" l ",a,",",l," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",n," ",i," ",o,",",r," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",r)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var n;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?n=-1:e.keyCode===t.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},t.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldCheckbox=function(e,n,o){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="\u2713",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,n,o){t.FieldColour.superClass_.constructor.call(this,e,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},t.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},t.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var n=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),t.DropDownDiv.hideWithoutAnimation(),n=!0),n&&e.stopPropagation()},t.FieldColour.prototype.onBlocklyAction=function(e){if(this.picker_){if(e===t.navigation.ACTION_PREVIOUS)return this.moveHighlightBy_(0,-1),!0;if(e===t.navigation.ACTION_NEXT)return this.moveHighlightBy_(0,1),!0;if(e===t.navigation.ACTION_OUT)return this.moveHighlightBy_(-1,0),!0;if(e===t.navigation.ACTION_IN)return this.moveHighlightBy_(1,0),!0}return t.FieldColour.superClass_.onBlocklyAction.call(this,e)},t.FieldColour.prototype.moveHighlightBy_=function(e,n){var o=this.colours_||t.FieldColour.COLOURS,r=this.columns_||t.FieldColour.COLUMNS,i=this.highlightedIndex_%r,s=Math.floor(this.highlightedIndex_/r);i+=e,s+=n,0>e?0>i&&0<s?(i=r-1,s--):0>i&&(i=0):0<e?i>r-1&&s<Math.floor(o.length/r)-1?(i=0,s++):i>r-1&&i--:0>n?0>s&&(s=0):0<n&&s>Math.floor(o.length/r)-1&&(s=Math.floor(o.length/r)-1),this.setHighlightedCell_(this.picker_.childNodes[s].childNodes[i],s*r+i)},t.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,n){var o=this.getHighlighted_();o&&t.utils.dom.removeClass(o,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.colours_||t.FieldColour.COLOURS,o=this.titles_||t.FieldColour.TITLES,r=this.getValue(),i=document.createElement("table");i.className="blocklyColourTable",i.tabIndex=0,i.dir="ltr",t.utils.aria.setRole(i,t.utils.aria.Role.GRID),t.utils.aria.setState(i,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(i,t.utils.aria.State.ROWCOUNT,Math.floor(n.length/e)),t.utils.aria.setState(i,t.utils.aria.State.COLCOUNT,e);for(var s,a=0;a<n.length;a++){0==a%e&&(s=document.createElement("tr"),t.utils.aria.setRole(s,t.utils.aria.Role.ROW),i.appendChild(s));var l=document.createElement("td");s.appendChild(l),l.label=n[a],l.title=o[a]||n[a],l.id=t.utils.IdGenerator.getNextUniqueId(),l.setAttribute("data-index",a),t.utils.aria.setRole(l,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(l,t.utils.aria.State.LABEL,n[a]),t.utils.aria.setState(l,t.utils.aria.State.SELECTED,n[a]==r),l.style.backgroundColor=n[a],n[a]==r&&(l.className="blocklyColourSelected",this.highlightedIndex_=a)}return this.onClickWrapper_=t.bindEventWithChecks_(i,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.bindEventWithChecks_(i,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.bindEventWithChecks_(i,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.bindEventWithChecks_(i,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.bindEventWithChecks_(i,"keydown",this,this.onKeyDown_),i},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.unbindEvent_(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.unbindEvent_(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.unbindEvent_(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,n,o){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"\u25bc":"\u25be",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.menu_=this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"===typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,n)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX);var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var r=n[o][0],i=n[o][1];if("object"==typeof r){var s=new Image(r.width,r.height);s.src=r.src,s.alt=r.alt||"",r=s}(r=new t.MenuItem(r,i)).setRole(t.utils.aria.Role.OPTION),r.setRightToLeft(this.sourceBlock_.RTL),r.setCheckable(!0),e.addChild(r),r.setChecked(i==this.value_),i==this.value_&&(this.selectedMenuItem_=r),r.onAction(this.handleMenuActionEvent_,this)}return e},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var n=!1,o=0;o<e.length;o++){var r=e[o][0];"string"==typeof r?e[o][0]=t.utils.replaceMessageReferences(r):(null!=r.alt&&(e[o][0].alt=t.utils.replaceMessageReferences(r.alt)),n=!0)}if(!(n||2>e.length)){for(n=[],o=0;o<e.length;o++)n.push(e[o][0]);o=t.utils.string.shortestStringLength(n),r=t.utils.string.commonWordPrefix(n,o);var i=t.utils.string.commonWordSuffix(n,o);!r&&!i||o<=r+i||(r&&(this.prefixField=n[0].substring(0,r-1)),i&&(this.suffixField=n[0].substr(1-i)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,r,i))}}},t.FieldDropdown.applyTrim_=function(t,e,n){for(var o=[],r=0;r<t.length;r++){var i=t[r][0],s=t[r][1];i=i.substring(e,i.length-n),o[r]=[i,s]}return o},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(t){for(var e,n=!1,o=this.getOptions(!0),r=0;e=o[r];r++)if(e[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var n,o=0;n=e[o];o++)n[1]==this.value_&&(this.selectedOption_=n)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var n=Number(e.height);e=Number(e.width);var o=!!this.borderRect_,r=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+t.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var i=this.svgArrow_?this.positionSVGArrow_(e+o,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+i+2*o,this.size_.height=r;var s=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+i):(s=e+i,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",r/2-n/2),this.positionTextElement_(s+o,e+i)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,n=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=0;this.svgArrow_&&(r=this.positionSVGArrow_(o+e,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+r+2*e,this.size_.height=n,this.positionTextElement_(e,o)},t.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var n=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?n:t+o)+","+e+")"),r+o},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},t.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,n=0;n<t.length;++n){var o=t[n];Array.isArray(o)?"string"!=typeof o[1]?(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(e)throw TypeError("Found invalid FieldDropdown options.")},t.FieldDropdown.prototype.onBlocklyAction=function(e){if(this.menu_){if(e===t.navigation.ACTION_PREVIOUS)return this.menu_.highlightPrevious(),!0;if(e===t.navigation.ACTION_NEXT)return this.menu_.highlightNext(),!0}return t.FieldDropdown.superClass_.onBlocklyAction.call(this,e)},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,n,o){t.FieldLabelSerializable.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(n,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,n,o,r,i,s,a){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),o=Number(t.utils.replaceMessageReferences(o)),n=Number(t.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,a),a||(this.flipRtl_=!!s,this.altText_=t.utils.replaceMessageReferences(r)||""),this.size_=new t.utils.Size(n,o+t.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof i&&(this.clickHandler_=i),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,n,o){t.FieldMultilineInput.superClass_.constructor.call(this,e,n,o),this.textGroup_=null},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(n,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},t.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.value_;if(!e)return t.Field.NBSP;var n=e.split("\n");e="";for(var o=0;o<n.length;o++){var r=n[o];r.length>this.maxDisplayLength&&(r=r.substring(0,this.maxDisplayLength-4)+"..."),e+=r=r.replace(/\s/g,t.Field.NBSP),o!==n.length-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="\u200f"),e},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var n=0,o=0;o<e.length;o++){var r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[o])),n+=r}this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,n=0,o=0,r=0;r<e.length;r++){var i=t.utils.dom.getTextWidth(e[r]);i>n&&(n=i),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<r?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var r=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=r,o.style.fontSize=r,o.style.borderRadius=t.FieldTextInput.BORDERRADIUS*n+"px",r=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var i=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=i+"px "+r+"px "+i+"px "+r+"px",r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=r*n+"px",e.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldNumber=function(e,n,o,r,i,s){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,i,s),s||this.setConstraints(n,o,r)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(t,e,n){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(n),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(t){null==t?this.precision_=0:(t=Number(t),isNaN(t)||(this.precision_=t));var e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}),n=e.indexOf(".");this.decimalPlaces_=-1==n?t?0:null:e.length-n-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(t){return null===t?null:(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t)?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t))},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldVariable=function(e,n,o,r,i){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName=e||"",this.size_=new t.utils.Size(0,0),i&&this.configure_(i),n&&this.setValidator(n),i||this.setTypes_(o,r)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(n,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var n=e.getAttribute("id"),o=e.textContent,r=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,r),null!=r&&r!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(n.getId())},t.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var n=t.Variables.getVariable(this.sourceBlock_.workspace,e);return n?(n=n.type,this.typeIsAllowed_(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},t.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",null==t||void 0==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<t.length;o++)t[o]==e&&(n=!0);if(!n)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}this.defaultType_=e,this.variableTypes=t},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),r=0;r<o.length;r++){var i=this.sourceBlock_.workspace.getVariablesOfType(o[r]);n=n.concat(i)}for(n.sort(t.VariableModel.compareByName),o=[],r=0;r<n.length;r++)o[r]=[n[r].name,n[r].getId()];return o.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&o.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),o},t.FieldVariable.prototype.onItemSelected_=function(e,n){if(e=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.utils.svgPaths={},t.utils.svgPaths.point=function(t,e){return" "+t+","+e+" "},t.utils.svgPaths.curve=function(t,e){return" "+t+e.join("")},t.utils.svgPaths.moveTo=function(t,e){return" M "+t+","+e+" "},t.utils.svgPaths.moveBy=function(t,e){return" m "+t+","+e+" "},t.utils.svgPaths.lineTo=function(t,e){return" l "+t+","+e+" "},t.utils.svgPaths.line=function(t){return" l"+t.join("")},t.utils.svgPaths.lineOnAxis=function(t,e){return" "+t+" "+e+" "},t.utils.svgPaths.arc=function(t,e,n,o){return t+" "+n+" "+n+" "+e+o},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles={};var e,n=t.blockStyles;for(e in n)this.blockStyles[e]=this.validatedBlockStyle_(n[e]);this.setDynamicProperties_(t)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&void 0!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&void 0!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&void 0!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var n={};return e&&t.utils.object.mixin(n,e),e=t.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?t.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?t.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.line([t.utils.svgPaths.point(n,e/4),t.utils.svgPaths.point(2*-n,e/2),t.utils.svgPaths.point(n,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(n,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var r=-(e=e?-1:1),i=o/2,s=i+2.5,a=i+.5,l=t.utils.svgPaths.point(-n,e*i);return i=t.utils.svgPaths.point(n,e*i),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,e*s),t.utils.svgPaths.point(-n,r*a),l])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(n,2.5*r),i])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,r=e(!0),i=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:i,pathUp:r}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.line([t.utils.svgPaths.point(e*r,o),t.utils.svgPaths.point(3*e,0),t.utils.svgPaths.point(e*r,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=(n-3)/2,i=e(1),s=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:i,pathRight:s}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),r=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:n,topRight:o,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:r,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.INPUT_VALUE:case t.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.PREVIOUS_STATEMENT:case t.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,n,o){this.injectCSS_(n,o),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var n=e.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=n:((e=document.createElement("style")).id=t,t=document.createTextNode(n),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.MarkerSvg=function(t,e,n){this.workspace_=t,this.marker_=n,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||t},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},t.blockRendering.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||n,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var n=e.getLocation();e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):n.type==t.INPUT_VALUE?this.showWithInput_(e):n.type==t.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var n=(e=e.getSourceBlock()).width,o=e.height,r=o*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,i=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var s=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(n,i,r,s)}else e.outputConnection?(s=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,o,s)):this.positionBlock_(n,i,r);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var e=(t=t.getLocation()).getSize().width,n=t.getSize().height;this.positionRect_(0,0,e,n),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var n=0;e=e.getOffsetInBlock().y;var o=t.getHeightWidth().width;this.workspace_.RTL&&(n=-o),this.positionLine_(n,e,o),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var e=(t=t.getLocation()).getHeightWidth(),n=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;var o=-this.constants_.CURSOR_STACK_PADDING/2,r=-this.constants_.CURSOR_STACK_PADDING/2,i=o;this.workspace_.RTL&&(i=-(n+o)),this.positionRect_(i,r,n,e),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,n,o){e=t.utils.svgPaths.moveBy(-n,o)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var n=e.getOffsetInBlock().x,o=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(t,e,n){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",n),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,n,o){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-o.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+t.utils.svgPaths.lineOnAxis("V",n)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,n,o,r){e=t.utils.svgPaths.moveBy(-n,o)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+r.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(t,e,n,o){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",n),this.markerSvgRect_.setAttribute("height",o),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,n){var o=n.getSourceBlock(),r=this.isCursor()?"cursorMove":"markerMove";e=new t.Events.Ui(o,r,e,n),n.getType()==t.ASTNode.types.WORKSPACE&&(e.workspaceId=n.getLocation().id),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",t),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,n){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,n){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,n){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,n){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,n){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,n.connection),this.type|=t.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,n){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,n){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,n){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,n){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=n,this.isVisible=n.isVisible(),this.type|=t.blockRendering.Types.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,n,o){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=o},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,n){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,n){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,n){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var e,n=this.elements.length-1;e=this.elements[n];n--)if(t.blockRendering.Types.isInput(e))return e;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,n=0;e=this.elements[n];n++)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,n=this.elements.length-1;e=this.elements[n];n--)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,n=t.getPreviousBlock();return!!t.outputConnection||e||!!n&&n.getNextBlock()==t},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var e,n=0,o=0,r=0,i=0;e=this.elements[i];i++)o+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isHat(e)?r=Math.max(r,e.ascenderHeight):n=Math.max(n,e.height));this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,n)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var e,n=0,o=0,r=0,i=0;e=this.elements[i];i++)o+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isNextConnection(e)?r=Math.max(r,e.height):n=Math.max(n,e.height));this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,n)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,n,o){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,o)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var e,n=0,o=0;e=this.elements[o];o++)this.width+=e.width,t.blockRendering.Types.isInput(e)&&(t.blockRendering.Types.isStatementInput(e)?n+=e.connectedBlockWidth:t.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(n+=e.connectedBlockWidth-e.connectionWidth)),t.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,n){this.block_=n,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new t.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();if(n.length)for(var o,r=0;o=n[r];r++){var i=new t.blockRendering.Icon(this.constants_,o);this.isCollapsed&&o.collapseHidden?this.hiddenIcons.push(i):e.elements.push(i)}for(o=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,o)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),o=0;i=n.fieldRow[o];o++)e.elements.push(new t.blockRendering.Field(this.constants_,i,n));this.addInput_(n,e),o=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),n?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==t.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,this.topRow.hasRightSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.NEXT_STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.INPUT_VALUE?(n.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.NEXT_STATEMENT?(n.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.INPUT_VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.DUMMY_INPUT&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.NEXT_STATEMENT||n.type==t.NEXT_STATEMENT||(e.type==t.INPUT_VALUE||e.type==t.DUMMY_INPUT)&&!this.isInline)},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=0;e=this.rows[n];n++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){e.elements.push(o[r]);var i=this.getInRowSpacing_(o[r],o[r+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,i))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e&&n&&t.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var t,e=0,n=0,o=0,r=0;t=this.rows[r];r++){if(t.measure(),n=Math.max(n,t.width),t.hasStatement){var i=t.getLastInput();e=Math.max(e,t.width-i.width)}o=Math.max(o,t.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=n,r=0;t=this.rows[r];r++)t.hasStatement&&(t.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,n=0;e=this.rows[n];n++)if(e.hasStatement)this.alignStatementRow_(e);else{var o=e.width;0<(o=this.getDesiredRowWidth_(e)-o)&&this.addAlignmentPadding_(e,o),t.blockRendering.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,n){var o=e.getFirstSpacer(),r=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align==t.ALIGN_LEFT?r.width+=n:e.align==t.ALIGN_CENTRE?(o.width+=n/2,r.width+=n/2):e.align==t.ALIGN_RIGHT?o.width+=n:r.width+=n,e.width+=n},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),n=t.width-e.width,o=this.statementEdge;0<(n=o-n)&&this.addAlignmentPadding_(t,n),n=t.width,o=this.getDesiredRowWidth_(t),e.width+=o-n,e.height=Math.max(e.height,t.height),t.width+=o-n,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,n){var o=this.getSpacerRowHeight_(e,n),r=this.getSpacerRowWidth_(e,n);return o=new t.blockRendering.SpacerRow(this.constants_,o,r),e.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,n){return t.blockRendering.Types.isSpacer(n)?e.yPos+n.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var n,o=e.xPos,r=0;n=e.elements[r];r++)t.blockRendering.Types.isSpacer(n)&&(n.height=e.height),n.xPos=o,n.centerline=this.getElemCenterline_(e,n),o+=n.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++)t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks),this.recordElemPositions_(t);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},t.blockRendering.Drawer=function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var t,e=0;t=this.info_.hiddenIcons[e];e++)t.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var o,r=0;o=n[r];r++)t.blockRendering.Types.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(o)?this.outlinePath_+=o.shape.pathLeft:t.blockRendering.Types.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(o)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",o.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var n=e.getLastInput();this.positionExternalValueConnection_(e);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+t.utils.svgPaths.lineOnAxis("v",e.height-n.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var r=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",o)+n+t.utils.svgPaths.lineOnAxis("v",r)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();for(var o,r=0,i="",s=n.length-1;o=n[s];s--)t.blockRendering.Types.isNextConnection(o)?i+=o.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(o)?i+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(o)?i+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(o)?(i+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(o)&&(i+=t.utils.svgPaths.lineOnAxis("h",-1*o.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-r),this.outlinePath_+=i},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var n=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",n)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,n=0;e=this.info_.rows[n];n++)for(var o,r=0;o=e.elements[r];r++)t.blockRendering.Types.isInlineInput(o)?this.drawInlineInput_(o):(t.blockRendering.Types.isIcon(o)||t.blockRendering.Types.isField(o))&&this.layoutField_(o)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var n=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(n=e.icon.iconGroup_);var o=e.centerline-e.height/2,r=e.xPos,i="";this.info_.RTL&&(r=-(r+e.width),e.flipRtl&&(r+=e.width,i="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+r+","+o+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+r+","+o+")"+i),this.info_.isInsertionMarker&&n.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var n=e.width,o=e.height,r=e.connectionOffsetY,i=e.connectionHeight+r;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-o/2)+t.utils.svgPaths.lineOnAxis("v",r)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",o-i)+t.utils.svgPaths.lineOnAxis("h",n-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var n=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e+t.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.width;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,n=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,t.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},t.blockRendering.PathObject=function(e,n,o){this.constants=o,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},t.blockRendering.PathObject.prototype.setClass_=function(e,n){n?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},t.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},t.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,e){},t.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,t.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,n){return new t.blockRendering.Drawer(e,n)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.blockRendering.MarkerSvg(e,this.getConstants(),n)},t.blockRendering.Renderer.prototype.makePathObject=function(e,n){return new t.blockRendering.PathObject(e,n,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,n,o){return o==t.OUTPUT_VALUE?(o=n.outputConnection,e=t.Connection.lastConnectionInRow(e,n)):(o=n.previousConnection,e=e.lastConnectionInStack()),!!e&&o.getConnectionChecker().canConnect(e,o,!1)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,n,o){return n.type==t.OUTPUT_VALUE||n.type==t.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(o,e.targetBlock(),n.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=e.elements[o];o++)t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(n)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(n)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(n)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(n)&&0!=n.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var n=e.getLastInput();if(this.RTL_){var o=e.height-n.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var n=e.getLastInput();if(this.RTL_){var o=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var n=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,t.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var n=this.highlightOffset_,o=e.xPos+e.connectionWidth,r=e.centerline-e.height/2,i=e.width-e.connectionWidth,s=r+n;this.RTL_?(r=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=t.utils.svgPaths.moveTo(o-n,s)+t.utils.svgPaths.lineOnAxis("v",r)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",i)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+n,s)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-i)+t.utils.svgPaths.moveTo(o,r+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,n){t.geras.InlineInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,n){t.geras.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,n){t.geras.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.NEXT_STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.INPUT_VALUE?(n.elements.push(new t.geras.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.NEXT_STATEMENT?(n.elements.push(new t.geras.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.INPUT_VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.DUMMY_INPUT&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=!1,o=0;e=this.rows[o];o++)e.hasExternalInput&&(n=!0);for(o=0;e=this.rows[o];o++){var r=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var i=0;i<r.length-1;i++){e.elements.push(r[i]);var s=this.getInRowSpacing_(r[i],r[i+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s))}e.elements.push(r[r.length-1]),e.endsWithElemSpacer()&&(s=this.getInRowSpacing_(r[r.length-1],null),n&&e.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!n||t.blockRendering.Types.isStatementInput(n)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(t.blockRendering.Types.isNextConnection(n))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset+e}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&n){if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(n))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset-this.constants_.CORNER_RADIUS+e}return t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var o=e.yPos;return t.blockRendering.Types.isField(n)||t.blockRendering.Types.isIcon(n)?(o+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=t.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+e.height/2,o},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var e,n=0,o=null,r=this.rows.length-1;e=this.rows[r];r--)e.nextRightEdge=n,t.blockRendering.Types.isInputRow(e)&&(e.hasStatement&&this.alignStatementRow_(e),o&&o.hasStatement&&e.width<o.width?e.nextRightEdge=o.width:n=e.width,o=e);for(r=n=0;e=this.rows[r];r++)e.hasStatement?n=this.getDesiredRowWidth_(e):t.blockRendering.Types.isSpacer(e)?e.width=Math.max(n,e.nextRightEdge):(0<(n=Math.max(n,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,n),n=e.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++){t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var r=n-this.topRow.ascenderHeight;t==this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,n+=r),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,n){t.geras.Drawer.superClass_.constructor.call(this,e,n),this.highlighter_=new t.geras.Highlighter(n)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var n=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.statementEdge+e.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(n,t.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,n=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e+n)-n,r=t.utils.svgPaths.moveBy(o,o)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-o-n,e-o)),i=t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e+n,e+n)),s=t.utils.svgPaths.moveBy(o,-o)+t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e-o,o+n));return{width:e+n,height:e,pathTop:function(t){return t?r:""},pathBottom:function(t){return t?i:s}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e-n)+n,r=t.utils.svgPaths.moveBy(o,o)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e-o,-o+n)),i=t.utils.svgPaths.moveBy(n,e)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e,-e+n)),s=-o,a=t.utils.svgPaths.moveBy(o,s)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(-o+n,-s-e));return{height:e,topLeft:function(t){return t?r:i},bottomLeft:function(){return a}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=t.utils.svgPaths.moveBy(-2,3.4-n)+t.utils.svgPaths.lineTo(-.45*e,-2.1),r=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),i=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),s=t.utils.svgPaths.moveBy(-5,n-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:n,pathUp:function(t){return t?o:i},pathDown:function(t){return t?r:s}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,n=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),o=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(t){return t?n:o}}},t.geras.PathObject=function(e,n,o){this.constants=o,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},t.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,n){t.geras.Renderer.superClass_.init.call(this,e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,n){t.geras.Renderer.superClass_.refreshDom.call(this,e,n),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,n){return new t.geras.Drawer(e,n)},t.geras.Renderer.prototype.makePathObject=function(e,n){return new t.geras.PathObject(e,n,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,n){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=!1,o=0;e=this.rows[o];o++)e.hasExternalInput&&(n=!0);for(o=0;e=this.rows[o];o++){var r=e.elements;e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0])));for(var i=0;i<r.length-1;i++){e.elements.push(r[i]);var s=this.getInRowSpacing_(r[i],r[i+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s))}e.elements.push(r[r.length-1]),e.endsWithElemSpacer()&&(s=this.getInRowSpacing_(r[r.length-1],null),n&&e.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!n)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))return n.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var o=e.yPos;return t.blockRendering.Types.isField(n)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++){t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var r=n-this.topRow.ascenderHeight;t==this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,n+=r),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(n,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(e,o,r){var i=e/2;return i=i>n?n:i,r=r?-1:1,e=(o?-1:1)*e/2,t.utils.svgPaths.lineTo(-r*i,e)+t.utils.svgPaths.lineTo(r*i,e)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(t){return(t/=2)>n?n:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(e,n,r){var i=e>o?e-o:0;return e=(e>o?o:e)/2,t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((n?-1:1)*e,(n?-1:1)*e))+t.utils.svgPaths.lineOnAxis("v",(r?1:-1)*i)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((n?1:-1)*e,(n?-1:1)*e))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(t){return(t/=2)>n?n:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(e,o,r){return e-=2*n,t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((o?-1:1)*n,(o?-1:1)*n))+t.utils.svgPaths.lineOnAxis("v",(r?1:-1)*e)+t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((o?1:-1)*n,(o?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(t){return n},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case t.INPUT_VALUE:case t.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case t.PREVIOUS_STATEMENT:case t.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/2,0),t.utils.svgPaths.point(e*i*3/4,a/2),t.utils.svgPaths.point(e*i,a)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*i,s)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/4,a/2),t.utils.svgPaths.point(e*i/2,a),t.utils.svgPaths.point(e*i,a)])+t.utils.svgPaths.lineOnAxis("h",e*r)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/2,0),t.utils.svgPaths.point(e*i*3/4,-a/2),t.utils.svgPaths.point(e*i,-a)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*i,-s)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/4,-a/2),t.utils.svgPaths.point(e*i/2,-a),t.utils.svgPaths.point(e*i,-a)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=n/3,i=r/3,s=o/2,a=s/2,l=e(1),u=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:l,pathRight:u}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:n,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,n,o){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,n,o),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e},t.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.StatementInput=function(e,n){if(t.zelos.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock){for(e=this.connectedBlock;e.getNextBlock();)e=e.getNextBlock();e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}},t.utils.object.inherits(t.zelos.StatementInput,t.blockRendering.StatementInput),t.zelos.RenderInfo=function(e,n){t.zelos.RenderInfo.superClass_.constructor.call(this,e,n),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.NEXT_STATEMENT||n.type==t.NEXT_STATEMENT||(e.type==t.INPUT_VALUE||e.type==t.DUMMY_INPUT)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&t.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,r=t.blockRendering.Types.isInputRow(n)&&n.hasStatement;return r||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),r&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){var o=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(n)&&!t.blockRendering.Types.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,n)},t.zelos.RenderInfo.prototype.addInput_=function(e,n){e.type==t.DUMMY_INPUT&&n.hasDummyInput&&n.align==t.ALIGN_LEFT&&e.align==t.ALIGN_RIGHT&&(n.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,n)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,n){if(e.rightAlignedDummyInput){for(var o,r,i=0;(r=e.elements[i])&&(t.blockRendering.Types.isSpacer(r)&&(o=r),!t.blockRendering.Types.isField(r)||r.parentInput!=e.rightAlignedDummyInput);i++);if(o)return o.width+=n,void(e.width+=n)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,n)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=e,o=2;o<this.rows.length-1;o+=2){var r=this.rows[o-1],i=this.rows[o],s=this.rows[o+1];if(r=2==o?!!this.topRow.hasPreviousConnection:!!r.followsStatement,s=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement,t.blockRendering.Types.isInputRow(i)&&i.hasStatement)i.measure(),n=i.width-i.getLastInput().width+e;else if(r&&(2==o||s)&&t.blockRendering.Types.isInputRow(i)&&!i.hasStatement){s=i.xPos,r=null;for(var a,l=0;a=i.elements[l];l++)t.blockRendering.Types.isSpacer(a)&&(r=a),!(r&&(t.blockRendering.Types.isField(a)||t.blockRendering.Types.isInput(a))&&s<n)||t.blockRendering.Types.isField(a)&&(a.field instanceof t.FieldLabel||a.field instanceof t.FieldImage)||(r.width+=n-s),s+=a.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t,e=0,n=0;t=this.rows[n];n++)t.yPos=e,e+=t.height;this.height=e,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,e=this.outputConnection.shape.height(n),n=this.outputConnection.shape.width(n),this.outputConnection.height=e,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=n,this.rightSide.height=e,this.rightSide.width=t,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+t),this.startX=n,this.width+=n+t,this.widthWithChildren+=n+t}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e,n=0,o=0;e=this.rows[o];o++)if(t.blockRendering.Types.isInputRow(e)){n=e.elements[e.elements.length-2];var r=this.getNegativeSpacing_(e.elements[1]),i=this.getNegativeSpacing_(n);n=r+i;var s=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-n<s&&(r=(n=this.width-s)/2,i=n/2),e.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-r)),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-i))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,o=0;e=this.rows[o];o++)t.blockRendering.Types.isTopOrBottomRow(e)&&(e.elements[1].width-=n,e.elements[1].widthWithConnectedBlocks-=n),e.width-=n,e.widthWithConnectedBlocks-=n}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,r=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===r.SHAPES.ROUND?(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n-(o=this.height/2>o?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)))):0;if(t.blockRendering.Types.isInlineInput(e)){var i=e.connectedBlock;return e=i?i.pathObject.outputShapeType:e.shape.type,i&&i.outputConnection&&(i.statementInputCount||i.nextConnection)||o==r.SHAPES.HEXAGONAL&&o!=e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return t.blockRendering.Types.isField(e)?o==r.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?n-2.75*r.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var n=this.rows[e-1],o=this.rows[e],r=this.rows[e+1],i=2==e,s=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!r.precedesStatement;if(i?this.topRow.hasPreviousConnection:n.followsStatement){var a=3==o.elements.length&&(o.elements[1].field instanceof t.FieldLabel||o.elements[1].field instanceof t.FieldImage);if(!i&&a)n.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(i||s){if(s){for(i=!1,s=0;a=o.elements[s];s++)if(t.blockRendering.Types.isInlineInput(a)&&a.connectedBlock&&!a.connectedBlock.isShadow()&&40<=a.connectedBlock.getHeightWidth().height){i=!0;break}i&&(n.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,n){t.zelos.Drawer.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;n=e.height-(e.precedesStatement?n:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<n?t.utils.svgPaths.lineOnAxis("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var o=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",o)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-o)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,r=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,i=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",o)+r+t.utils.svgPaths.lineOnAxis("v",i)+n+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.PathObject=function(e,n,o){t.zelos.PathObject.superClass_.constructor.call(this,e,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_={},this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),e=0;for(var n,o=Object.keys(this.outlines_);n=o[e];e++)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){t.zelos.PathObject.superClass_.flipRTL.call(this);for(var e,n=0,o=Object.keys(this.outlines_);e=o[n];n++)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var t,e=0,n=Object.keys(this.outlines_);t=n[e];e++)this.remainingOutlines_[t]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t,e=0,n=Object.keys(this.remainingOutlines_);t=n[e];e++)this.removeOutlinePath_(t);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(t,e){(t=this.getOutlinePath_(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},t.zelos.MarkerSvg=function(e,n,o){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,n){return new t.zelos.Drawer(e,n)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.zelos.MarkerSvg(e,this.getConstants(),n)},t.zelos.Renderer.prototype.makePathObject=function(e,n){return new t.zelos.PathObject(e,n,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.INPUT_VALUE&&e.type!==t.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,n,o){return n.type==t.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,n,o)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.Dark=t.Theme.defineTheme("dark",{base:t.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),t.Themes.Deuteranopia={},t.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},t.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},t.Themes.Deuteranopia=new t.Theme("deuteranopia",t.Themes.Deuteranopia.defaultBlockStyles,t.Themes.Deuteranopia.categoryStyles),t.Themes.HighContrast={},t.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},t.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},t.Themes.HighContrast=new t.Theme("highcontrast",t.Themes.HighContrast.defaultBlockStyles,t.Themes.HighContrast.categoryStyles),t.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),t.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),t.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),t.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),t.Themes.Tritanopia={},t.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},t.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},t.Themes.Tritanopia=new t.Theme("tritanopia",t.Themes.Tritanopia.defaultBlockStyles,t.Themes.Tritanopia.categoryStyles),t.requires={},t})?o.apply(e,r):o)||(t.exports=i)}).call(this,n(36))},function(t,e,n){(function(e,o){var r=n(173),i=n(174),s=n(175);function a(t){if(!arguments.length||void 0===t)throw new Error("constructor requires at least a location argument");if("string"!=typeof t)throw new Error("constructor requires a location string argument");this.location=t}a.prototype.open=function(t,n){if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("open() requires a callback argument");if("object"!=typeof t&&(t={}),"function"==typeof this._open)return this._open(t,n);e.nextTick(n)},a.prototype.close=function(t){if("function"!=typeof t)throw new Error("close() requires a callback argument");if("function"==typeof this._close)return this._close(t);e.nextTick(t)},a.prototype.get=function(t,n,o){var r;if("function"==typeof n&&(o=n),"function"!=typeof o)throw new Error("get() requires a callback argument");return(r=this._checkKeyValue(t,"key",this._isBuffer))?o(r):(this._isBuffer(t)||(t=String(t)),"object"!=typeof n&&(n={}),"function"==typeof this._get?this._get(t,n,o):void e.nextTick((function(){o(new Error("NotFound"))})))},a.prototype.put=function(t,n,o,r){var i;if("function"==typeof o&&(r=o),"function"!=typeof r)throw new Error("put() requires a callback argument");return(i=this._checkKeyValue(t,"key",this._isBuffer))||(i=this._checkKeyValue(n,"value",this._isBuffer))?r(i):(this._isBuffer(t)||(t=String(t)),this._isBuffer(n)||e.browser||(n=String(n)),"object"!=typeof o&&(o={}),"function"==typeof this._put?this._put(t,n,o,r):void e.nextTick(r))},a.prototype.del=function(t,n,o){var r;if("function"==typeof n&&(o=n),"function"!=typeof o)throw new Error("del() requires a callback argument");return(r=this._checkKeyValue(t,"key",this._isBuffer))?o(r):(this._isBuffer(t)||(t=String(t)),"object"!=typeof n&&(n={}),"function"==typeof this._del?this._del(t,n,o):void e.nextTick(o))},a.prototype.batch=function(t,n,o){if(!arguments.length)return this._chainedBatch();if("function"==typeof n&&(o=n),"function"!=typeof o)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return o(new Error("batch(array) requires an array argument"));"object"!=typeof n&&(n={});for(var r,i,s=0,a=t.length;s<a;s++)if("object"==typeof(r=t[s])){if(i=this._checkKeyValue(r.type,"type",this._isBuffer))return o(i);if(i=this._checkKeyValue(r.key,"key",this._isBuffer))return o(i);if("put"==r.type&&(i=this._checkKeyValue(r.value,"value",this._isBuffer)))return o(i)}if("function"==typeof this._batch)return this._batch(t,n,o);e.nextTick(o)},a.prototype.approximateSize=function(t,n,o){if(null==t||null==n||"function"==typeof t||"function"==typeof n)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof o)throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(t)||(t=String(t)),this._isBuffer(n)||(n=String(n)),"function"==typeof this._approximateSize)return this._approximateSize(t,n,o);e.nextTick((function(){o(null,0)}))},a.prototype._setupIteratorOptions=function(t){var e=this;return t=r(t),["start","end","gt","gte","lt","lte"].forEach((function(n){t[n]&&e._isBuffer(t[n])&&0===t[n].length&&delete t[n]})),t.reverse=!!t.reverse,t.reverse&&t.lt&&(t.start=t.lt),t.reverse&&t.lte&&(t.start=t.lte),!t.reverse&&t.gt&&(t.start=t.gt),!t.reverse&&t.gte&&(t.start=t.gte),(t.reverse&&t.lt&&!t.lte||!t.reverse&&t.gt&&!t.gte)&&(t.exclusiveStart=!0),t},a.prototype.iterator=function(t){return"object"!=typeof t&&(t={}),t=this._setupIteratorOptions(t),"function"==typeof this._iterator?this._iterator(t):new i(this)},a.prototype._chainedBatch=function(){return new s(this)},a.prototype._isBuffer=function(t){return o.isBuffer(t)},a.prototype._checkKeyValue=function(t,e){if(null===t||void 0===t)return new Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(t)){if(0===t.length)return new Error(e+" cannot be an empty Buffer")}else if(""===String(t))return new Error(e+" cannot be an empty String")},t.exports.AbstractLevelDOWN=a,t.exports.AbstractIterator=i,t.exports.AbstractChainedBatch=s}).call(this,n(9),n(13).Buffer)},function(t,e,n){"use strict";(function(e,o,r){var i=n(61);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var o=t.entry;t.entry=null;for(;o;){var r=o.callback;e.pendingcb--,r(n),o=o.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var a,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?o:i.nextTick;m.WritableState=v;var u=Object.create(n(12));u.inherits=n(10);var c={deprecate:n(200)},h=n(105),p=n(62).Buffer,d=r.Uint8Array||function(){};var f,g=n(106);function _(){}function v(t,e){a=a||n(48),t=t||{};var o=e instanceof a;this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,u=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,o=n.sync,r=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,o,r){--e.pendingcb,n?(i.nextTick(r,o),i.nextTick(k,t,e),t._writableState.errorEmitted=!0,t.emit("error",o)):(r(o),t._writableState.errorEmitted=!0,t.emit("error",o),k(t,e))}(t,n,o,e,r);else{var s=T(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),o?l(b,t,n,s,r):b(t,n,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function m(t){if(a=a||n(48),!f.call(m,this)&&!(this instanceof a))return new m(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),h.call(this)}function y(t,e,n,o,r,i,s){e.writelen=o,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,i,e.onwrite),e.sync=!1}function b(t,e,n,o){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,o(),k(t,e)}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var o=e.bufferedRequestCount,r=new Array(o),i=e.corkedRequestsFree;i.entry=n;for(var a=0,l=!0;n;)r[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;r.allBuffers=l,y(t,e,!0,e.length,r,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,h=n.callback;if(y(t,e,!1,e.objectMode?1:u.length,u,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,e){var n=T(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,i.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}u.inherits(m,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!f.call(this,t)||this===m&&(t&&t._writableState instanceof v)}})):f=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var o,r=this._writableState,s=!1,a=!r.objectMode&&(o=t,p.isBuffer(o)||o instanceof d);return a&&!p.isBuffer(t)&&(t=function(t){return p.from(t)}(t)),"function"===typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!==typeof n&&(n=_),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),i.nextTick(e,n)}(this,n):(a||function(t,e,n,o){var r=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),i.nextTick(o,s),r=!1),r}(this,r,t,n))&&(r.pendingcb++,s=function(t,e,n,o,r,i){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=p.from(e,n));return e}(e,o,r);o!==s&&(n=!0,r="buffer",o=s)}var a=e.objectMode?1:o.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:o,encoding:r,isBuf:n,callback:i,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,a,o,r,i);return l}(this,r,a,t,e,n)),s},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var o=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(t,e,n){e.ending=!0,k(t,e),n&&(e.finished?i.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,o,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(9),n(198).setImmediate,n(36))},function(t,e,n){(function(e){t.exports=a;var o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},r=n(12);r.inherits=n(10);var i=n(108),s=n(109);function a(t){if(!(this instanceof a))return new a(t);i.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}r.inherits(a,i),function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(o(s.prototype),(function(t){a.prototype[t]||(a.prototype[t]=s.prototype[t])}))}).call(this,n(9))},function(t,e,n){(function(e){t.exports=a;var o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},r=n(12);r.inherits=n(10);var i=n(111),s=n(112);function a(t){if(!(this instanceof a))return new a(t);i.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}r.inherits(a,i),function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(o(s.prototype),(function(t){a.prototype[t]||(a.prototype[t]=s.prototype[t])}))}).call(this,n(9))},function(t,e,n){(function(e){t.exports=l;var o=n(13).Buffer;l.WritableState=a;var r=n(12);r.inherits=n(10);var i=n(23);function s(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function a(t,n){var o=(t=t||{}).highWaterMark;this.highWaterMark=o||0===o?o:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var o=t._writableState,r=o.sync,i=o.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(o),n)!function(t,n,o,r,i){o?e.nextTick((function(){i(r)})):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,0,r,n,i);else{var s=h(t,o);s||o.bufferProcessing||!o.buffer.length||function(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var o=e.buffer[n],r=o.chunk,i=o.encoding,s=o.callback;if(u(t,e,e.objectMode?1:r.length,r,i,s),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}(t,o),r?e.nextTick((function(){c(t,o,s,i)})):c(t,o,s,i)}}(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function l(t){var e=n(64);if(!(this instanceof l)&&!(this instanceof e))return new l(t);this._writableState=new a(t,this),this.writable=!0,i.call(this)}function u(t,e,n,o,r,i){e.writelen=n,e.writecb=i,e.writing=!0,e.sync=!0,t._write(o,r,e.onwrite),e.sync=!1}function c(t,e,n,o){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),o(),n&&p(t,e)}function h(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function p(t,e){var n=h(0,e);return n&&(e.finished=!0,t.emit("finish")),n}r.inherits(l,i),l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},l.prototype.write=function(t,n,r){var i=this._writableState,a=!1;return"function"===typeof n&&(r=n,n=null),o.isBuffer(t)?n="buffer":n||(n=i.defaultEncoding),"function"!==typeof r&&(r=function(){}),i.ended?function(t,n,o){var r=new Error("write after end");t.emit("error",r),e.nextTick((function(){o(r)}))}(this,0,r):function(t,n,r,i){var s=!0;if(!o.isBuffer(r)&&"string"!==typeof r&&null!==r&&void 0!==r&&!n.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),e.nextTick((function(){i(a)})),s=!1}return s}(this,i,t,r)&&(a=function(t,e,n,r,i){n=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=new o(e,n));return e}(e,n,r),o.isBuffer(n)&&(r="buffer");var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);e.writing?e.buffer.push(new s(n,r,i)):u(t,e,a,n,r,i);return l}(this,i,t,n,r)),a},l.prototype._write=function(t,e,n){n(new Error("not implemented"))},l.prototype.end=function(t,n,o){var r=this._writableState;"function"===typeof t?(o=t,t=null,n=null):"function"===typeof n&&(o=n,n=null),"undefined"!==typeof t&&null!==t&&this.write(t,n),r.ending||r.finished||function(t,n,o){n.ending=!0,p(t,n),o&&(n.finished?e.nextTick(o):t.once("finish",o));n.ended=!0}(this,r,o)}}).call(this,n(9))},function(t,e,n){(function(e){t.exports=l;var o=n(13).Buffer;l.WritableState=a;var r=n(12);r.inherits=n(10);var i=n(23);function s(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function a(t,o){var r=n(53),i=(t=t||{}).highWaterMark,s=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:s,this.objectMode=!!t.objectMode,o instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var o=t._writableState,r=o.sync,i=o.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(o),n)!function(t,n,o,r,i){o?e.nextTick((function(){n.pendingcb--,i(r)})):(n.pendingcb--,i(r));t._writableState.errorEmitted=!0,t.emit("error",r)}(t,o,r,n,i);else{var s=p(t,o);s||o.corked||o.bufferProcessing||!o.buffer.length||h(t,o),r?e.nextTick((function(){c(t,o,s,i)})):c(t,o,s,i)}}(o,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function l(t){var e=n(53);if(!(this instanceof l)&&!(this instanceof e))return new l(t);this._writableState=new a(t,this),this.writable=!0,i.call(this)}function u(t,e,n,o,r,i,s){e.writelen=o,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,i,e.onwrite),e.sync=!1}function c(t,e,n,o){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,o(),f(t,e)}function h(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],o=0;o<e.buffer.length;o++)n.push(e.buffer[o].callback);e.pendingcb++,u(t,e,!0,e.length,e.buffer,"",(function(t){for(var o=0;o<n.length;o++)e.pendingcb--,n[o](t)})),e.buffer=[]}else{for(o=0;o<e.buffer.length;o++){var r=e.buffer[o],i=r.chunk,s=r.encoding,a=r.callback,l=e.objectMode?1:i.length;if(u(t,e,!1,l,i,s,a),e.writing){o++;break}}o<e.buffer.length?e.buffer=e.buffer.slice(o):e.buffer.length=0}e.bufferProcessing=!1}function p(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function d(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function f(t,e){var n=p(0,e);return n&&(0===e.pendingcb?(d(t,e),e.finished=!0,t.emit("finish")):d(t,e)),n}r.inherits(l,i),l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},l.prototype.write=function(t,n,i){var a=this._writableState,l=!1;return r.isFunction(n)&&(i=n,n=null),r.isBuffer(t)?n="buffer":n||(n=a.defaultEncoding),r.isFunction(i)||(i=function(){}),a.ended?function(t,n,o){var r=new Error("write after end");t.emit("error",r),e.nextTick((function(){o(r)}))}(this,0,i):function(t,n,o,i){var s=!0;if(!r.isBuffer(o)&&!r.isString(o)&&!r.isNullOrUndefined(o)&&!n.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),e.nextTick((function(){i(a)})),s=!1}return s}(this,a,t,i)&&(a.pendingcb++,l=function(t,e,n,i,a){n=function(t,e,n){!t.objectMode&&!1!==t.decodeStrings&&r.isString(e)&&(e=new o(e,n));return e}(e,n,i),r.isBuffer(n)&&(i="buffer");var l=e.objectMode?1:n.length;e.length+=l;var c=e.length<e.highWaterMark;c||(e.needDrain=!0);e.writing||e.corked?e.buffer.push(new s(n,i,a)):u(t,e,!1,l,n,i,a);return c}(this,a,t,n,i)),l},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||h(this,t))},l.prototype._write=function(t,e,n){n(new Error("not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,n,o){var i=this._writableState;r.isFunction(t)?(o=t,t=null,n=null):r.isFunction(n)&&(o=n,n=null),r.isNullOrUndefined(t)||this.write(t,n),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,n,o){n.ending=!0,f(t,n),o&&(n.finished?e.nextTick(o):t.once("finish",o));n.ended=!0}(this,i,o)}}).call(this,n(9))},function(t,e,n){var o=n(242);function r(t){var e=function e(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function i(t){var e=function e(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=o(r),t.exports.strict=o(i),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))},function(t,e,n){var o=n(54)(n(41),"Map");t.exports=o},function(t,e,n){var o=n(41).Symbol;t.exports=o},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o,r=n(28),i=(n(124),function(){if(!Object(r.a)()||!window.document.documentElement)return!1;if(void 0!==o)return o;var t=document.createElement("div");return t.style.display="flex",t.style.flexDirection="column",t.style.rowGap="1px",t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),document.body.appendChild(t),o=1===t.scrollHeight,document.body.removeChild(t),o})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(n(0)),r=u(n(52)),i=n(83),s=u(n(84)),a=u(n(100)),l=u(n(85));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,o=g(t);if(e()){var r=g(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d(this,n)}}(n);function n(){var t;h(this,n);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return _(f(t=e.call.apply(e,[this].concat(s))),"componentDidMount",(function(){t.props.didUpdate()})),_(f(t),"shouldComponentUpdate",(function(e){return!((0,i.is)(e.categories,t.props.categories)&&(0,i.is)(e.blocks,t.props.blocks))})),_(f(t),"componentDidUpdate",(function(){t.props.didUpdate()})),_(f(t),"getRootNode",(function(){return t.rootNode})),_(f(t),"processCategory",(function(e){var n=e;return n.has("categories")&&(n=e.update("categories",(function(e){return e.map(t.processCategory)}))),t.props.processCategory?t.props.processCategory(n):n})),_(f(t),"renderCategories",(function(t){return t.map((function(t,e){return"sep"===t.get("type")?o.default.createElement("sep",{key:"sep_".concat(e)}):"search"===t.get("type")?o.default.createElement("search",{key:"search_".concat(e)}):o.default.createElement(a.default,{name:t.get("name"),custom:t.get("custom"),colour:t.get("colour"),expanded:t.get("expanded"),key:"category_".concat(t.get("name"),"_").concat(e),blocks:t.get("blocks"),button:t.get("button"),categories:t.get("categories")})}))})),_(f(t),"render",(function(){return t.props.categories?o.default.createElement("xml",{style:{display:"none"},is:"div",ref:function(e){t.rootNode=e}},t.renderCategories(t.props.categories.map(t.processCategory))):o.default.createElement("xml",{style:{display:"none"},is:"div",ref:function(e){t.rootNode=e}},t.props.blocks.map(l.default.renderBlock))})),t}return n}(o.default.Component);_(v,"propTypes",{categories:s.default.list,blocks:s.default.list,processCategory:r.default.func,didUpdate:r.default.func}),_(v,"defaultProps",{categories:null,blocks:null,processCategory:null,didUpdate:null});var m=v;e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=l(n(0)),r=l(n(52)),i=l(n(84)),s=l(n(85)),a=l(n(161));function l(t){return t&&t.__esModule?t:{default:t}}function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,o=f(t);if(e()){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}(n);function n(){var t;c(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return g(d(t=e.call.apply(e,[this].concat(i))),"render",(function(){var e=(t.props.categories||[]).map(n.renderCategory),r=(t.props.blocks||[]).map(s.default.renderBlock),i=(t.props.button||[]).map(a.default.renderButton);return o.default.createElement("category",{name:t.props.name,custom:t.props.custom,colour:t.props.colour,expanded:t.props.expanded,is:"div"},i,r,e)})),t}return n}(o.default.PureComponent);g(_,"propTypes",{name:r.default.string,custom:r.default.string,colour:r.default.string,expanded:r.default.string,categories:i.default.list,blocks:i.default.list,button:i.default.list}),g(_,"defaultProps",{name:null,custom:null,colour:null,expanded:null,categories:null,blocks:null,button:null}),g(_,"renderCategory",(function(t,e){return"sep"===t.get("type")?o.default.createElement("sep",{key:e}):"search"===t.get("type")?o.default.createElement("search",{key:e}):o.default.createElement(_,{name:t.get("name"),custom:t.get("custom"),colour:t.get("colour"),expanded:t.get("expanded"),key:e,blocks:t.get("blocks"),button:t.get("button"),categories:t.get("categories")})}));var v=_;e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n(0)),r=s(n(52)),i=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,o=d(t);if(e()){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h(this,n)}}(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),f(p(r=e.call(this,t)),"componentDidMount",(function(){r.state.workspace=i.default.inject(r.editorDiv,u(u({},r.props.workspaceConfiguration),{},{toolbox:r.dummyToolbox})),r.state.xml&&(r.importFromXml(r.state.xml)?r.xmlDidChange():r.setState({xml:null},r.xmlDidChange)),r.state.workspace.addChangeListener(r.workspaceDidChange),r.state.workspace.addChangeListener(function(t,e){var n;return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var s=this,a=function(){n=null,t.apply(s,r)};clearTimeout(n),n=setTimeout(a,e)}}((function(){var t=i.default.Xml.domToText(i.default.Xml.workspaceToDom(r.state.workspace));t!==r.state.xml&&r.setState({xml:t},r.xmlDidChange)}),200))})),f(p(r),"componentWillReceiveProps",(function(t){r.props.initialXml!==t.initialXml&&r.setState({xml:t.initialXml})})),f(p(r),"shouldComponentUpdate",(function(){return!1})),f(p(r),"componentWillUnmount",(function(){r.state.workspace&&r.state.workspace.dispose()})),f(p(r),"importFromXml",(function(t){try{return i.default.Xml.domToWorkspace(i.default.Xml.textToDom(t),r.state.workspace),!0}catch(e){return r.props.onImportXmlError&&r.props.onImportXmlError(e),!1}})),f(p(r),"xmlDidChange",(function(){r.props.xmlDidChange&&r.props.xmlDidChange(r.state.xml)})),f(p(r),"workspaceDidChange",(function(){r.props.workspaceDidChange&&r.props.workspaceDidChange(r.state.workspace)})),f(p(r),"toolboxDidUpdate",(function(t){t&&r.state.workspace&&r.state.workspace.updateToolbox(t)})),f(p(r),"resize",(function(){i.default.svgResize(r.state.workspace)})),f(p(r),"render",(function(){var t;return"CATEGORIES"===r.props.toolboxMode&&(t=o.default.createElement("category",{name:"Dummy toolbox",colour:"",is:"div"})),o.default.createElement("div",{className:r.props.wrapperDivClassName},o.default.createElement("xml",{style:{display:"none"},ref:function(t){r.dummyToolbox=t},is:"div"},t),o.default.createElement("div",{className:r.props.wrapperDivClassName,ref:function(t){r.editorDiv=t}}))})),r.state={workspace:null,xml:r.props.initialXml},r}return n}(o.default.Component);f(g,"propTypes",{initialXml:r.default.string,workspaceConfiguration:r.default.object,wrapperDivClassName:r.default.string,xmlDidChange:r.default.func,workspaceDidChange:r.default.func,onImportXmlError:r.default.func,toolboxMode:r.default.oneOf(["CATEGORIES","BLOCKS"])}),f(g,"defaultProps",{initialXml:null,workspaceConfiguration:null,wrapperDivClassName:null,xmlDidChange:null,workspaceDidChange:null,onImportXmlError:null,toolboxMode:"BLOCKS"});var _=g;e.default=_},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var o=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},o.forEach((function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e})),t.exports.custom=n(191)(t.exports),t.exports.create=t.exports.custom.createError},function(t,e,n){"use strict";(function(e,o){var r=n(61);t.exports=y;var i,s=n(102);y.ReadableState=m;n(33).EventEmitter;var a=function(t,e){return t.listeners(e).length},l=n(105),u=n(62).Buffer,c=e.Uint8Array||function(){};var h=Object.create(n(12));h.inherits=n(10);var p=n(195),d=void 0;d=p&&p.debuglog?p.debuglog("stream"):function(){};var f,g=n(196),_=n(106);h.inherits(y,l);var v=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var o=e instanceof(i=i||n(48));this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=n(37).StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function y(t){if(i=i||n(48),!(this instanceof y))return new y(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function b(t,e,n,o,r){var i,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,k(t)}(t,s)):(r||(i=function(t,e){var n;o=e,u.isBuffer(o)||o instanceof c||"string"===typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var o;return n}(s,e)),i?t.emit("error",i):s.objectMode||e&&e.length>0?("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),o?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?E(t,s,e,!1):O(t,s)):E(t,s,e,!1))):o||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function E(t,e,n,o){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&k(t)),O(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=_.destroy,y.prototype._undestroy=_.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var n,o=this._readableState;return o.objectMode?n=!0:"string"===typeof t&&((e=e||o.defaultEncoding)!==o.encoding&&(t=u.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},y.prototype.unshift=function(t){return b(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return f||(f=n(37).StringDecoder),this._readableState.decoder=new f(t),this._readableState.encoding=t,this};var T=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(C,t):C(t))}function C(t){d("emit readable"),t.emit("readable"),A(t)}function O(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(R,t,e))}function R(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function w(t){d("readable nexttick read 0"),t.read(0)}function I(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function N(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var o;t<e.head.data.length?(o=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):o=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,o=1,r=n.data;t-=r.length;for(;n=n.next;){var i=n.data,s=t>i.length?i.length:t;if(s===i.length?r+=i:r+=i.slice(0,t),0===(t-=s)){s===i.length?(++o,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=i.slice(s));break}++o}return e.length-=o,r}(t,e):function(t,e){var n=u.allocUnsafe(t),o=e.head,r=1;o.data.copy(n),t-=o.data.length;for(;o=o.next;){var i=o.data,s=t>i.length?i.length:t;if(i.copy(n,n.length-t,0,s),0===(t-=s)){s===i.length?(++r,o.next?e.head=o.next:e.head=e.tail=null):(e.head=o,o.data=i.slice(s));break}++r}return e.length-=r,n}(t,e);return o}(t,e.buffer,e.decoder),n);var n}function D(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(M,e,t))}function M(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}y.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):k(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&D(this),null;var o,r=e.needReadable;return d("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",r=!0),e.ended||e.reading?d("reading or ended",r=!1):r&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(n,e))),null===(o=t>0?N(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==o&&this.emit("data",o),o},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,d("pipe count=%d opts=%j",i.pipesCount,e);var l=(!e||!1!==e.end)&&t!==o.stdout&&t!==o.stderr?c:y;function u(e,o){d("onunpipe"),e===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,d("cleanup"),t.removeListener("close",v),t.removeListener("finish",m),t.removeListener("drain",h),t.removeListener("error",_),t.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",y),n.removeListener("data",g),p=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){d("onend"),t.end()}i.endEmitted?r.nextTick(l):n.once("end",l),t.on("unpipe",u);var h=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,A(t))}}(n);t.on("drain",h);var p=!1;var f=!1;function g(e){d("ondata"),f=!1,!1!==t.write(e)||f||((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==L(i.pipes,t))&&!p&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function _(e){d("onerror",e),y(),t.removeListener("error",_),0===a(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",m),y()}function m(){d("onfinish"),t.removeListener("close",v),y()}function y(){d("unpipe"),n.unpipe(t)}return n.on("data",g),function(t,e,n){if("function"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",_),t.once("close",v),t.once("finish",m),t.emit("pipe",n),i.flowing||(d("pipe resume"),n.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var o=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)o[i].emit("unpipe",this,n);return this}var s=L(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},y.prototype.on=function(t,e){var n=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&k(this):r.nextTick(w,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(I,t,e))}(this,t)),this},y.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,n=this._readableState,o=!1;for(var r in t.on("end",(function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(r){(d("wrapped data"),n.decoder&&(r=n.decoder.write(r)),!n.objectMode||null!==r&&void 0!==r)&&((n.objectMode||r&&r.length)&&(e.push(r)||(o=!0,t.pause())))})),t)void 0===this[r]&&"function"===typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var i=0;i<v.length;i++)t.on(v[i],this.emit.bind(this,v[i]));return this._read=function(e){d("wrapped _read",e),o&&(o=!1,t.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=N}).call(this,n(36),n(9))},function(t,e,n){t.exports=n(33).EventEmitter},function(t,e,n){"use strict";var o=n(61);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(o.nextTick(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";t.exports=s;var o=n(48),r=Object.create(n(12));function i(t,e){var n=this._transformState;n.transforming=!1;var o=n.writecb;if(!o)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),o(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);o.call(this,t),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"===typeof this._flush?this._flush((function(e,n){l(t,e,n)})):l(this,null,null)}function l(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(10),r.inherits(s,o),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,o.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;o.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){(function(e){t.exports=c;var o=n(206),r=n(13).Buffer;c.ReadableState=u;var i=n(33).EventEmitter;i.listenerCount||(i.listenerCount=function(t,e){return t.listeners(e).length});var s,a=n(23),l=n(12);function u(t,e){var o=(t=t||{}).highWaterMark;this.highWaterMark=o||0===o?o:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=n(37).StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function c(t){if(!(this instanceof c))return new c(t);this._readableState=new u(t,this),this.readable=!0,a.call(this)}function h(t,n,o,i,s){var a=function(t,e){var n=null;r.isBuffer(e)||"string"===typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(n,o);if(a)t.emit("error",a);else if(null===o||void 0===o)n.reading=!1,n.ended||function(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?f(t):b(t)}(t,n);else if(n.objectMode||o&&o.length>0)if(n.ended&&!s){var l=new Error("stream.push() after EOF");t.emit("error",l)}else if(n.endEmitted&&s){l=new Error("stream.unshift() after end event");t.emit("error",l)}else!n.decoder||s||i||(o=n.decoder.write(o)),n.length+=n.objectMode?1:o.length,s?n.buffer.unshift(o):(n.reading=!1,n.buffer.push(o)),n.needReadable&&f(t),function(t,n){n.readingMore||(n.readingMore=!0,e.nextTick((function(){!function(t,e){var n=e.length;for(;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}(t,n)})))}(t,n);else s||(n.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(n)}l.inherits=n(10),l.inherits(c,a),c.prototype.push=function(t,e){var n=this._readableState;return"string"!==typeof t||n.objectMode||(e=e||n.defaultEncoding)!==n.encoding&&(t=new r(t,e),e=""),h(this,n,t,e,!1)},c.prototype.unshift=function(t){return h(this,this._readableState,t,"",!0)},c.prototype.setEncoding=function(t){s||(s=n(37).StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t};var p=8388608;function d(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=function(t){if(t>=p)t=p;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function f(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?e.nextTick((function(){g(t)})):g(t))}function g(t){t.emit("readable")}function _(t){var e,n=t._readableState;function o(t,o,r){!1===t.write(e)&&n.awaitDrain++}for(n.awaitDrain=0;n.pipesCount&&null!==(e=t.read());)if(1===n.pipesCount?o(n.pipes):E(n.pipes,o),t.emit("data",e),n.awaitDrain>0)return;if(0===n.pipesCount)return n.flowing=!1,void(i.listenerCount(t,"data")>0&&m(t));n.ranOut=!0}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,_(this))}function m(t,n){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var o=n||!1,r=!1;t.readable=!0,t.pipe=a.prototype.pipe,t.on=t.addListener=a.prototype.on,t.on("readable",(function(){var e;for(r=!0;!o&&null!==(e=t.read());)t.emit("data",e);null===e&&(r=!1,t._readableState.needReadable=!0)})),t.pause=function(){o=!0,this.emit("pause")},t.resume=function(){o=!1,r?e.nextTick((function(){t.emit("readable")})):this.read(0),this.emit("resume")},t.emit("readable")}function y(t,e){var n,o=e.buffer,i=e.length,s=!!e.decoder,a=!!e.objectMode;if(0===o.length)return null;if(0===i)n=null;else if(a)n=o.shift();else if(!t||t>=i)n=s?o.join(""):r.concat(o,i),o.length=0;else{if(t<o[0].length)n=(h=o[0]).slice(0,t),o[0]=h.slice(t);else if(t===o[0].length)n=o.shift();else{n=s?"":new r(t);for(var l=0,u=0,c=o.length;u<c&&l<t;u++){var h=o[0],p=Math.min(t-l,h.length);s?n+=h.slice(0,p):h.copy(n,l,0,p),p<h.length?o[0]=h.slice(p):o.shift(),l+=p}}}return n}function b(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,e.nextTick((function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))})))}function E(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}c.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,o=t;if(("number"!==typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f(this),null;if(0===(t=d(t,e))&&e.ended)return n=null,e.length>0&&e.decoder&&(n=y(t,e),e.length-=n.length),0===e.length&&b(this),n;var r=e.needReadable;return e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=d(o,e)),null===(n=t>0?y(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&b(this),n},c.prototype._read=function(t){this.emit("error",new Error("not implemented"))},c.prototype.pipe=function(t,n){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1;var a=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr?u:h;function l(t){t===r&&h()}function u(){t.end()}s.endEmitted?e.nextTick(a):r.once("end",a),t.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&_(t)}}(r);function h(){t.removeListener("close",d),t.removeListener("finish",f),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",h),t._writableState&&!t._writableState.needDrain||c()}function p(e){g(),t.removeListener("error",p),0===i.listenerCount(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",f),g()}function f(){t.removeListener("close",d),g()}function g(){r.unpipe(t)}return t.on("drain",c),t._events&&t._events.error?o(t._events.error)?t._events.error.unshift(p):t._events.error=[p,t._events.error]:t.on("error",p),t.once("close",d),t.once("finish",f),t.emit("pipe",r),s.flowing||(this.on("readable",v),s.flowing=!0,e.nextTick((function(){_(r)}))),t},c.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this);return this}return-1===(r=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}(e.pipes,t))||(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},c.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var o=this._readableState;o.readableListening||(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading?o.length&&f(this):this.read(0))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},c.prototype.pause=function(){m(this,!0),this.emit("pause")},c.prototype.wrap=function(t){var e=this._readableState,n=!1,o=this;for(var r in t.on("end",(function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&o.push(t)}o.push(null)})),t.on("data",(function(r){(e.decoder&&(r=e.decoder.write(r)),!e.objectMode||null!==r&&void 0!==r)&&((e.objectMode||r&&r.length)&&(o.push(r)||(n=!0,t.pause())))})),t)"function"===typeof t[r]&&"undefined"===typeof this[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return E(["error","close","destroy","pause","resume"],(function(e){t.on(e,o.emit.bind(o,e))})),o._read=function(e){n&&(n=!1,t.resume())},o},c._fromList=y}).call(this,n(9))},function(t,e,n){(function(e){t.exports=l;var o=n(13).Buffer;l.WritableState=a;var r=n(12);r.inherits=n(10);var i=n(23);function s(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function a(t,n){var o=(t=t||{}).highWaterMark;this.highWaterMark=o||0===o?o:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var o=t._writableState,r=o.sync,i=o.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(o),n)!function(t,n,o,r,i){o?e.nextTick((function(){i(r)})):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,0,r,n,i);else{var s=h(t,o);s||o.bufferProcessing||!o.buffer.length||function(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var o=e.buffer[n],r=o.chunk,i=o.encoding,s=o.callback;if(u(t,e,e.objectMode?1:r.length,r,i,s),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}(t,o),r?e.nextTick((function(){c(t,o,s,i)})):c(t,o,s,i)}}(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function l(t){var e=n(90);if(!(this instanceof l)&&!(this instanceof e))return new l(t);this._writableState=new a(t,this),this.writable=!0,i.call(this)}function u(t,e,n,o,r,i){e.writelen=n,e.writecb=i,e.writing=!0,e.sync=!0,t._write(o,r,e.onwrite),e.sync=!1}function c(t,e,n,o){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),o(),n&&p(t,e)}function h(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function p(t,e){var n=h(0,e);return n&&(e.finished=!0,t.emit("finish")),n}r.inherits(l,i),l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},l.prototype.write=function(t,n,r){var i=this._writableState,a=!1;return"function"===typeof n&&(r=n,n=null),o.isBuffer(t)?n="buffer":n||(n=i.defaultEncoding),"function"!==typeof r&&(r=function(){}),i.ended?function(t,n,o){var r=new Error("write after end");t.emit("error",r),e.nextTick((function(){o(r)}))}(this,0,r):function(t,n,r,i){var s=!0;if(!o.isBuffer(r)&&"string"!==typeof r&&null!==r&&void 0!==r&&!n.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),e.nextTick((function(){i(a)})),s=!1}return s}(this,i,t,r)&&(a=function(t,e,n,r,i){n=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=new o(e,n));return e}(e,n,r),o.isBuffer(n)&&(r="buffer");var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);e.writing?e.buffer.push(new s(n,r,i)):u(t,e,a,n,r,i);return l}(this,i,t,n,r)),a},l.prototype._write=function(t,e,n){n(new Error("not implemented"))},l.prototype.end=function(t,n,o){var r=this._writableState;"function"===typeof t?(o=t,t=null,n=null):"function"===typeof n&&(o=n,n=null),"undefined"!==typeof t&&null!==t&&this.write(t,n),r.ending||r.finished||function(t,n,o){n.ending=!0,p(t,n),o&&(n.finished?e.nextTick(o):t.once("finish",o));n.ended=!0}(this,r,o)}}).call(this,n(9))},function(t,e,n){t.exports=s;var o=n(90),r=n(12);function i(t,e){this.afterTransform=function(t,n){return function(t,e,n){var o=t._transformState;o.transforming=!1;var r=o.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!==n&&void 0!==n&&t.push(n);r&&r(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t){if(!(this instanceof s))return new s(t);o.call(this,t);this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",(function(){"function"===typeof this._flush?this._flush((function(t){a(e,t)})):a(e)}))}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,o=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(o.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}r.inherits=n(10),r.inherits(s,o),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,o.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("not implemented")},s.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){(function(e){t.exports=c;var o=n(215),r=n(13).Buffer;c.ReadableState=u;var i=n(33).EventEmitter;i.listenerCount||(i.listenerCount=function(t,e){return t.listeners(e).length});var s,a=n(23),l=n(12);function u(t,e){var o=(t=t||{}).highWaterMark;this.highWaterMark=o||0===o?o:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=n(37).StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function c(t){if(!(this instanceof c))return new c(t);this._readableState=new u(t,this),this.readable=!0,a.call(this)}function h(t,n,o,i,s){var a=function(t,e){var n=null;r.isBuffer(e)||"string"===typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(n,o);if(a)t.emit("error",a);else if(null===o||void 0===o)n.reading=!1,n.ended||function(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?f(t):b(t)}(t,n);else if(n.objectMode||o&&o.length>0)if(n.ended&&!s){var l=new Error("stream.push() after EOF");t.emit("error",l)}else if(n.endEmitted&&s){l=new Error("stream.unshift() after end event");t.emit("error",l)}else!n.decoder||s||i||(o=n.decoder.write(o)),n.length+=n.objectMode?1:o.length,s?n.buffer.unshift(o):(n.reading=!1,n.buffer.push(o)),n.needReadable&&f(t),function(t,n){n.readingMore||(n.readingMore=!0,e.nextTick((function(){!function(t,e){var n=e.length;for(;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}(t,n)})))}(t,n);else s||(n.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(n)}l.inherits=n(10),l.inherits(c,a),c.prototype.push=function(t,e){var n=this._readableState;return"string"!==typeof t||n.objectMode||(e=e||n.defaultEncoding)!==n.encoding&&(t=new r(t,e),e=""),h(this,n,t,e,!1)},c.prototype.unshift=function(t){return h(this,this._readableState,t,"",!0)},c.prototype.setEncoding=function(t){s||(s=n(37).StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t};var p=8388608;function d(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=function(t){if(t>=p)t=p;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function f(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?e.nextTick((function(){g(t)})):g(t))}function g(t){t.emit("readable")}function _(t){var e,n=t._readableState;function o(t,o,r){!1===t.write(e)&&n.awaitDrain++}for(n.awaitDrain=0;n.pipesCount&&null!==(e=t.read());)if(1===n.pipesCount?o(n.pipes):E(n.pipes,o),t.emit("data",e),n.awaitDrain>0)return;if(0===n.pipesCount)return n.flowing=!1,void(i.listenerCount(t,"data")>0&&m(t));n.ranOut=!0}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,_(this))}function m(t,n){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var o=n||!1,r=!1;t.readable=!0,t.pipe=a.prototype.pipe,t.on=t.addListener=a.prototype.on,t.on("readable",(function(){var e;for(r=!0;!o&&null!==(e=t.read());)t.emit("data",e);null===e&&(r=!1,t._readableState.needReadable=!0)})),t.pause=function(){o=!0,this.emit("pause")},t.resume=function(){o=!1,r?e.nextTick((function(){t.emit("readable")})):this.read(0),this.emit("resume")},t.emit("readable")}function y(t,e){var n,o=e.buffer,i=e.length,s=!!e.decoder,a=!!e.objectMode;if(0===o.length)return null;if(0===i)n=null;else if(a)n=o.shift();else if(!t||t>=i)n=s?o.join(""):r.concat(o,i),o.length=0;else{if(t<o[0].length)n=(h=o[0]).slice(0,t),o[0]=h.slice(t);else if(t===o[0].length)n=o.shift();else{n=s?"":new r(t);for(var l=0,u=0,c=o.length;u<c&&l<t;u++){var h=o[0],p=Math.min(t-l,h.length);s?n+=h.slice(0,p):h.copy(n,l,0,p),p<h.length?o[0]=h.slice(p):o.shift(),l+=p}}}return n}function b(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,e.nextTick((function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))})))}function E(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}c.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,o=t;if(("number"!==typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f(this),null;if(0===(t=d(t,e))&&e.ended)return n=null,e.length>0&&e.decoder&&(n=y(t,e),e.length-=n.length),0===e.length&&b(this),n;var r=e.needReadable;return e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=d(o,e)),null===(n=t>0?y(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&b(this),n},c.prototype._read=function(t){this.emit("error",new Error("not implemented"))},c.prototype.pipe=function(t,n){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1;var a=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr?u:h;function l(t){t===r&&h()}function u(){t.end()}s.endEmitted?e.nextTick(a):r.once("end",a),t.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&_(t)}}(r);function h(){t.removeListener("close",d),t.removeListener("finish",f),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",h),t._writableState&&!t._writableState.needDrain||c()}function p(e){g(),t.removeListener("error",p),0===i.listenerCount(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",f),g()}function f(){t.removeListener("close",d),g()}function g(){r.unpipe(t)}return t.on("drain",c),t._events&&t._events.error?o(t._events.error)?t._events.error.unshift(p):t._events.error=[p,t._events.error]:t.on("error",p),t.once("close",d),t.once("finish",f),t.emit("pipe",r),s.flowing||(this.on("readable",v),s.flowing=!0,e.nextTick((function(){_(r)}))),t},c.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this);return this}return-1===(r=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}(e.pipes,t))||(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},c.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var o=this._readableState;o.readableListening||(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading?o.length&&f(this):this.read(0))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},c.prototype.pause=function(){m(this,!0),this.emit("pause")},c.prototype.wrap=function(t){var e=this._readableState,n=!1,o=this;for(var r in t.on("end",(function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&o.push(t)}o.push(null)})),t.on("data",(function(r){(e.decoder&&(r=e.decoder.write(r)),!e.objectMode||null!==r&&void 0!==r)&&((e.objectMode||r&&r.length)&&(o.push(r)||(n=!0,t.pause())))})),t)"function"===typeof t[r]&&"undefined"===typeof this[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return E(["error","close","destroy","pause","resume"],(function(e){t.on(e,o.emit.bind(o,e))})),o._read=function(e){n&&(n=!1,t.resume())},o},c._fromList=y}).call(this,n(9))},function(t,e,n){(function(e){t.exports=l;var o=n(13).Buffer;l.WritableState=a;var r=n(12);r.inherits=n(10);var i=n(23);function s(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function a(t,n){var o=(t=t||{}).highWaterMark;this.highWaterMark=o||0===o?o:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var o=t._writableState,r=o.sync,i=o.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(o),n)!function(t,n,o,r,i){o?e.nextTick((function(){i(r)})):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,0,r,n,i);else{var s=h(t,o);s||o.bufferProcessing||!o.buffer.length||function(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var o=e.buffer[n],r=o.chunk,i=o.encoding,s=o.callback;if(u(t,e,e.objectMode?1:r.length,r,i,s),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}(t,o),r?e.nextTick((function(){c(t,o,s,i)})):c(t,o,s,i)}}(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function l(t){var e=n(91);if(!(this instanceof l)&&!(this instanceof e))return new l(t);this._writableState=new a(t,this),this.writable=!0,i.call(this)}function u(t,e,n,o,r,i){e.writelen=n,e.writecb=i,e.writing=!0,e.sync=!0,t._write(o,r,e.onwrite),e.sync=!1}function c(t,e,n,o){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),o(),n&&p(t,e)}function h(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function p(t,e){var n=h(0,e);return n&&(e.finished=!0,t.emit("finish")),n}r.inherits(l,i),l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},l.prototype.write=function(t,n,r){var i=this._writableState,a=!1;return"function"===typeof n&&(r=n,n=null),o.isBuffer(t)?n="buffer":n||(n=i.defaultEncoding),"function"!==typeof r&&(r=function(){}),i.ended?function(t,n,o){var r=new Error("write after end");t.emit("error",r),e.nextTick((function(){o(r)}))}(this,0,r):function(t,n,r,i){var s=!0;if(!o.isBuffer(r)&&"string"!==typeof r&&null!==r&&void 0!==r&&!n.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),e.nextTick((function(){i(a)})),s=!1}return s}(this,i,t,r)&&(a=function(t,e,n,r,i){n=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=new o(e,n));return e}(e,n,r),o.isBuffer(n)&&(r="buffer");var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);e.writing?e.buffer.push(new s(n,r,i)):u(t,e,a,n,r,i);return l}(this,i,t,n,r)),a},l.prototype._write=function(t,e,n){n(new Error("not implemented"))},l.prototype.end=function(t,n,o){var r=this._writableState;"function"===typeof t?(o=t,t=null,n=null):"function"===typeof n&&(o=n,n=null),"undefined"!==typeof t&&null!==t&&this.write(t,n),r.ending||r.finished||function(t,n,o){n.ending=!0,p(t,n),o&&(n.finished?e.nextTick(o):t.once("finish",o));n.ended=!0}(this,r,o)}}).call(this,n(9))},function(t,e,n){t.exports=s;var o=n(91),r=n(12);function i(t,e){this.afterTransform=function(t,n){return function(t,e,n){var o=t._transformState;o.transforming=!1;var r=o.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!==n&&void 0!==n&&t.push(n);r&&r(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t){if(!(this instanceof s))return new s(t);o.call(this,t);this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",(function(){"function"===typeof this._flush?this._flush((function(t){a(e,t)})):a(e)}))}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,o=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(o.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}r.inherits=n(10),r.inherits(s,o),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,o.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("not implemented")},s.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){(function(e){t.exports=c;var o=n(221),r=n(13).Buffer;c.ReadableState=u;var i=n(33).EventEmitter;i.listenerCount||(i.listenerCount=function(t,e){return t.listeners(e).length});var s,a=n(23),l=n(12);function u(t,e){var o=(t=t||{}).highWaterMark;this.highWaterMark=o||0===o?o:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=n(37).StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function c(t){if(!(this instanceof c))return new c(t);this._readableState=new u(t,this),this.readable=!0,a.call(this)}function h(t,n,o,i,s){var a=function(t,e){var n=null;r.isBuffer(e)||"string"===typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(n,o);if(a)t.emit("error",a);else if(null===o||void 0===o)n.reading=!1,n.ended||function(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?f(t):b(t)}(t,n);else if(n.objectMode||o&&o.length>0)if(n.ended&&!s){var l=new Error("stream.push() after EOF");t.emit("error",l)}else if(n.endEmitted&&s){l=new Error("stream.unshift() after end event");t.emit("error",l)}else!n.decoder||s||i||(o=n.decoder.write(o)),n.length+=n.objectMode?1:o.length,s?n.buffer.unshift(o):(n.reading=!1,n.buffer.push(o)),n.needReadable&&f(t),function(t,n){n.readingMore||(n.readingMore=!0,e.nextTick((function(){!function(t,e){var n=e.length;for(;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}(t,n)})))}(t,n);else s||(n.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(n)}l.inherits=n(10),l.inherits(c,a),c.prototype.push=function(t,e){var n=this._readableState;return"string"!==typeof t||n.objectMode||(e=e||n.defaultEncoding)!==n.encoding&&(t=new r(t,e),e=""),h(this,n,t,e,!1)},c.prototype.unshift=function(t){return h(this,this._readableState,t,"",!0)},c.prototype.setEncoding=function(t){s||(s=n(37).StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t};var p=8388608;function d(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=function(t){if(t>=p)t=p;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function f(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?e.nextTick((function(){g(t)})):g(t))}function g(t){t.emit("readable")}function _(t){var e,n=t._readableState;function o(t,o,r){!1===t.write(e)&&n.awaitDrain++}for(n.awaitDrain=0;n.pipesCount&&null!==(e=t.read());)if(1===n.pipesCount?o(n.pipes):E(n.pipes,o),t.emit("data",e),n.awaitDrain>0)return;if(0===n.pipesCount)return n.flowing=!1,void(i.listenerCount(t,"data")>0&&m(t));n.ranOut=!0}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,_(this))}function m(t,n){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var o=n||!1,r=!1;t.readable=!0,t.pipe=a.prototype.pipe,t.on=t.addListener=a.prototype.on,t.on("readable",(function(){var e;for(r=!0;!o&&null!==(e=t.read());)t.emit("data",e);null===e&&(r=!1,t._readableState.needReadable=!0)})),t.pause=function(){o=!0,this.emit("pause")},t.resume=function(){o=!1,r?e.nextTick((function(){t.emit("readable")})):this.read(0),this.emit("resume")},t.emit("readable")}function y(t,e){var n,o=e.buffer,i=e.length,s=!!e.decoder,a=!!e.objectMode;if(0===o.length)return null;if(0===i)n=null;else if(a)n=o.shift();else if(!t||t>=i)n=s?o.join(""):r.concat(o,i),o.length=0;else{if(t<o[0].length)n=(h=o[0]).slice(0,t),o[0]=h.slice(t);else if(t===o[0].length)n=o.shift();else{n=s?"":new r(t);for(var l=0,u=0,c=o.length;u<c&&l<t;u++){var h=o[0],p=Math.min(t-l,h.length);s?n+=h.slice(0,p):h.copy(n,l,0,p),p<h.length?o[0]=h.slice(p):o.shift(),l+=p}}}return n}function b(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,e.nextTick((function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))})))}function E(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}c.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,o=t;if(("number"!==typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f(this),null;if(0===(t=d(t,e))&&e.ended)return n=null,e.length>0&&e.decoder&&(n=y(t,e),e.length-=n.length),0===e.length&&b(this),n;var r=e.needReadable;return e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=d(o,e)),null===(n=t>0?y(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&b(this),n},c.prototype._read=function(t){this.emit("error",new Error("not implemented"))},c.prototype.pipe=function(t,n){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1;var a=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr?u:h;function l(t){t===r&&h()}function u(){t.end()}s.endEmitted?e.nextTick(a):r.once("end",a),t.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&_(t)}}(r);function h(){t.removeListener("close",d),t.removeListener("finish",f),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",h),t._writableState&&!t._writableState.needDrain||c()}function p(e){g(),t.removeListener("error",p),0===i.listenerCount(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",f),g()}function f(){t.removeListener("close",d),g()}function g(){r.unpipe(t)}return t.on("drain",c),t._events&&t._events.error?o(t._events.error)?t._events.error.unshift(p):t._events.error=[p,t._events.error]:t.on("error",p),t.once("close",d),t.once("finish",f),t.emit("pipe",r),s.flowing||(this.on("readable",v),s.flowing=!0,e.nextTick((function(){_(r)}))),t},c.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this);return this}return-1===(r=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}(e.pipes,t))||(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},c.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var o=this._readableState;o.readableListening||(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading?o.length&&f(this):this.read(0))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},c.prototype.pause=function(){m(this,!0),this.emit("pause")},c.prototype.wrap=function(t){var e=this._readableState,n=!1,o=this;for(var r in t.on("end",(function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&o.push(t)}o.push(null)})),t.on("data",(function(r){(e.decoder&&(r=e.decoder.write(r)),!e.objectMode||null!==r&&void 0!==r)&&((e.objectMode||r&&r.length)&&(o.push(r)||(n=!0,t.pause())))})),t)"function"===typeof t[r]&&"undefined"===typeof this[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return E(["error","close","destroy","pause","resume"],(function(e){t.on(e,o.emit.bind(o,e))})),o._read=function(e){n&&(n=!1,t.resume())},o},c._fromList=y}).call(this,n(9))},function(t,e,n){t.exports=s;var o=n(64),r=n(12);function i(t,e){this.afterTransform=function(t,n){return function(t,e,n){var o=t._transformState;o.transforming=!1;var r=o.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!==n&&void 0!==n&&t.push(n);r&&r(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t){if(!(this instanceof s))return new s(t);o.call(this,t);this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",(function(){"function"===typeof this._flush?this._flush((function(t){a(e,t)})):a(e)}))}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,o=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(o.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}r.inherits=n(10),r.inherits(s,o),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,o.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("not implemented")},s.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e){var n=e.range=function(t){return null==t?{}:"string"===typeof n?{min:n,max:n+"\xff"}:t},o=(e.prefix=function(t,n,o){var r={};return o=o||"\xff",(t=e.range(t))instanceof RegExp||"function"==typeof t?(r.min=n,r.max=n+o,r.inner=function(e){var o=e.substring(n.length);return t.test?t.test(o):t(o)}):"object"===typeof t&&(r.min=n+(t.min||t.start||""),r.max=n+(t.max||t.end||o||"~"),r.reverse=!!t.reverse),r},e.checker=function(t){return t||(t={}),"string"===typeof t?function(e){return 0==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:"object"===typeof t?function(e){var n=t.min||t.start,o=t.max||t.end;return e=String(e),(!n||e>=n)&&(!o||e<=o)&&(!t.inner||(t.inner.test?t.inner.test(e):t.inner(e)))}:"function"===typeof t?t:void 0});e.satisfies=function(t,e){return o(e)(t)}},function(t,e,n){var o=n(227);t.exports=function(t){var e=(t=o(t)).reverse,n=t.max||t.end,r=t.min||t.start,i=[r,n];return null!=r&&null!=n&&i.sort(),e&&(i=i.reverse()),t.start=i[0],t.end=i[1],delete t.min,delete t.max,t}},function(t,e){function n(t,e,n,o){var r={type:t,key:e,value:n,options:o};return o&&o.prefix&&(r.prefix=o.prefix,delete o.prefix),this._operations.push(r),this}function o(t){this._operations=[],this._sdb=t,this.put=n.bind(this,"put"),this.del=n.bind(this,"del")}var r=o.prototype;r.clear=function(){this._operations=[]},r.write=function(t){this._sdb.batch(this._operations,t)},t.exports=o},function(t,e,n){(function(e){t.exports=h;var o=n(237),r=n(13).Buffer;h.ReadableState=c;var i=n(33).EventEmitter;i.listenerCount||(i.listenerCount=function(t,e){return t.listeners(e).length});var s,a=n(23),l=n(12);l.inherits=n(10);var u=n(238);function c(t,e){var o=n(53),r=(t=t||{}).highWaterMark,i=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=n(37).StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function h(t){n(53);if(!(this instanceof h))return new h(t);this._readableState=new c(t,this),this.readable=!0,a.call(this)}function p(t,n,o,r,i){var s=function(t,e){var n=null;l.isBuffer(e)||l.isString(e)||l.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(n,o);if(s)t.emit("error",s);else if(l.isNullOrUndefined(o))n.reading=!1,n.ended||function(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,g(t)}(t,n);else if(n.objectMode||o&&o.length>0)if(n.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(n.endEmitted&&i){a=new Error("stream.unshift() after end event");t.emit("error",a)}else!n.decoder||i||r||(o=n.decoder.write(o)),i||(n.reading=!1),n.flowing&&0===n.length&&!n.sync?(t.emit("data",o),t.read(0)):(n.length+=n.objectMode?1:o.length,i?n.buffer.unshift(o):n.buffer.push(o),n.needReadable&&g(t)),function(t,n){n.readingMore||(n.readingMore=!0,e.nextTick((function(){!function(t,e){var n=e.length;for(;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(u("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}(t,n)})))}(t,n);else i||(n.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(n)}u=u&&u.debuglog?u.debuglog("stream"):function(){},l.inherits(h,a),h.prototype.push=function(t,e){var n=this._readableState;return l.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding)!==n.encoding&&(t=new r(t,e),e=""),p(this,n,t,e,!1)},h.prototype.unshift=function(t){return p(this,this._readableState,t,"",!0)},h.prototype.setEncoding=function(t){return s||(s=n(37).StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var d=8388608;function f(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||l.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=function(t){if(t>=d)t=d;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function g(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(u("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick((function(){_(t)})):_(t))}function _(t){u("emit readable"),t.emit("readable"),v(t)}function v(t){var e=t._readableState;if(u("flow",e.flowing),e.flowing)do{var n=t.read()}while(null!==n&&e.flowing)}function m(t,e){var n,o=e.buffer,i=e.length,s=!!e.decoder,a=!!e.objectMode;if(0===o.length)return null;if(0===i)n=null;else if(a)n=o.shift();else if(!t||t>=i)n=s?o.join(""):r.concat(o,i),o.length=0;else{if(t<o[0].length)n=(h=o[0]).slice(0,t),o[0]=h.slice(t);else if(t===o[0].length)n=o.shift();else{n=s?"":new r(t);for(var l=0,u=0,c=o.length;u<c&&l<t;u++){var h=o[0],p=Math.min(t-l,h.length);s?n+=h.slice(0,p):h.copy(n,l,0,p),p<h.length?o[0]=h.slice(p):o.shift(),l+=p}}}return n}function y(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick((function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))})))}h.prototype.read=function(t){u("read",t);var e=this._readableState,n=t;if((!l.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?y(this):g(this),null;if(0===(t=f(t,e))&&e.ended)return 0===e.length&&y(this),null;var o,r=e.needReadable;return u("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",r=!0),(e.ended||e.reading)&&u("reading or ended",r=!1),r&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=f(n,e)),o=t>0?m(t,e):null,l.isNull(o)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&y(this),l.isNull(o)||this.emit("data",o),o},h.prototype._read=function(t){this.emit("error",new Error("not implemented"))},h.prototype.pipe=function(t,n){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,u("pipe count=%d opts=%j",s.pipesCount,n);var a=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr?c:p;function l(t){u("onunpipe"),t===r&&p()}function c(){u("onend"),t.end()}s.endEmitted?e.nextTick(a):r.once("end",a),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&i.listenerCount(t,"data")&&(e.flowing=!0,v(t))}}(r);function p(){u("cleanup"),t.removeListener("close",g),t.removeListener("finish",_),t.removeListener("drain",h),t.removeListener("error",f),t.removeListener("unpipe",l),r.removeListener("end",c),r.removeListener("end",p),r.removeListener("data",d),!s.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}function d(e){u("ondata"),!1===t.write(e)&&(u("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,r.pause())}function f(e){u("onerror",e),m(),t.removeListener("error",f),0===i.listenerCount(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",_),m()}function _(){u("onfinish"),t.removeListener("close",g),m()}function m(){u("unpipe"),r.unpipe(t)}return t.on("drain",h),r.on("data",d),t._events&&t._events.error?o(t._events.error)?t._events.error.unshift(f):t._events.error=[f,t._events.error]:t.on("error",f),t.once("close",g),t.once("finish",_),t.emit("pipe",r),s.flowing||(u("pipe resume"),r.resume()),t},h.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this);return this}return-1===(r=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}(e.pipes,t))||(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},h.prototype.on=function(t,n){var o=a.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&g(this);else{var i=this;e.nextTick((function(){u("readable nexttick read 0"),i.read(0)}))}}return o},h.prototype.addListener=h.prototype.on,h.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!0,t.reading||(u("resume read 0"),this.read(0)),function(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick((function(){!function(t,e){e.resumeScheduled=!1,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}(t,n)})))}(this,t)),this},h.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},h.prototype.wrap=function(t){var e=this._readableState,n=!1,o=this;for(var r in t.on("end",(function(){if(u("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&o.push(t)}o.push(null)})),t.on("data",(function(r){(u("wrapped data"),e.decoder&&(r=e.decoder.write(r)),r&&(e.objectMode||r.length))&&(o.push(r)||(n=!0,t.pause()))})),t)l.isFunction(t[r])&&l.isUndefined(this[r])&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(["error","close","destroy","pause","resume"],(function(e){t.on(e,o.emit.bind(o,e))})),o._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},o},h._fromList=m}).call(this,n(9))},function(t,e,n){t.exports=s;var o=n(53),r=n(12);function i(t,e){this.afterTransform=function(t,n){return function(t,e,n){var o=t._transformState;o.transforming=!1;var i=o.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,r.isNullOrUndefined(n)||t.push(n);i&&i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t){if(!(this instanceof s))return new s(t);o.call(this,t),this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",(function(){r.isFunction(this._flush)?this._flush((function(t){a(e,t)})):a(e)}))}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,o=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(o.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}r.inherits=n(10),r.inherits(s,o),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,o.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("not implemented")},s.prototype._write=function(t,e,n){var o=this._transformState;if(o.writecb=n,o.writechunk=t,o.writeencoding=e,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;r.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){var o=n(241);function r(t,e,n){e.limit=e.reverse?2:1;!function(t,e,n){var o=[];e.forEach((function(e){function r(t){!1!==n(e,t)&&o.forEach((function(t){t()}))}t.on(e,r),o.push((function(){t.removeListener(e,r)}))}))}(t.createReadStream(e),["data","error","end"],(function(t,o){if(e.reverse&&o&&e.start&&o.key.toString()>e.start)return!1;"error"==t?n(o):"end"==t?n(new Error("range not found"),null,null):n(null,o.key,o.value)}))}(e=t.exports=r).first=function(t,e,n){n||(n=e,e={});return e.reverse=!1,r(t,o(e),n)},e.last=function(t,e,n){n||(n=e,e={});e.start;return e.reverse=!0,r(t,o(e),(function(o,i,s){if(o){var a=e.start;e.start=null,r(t,e,(function(t,r,i){if(!r)return n(o,null,null);var s=r.toString();s<=a&&(!e.end||s>=e.end)?n(t,r,i):n(o,null,null)}))}else n(o,i,s)}))}},function(t,e){t.exports=function(t,e){return parseInt(t.toString(),e||8)}},function(t,e,n){var o=n(103);Object.keys(o.code).forEach((function(t){var n=o.code[t];e[t]=function(e){var o=new Error(t+", "+n.description+(e?" '"+e+"'":""));return o.errno=n.errno,o.code=t,o.path=e,o}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(28),r=function(t){if(Object(o.a)()&&window.document.documentElement){var e=Array.isArray(t)?t:[t],n=window.document.documentElement;return e.some((function(t){return t in n.style}))}return!1};function i(t,e){return Array.isArray(t)||void 0===e?r(t):function(t,e){if(!r(t))return!1;var n=document.createElement("div"),o=n.style[t];return n.style[t]=e,n.style[t]!==o}(t,e)}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var o=n(67),r=n(128);t.exports=function(t){if(!r(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(36))},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var o=n(275),r=n(282),i=n(284),s=n(285),a=n(286);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}l.prototype.clear=o,l.prototype.delete=r,l.prototype.get=i,l.prototype.has=s,l.prototype.set=a,t.exports=l},function(t,e,n){var o=n(287),r=n(290),i=n(291);t.exports=function(t,e,n,s,a,l){var u=1&n,c=t.length,h=e.length;if(c!=h&&!(u&&h>c))return!1;var p=l.get(t),d=l.get(e);if(p&&d)return p==e&&d==t;var f=-1,g=!0,_=2&n?new o:void 0;for(l.set(t,e),l.set(e,t);++f<c;){var v=t[f],m=e[f];if(s)var y=u?s(m,v,f,e,t,l):s(v,m,f,t,e,l);if(void 0!==y){if(y)continue;g=!1;break}if(_){if(!r(e,(function(t,e){if(!i(_,e)&&(v===t||a(v,t,n,s,l)))return _.push(e)}))){g=!1;break}}else if(v!==m&&!a(v,m,n,s,l)){g=!1;break}}return l.delete(t),l.delete(e),g}},function(t,e,n){(function(t){var o=n(41),r=n(308),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?o.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;t.exports=l}).call(this,n(133)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var o=n(310),r=n(311),i=n(312),s=i&&i.isTypedArray,a=s?r(s):o;t.exports=a},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BlocklyEditor",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"BlocklyToolbox",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"BlocklyToolboxBlock",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"BlocklyToolboxCategory",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"BlocklyWorkspace",{enumerable:!0,get:function(){return a.default}}),e.default=void 0;var o=l(n(158)),r=l(n(99)),i=l(n(85)),s=l(n(100)),a=l(n(101));function l(t){return t&&t.__esModule?t:{default:t}}var u=o.default;e.default=u},function(t,e,n){var o=n(169),r=n(188),i=n(218),s=r("level-filesystem",{db:o});t.exports=i(s)},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(0);function r(t,e,n){var r=o.useRef({});return"value"in r.current&&!n(r.current.condition,e)||(r.current.value=t(),r.current.condition=e),r.current.value}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(71),r=n(73),i=n(55),s=n(72);function a(t){return Object(o.a)(t)||Object(r.a)(t)||Object(i.a)(t)||Object(s.a)()}},function(t,e,n){"use strict";(function(t){function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},o.apply(this,arguments)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,n){return a=s()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&i(r,n.prototype),r},a.apply(null,arguments)}function l(t){var e="function"===typeof Map?new Map:void 0;return l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return a(t,arguments,r(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i(o,t)},l(t)}n.d(e,"a",(function(){return R}));var u=/%[sdj%]/g,c=function(){};function h(t){if(!t||!t.length)return null;var e={};return t.forEach((function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)})),e}function p(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var r=0,i=n.length;if("function"===typeof t)return t.apply(null,n);if("string"===typeof t){var s=t.replace(u,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}break;default:return t}}));return s}return t}function d(t,e){return void 0===t||null===t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}(e)||"string"!==typeof t||t))}function f(t,e,n){var o=0,r=t.length;!function i(s){if(s&&s.length)n(s);else{var a=o;o+=1,a<r?e(t[a],i):n([])}}([])}"undefined"!==typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:"/pl_project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0});var g=function(t){var e,n;function o(e,n){var o;return(o=t.call(this,"Async Validation Error")||this).errors=e,o.fields=n,o}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n),o}(l(Error));function _(t,e,n,o,r){if(e.first){var i=new Promise((function(e,i){var s=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,t[n]||[])})),e}(t);f(s,n,(function(t){return o(t),t.length?i(new g(t,h(t))):e(r)}))}));return i.catch((function(t){return t})),i}var s=!0===e.firstFields?Object.keys(t):e.firstFields||[],a=Object.keys(t),l=a.length,u=0,c=[],p=new Promise((function(e,i){var p=function(t){if(c.push.apply(c,t),++u===l)return o(c),c.length?i(new g(c,h(c))):e(r)};a.length||(o(c),e(r)),a.forEach((function(e){var o=t[e];-1!==s.indexOf(e)?f(o,n,p):function(t,e,n){var o=[],r=0,i=t.length;function s(t){o.push.apply(o,t||[]),++r===i&&n(o)}t.forEach((function(t){e(t,s)}))}(o,n,p)}))}));return p.catch((function(t){return t})),p}function v(t,e){return function(n){var o,r;return o=t.fullFields?function(t,e){for(var n=t,o=0;o<e.length;o++){if(void 0==n)return n;n=n[e[o]]}return n}(e,t.fullFields):e[n.field||t.fullField],(r=n)&&void 0!==r.message?(n.field=n.field||t.fullField,n.fieldValue=o,n):{message:"function"===typeof n?n():n,fieldValue:o,field:n.field||t.fullField}}}function m(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"===typeof r&&"object"===typeof t[n]?t[n]=o({},t[n],r):t[n]=r}return t}var y=function(t,e,n,o,r,i){!t.required||n.hasOwnProperty(t.field)&&!d(e,i||t.type)||o.push(p(r.messages.required,t.fullField))},b={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},E={integer:function(t){return E.number(t)&&parseInt(t,10)===t},float:function(t){return E.number(t)&&!E.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(e){return!1}},date:function(t){return"function"===typeof t.getTime&&"function"===typeof t.getMonth&&"function"===typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"===typeof t},object:function(t){return"object"===typeof t&&!E.array(t)},method:function(t){return"function"===typeof t},email:function(t){return"string"===typeof t&&t.length<=320&&!!t.match(b.email)},url:function(t){return"string"===typeof t&&t.length<=2048&&!!t.match(b.url)},hex:function(t){return"string"===typeof t&&!!t.match(b.hex)}},T={required:y,whitespace:function(t,e,n,o,r){(/^\s+$/.test(e)||""===e)&&o.push(p(r.messages.whitespace,t.fullField))},type:function(t,e,n,o,r){if(t.required&&void 0===e)y(t,e,n,o,r);else{var i=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?E[i](e)||o.push(p(r.messages.types[i],t.fullField,t.type)):i&&typeof e!==t.type&&o.push(p(r.messages.types[i],t.fullField,t.type))}},range:function(t,e,n,o,r){var i="number"===typeof t.len,s="number"===typeof t.min,a="number"===typeof t.max,l=e,u=null,c="number"===typeof e,h="string"===typeof e,d=Array.isArray(e);if(c?u="number":h?u="string":d&&(u="array"),!u)return!1;d&&(l=e.length),h&&(l=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?l!==t.len&&o.push(p(r.messages[u].len,t.fullField,t.len)):s&&!a&&l<t.min?o.push(p(r.messages[u].min,t.fullField,t.min)):a&&!s&&l>t.max?o.push(p(r.messages[u].max,t.fullField,t.max)):s&&a&&(l<t.min||l>t.max)&&o.push(p(r.messages[u].range,t.fullField,t.min,t.max))},enum:function(t,e,n,o,r){t.enum=Array.isArray(t.enum)?t.enum:[],-1===t.enum.indexOf(e)&&o.push(p(r.messages.enum,t.fullField,t.enum.join(", ")))},pattern:function(t,e,n,o,r){if(t.pattern)if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||o.push(p(r.messages.pattern.mismatch,t.fullField,e,t.pattern));else if("string"===typeof t.pattern){new RegExp(t.pattern).test(e)||o.push(p(r.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},S=function(t,e,n,o,r){var i=t.type,s=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e,i)&&!t.required)return n();T.required(t,e,o,s,r,i),d(e,i)||T.type(t,e,o,s,r)}n(s)},k={string:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e,"string")&&!t.required)return n();T.required(t,e,o,i,r,"string"),d(e,"string")||(T.type(t,e,o,i,r),T.range(t,e,o,i,r),T.pattern(t,e,o,i,r),!0===t.whitespace&&T.whitespace(t,e,o,i,r))}n(i)},method:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&T.type(t,e,o,i,r)}n(i)},number:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(""===e&&(e=void 0),d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&(T.type(t,e,o,i,r),T.range(t,e,o,i,r))}n(i)},boolean:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&T.type(t,e,o,i,r)}n(i)},regexp:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),d(e)||T.type(t,e,o,i,r)}n(i)},integer:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&(T.type(t,e,o,i,r),T.range(t,e,o,i,r))}n(i)},float:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&(T.type(t,e,o,i,r),T.range(t,e,o,i,r))}n(i)},array:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if((void 0===e||null===e)&&!t.required)return n();T.required(t,e,o,i,r,"array"),void 0!==e&&null!==e&&(T.type(t,e,o,i,r),T.range(t,e,o,i,r))}n(i)},object:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&T.type(t,e,o,i,r)}n(i)},enum:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r),void 0!==e&&T.enum(t,e,o,i,r)}n(i)},pattern:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e,"string")&&!t.required)return n();T.required(t,e,o,i,r),d(e,"string")||T.pattern(t,e,o,i,r)}n(i)},date:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e,"date")&&!t.required)return n();var s;if(T.required(t,e,o,i,r),!d(e,"date"))s=e instanceof Date?e:new Date(e),T.type(t,s,o,i,r),s&&T.range(t,s.getTime(),o,i,r)}n(i)},url:S,hex:S,email:S,required:function(t,e,n,o,r){var i=[],s=Array.isArray(e)?"array":typeof e;T.required(t,e,o,i,r,s),n(i)},any:function(t,e,n,o,r){var i=[];if(t.required||!t.required&&o.hasOwnProperty(t.field)){if(d(e)&&!t.required)return n();T.required(t,e,o,i,r)}n(i)}};function C(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var O=C(),R=function(){function t(t){this.rules=null,this._messages=O,this.define(t)}var e=t.prototype;return e.define=function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof t||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach((function(n){var o=t[n];e.rules[n]=Array.isArray(o)?o:[o]}))},e.messages=function(t){return t&&(this._messages=m(C(),t)),this._messages},e.validate=function(e,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var s=e,a=n,l=r;if("function"===typeof a&&(l=a,a={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(null,s),Promise.resolve(s);if(a.messages){var u=this.messages();u===O&&(u=C()),m(u,a.messages),a.messages=u}else a.messages=this.messages();var c={};(a.keys||Object.keys(this.rules)).forEach((function(t){var n=i.rules[t],r=s[t];n.forEach((function(n){var a=n;"function"===typeof a.transform&&(s===e&&(s=o({},s)),r=s[t]=a.transform(r)),(a="function"===typeof a?{validator:a}:o({},a)).validator=i.getValidationMethod(a),a.validator&&(a.field=t,a.fullField=a.fullField||t,a.type=i.getType(a),c[t]=c[t]||[],c[t].push({rule:a,value:r,source:s,field:t}))}))}));var d={};return _(c,a,(function(e,n){var r,i=e.rule,l=("object"===i.type||"array"===i.type)&&("object"===typeof i.fields||"object"===typeof i.defaultField);function u(t,e){return o({},e,{fullField:i.fullField+"."+t,fullFields:i.fullFields?[].concat(i.fullFields,[t]):[t]})}function c(r){void 0===r&&(r=[]);var c=Array.isArray(r)?r:[r];!a.suppressWarning&&c.length&&t.warning("async-validator:",c),c.length&&void 0!==i.message&&(c=[].concat(i.message));var h=c.map(v(i,s));if(a.first&&h.length)return d[i.field]=1,n(h);if(l){if(i.required&&!e.value)return void 0!==i.message?h=[].concat(i.message).map(v(i,s)):a.error&&(h=[a.error(i,p(a.messages.required,i.field))]),n(h);var f={};i.defaultField&&Object.keys(e.value).map((function(t){f[t]=i.defaultField})),f=o({},f,e.rule.fields);var g={};Object.keys(f).forEach((function(t){var e=f[t],n=Array.isArray(e)?e:[e];g[t]=n.map(u.bind(null,t))}));var _=new t(g);_.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),_.validate(e.value,e.rule.options||a,(function(t){var e=[];h&&h.length&&e.push.apply(e,h),t&&t.length&&e.push.apply(e,t),n(e.length?e:null)}))}else n(h)}if(l=l&&(i.required||!i.required&&e.value),i.field=e.field,i.asyncValidator)r=i.asyncValidator(i,e.value,c,e.source,a);else if(i.validator){try{r=i.validator(i,e.value,c,e.source,a)}catch(h){null==console.error||console.error(h),setTimeout((function(){throw h}),0),c(h.message)}!0===r?c():!1===r?c("function"===typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then((function(){return c()}),(function(t){return c(t)}))}),(function(t){!function(t){var e=[],n={};function o(t){var n;Array.isArray(t)?e=(n=e).concat.apply(n,t):e.push(t)}for(var r=0;r<t.length;r++)o(t[r]);e.length?(n=h(e),l(e,n)):l(null,s)}(t)}),s)},e.getType=function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!==typeof t.validator&&t.type&&!k.hasOwnProperty(t.type))throw new Error(p("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if("function"===typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?k.required:k[this.getType(t)]||void 0},t}();R.register=function(t,e){if("function"!==typeof e)throw new Error("Cannot register a validator by type, validator is not a function");k[t]=e},R.warning=c,R.messages=O,R.validators=k}).call(this,n(9))},function(t,e){t.exports=function(t,e,n,o){var r=n?n.call(o,t,e):void 0;if(void 0!==r)return!!r;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<i.length;l++){var u=i[l];if(!a(u))return!1;var c=t[u],h=e[u];if(!1===(r=n?n.call(o,c,h,u):void 0)||void 0===r&&c!==h)return!1}return!0}},function(t,e,n){"use strict";var o=n(255),r={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var n,i,s,a,l,u,c=!1;e||(e={}),n=e.debug||!1;try{if(s=o(),a=document.createRange(),l=document.getSelection(),(u=document.createElement("span")).textContent=t,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(o){if(o.stopPropagation(),e.format)if(o.preventDefault(),"undefined"===typeof o.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=r[e.format]||r.default;window.clipboardData.setData(i,t)}else o.clipboardData.clearData(),o.clipboardData.setData(e.format,t);e.onCopy&&(o.preventDefault(),e.onCopy(o.clipboardData))})),document.body.appendChild(u),a.selectNodeContents(u),l.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(h){n&&console.error("unable to copy using execCommand: ",h),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),i=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,t)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(a):l.removeAllRanges()),u&&document.body.removeChild(u),s()}return c}},function(t,e,n){"use strict";var o=n(0),r=n(34),i=n.n(r),s=n(28),a=Object(o.forwardRef)((function(t,e){var n=t.didUpdate,r=t.getContainer,a=t.children,l=Object(o.useRef)(),u=Object(o.useRef)();Object(o.useImperativeHandle)(e,(function(){return{}}));var c=Object(o.useRef)(!1);return!c.current&&Object(s.a)()&&(u.current=r(),l.current=u.current.parentNode,c.current=!0),Object(o.useEffect)((function(){null===n||void 0===n||n(t)})),Object(o.useEffect)((function(){return null===u.current.parentNode&&null!==l.current&&l.current.appendChild(u.current),function(){var t,e;null===(t=u.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(u.current)}}),[]),u.current?i.a.createPortal(a,u.current):null}));e.a=a},function(t,e,n){"use strict";e.a=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===t||void 0===t?void 0:t.substr(0,4)))}},function(t,e,n){"use strict";e.a=function(t){if(!t)return!1;if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox();if(e.width||e.height)return!0}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();if(n.width||n.height)return!0}return!1}},function(t,e,n){var o=n(256);t.exports=function(t,e){return o(t,e)}},function(t,e,n){"use strict";var o=n(2),r=n(4),i=n(14),s=n(15),a=n(44),l=n(20),u=n(19),c=n(0),h=n.n(c),p=n(34),d=n.n(p),f=n(29),g=n(57),_=n(49),v=n(16),m=n(51),y=n(144),b=n(6),E=n.n(b);function T(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}var S=n(5),k=n(17),C=n(145),O=n(47);function R(t){var e=t.prefixCls,n=t.motion,o=t.animation,r=t.transitionName;return n||(o?{motionName:"".concat(e,"-").concat(o)}:r?{motionName:r}:null)}function w(t){var e=t.prefixCls,n=t.visible,i=t.zIndex,s=t.mask,a=t.maskMotion,l=t.maskAnimation,u=t.maskTransitionName;if(!s)return null;var h={};return(a||u||l)&&(h=Object(o.a)({motionAppear:!0},R({motion:a,prefixCls:e,transitionName:u,animation:l}))),c.createElement(O.a,Object(r.a)({},h,{visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return c.createElement("div",{style:{zIndex:i},className:E()("".concat(e,"-mask"),n)})}))}var I,A=n(7),N=n(146);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t){return L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function B(){if(void 0!==I)return I;I="";var t=document.createElement("p").style;for(var e in P)e+"Transform"in t&&(I=e);return I}function F(){return B()?"".concat(B(),"TransitionProperty"):"transitionProperty"}function U(){return B()?"".concat(B(),"Transform"):"transform"}function j(t,e){var n=F();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function H(t,e){var n=U();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}var W,V=/matrix\((.*)\)/,G=/matrix3d\((.*)\)/;function z(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function X(t,e,n){var o=n;if("object"!==L(e))return"undefined"!==typeof o?("number"===typeof o&&(o="".concat(o,"px")),void(t.style[e]=o)):W(t,e);for(var r in e)e.hasOwnProperty(r)&&X(t,r,e[r])}function Y(t,e){var n=t["page".concat(e?"Y":"X","Offset")],o="scroll".concat(e?"Top":"Left");if("number"!==typeof n){var r=t.document;"number"!==typeof(n=r.documentElement[o])&&(n=r.body[o])}return n}function K(t){return Y(t)}function J(t){return Y(t,!0)}function q(t){var e=function(t){var e,n,o,r=t.ownerDocument,i=r.body,s=r&&r.documentElement;return e=t.getBoundingClientRect(),n=Math.floor(e.left),o=Math.floor(e.top),{left:n-=s.clientLeft||i.clientLeft||0,top:o-=s.clientTop||i.clientTop||0}}(t),n=t.ownerDocument,o=n.defaultView||n.parentWindow;return e.left+=K(o),e.top+=J(o),e}function $(t){return null!==t&&void 0!==t&&t==t.window}function Z(t){return $(t)?t.document:9===t.nodeType?t:t.ownerDocument}var Q=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),tt=/^(top|right|bottom|left)$/;function et(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function nt(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function ot(t,e,n){"static"===X(t,"position")&&(t.style.position="relative");var o=-999,r=-999,i=et("left",n),s=et("top",n),a=nt(i),l=nt(s);"left"!==i&&(o=999),"top"!==s&&(r=999);var u,c="",h=q(t);("left"in e||"top"in e)&&(c=(u=t).style.transitionProperty||u.style[F()]||"",j(t,"none")),"left"in e&&(t.style[a]="",t.style[i]="".concat(o,"px")),"top"in e&&(t.style[l]="",t.style[s]="".concat(r,"px")),z(t);var p=q(t),d={};for(var f in e)if(e.hasOwnProperty(f)){var g=et(f,n),_="left"===f?o:r,v=h[f]-p[f];d[g]=g===f?_+v:_-v}X(t,d),z(t),("left"in e||"top"in e)&&j(t,c);var m={};for(var y in e)if(e.hasOwnProperty(y)){var b=et(y,n),E=e[y]-h[y];m[b]=y===b?d[b]+E:d[b]-E}X(t,m)}function rt(t,e){var n=q(t),o=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(U());if(n&&"none"!==n){var o=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(o[12]||o[4],0),y:parseFloat(o[13]||o[5],0)}}return{x:0,y:0}}(t),r={x:o.x,y:o.y};"left"in e&&(r.x=o.x+e.left-n.left),"top"in e&&(r.y=o.y+e.top-n.top),function(t,e){var n=window.getComputedStyle(t,null),o=n.getPropertyValue("transform")||n.getPropertyValue(U());if(o&&"none"!==o){var r,i=o.match(V);i?((r=(i=i[1]).split(",").map((function(t){return parseFloat(t,10)})))[4]=e.x,r[5]=e.y,H(t,"matrix(".concat(r.join(","),")"))):((r=o.match(G)[1].split(",").map((function(t){return parseFloat(t,10)})))[12]=e.x,r[13]=e.y,H(t,"matrix3d(".concat(r.join(","),")")))}else H(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}(t,r)}function it(t,e){for(var n=0;n<t.length;n++)e(t[n])}function st(t){return"border-box"===W(t,"boxSizing")}"undefined"!==typeof window&&(W=window.getComputedStyle?function(t,e,n){var o=n,r="",i=Z(t);return(o=o||i.defaultView.getComputedStyle(t,null))&&(r=o.getPropertyValue(e)||o[e]),r}:function(t,e){var n=t.currentStyle&&t.currentStyle[e];if(Q.test(n)&&!tt.test(e)){var o=t.style,r=o.left,i=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,o.left="fontSize"===e?"1em":n||0,n=o.pixelLeft+"px",o.left=r,t.runtimeStyle.left=i}return""===n?"auto":n});var at=["margin","border","padding"];function lt(t,e,n){var o,r={},i=t.style;for(o in e)e.hasOwnProperty(o)&&(r[o]=i[o],i[o]=e[o]);for(o in n.call(t),e)e.hasOwnProperty(o)&&(i[o]=r[o])}function ut(t,e,n){var o,r,i,s=0;for(r=0;r<e.length;r++)if(o=e[r])for(i=0;i<n.length;i++){var a=void 0;a="border"===o?"".concat(o).concat(n[i],"Width"):o+n[i],s+=parseFloat(W(t,a))||0}return s}var ct={getParent:function(t){var e=t;do{e=11===e.nodeType&&e.host?e.host:e.parentNode}while(e&&1!==e.nodeType&&9!==e.nodeType);return e}};function ht(t,e,n){var o=n;if($(t))return"width"===e?ct.viewportWidth(t):ct.viewportHeight(t);if(9===t.nodeType)return"width"===e?ct.docWidth(t):ct.docHeight(t);var r="width"===e?["Left","Right"]:["Top","Bottom"],i="width"===e?Math.floor(t.getBoundingClientRect().width):Math.floor(t.getBoundingClientRect().height),s=st(t),a=0;(null===i||void 0===i||i<=0)&&(i=void 0,(null===(a=W(t,e))||void 0===a||Number(a)<0)&&(a=t.style[e]||0),a=parseFloat(a)||0),void 0===o&&(o=s?1:-1);var l=void 0!==i||s,u=i||a;return-1===o?l?u-ut(t,["border","padding"],r):a:l?1===o?u:u+(2===o?-ut(t,["border"],r):ut(t,["margin"],r)):a+ut(t,at.slice(o),r)}it(["Width","Height"],(function(t){ct["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],ct["viewport".concat(t)](n))},ct["viewport".concat(t)]=function(e){var n="client".concat(t),o=e.document,r=o.body,i=o.documentElement[n];return"CSS1Compat"===o.compatMode&&i||r&&r[n]||i}}));var pt={position:"absolute",visibility:"hidden",display:"block"};function dt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o,r=e[0];return 0!==r.offsetWidth?o=ht.apply(void 0,e):lt(r,pt,(function(){o=ht.apply(void 0,e)})),o}function ft(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}it(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);ct["outer".concat(e)]=function(e,n){return e&&dt(e,t,n?0:1)};var n="width"===t?["Left","Right"]:["Top","Bottom"];ct[t]=function(e,o){var r=o;return void 0!==r?e?(st(e)&&(r+=ut(e,["padding","border"],n)),X(e,t,r)):void 0:e&&dt(e,t,-1)}}));var gt={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},getDocument:Z,offset:function(t,e,n){if("undefined"===typeof e)return q(t);!function(t,e,n){if(n.ignoreShake){var o=q(t),r=o.left.toFixed(0),i=o.top.toFixed(0),s=e.left.toFixed(0),a=e.top.toFixed(0);if(r===s&&i===a)return}n.useCssRight||n.useCssBottom?ot(t,e,n):n.useCssTransform&&U()in document.body.style?rt(t,e):ot(t,e,n)}(t,e,n||{})},isWindow:$,each:it,css:X,clone:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);if(t.overflow)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:ft,getWindowScrollLeft:function(t){return K(t)},getWindowScrollTop:function(t){return J(t)},merge:function(){for(var t={},e=0;e<arguments.length;e++)gt.mix(t,e<0||arguments.length<=e?void 0:arguments[e]);return t},viewportWidth:0,viewportHeight:0};ft(gt,ct);var _t=gt.getParent;function vt(t){if(gt.isWindow(t)||9===t.nodeType)return null;var e,n=gt.getDocument(t).body,o=gt.css(t,"position");if(!("fixed"===o||"absolute"===o))return"html"===t.nodeName.toLowerCase()?null:_t(t);for(e=_t(t);e&&e!==n&&9!==e.nodeType;e=_t(e))if("static"!==(o=gt.css(e,"position")))return e;return null}var mt=gt.getParent;function yt(t,e){for(var n={left:0,right:1/0,top:0,bottom:1/0},o=vt(t),r=gt.getDocument(t),i=r.defaultView||r.parentWindow,s=r.body,a=r.documentElement;o;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===o.clientWidth||o===s||o===a||"visible"===gt.css(o,"overflow")){if(o===s||o===a)break}else{var l=gt.offset(o);l.left+=o.clientLeft,l.top+=o.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+o.clientWidth),n.bottom=Math.min(n.bottom,l.top+o.clientHeight),n.left=Math.max(n.left,l.left)}o=vt(o)}var u=null;gt.isWindow(t)||9===t.nodeType||(u=t.style.position,"absolute"===gt.css(t,"position")&&(t.style.position="fixed"));var c=gt.getWindowScrollLeft(i),h=gt.getWindowScrollTop(i),p=gt.viewportWidth(i),d=gt.viewportHeight(i),f=a.scrollWidth,g=a.scrollHeight,_=window.getComputedStyle(s);if("hidden"===_.overflowX&&(f=i.innerWidth),"hidden"===_.overflowY&&(g=i.innerHeight),t.style&&(t.style.position=u),e||function(t){if(gt.isWindow(t)||9===t.nodeType)return!1;var e=gt.getDocument(t),n=e.body,o=null;for(o=mt(t);o&&o!==n&&o!==e;o=mt(o))if("fixed"===gt.css(o,"position"))return!0;return!1}(t))n.left=Math.max(n.left,c),n.top=Math.max(n.top,h),n.right=Math.min(n.right,c+p),n.bottom=Math.min(n.bottom,h+d);else{var v=Math.max(f,c+p);n.right=Math.min(n.right,v);var m=Math.max(g,h+d);n.bottom=Math.min(n.bottom,m)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function bt(t){var e,n,o;if(gt.isWindow(t)||9===t.nodeType){var r=gt.getWindow(t);e={left:gt.getWindowScrollLeft(r),top:gt.getWindowScrollTop(r)},n=gt.viewportWidth(r),o=gt.viewportHeight(r)}else e=gt.offset(t),n=gt.outerWidth(t),o=gt.outerHeight(t);return e.width=n,e.height=o,e}function Et(t,e){var n=e.charAt(0),o=e.charAt(1),r=t.width,i=t.height,s=t.left,a=t.top;return"c"===n?a+=i/2:"b"===n&&(a+=i),"c"===o?s+=r/2:"r"===o&&(s+=r),{left:s,top:a}}function Tt(t,e,n,o,r){var i=Et(e,n[1]),s=Et(t,n[0]),a=[s.left-i.left,s.top-i.top];return{left:Math.round(t.left-a[0]+o[0]-r[0]),top:Math.round(t.top-a[1]+o[1]-r[1])}}function St(t,e,n){return t.left<n.left||t.left+e.width>n.right}function kt(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function Ct(t,e,n){var o=[];return gt.each(t,(function(t){o.push(t.replace(e,(function(t){return n[t]})))})),o}function Ot(t,e){return t[e]=-t[e],t}function Rt(t,e){return(/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10))||0}function wt(t,e){t[0]=Rt(t[0],e.width),t[1]=Rt(t[1],e.height)}function It(t,e,n,o){var r=n.points,i=n.offset||[0,0],s=n.targetOffset||[0,0],a=n.overflow,l=n.source||t;i=[].concat(i),s=[].concat(s);var u={},c=0,h=yt(l,!(!(a=a||{})||!a.alwaysByViewport)),p=bt(l);wt(i,p),wt(s,e);var d=Tt(p,e,r,i,s),f=gt.merge(p,d);if(h&&(a.adjustX||a.adjustY)&&o){if(a.adjustX&&St(d,p,h)){var g=Ct(r,/[lr]/gi,{l:"r",r:"l"}),_=Ot(i,0),v=Ot(s,0);(function(t,e,n){return t.left>n.right||t.left+e.width<n.left})(Tt(p,e,g,_,v),p,h)||(c=1,r=g,i=_,s=v)}if(a.adjustY&&kt(d,p,h)){var m=Ct(r,/[tb]/gi,{t:"b",b:"t"}),y=Ot(i,1),b=Ot(s,1);(function(t,e,n){return t.top>n.bottom||t.top+e.height<n.top})(Tt(p,e,m,y,b),p,h)||(c=1,r=m,i=y,s=b)}c&&(d=Tt(p,e,r,i,s),gt.mix(f,d));var E=St(d,p,h),T=kt(d,p,h);if(E||T){var S=r;E&&(S=Ct(r,/[lr]/gi,{l:"r",r:"l"})),T&&(S=Ct(r,/[tb]/gi,{t:"b",b:"t"})),r=S,i=n.offset||[0,0],s=n.targetOffset||[0,0]}u.adjustX=a.adjustX&&E,u.adjustY=a.adjustY&&T,(u.adjustX||u.adjustY)&&(f=function(t,e,n,o){var r=gt.clone(t),i={width:e.width,height:e.height};return o.adjustX&&r.left<n.left&&(r.left=n.left),o.resizeWidth&&r.left>=n.left&&r.left+i.width>n.right&&(i.width-=r.left+i.width-n.right),o.adjustX&&r.left+i.width>n.right&&(r.left=Math.max(n.right-i.width,n.left)),o.adjustY&&r.top<n.top&&(r.top=n.top),o.resizeHeight&&r.top>=n.top&&r.top+i.height>n.bottom&&(i.height-=r.top+i.height-n.bottom),o.adjustY&&r.top+i.height>n.bottom&&(r.top=Math.max(n.bottom-i.height,n.top)),gt.mix(r,i)}(d,p,h,u))}return f.width!==p.width&&gt.css(l,"width",gt.width(l)+f.width-p.width),f.height!==p.height&&gt.css(l,"height",gt.height(l)+f.height-p.height),gt.offset(l,{left:f.left,top:f.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:r,offset:i,targetOffset:s,overflow:u}}function At(t,e,n){var o=n.target||e,r=bt(o),i=!function(t,e){var n=yt(t,e),o=bt(t);return!n||o.left+o.width<=n.left||o.top+o.height<=n.top||o.left>=n.right||o.top>=n.bottom}(o,n.overflow&&n.overflow.alwaysByViewport);return It(t,r,n,i)}At.__getOffsetParent=vt,At.__getVisibleRectForElement=yt;var Nt=n(147),Dt=n.n(Nt),Mt=n(76);function Lt(t,e){var n=null,o=null;var r=new Mt.a((function(t){var r=Object(S.a)(t,1)[0].target;if(document.documentElement.contains(r)){var i=r.getBoundingClientRect(),s=i.width,a=i.height,l=Math.floor(s),u=Math.floor(a);n===l&&o===u||Promise.resolve().then((function(){e({width:l,height:u})})),n=l,o=u}}));return t&&r.observe(t),function(){r.disconnect()}}function xt(t){return"function"!==typeof t?null:t()}function Pt(t){return"object"===Object(A.a)(t)&&t?t:null}var Bt=function(t,e){var n=t.children,o=t.disabled,r=t.target,i=t.align,s=t.onAlign,a=t.monitorWindowResize,l=t.monitorBufferTime,u=void 0===l?0:l,c=h.a.useRef({}),p=h.a.useRef(),d=h.a.Children.only(n),f=h.a.useRef({});f.current.disabled=o,f.current.target=r,f.current.align=i,f.current.onAlign=s;var _=function(t,e){var n=h.a.useRef(!1),o=h.a.useRef(null);function r(){window.clearTimeout(o.current)}return[function i(s){if(r(),n.current&&!0!==s)o.current=window.setTimeout((function(){n.current=!1,i()}),e);else{if(!1===t())return;n.current=!0,o.current=window.setTimeout((function(){n.current=!1}),e)}},function(){n.current=!1,r()}]}((function(){var t=f.current,e=t.disabled,n=t.target,o=t.align,r=t.onAlign;if(!e&&n){var i,s=p.current,a=xt(n),l=Pt(n);c.current.element=a,c.current.point=l,c.current.align=o;var u=document.activeElement;return a&&Object(N.a)(a)?i=At(s,a,o):l&&(i=function(t,e,n){var o,r,i=gt.getDocument(t),s=i.defaultView||i.parentWindow,a=gt.getWindowScrollLeft(s),l=gt.getWindowScrollTop(s),u=gt.viewportWidth(s),c=gt.viewportHeight(s),h={left:o="pageX"in e?e.pageX:a+e.clientX,top:r="pageY"in e?e.pageY:l+e.clientY,width:0,height:0},p=o>=0&&o<=a+u&&r>=0&&r<=l+c,d=[n.points[0],"cc"];return It(t,h,M(M({},n),{},{points:d}),p)}(s,l,o)),function(t,e){t!==document.activeElement&&Object(g.a)(e,t)&&"function"===typeof t.focus&&t.focus()}(u,s),r&&i&&r(s,i),!0}return!1}),u),y=Object(S.a)(_,2),b=y[0],E=y[1],T=h.a.useRef({cancel:function(){}}),k=h.a.useRef({cancel:function(){}});h.a.useEffect((function(){var t,e,n=xt(r),o=Pt(r);p.current!==k.current.element&&(k.current.cancel(),k.current.element=p.current,k.current.cancel=Lt(p.current,b)),c.current.element===n&&((t=c.current.point)===(e=o)||t&&e&&("pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e&&t.clientX===e.clientX&&t.clientY===e.clientY))&&Dt()(c.current.align,i)||(b(),T.current.element!==n&&(T.current.cancel(),T.current.element=n,T.current.cancel=Lt(n,b)))})),h.a.useEffect((function(){o?E():b()}),[o]);var C=h.a.useRef(null);return h.a.useEffect((function(){a?C.current||(C.current=Object(m.a)(window,"resize",b)):C.current&&(C.current.remove(),C.current=null)}),[a]),h.a.useEffect((function(){return function(){T.current.cancel(),k.current.cancel(),C.current&&C.current.remove(),E()}}),[]),h.a.useImperativeHandle(e,(function(){return{forceAlign:function(){return b(!0)}}})),h.a.isValidElement(d)&&(d=h.a.cloneElement(d,{ref:Object(v.a)(d.ref,p)})),d},Ft=h.a.forwardRef(Bt);Ft.displayName="Align";var Ut=Ft,jt=n(42),Ht=n(32),Wt=n.n(Ht),Vt=n(50),Gt=n(38),zt=["measure","alignPre","align",null,"motion"],Xt=c.forwardRef((function(t,e){var n=t.visible,i=t.prefixCls,s=t.className,a=t.style,l=t.children,u=t.zIndex,h=t.stretch,p=t.destroyPopupOnHide,d=t.forceRender,g=t.align,_=t.point,v=t.getRootDomNode,m=t.getClassNameFromAlign,y=t.onAlign,b=t.onMouseEnter,T=t.onMouseLeave,k=t.onMouseDown,C=t.onTouchStart,w=Object(c.useRef)(),I=Object(c.useRef)(),A=Object(c.useState)(),N=Object(S.a)(A,2),D=N[0],M=N[1],L=function(t){var e=c.useState({width:0,height:0}),n=Object(S.a)(e,2),o=n[0],r=n[1];return[c.useMemo((function(){var e={};if(t){var n=o.width,r=o.height;-1!==t.indexOf("height")&&r?e.height=r:-1!==t.indexOf("minHeight")&&r&&(e.minHeight=r),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,o]),function(t){r({width:t.offsetWidth,height:t.offsetHeight})}]}(h),x=Object(S.a)(L,2),P=x[0],B=x[1];var F=function(t,e){var n=Object(Gt.a)(null),o=Object(S.a)(n,2),r=o[0],i=o[1],s=Object(c.useRef)();function a(t){i(t,!0)}function l(){f.a.cancel(s.current)}return Object(c.useEffect)((function(){a("measure")}),[t]),Object(c.useEffect)((function(){"measure"===r&&e(),r&&(s.current=Object(f.a)(Object(Vt.a)(Wt.a.mark((function t(){var e,n;return Wt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=zt.indexOf(r),(n=zt[e+1])&&-1!==e&&a(n);case 3:case"end":return t.stop()}}),t)})))))}),[r]),Object(c.useEffect)((function(){return function(){l()}}),[]),[r,function(t){l(),s.current=Object(f.a)((function(){a((function(t){switch(r){case"align":return"motion";case"motion":return"stable"}return t})),null===t||void 0===t||t()}))}]}(n,(function(){h&&B(v())})),U=Object(S.a)(F,2),j=U[0],H=U[1],W=Object(c.useState)(0),V=Object(S.a)(W,2),G=V[0],z=V[1],X=Object(c.useRef)();function Y(){var t;null===(t=w.current)||void 0===t||t.forceAlign()}function K(t,e){var n=m(e);D!==n&&M(n),z((function(t){return t+1})),"align"===j&&(null===y||void 0===y||y(t,e))}Object(jt.a)((function(){"alignPre"===j&&z(0)}),[j]),Object(jt.a)((function(){"align"===j&&(G<2?Y():H((function(){var t;null===(t=X.current)||void 0===t||t.call(X)})))}),[G]);var J=Object(o.a)({},R(t));function q(){return new Promise((function(t){X.current=t}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(t){var e=J[t];J[t]=function(t,n){return H(),null===e||void 0===e?void 0:e(t,n)}})),c.useEffect((function(){J.motionName||"motion"!==j||H()}),[J.motionName,j]),c.useImperativeHandle(e,(function(){return{forceAlign:Y,getElement:function(){return I.current}}}));var $=Object(o.a)(Object(o.a)({},P),{},{zIndex:u,opacity:"motion"!==j&&"stable"!==j&&n?0:void 0,pointerEvents:n||"stable"===j?void 0:"none"},a),Z=!0;!(null===g||void 0===g?void 0:g.points)||"align"!==j&&"stable"!==j||(Z=!1);var Q=l;return c.Children.count(l)>1&&(Q=c.createElement("div",{className:"".concat(i,"-content")},l)),c.createElement(O.a,Object(r.a)({visible:n,ref:I,leavedClassName:"".concat(i,"-hidden")},J,{onAppearPrepare:q,onEnterPrepare:q,removeOnLeave:p,forceRender:d}),(function(t,e){var n=t.className,r=t.style,a=E()(i,s,D,n);return c.createElement(Ut,{target:_||v,key:"popup",ref:w,monitorWindowResize:!0,disabled:Z,align:g,onAlign:K},c.createElement("div",{ref:e,className:a,onMouseEnter:b,onMouseLeave:T,onMouseDownCapture:k,onTouchStartCapture:C,style:Object(o.a)(Object(o.a)({},r),$)},Q))}))}));Xt.displayName="PopupInner";var Yt=Xt,Kt=c.forwardRef((function(t,e){var n=t.prefixCls,i=t.visible,s=t.zIndex,a=t.children,l=t.mobile,u=(l=void 0===l?{}:l).popupClassName,h=l.popupStyle,p=l.popupMotion,d=void 0===p?{}:p,f=l.popupRender,g=c.useRef();c.useImperativeHandle(e,(function(){return{forceAlign:function(){},getElement:function(){return g.current}}}));var _=Object(o.a)({zIndex:s},h),v=a;return c.Children.count(a)>1&&(v=c.createElement("div",{className:"".concat(n,"-content")},a)),f&&(v=f(v)),c.createElement(O.a,Object(r.a)({visible:i,ref:g,removeOnLeave:!0},d),(function(t,e){var r=t.className,i=t.style,s=E()(n,u,r);return c.createElement("div",{ref:e,className:s,style:Object(o.a)(Object(o.a)({},i),_)},v)}))}));Kt.displayName="MobilePopupInner";var Jt=Kt,qt=["visible","mobile"],$t=c.forwardRef((function(t,e){var n=t.visible,i=t.mobile,s=Object(k.a)(t,qt),a=Object(c.useState)(n),l=Object(S.a)(a,2),u=l[0],h=l[1],p=Object(c.useState)(!1),d=Object(S.a)(p,2),f=d[0],g=d[1],_=Object(o.a)(Object(o.a)({},s),{},{visible:u});Object(c.useEffect)((function(){h(n),n&&i&&g(Object(C.a)())}),[n,i]);var v=f?c.createElement(Jt,Object(r.a)({},_,{mobile:i,ref:e})):c.createElement(Yt,Object(r.a)({},_,{ref:e}));return c.createElement("div",null,c.createElement(w,_),v)}));$t.displayName="Popup";var Zt=$t,Qt=c.createContext(null);function te(){}function ee(){return""}function ne(t){return t?t.ownerDocument:window.document}var oe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];e.a=function(t){var e=function(e){Object(l.a)(h,e);var n=Object(u.a)(h);function h(t){var e,o;return Object(i.a)(this,h),(e=n.call(this,t)).popupRef=c.createRef(),e.triggerRef=c.createRef(),e.portalContainer=void 0,e.attachId=void 0,e.clickOutsideHandler=void 0,e.touchOutsideHandler=void 0,e.contextMenuOutsideHandler1=void 0,e.contextMenuOutsideHandler2=void 0,e.mouseDownTimeout=void 0,e.focusTime=void 0,e.preClickTime=void 0,e.preTouchTime=void 0,e.delayTimer=void 0,e.hasPopupMouseDown=void 0,e.onMouseEnter=function(t){var n=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",t),e.delaySetPopupVisible(!0,n,n?null:t)},e.onMouseMove=function(t){e.fireEvents("onMouseMove",t),e.setPoint(t)},e.onMouseLeave=function(t){e.fireEvents("onMouseLeave",t),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},e.onPopupMouseEnter=function(){e.clearDelayTimer()},e.onPopupMouseLeave=function(t){var n;t.relatedTarget&&!t.relatedTarget.setTimeout&&Object(g.a)(null===(n=e.popupRef.current)||void 0===n?void 0:n.getElement(),t.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},e.onFocus=function(t){e.fireEvents("onFocus",t),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))},e.onMouseDown=function(t){e.fireEvents("onMouseDown",t),e.preClickTime=Date.now()},e.onTouchStart=function(t){e.fireEvents("onTouchStart",t),e.preTouchTime=Date.now()},e.onBlur=function(t){e.fireEvents("onBlur",t),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)},e.onContextMenu=function(t){t.preventDefault(),e.fireEvents("onContextMenu",t),e.setPopupVisible(!0,t)},e.onContextMenuClose=function(){e.isContextMenuToShow()&&e.close()},e.onClick=function(t){if(e.fireEvents("onClick",t),e.focusTime){var n;if(e.preClickTime&&e.preTouchTime?n=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?n=e.preClickTime:e.preTouchTime&&(n=e.preTouchTime),Math.abs(n-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,e.isClickToShow()&&(e.isClickToHide()||e.isBlurToHide())&&t&&t.preventDefault&&t.preventDefault();var o=!e.state.popupVisible;(e.isClickToHide()&&!o||o&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,t)},e.onPopupMouseDown=function(){var t;(e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=window.setTimeout((function(){e.hasPopupMouseDown=!1}),0),e.context)&&(t=e.context).onPopupMouseDown.apply(t,arguments)},e.onDocumentClick=function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target,o=e.getRootDomNode(),r=e.getPopupDomNode();Object(g.a)(o,n)&&!e.isContextMenuOnly()||Object(g.a)(r,n)||e.hasPopupMouseDown||e.close()}},e.getRootDomNode=function(){var t=e.props.getTriggerDOMNode;if(t)return t(e.triggerRef.current);try{var n=Object(_.a)(e.triggerRef.current);if(n)return n}catch(o){}return d.a.findDOMNode(Object(a.a)(e))},e.getPopupClassNameFromAlign=function(t){var n=[],o=e.props,r=o.popupPlacement,i=o.builtinPlacements,s=o.prefixCls,a=o.alignPoint,l=o.getPopupClassNameFromAlign;return r&&i&&n.push(function(t,e,n,o){for(var r=n.points,i=Object.keys(t),s=0;s<i.length;s+=1){var a=i[s];if(T(t[a].points,r,o))return"".concat(e,"-placement-").concat(a)}return""}(i,s,t,a)),l&&n.push(l(t)),n.join(" ")},e.getComponent=function(){var t=e.props,n=t.prefixCls,o=t.destroyPopupOnHide,i=t.popupClassName,s=t.onPopupAlign,a=t.popupMotion,l=t.popupAnimation,u=t.popupTransitionName,h=t.popupStyle,p=t.mask,d=t.maskAnimation,f=t.maskTransitionName,g=t.maskMotion,_=t.zIndex,v=t.popup,m=t.stretch,y=t.alignPoint,b=t.mobile,E=t.forceRender,T=e.state,S=T.popupVisible,k=T.point,C=e.getPopupAlign(),O={};return e.isMouseEnterToShow()&&(O.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(O.onMouseLeave=e.onPopupMouseLeave),O.onMouseDown=e.onPopupMouseDown,O.onTouchStart=e.onPopupMouseDown,c.createElement(Zt,Object(r.a)({prefixCls:n,destroyPopupOnHide:o,visible:S,point:y&&k,className:i,align:C,onAlign:s,animation:l,getClassNameFromAlign:e.getPopupClassNameFromAlign},O,{stretch:m,getRootDomNode:e.getRootDomNode,style:h,mask:p,zIndex:_,transitionName:u,maskAnimation:d,maskTransitionName:f,maskMotion:g,ref:e.popupRef,motion:a,mobile:b,forceRender:E}),"function"===typeof v?v():v)},e.attachParent=function(t){f.a.cancel(e.attachId);var n,o=e.props,r=o.getPopupContainer,i=o.getDocument,s=e.getRootDomNode();r?(s||0===r.length)&&(n=r(s)):n=i(e.getRootDomNode()).body,n?n.appendChild(t):e.attachId=Object(f.a)((function(){e.attachParent(t)}))},e.getContainer=function(){if(!e.portalContainer){var t=(0,e.props.getDocument)(e.getRootDomNode()).createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",e.portalContainer=t}return e.attachParent(e.portalContainer),e.portalContainer},e.setPoint=function(t){e.props.alignPoint&&t&&e.setState({point:{pageX:t.pageX,pageY:t.pageY}})},e.handlePortalUpdate=function(){e.state.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)},e.triggerContextValue={onPopupMouseDown:e.onPopupMouseDown},o="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,e.state={prevPopupVisible:o,popupVisible:o},oe.forEach((function(t){e["fire".concat(t)]=function(n){e.fireEvents(t,n)}})),e}return Object(s.a)(h,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var t,e=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(t=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Object(m.a)(t,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(t=t||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Object(m.a)(t,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(t=t||e.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Object(m.a)(t,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Object(m.a)(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),f.a.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var t;return(null===(t=this.popupRef.current)||void 0===t?void 0:t.getElement())||null}},{key:"getPopupAlign",value:function(){var t=this.props,e=t.popupPlacement,n=t.popupAlign,r=t.builtinPlacements;return e&&r?function(t,e,n){var r=t[e]||{};return Object(o.a)(Object(o.a)({},r),n)}(r,e,n):n}},{key:"setPopupVisible",value:function(t,e){var n=this.props.alignPoint,o=this.state.popupVisible;this.clearDelayTimer(),o!==t&&("popupVisible"in this.props||this.setState({popupVisible:t,prevPopupVisible:o}),this.props.onPopupVisibleChange(t)),n&&e&&t&&this.setPoint(e)}},{key:"delaySetPopupVisible",value:function(t,e,n){var o=this,r=1e3*e;if(this.clearDelayTimer(),r){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){o.setPopupVisible(t,i),o.clearDelayTimer()}),r)}else this.setPopupVisible(t,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(t){var e=this.props.children.props,n=this.props;return e[t]&&n[t]?this["fire".concat(t)]:e[t]||n[t]}},{key:"isClickToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var t=this.props.action;return"contextMenu"===t||1===t.length&&"contextMenu"===t[0]}},{key:"isContextMenuToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var t;this.state.popupVisible&&(null===(t=this.popupRef.current)||void 0===t||t.forceAlign())}},{key:"fireEvents",value:function(t,e){var n=this.props.children.props[t];n&&n(e);var o=this.props[t];o&&o(e)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,n=this.props,r=n.children,i=n.forceRender,s=n.alignPoint,a=n.className,l=n.autoDestroy,u=c.Children.only(r),h={key:"trigger"};this.isContextMenuToShow()?h.onContextMenu=this.onContextMenu:h.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(h.onClick=this.onClick,h.onMouseDown=this.onMouseDown,h.onTouchStart=this.onTouchStart):(h.onClick=this.createTwoChains("onClick"),h.onMouseDown=this.createTwoChains("onMouseDown"),h.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(h.onMouseEnter=this.onMouseEnter,s&&(h.onMouseMove=this.onMouseMove)):h.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?h.onMouseLeave=this.onMouseLeave:h.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(h.onFocus=this.onFocus,h.onBlur=this.onBlur):(h.onFocus=this.createTwoChains("onFocus"),h.onBlur=this.createTwoChains("onBlur"));var p=E()(u&&u.props&&u.props.className,a);p&&(h.className=p);var d=Object(o.a)({},h);Object(v.c)(u)&&(d.ref=Object(v.a)(this.triggerRef,u.ref));var f,g=c.cloneElement(u,d);return(e||this.popupRef.current||i)&&(f=c.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&l&&(f=null),c.createElement(Qt.Provider,{value:this.triggerContextValue},g,f)}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.popupVisible,o={};return void 0!==n&&e.popupVisible!==n&&(o.popupVisible=n,o.prevPopupVisible=e.popupVisible),o}}]),h}(c.Component);return e.contextType=Qt,e.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:ee,getDocument:ne,onPopupVisibleChange:te,afterPopupVisibleChange:te,onPopupAlign:te,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},e}(y.a)},function(t,e,n){"use strict";var o=n(4),r=n(3),i=n(5),s=n(7),a=n(0),l=n.n(a),u=n(6),c=n.n(u),h=n(25),p=n(328),d=n(27),f=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},g=a.createContext(void 0),_=function(t){var e,n=a.useContext(p.b),i=n.getPrefixCls,s=n.direction,l=t.prefixCls,u=t.size,h=t.className,_=f(t,["prefixCls","size","className"]),v=i("btn-group",l),m="";switch(u){case"large":m="lg";break;case"small":m="sm";break;case"middle":case void 0:break;default:Object(d.a)(!u,"Button.Group","Invalid prop `size`.")}var y=c()(v,(e={},Object(r.a)(e,"".concat(v,"-").concat(m),m),Object(r.a)(e,"".concat(v,"-rtl"),"rtl"===s),e),h);return a.createElement(g.Provider,{value:u},a.createElement("div",Object(o.a)({},_,{className:y})))},v=n(14),m=n(15),y=n(44),b=n(20),E=n(19),T=n(75),S=n(16),k=n(29),C=0,O={};function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=C++,o=e;function r(){(o-=1)<=0?(t(),delete O[n]):O[n]=Object(k.a)(r)}return O[n]=Object(k.a)(r),n}R.cancel=function(t){void 0!==t&&(k.a.cancel(O[t]),delete O[t])},R.ids=O;var w,I=n(26);function A(t){return!t||null===t.offsetParent||t.hidden}function N(t){var e=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(e&&e[1]&&e[2]&&e[3])||!(e[1]===e[2]&&e[2]===e[3])}var D=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){var t;return Object(v.a)(this,n),(t=e.apply(this,arguments)).containerRef=a.createRef(),t.animationStart=!1,t.destroyed=!1,t.onClick=function(e,n){var o,r,i=t.props,s=i.insertExtraNode;if(!(i.disabled||!e||A(e)||e.className.indexOf("-leave")>=0)){t.extraNode=document.createElement("div");var a=Object(y.a)(t).extraNode,l=t.context.getPrefixCls;a.className="".concat(l(""),"-click-animating-node");var u=t.getAttributeName();if(e.setAttribute(u,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&N(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){a.style.borderColor=n;var c=(null===(o=e.getRootNode)||void 0===o?void 0:o.call(e))||e.ownerDocument,h=c instanceof Document?c.body:null!==(r=c.firstChild)&&void 0!==r?r:c;w=Object(T.a)("\n      [".concat(l(""),"-click-animating-without-extra-node='true']::after, .").concat(l(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:t.csp,attachTo:h})}s&&e.appendChild(a),["transition","animation"].forEach((function(n){e.addEventListener("".concat(n,"start"),t.onTransitionStart),e.addEventListener("".concat(n,"end"),t.onTransitionEnd)}))}},t.onTransitionStart=function(e){if(!t.destroyed){var n=t.containerRef.current;e&&e.target===n&&!t.animationStart&&t.resetEffect(n)}},t.onTransitionEnd=function(e){e&&"fadeEffect"===e.animationName&&t.resetEffect(e.target)},t.bindAnimationEvent=function(e){if(e&&e.getAttribute&&!e.getAttribute("disabled")&&!(e.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!A(n.target)){t.resetEffect(e);var o=getComputedStyle(e).getPropertyValue("border-top-color")||getComputedStyle(e).getPropertyValue("border-color")||getComputedStyle(e).getPropertyValue("background-color");t.clickWaveTimeoutId=window.setTimeout((function(){return t.onClick(e,o)}),0),R.cancel(t.animationStartId),t.animationStart=!0,t.animationStartId=R((function(){t.animationStart=!1}),10)}};return e.addEventListener("click",n,!0),{cancel:function(){e.removeEventListener("click",n,!0)}}}},t.renderWave=function(e){var n=e.csp,o=t.props.children;if(t.csp=n,!a.isValidElement(o))return o;var r=t.containerRef;return Object(S.c)(o)&&(r=Object(S.a)(o.ref,t.containerRef)),Object(I.a)(o,{ref:r})},t}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var t=this.containerRef.current;t&&1===t.nodeType&&(this.instance=this.bindAnimationEvent(t))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var t=this.context.getPrefixCls,e=this.props.insertExtraNode;return"".concat(t(""),e?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(t){var e=this;if(t&&t!==this.extraNode&&t instanceof Element){var n=this.props.insertExtraNode,o=this.getAttributeName();t.setAttribute(o,"false"),w&&(w.innerHTML=""),n&&this.extraNode&&t.contains(this.extraNode)&&t.removeChild(this.extraNode),["transition","animation"].forEach((function(n){t.removeEventListener("".concat(n,"start"),e.onTransitionStart),t.removeEventListener("".concat(n,"end"),e.onTransitionEnd)}))}}},{key:"render",value:function(){return a.createElement(p.a,null,this.renderWave)}}]),n}(a.Component);D.contextType=p.b;var M=n(22),L=n(45),x=n(47),P=n(2),B={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},F=n(21),U=function(t,e){return a.createElement(F.a,Object(P.a)(Object(P.a)({},t),{},{ref:e,icon:B}))};U.displayName="LoadingOutlined";var j=a.forwardRef(U),H=function(){return{width:0,opacity:0,transform:"scale(0)"}},W=function(t){return{width:t.scrollWidth,opacity:1,transform:"scale(1)"}},V=function(t){var e=t.prefixCls,n=!!t.loading;return t.existIcon?l.a.createElement("span",{className:"".concat(e,"-loading-icon")},l.a.createElement(j,null)):l.a.createElement(x.a,{visible:n,motionName:"".concat(e,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:H,onAppearActive:W,onEnterStart:H,onEnterActive:W,onLeaveStart:W,onLeaveActive:H},(function(t,n){var o=t.className,r=t.style;return l.a.createElement("span",{className:"".concat(e,"-loading-icon"),style:r,ref:n},l.a.createElement(j,{className:o}))}))},G=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},z=/^[\u4e00-\u9fa5]{2}$/,X=z.test.bind(z);function Y(t){return"text"===t||"link"===t}function K(t,e){if(null!=t){var n,o=e?" ":"";return"string"!==typeof t&&"number"!==typeof t&&"string"===typeof t.type&&X(t.props.children)?Object(I.a)(t,{children:t.props.children.split("").join(o)}):"string"===typeof t?X(t)?a.createElement("span",null,t.split("").join(o)):a.createElement("span",null,t):(n=t,a.isValidElement(n)&&n.type===a.Fragment?a.createElement("span",null,t):t)}}Object(M.a)("default","primary","ghost","dashed","link","text"),Object(M.a)("default","circle","round"),Object(M.a)("submit","button","reset");var J=function(t,e){var n,l=t.loading,u=void 0!==l&&l,f=t.prefixCls,_=t.type,v=void 0===_?"default":_,m=t.danger,y=t.shape,b=void 0===y?"default":y,E=t.size,T=t.className,S=t.children,k=t.icon,C=t.ghost,O=void 0!==C&&C,R=t.block,w=void 0!==R&&R,I=t.htmlType,A=void 0===I?"button":I,N=G(t,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),M=a.useContext(L.a),x=a.useContext(g),P=a.useState(!!u),B=Object(i.a)(P,2),F=B[0],U=B[1],j=a.useState(!1),H=Object(i.a)(j,2),W=H[0],z=H[1],J=a.useContext(p.b),q=J.getPrefixCls,$=J.autoInsertSpaceInButton,Z=J.direction,Q=e||a.createRef(),tt=function(){return 1===a.Children.count(S)&&!k&&!Y(v)},et="object"===Object(s.a)(u)&&u.delay?u.delay||!0:!!u;a.useEffect((function(){var t=null;return"number"===typeof et?t=window.setTimeout((function(){t=null,U(et)}),et):U(et),function(){t&&(window.clearTimeout(t),t=null)}}),[et]),a.useEffect((function(){if(Q&&Q.current&&!1!==$){var t=Q.current.textContent;tt()&&X(t)?W||z(!0):W&&z(!1)}}),[Q]);var nt=function(e){var n=t.onClick,o=t.disabled;F||o?e.preventDefault():null===n||void 0===n||n(e)};Object(d.a)(!("string"===typeof k&&k.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(k,"` at https://ant.design/components/icon")),Object(d.a)(!(O&&Y(v)),"Button","`link` or `text` button can't be a `ghost` button.");var ot=q("btn",f),rt=!1!==$,it=x||E||M,st=it&&{large:"lg",small:"sm",middle:void 0}[it]||"",at=F?"loading":k,lt=c()(ot,(n={},Object(r.a)(n,"".concat(ot,"-").concat(b),"default"!==b&&b),Object(r.a)(n,"".concat(ot,"-").concat(v),v),Object(r.a)(n,"".concat(ot,"-").concat(st),st),Object(r.a)(n,"".concat(ot,"-icon-only"),!S&&0!==S&&!!at),Object(r.a)(n,"".concat(ot,"-background-ghost"),O&&!Y(v)),Object(r.a)(n,"".concat(ot,"-loading"),F),Object(r.a)(n,"".concat(ot,"-two-chinese-chars"),W&&rt),Object(r.a)(n,"".concat(ot,"-block"),w),Object(r.a)(n,"".concat(ot,"-dangerous"),!!m),Object(r.a)(n,"".concat(ot,"-rtl"),"rtl"===Z),n),T),ut=k&&!F?k:a.createElement(V,{existIcon:!!k,prefixCls:ot,loading:!!F}),ct=S||0===S?function(t,e){var n=!1,o=[];return a.Children.forEach(t,(function(t){var e=Object(s.a)(t),r="string"===e||"number"===e;if(n&&r){var i=o.length-1,a=o[i];o[i]="".concat(a).concat(t)}else o.push(t);n=r})),a.Children.map(o,(function(t){return K(t,e)}))}(S,tt()&&rt):null,ht=Object(h.a)(N,["navigate"]);if(void 0!==ht.href)return a.createElement("a",Object(o.a)({},ht,{className:lt,onClick:nt,ref:Q}),ut,ct);var pt=a.createElement("button",Object(o.a)({},N,{type:A,className:lt,onClick:nt,ref:Q}),ut,ct);return Y(v)?pt:a.createElement(D,{disabled:!!F},pt)},q=a.forwardRef(J);q.displayName="Button",q.Group=_,q.__ANT_BUTTON=!0;var $=q;e.a=$},function(t,e,n){"use strict";var o,r=n(4),i=n(14),s=n(15),a=n(20),l=n(19),u=n(0),c=n(2),h=n(3),p=n(79),d=n(25),f=n(6),g=n.n(f),_="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",v=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],m={};function y(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&m[n])return m[n];var o=window.getComputedStyle(t),r=o.getPropertyValue("box-sizing")||o.getPropertyValue("-moz-box-sizing")||o.getPropertyValue("-webkit-box-sizing"),i=parseFloat(o.getPropertyValue("padding-bottom"))+parseFloat(o.getPropertyValue("padding-top")),s=parseFloat(o.getPropertyValue("border-bottom-width"))+parseFloat(o.getPropertyValue("border-top-width")),a=v.map((function(t){return"".concat(t,":").concat(o.getPropertyValue(t))})).join(";"),l={sizingStyle:a,paddingSize:i,borderSize:s,boxSizing:r};return e&&n&&(m[n]=l),l}var b,E=n(142),T=n.n(E);!function(t){t[t.NONE=0]="NONE",t[t.RESIZING=1]="RESIZING",t[t.RESIZED=2]="RESIZED"}(b||(b={}));var S=function(t){Object(a.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(i.a)(this,n),(s=e.call(this,t)).nextFrameActionId=void 0,s.resizeFrameId=void 0,s.textArea=void 0,s.saveTextArea=function(t){s.textArea=t},s.handleResize=function(t){var e=s.state.resizeStatus,n=s.props,o=n.autoSize,r=n.onResize;e===b.NONE&&("function"===typeof r&&r(t),o&&s.resizeOnNextFrame())},s.resizeOnNextFrame=function(){cancelAnimationFrame(s.nextFrameActionId),s.nextFrameActionId=requestAnimationFrame(s.resizeTextarea)},s.resizeTextarea=function(){var t=s.props.autoSize;if(t&&s.textArea){var e=t.minRows,n=t.maxRows,r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o||((o=document.createElement("textarea")).setAttribute("tab-index","-1"),o.setAttribute("aria-hidden","true"),document.body.appendChild(o)),t.getAttribute("wrap")?o.setAttribute("wrap",t.getAttribute("wrap")):o.removeAttribute("wrap");var i=y(t,e),s=i.paddingSize,a=i.borderSize,l=i.boxSizing,u=i.sizingStyle;o.setAttribute("style","".concat(u,";").concat(_)),o.value=t.value||t.placeholder||"";var c,h=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,d=o.scrollHeight;if("border-box"===l?d+=a:"content-box"===l&&(d-=s),null!==n||null!==r){o.value=" ";var f=o.scrollHeight-s;null!==n&&(h=f*n,"border-box"===l&&(h=h+s+a),d=Math.max(h,d)),null!==r&&(p=f*r,"border-box"===l&&(p=p+s+a),c=d>p?"":"hidden",d=Math.min(p,d))}return{height:d,minHeight:h,maxHeight:p,overflowY:c,resize:"none"}}(s.textArea,!1,e,n);s.setState({textareaStyles:r,resizeStatus:b.RESIZING},(function(){cancelAnimationFrame(s.resizeFrameId),s.resizeFrameId=requestAnimationFrame((function(){s.setState({resizeStatus:b.RESIZED},(function(){s.resizeFrameId=requestAnimationFrame((function(){s.setState({resizeStatus:b.NONE}),s.fixFirefoxAutoScroll()}))}))}))}))}},s.renderTextArea=function(){var t=s.props,e=t.prefixCls,n=void 0===e?"rc-textarea":e,o=t.autoSize,i=t.onResize,a=t.className,l=t.disabled,f=s.state,_=f.textareaStyles,v=f.resizeStatus,m=Object(d.a)(s.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),y=g()(n,a,Object(h.a)({},"".concat(n,"-disabled"),l));"value"in m&&(m.value=m.value||"");var E=Object(c.a)(Object(c.a)(Object(c.a)({},s.props.style),_),v===b.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return u.createElement(p.a,{onResize:s.handleResize,disabled:!(o||i)},u.createElement("textarea",Object(r.a)({},m,{className:y,style:E,ref:s.saveTextArea})))},s.state={textareaStyles:{},resizeStatus:b.NONE},s}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(t){t.value===this.props.value&&T()(t.autoSize,this.props.autoSize)||this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var t=this.textArea.selectionStart,e=this.textArea.selectionEnd;this.textArea.setSelectionRange(t,e)}}catch(n){}}},{key:"render",value:function(){return this.renderTextArea()}}]),n}(u.Component),k=S,C=function(t){Object(a.a)(n,t);var e=Object(l.a)(n);function n(t){var o;Object(i.a)(this,n),(o=e.call(this,t)).resizableTextArea=void 0,o.focus=function(){o.resizableTextArea.textArea.focus()},o.saveTextArea=function(t){o.resizableTextArea=t},o.handleChange=function(t){var e=o.props.onChange;o.setValue(t.target.value,(function(){o.resizableTextArea.resizeTextarea()})),e&&e(t)},o.handleKeyDown=function(t){var e=o.props,n=e.onPressEnter,r=e.onKeyDown;13===t.keyCode&&n&&n(t),r&&r(t)};var r="undefined"===typeof t.value||null===t.value?t.defaultValue:t.value;return o.state={value:r},o}return Object(s.a)(n,[{key:"setValue",value:function(t,e){"value"in this.props||this.setState({value:t},e)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return u.createElement(k,Object(r.a)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(t){return"value"in t?{value:t.value}:null}}]),n}(u.Component);e.a=C},,function(t,e,n){"use strict";var o=n(82),r=60103,i=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var s=60109,a=60110,l=60112;e.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),i=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),s=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function v(){}function m(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=_.prototype;var y=m.prototype=new v;y.constructor=m,o(y,_.prototype),y.isPureReactComponent=!0;var b={current:null},E=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,n){var o,i={},s=null,a=null;if(null!=e)for(o in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)E.call(e,o)&&!T.hasOwnProperty(o)&&(i[o]=e[o]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(o in l=t.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:r,type:t,key:s,ref:a,props:i,_owner:b.current}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var C=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function R(t,e,n,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case i:l=!0}}if(l)return s=s(l=t),t=""===o?"."+O(l,0):o,Array.isArray(s)?(n="",null!=t&&(n=t.replace(C,"$&/")+"/"),R(s,e,n,"",(function(t){return t}))):null!=s&&(k(s)&&(s=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=o+O(a=t[u],u);l+=R(a,e,n,c,s)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=R(a=a.value,e,n,c=o+O(a,u++),s);else if("object"===a)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function w(t,e,n){if(null==t)return t;var o=[],r=0;return R(t,o,"","",(function(t){return e.call(n,t,r++)})),o}function I(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var A={current:null};function N(){var t=A.current;if(null===t)throw Error(d(321));return t}var D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:o};e.Children={map:w,forEach:function(t,e,n){w(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return w(t,(function(){e++})),e},toArray:function(t){return w(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error(d(143));return t}},e.Component=_,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(d(267,t));var i=o({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=b.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)E.call(e,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:r,type:t.type,key:s,ref:a,props:i,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:I}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return N().useCallback(t,e)},e.useContext=function(t,e){return N().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return N().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return N().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return N().useLayoutEffect(t,e)},e.useMemo=function(t,e){return N().useMemo(t,e)},e.useReducer=function(t,e,n){return N().useReducer(t,e,n)},e.useRef=function(t){return N().useRef(t)},e.useState=function(t){return N().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var o=n(0),r=n(82),i=n(154);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(s(227));var a=new Set,l={};function u(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,f={},g={};function _(t,e,n,o,r,i,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new _(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new _(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new _(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new _(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new _(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new _(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new _(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new _(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new _(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,o){var r=v.hasOwnProperty(e)?v[e]:null;(null!==r?0===r.type:!o&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,o){if(null===e||"undefined"===typeof e||function(t,e,n,o){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,o))return!0;if(o)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,o)&&(n=null),o||null===r?function(t){return!!d.call(g,t)||!d.call(f,t)&&(p.test(t)?g[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,o=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,y);v[e]=new _(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,y);v[e]=new _(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,y);v[e]=new _(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new _(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new _(t,1,!1,t.toLowerCase(),null,!0,!0)}));var E=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=60103,S=60106,k=60107,C=60108,O=60114,R=60109,w=60110,I=60112,A=60113,N=60120,D=60115,M=60116,L=60121,x=60128,P=60129,B=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;T=U("react.element"),S=U("react.portal"),k=U("react.fragment"),C=U("react.strict_mode"),O=U("react.profiler"),R=U("react.provider"),w=U("react.context"),I=U("react.forward_ref"),A=U("react.suspense"),N=U("react.suspense_list"),D=U("react.memo"),M=U("react.lazy"),L=U("react.block"),U("react.scope"),x=U("react.opaque.id"),P=U("react.debug_trace_mode"),B=U("react.offscreen"),F=U("react.legacy_hidden")}var j,H="function"===typeof Symbol&&Symbol.iterator;function W(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=H&&t[H]||t["@@iterator"])?t:null}function V(t){if(void 0===j)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var G=!1;function z(t,e){if(!t||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var o=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){o=l}t.call(e.prototype)}else{try{throw Error()}catch(l){o=l}t()}}catch(l){if(l&&o&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),i=o.stack.split("\n"),s=r.length-1,a=i.length-1;1<=s&&0<=a&&r[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==i[a])return"\n"+r[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{G=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?V(t):""}function X(t){switch(t.tag){case 5:return V(t.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 22:return t=z(t.type._render,!1);case 1:return t=z(t.type,!0);default:return""}}function Y(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case S:return"Portal";case O:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case w:return(t.displayName||"Context")+".Consumer";case R:return(t._context.displayName||"Context")+".Provider";case I:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case D:return Y(t.type);case L:return Y(t._render);case M:e=t._payload,t=t._init;try{return Y(t(e))}catch(n){}}return null}function K(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function J(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=J(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){o=""+t,i.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(t){o=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function $(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=J(t)?t.checked?"true":"false":t.value),(t=o)!==n&&(e.setValue(t),!0)}function Z(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Q(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,o=null!=e.checked?e.checked:e.defaultChecked;n=K(null!=e.value?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=K(e.value),o=e.type;if(null!=n)"number"===o?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===o||"reset"===o)return void t.removeAttribute("value");e.hasOwnProperty("value")?rt(t,e.type,n):e.hasOwnProperty("defaultValue")&&rt(t,e.type,K(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function ot(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!("submit"!==o&&"reset"!==o||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function rt(t,e,n){"number"===e&&Z(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function it(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return o.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function st(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+K(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(o&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:K(n)}}function ut(t,e){var n=K(e.value),o=K(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=o&&(t.defaultValue=""+o)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",pt="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var gt,_t,vt=(_t=function(t,e){if(t.namespaceURI!==pt||"innerHTML"in t)t.innerHTML=e;else{for((gt=gt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,o){MSApp.execUnsafeLocalFunction((function(){return _t(t,e)}))}:_t);function mt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var yt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function Et(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||yt.hasOwnProperty(t)&&yt[t]?(""+e).trim():e+"px"}function Tt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var o=0===n.indexOf("--"),r=Et(n,e[n],o);"float"===n&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}Object.keys(yt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yt[e]=yt[t]}))}));var St=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(t,e){if(e){if(St[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function Ct(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ot(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Rt=null,wt=null,It=null;function At(t){if(t=rr(t)){if("function"!==typeof Rt)throw Error(s(280));var e=t.stateNode;e&&(e=sr(e),Rt(t.stateNode,t.type,e))}}function Nt(t){wt?It?It.push(t):It=[t]:wt=t}function Dt(){if(wt){var t=wt,e=It;if(It=wt=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Mt(t,e){return t(e)}function Lt(t,e,n,o,r){return t(e,n,o,r)}function xt(){}var Pt=Mt,Bt=!1,Ft=!1;function Ut(){null===wt&&null===It||(xt(),Dt())}function jt(t,e){var n=t.stateNode;if(null===n)return null;var o=sr(n);if(null===o)return null;n=o[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!o;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Ht=!1;if(h)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(_t){Ht=!1}function Vt(t,e,n,o,r,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Gt=!1,zt=null,Xt=!1,Yt=null,Kt={onError:function(t){Gt=!0,zt=t}};function Jt(t,e,n,o,r,i,s,a,l){Gt=!1,zt=null,Vt.apply(Kt,arguments)}function qt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function $t(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Zt(t){if(qt(t)!==t)throw Error(s(188))}function Qt(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=qt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(o=r.return)){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Zt(r),t;if(i===o)return Zt(r),e;i=i.sibling}throw Error(s(188))}if(n.return!==o.return)n=r,o=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,o=i;break}if(l===o){a=!0,o=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,o=r;break}if(l===o){a=!0,o=i,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==o)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,oe,re,ie=!1,se=[],ae=null,le=null,ue=null,ce=new Map,he=new Map,pe=[],de="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fe(t,e,n,o,r){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[o]}}function ge(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ue=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function _e(t,e,n,o,r,i){return null===t||t.nativeEvent!==i?(t=fe(e,n,o,r,i),null!==e&&(null!==(e=rr(e))&&ne(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ve(t){var e=or(t.target);if(null!==e){var n=qt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=$t(n)))return t.blockedOn=e,void re(t.lanePriority,(function(){i.unstable_runWithPriority(t.priority,(function(){oe(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function me(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=rr(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function ye(t,e,n){me(t)&&n.delete(e)}function be(){for(ie=!1;0<se.length;){var t=se[0];if(null!==t.blockedOn){null!==(t=rr(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&se.shift()}null!==ae&&me(ae)&&(ae=null),null!==le&&me(le)&&(le=null),null!==ue&&me(ue)&&(ue=null),ce.forEach(ye),he.forEach(ye)}function Ee(t,e){t.blockedOn===e&&(t.blockedOn=null,ie||(ie=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,be)))}function Te(t){function e(e){return Ee(e,t)}if(0<se.length){Ee(se[0],t);for(var n=1;n<se.length;n++){var o=se[n];o.blockedOn===t&&(o.blockedOn=null)}}for(null!==ae&&Ee(ae,t),null!==le&&Ee(le,t),null!==ue&&Ee(ue,t),ce.forEach(e),he.forEach(e),n=0;n<pe.length;n++)(o=pe[n]).blockedOn===t&&(o.blockedOn=null);for(;0<pe.length&&null===(n=pe[0]).blockedOn;)ve(n),null===n.blockedOn&&pe.shift()}function Se(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ke={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionend:Se("Transition","TransitionEnd")},Ce={},Oe={};function Re(t){if(Ce[t])return Ce[t];if(!ke[t])return t;var e,n=ke[t];for(e in n)if(n.hasOwnProperty(e)&&e in Oe)return Ce[t]=n[e];return t}h&&(Oe=document.createElement("div").style,"AnimationEvent"in window||(delete ke.animationend.animation,delete ke.animationiteration.animation,delete ke.animationstart.animation),"TransitionEvent"in window||delete ke.transitionend.transition);var we=Re("animationend"),Ie=Re("animationiteration"),Ae=Re("animationstart"),Ne=Re("transitionend"),De=new Map,Me=new Map,Le=["abort","abort",we,"animationEnd",Ie,"animationIteration",Ae,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ne,"transitionEnd","waiting","waiting"];function xe(t,e){for(var n=0;n<t.length;n+=2){var o=t[n],r=t[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Me.set(o,e),De.set(o,r),u(r,[o])}}(0,i.unstable_now)();var Pe=8;function Be(t){if(0!==(1&t))return Pe=15,1;if(0!==(2&t))return Pe=14,2;if(0!==(4&t))return Pe=13,4;var e=24&t;return 0!==e?(Pe=12,e):0!==(32&t)?(Pe=11,32):0!==(e=192&t)?(Pe=10,e):0!==(256&t)?(Pe=9,256):0!==(e=3584&t)?(Pe=8,e):0!==(4096&t)?(Pe=7,4096):0!==(e=4186112&t)?(Pe=6,e):0!==(e=62914560&t)?(Pe=5,e):67108864&t?(Pe=4,67108864):0!==(134217728&t)?(Pe=3,134217728):0!==(e=805306368&t)?(Pe=2,e):0!==(1073741824&t)?(Pe=1,1073741824):(Pe=8,t)}function Fe(t,e){var n=t.pendingLanes;if(0===n)return Pe=0;var o=0,r=0,i=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(0!==i)o=i,r=Pe=15;else if(0!==(i=134217727&n)){var l=i&~s;0!==l?(o=Be(l),r=Pe):0!==(a&=i)&&(o=Be(a),r=Pe)}else 0!==(i=n&~s)?(o=Be(i),r=Pe):0!==a&&(o=Be(a),r=Pe);if(0===o)return 0;if(o=n&((0>(o=31-Ge(o))?0:1<<o)<<1)-1,0!==e&&e!==o&&0===(e&s)){if(Be(e),r<=Pe)return e;Pe=r}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=o;0<e;)r=1<<(n=31-Ge(e)),o|=t[n],e&=~r;return o}function Ue(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function je(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=He(24&~e))?je(10,e):t;case 10:return 0===(t=He(192&~e))?je(8,e):t;case 8:return 0===(t=He(3584&~e))&&(0===(t=He(4186112&~e))&&(t=512)),t;case 2:return 0===(e=He(805306368&~e))&&(e=268435456),e}throw Error(s(358,t))}function He(t){return t&-t}function We(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ve(t,e,n){t.pendingLanes|=e;var o=e-1;t.suspendedLanes&=o,t.pingedLanes&=o,(t=t.eventTimes)[e=31-Ge(e)]=n}var Ge=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(ze(t)/Xe|0)|0},ze=Math.log,Xe=Math.LN2;var Ye=i.unstable_UserBlockingPriority,Ke=i.unstable_runWithPriority,Je=!0;function qe(t,e,n,o){Bt||xt();var r=Ze,i=Bt;Bt=!0;try{Lt(r,t,e,n,o)}finally{(Bt=i)||Ut()}}function $e(t,e,n,o){Ke(Ye,Ze.bind(null,t,e,n,o))}function Ze(t,e,n,o){var r;if(Je)if((r=0===(4&e))&&0<se.length&&-1<de.indexOf(t))t=fe(null,t,e,n,o),se.push(t);else{var i=Qe(t,e,n,o);if(null===i)r&&ge(t,o);else{if(r){if(-1<de.indexOf(t))return t=fe(i,t,e,n,o),void se.push(t);if(function(t,e,n,o,r){switch(e){case"focusin":return ae=_e(ae,t,e,n,o,r),!0;case"dragenter":return le=_e(le,t,e,n,o,r),!0;case"mouseover":return ue=_e(ue,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return ce.set(i,_e(ce.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,he.set(i,_e(he.get(i)||null,t,e,n,o,r)),!0}return!1}(i,t,e,n,o))return;ge(t,o)}Po(t,e,o,null,n)}}}function Qe(t,e,n,o){var r=Ot(o);if(null!==(r=or(r))){var i=qt(r);if(null===i)r=null;else{var s=i.tag;if(13===s){if(null!==(r=$t(i)))return r;r=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Po(t,e,o,r,n),null}var tn=null,en=null,nn=null;function on(){if(nn)return nn;var t,e,n=en,o=n.length,r="value"in tn?tn.value:tn.textContent,i=r.length;for(t=0;t<o&&n[t]===r[t];t++);var s=o-t;for(e=1;e<=s&&n[o-e]===r[i-e];e++);return nn=r.slice(t,1<e?1-e:void 0)}function rn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function sn(){return!0}function an(){return!1}function ln(t){function e(e,n,o,r,i){for(var s in this._reactName=e,this._targetInst=o,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?sn:an,this.isPropagationStopped=an,this}return r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),e}var un,cn,hn,pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=ln(pn),fn=r({},pn,{view:0,detail:0}),gn=ln(fn),_n=r({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(un=t.screenX-hn.screenX,cn=t.screenY-hn.screenY):cn=un=0,hn=t),un)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),vn=ln(_n),mn=ln(r({},_n,{dataTransfer:0})),yn=ln(r({},fn,{relatedTarget:0})),bn=ln(r({},pn,{animationName:0,elapsedTime:0,pseudoElement:0})),En=r({},pn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tn=ln(En),Sn=ln(r({},pn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=On[t])&&!!e[t]}function wn(){return Rn}var In=r({},fn,{key:function(t){if(t.key){var e=kn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=rn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Cn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(t){return"keypress"===t.type?rn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?rn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),An=ln(In),Nn=ln(r({},_n,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=ln(r({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Mn=ln(r({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=r({},_n,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xn=ln(Ln),Pn=[9,13,27,32],Bn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,jn=h&&(!Bn||Fn&&8<Fn&&11>=Fn),Hn=String.fromCharCode(32),Wn=!1;function Vn(t,e){switch(t){case"keyup":return-1!==Pn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var zn=!1;var Xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Xn[t.type]:"textarea"===e}function Kn(t,e,n,o){Nt(o),0<(e=Fo(e,"onChange")).length&&(n=new dn("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var Jn=null,qn=null;function $n(t){Ao(t,0)}function Zn(t){if($(ir(t)))return t}function Qn(t,e){if("change"===t)return e}var to=!1;if(h){var eo;if(h){var no="oninput"in document;if(!no){var oo=document.createElement("div");oo.setAttribute("oninput","return;"),no="function"===typeof oo.oninput}eo=no}else eo=!1;to=eo&&(!document.documentMode||9<document.documentMode)}function ro(){Jn&&(Jn.detachEvent("onpropertychange",io),qn=Jn=null)}function io(t){if("value"===t.propertyName&&Zn(qn)){var e=[];if(Kn(e,qn,t,Ot(t)),t=$n,Bt)t(e);else{Bt=!0;try{Mt(t,e)}finally{Bt=!1,Ut()}}}}function so(t,e,n){"focusin"===t?(ro(),qn=n,(Jn=e).attachEvent("onpropertychange",io)):"focusout"===t&&ro()}function ao(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Zn(qn)}function lo(t,e){if("click"===t)return Zn(e)}function uo(t,e){if("input"===t||"change"===t)return Zn(e)}var co="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ho=Object.prototype.hasOwnProperty;function po(t,e){if(co(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++)if(!ho.call(e,n[o])||!co(t[n[o]],e[n[o]]))return!1;return!0}function fo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function go(t,e){var n,o=fo(t);for(t=0;o;){if(3===o.nodeType){if(n=t+o.textContent.length,t<=e&&n>=e)return{node:o,offset:e-t};t=n}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=fo(o)}}function _o(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?_o(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function vo(){for(var t=window,e=Z();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(o){n=!1}if(!n)break;e=Z((t=e.contentWindow).document)}return e}function mo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yo=h&&"documentMode"in document&&11>=document.documentMode,bo=null,Eo=null,To=null,So=!1;function ko(t,e,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;So||null==bo||bo!==Z(o)||("selectionStart"in(o=bo)&&mo(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},To&&po(To,o)||(To=o,0<(o=Fo(Eo,"onSelect")).length&&(e=new dn("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=bo)))}xe("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),xe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),xe(Le,2);for(var Co="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Oo=0;Oo<Co.length;Oo++)Me.set(Co[Oo],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function Io(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,o,r,i,a,l,u){if(Jt.apply(this,arguments),Gt){if(!Gt)throw Error(s(198));var c=zt;Gt=!1,zt=null,Xt||(Xt=!0,Yt=c)}}(o,e,void 0,t),t.currentTarget=null}function Ao(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;t:{var i=void 0;if(e)for(var s=o.length-1;0<=s;s--){var a=o[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break t;Io(r,a,u),i=l}else for(s=0;s<o.length;s++){if(l=(a=o[s]).instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break t;Io(r,a,u),i=l}}}if(Xt)throw t=Yt,Xt=!1,Yt=null,t}function No(t,e){var n=ar(e),o=t+"__bubble";n.has(o)||(xo(e,t,2,!1),n.add(o))}var Do="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){t[Do]||(t[Do]=!0,a.forEach((function(e){wo.has(e)||Lo(e,!1,t,null),Lo(e,!0,t,null)})))}function Lo(t,e,n,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===t&&9!==n.nodeType&&(i=n.ownerDocument),null!==o&&!e&&wo.has(t)){if("scroll"!==t)return;r|=2,i=o}var s=ar(i),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(r|=4),xo(i,t,r,e),s.add(a))}function xo(t,e,n,o){var r=Me.get(e);switch(void 0===r?2:r){case 0:r=qe;break;case 1:r=$e;break;default:r=Ze}n=r.bind(null,e,n,t),r=void 0,!Ht||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),o?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Po(t,e,n,o,r){var i=o;if(0===(1&e)&&0===(2&e)&&null!==o)t:for(;;){if(null===o)return;var s=o.tag;if(3===s||4===s){var a=o.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=o.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=or(a)))return;if(5===(l=s.tag)||6===l){o=i=s;continue t}a=a.parentNode}}o=o.return}!function(t,e,n){if(Ft)return t(e,n);Ft=!0;try{Pt(t,e,n)}finally{Ft=!1,Ut()}}((function(){var o=i,r=Ot(n),s=[];t:{var a=De.get(t);if(void 0!==a){var l=dn,u=t;switch(t){case"keypress":if(0===rn(n))break t;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case we:case Ie:case Ae:l=bn;break;case Ne:l=Mn;break;case"scroll":l=gn;break;case"wheel":l=xn;break;case"copy":case"cut":case"paste":l=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var c=0!==(4&e),h=!c&&"scroll"===t,p=c?null!==a?a+"Capture":null:a;c=[];for(var d,f=o;null!==f;){var g=(d=f).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==p&&(null!=(g=jt(f,p))&&c.push(Bo(f,g,d)))),h)break;f=f.return}0<c.length&&(a=new l(a,u,null,n,r),s.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(u=n.relatedTarget||n.fromElement)||!or(u)&&!u[er])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=o,null!==(u=(u=n.relatedTarget||n.toElement)?or(u):null)&&(u!==(h=qt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=o),l!==u)){if(c=vn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Nn,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?a:ir(l),d=null==u?a:ir(u),(a=new c(g,f+"leave",l,n,r)).target=h,a.relatedTarget=d,g=null,or(r)===o&&((c=new c(p,f+"enter",u,n,r)).target=d,c.relatedTarget=h,g=c),h=g,l&&u)t:{for(p=u,f=0,d=c=l;d;d=Uo(d))f++;for(d=0,g=p;g;g=Uo(g))d++;for(;0<f-d;)c=Uo(c),f--;for(;0<d-f;)p=Uo(p),d--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break t;c=Uo(c),p=Uo(p)}c=null}else c=null;null!==l&&jo(s,a,l,c,!1),null!==u&&null!==h&&jo(s,h,u,c,!0)}if("select"===(l=(a=o?ir(o):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var _=Qn;else if(Yn(a))if(to)_=uo;else{_=ao;var v=so}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(_=lo);switch(_&&(_=_(t,o))?Kn(s,_,n,r):(v&&v(t,a,o),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&rt(a,"number",a.value)),v=o?ir(o):window,t){case"focusin":(Yn(v)||"true"===v.contentEditable)&&(bo=v,Eo=o,To=null);break;case"focusout":To=Eo=bo=null;break;case"mousedown":So=!0;break;case"contextmenu":case"mouseup":case"dragend":So=!1,ko(s,n,r);break;case"selectionchange":if(yo)break;case"keydown":case"keyup":ko(s,n,r)}var m;if(Bn)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else zn?Vn(t,n)&&(y="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(m=on()):(en="value"in(tn=r)?tn.value:tn.textContent,zn=!0)),0<(v=Fo(o,y)).length&&(y=new Sn(y,t,null,n,r),s.push({event:y,listeners:v}),m?y.data=m:null!==(m=Gn(n))&&(y.data=m))),(m=Un?function(t,e){switch(t){case"compositionend":return Gn(e);case"keypress":return 32!==e.which?null:(Wn=!0,Hn);case"textInput":return(t=e.data)===Hn&&Wn?null:t;default:return null}}(t,n):function(t,e){if(zn)return"compositionend"===t||!Bn&&Vn(t,e)?(t=on(),nn=en=tn=null,zn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(o=Fo(o,"onBeforeInput")).length&&(r=new Sn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:o}),r.data=m))}Ao(s,e)}))}function Bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fo(t,e){for(var n=e+"Capture",o=[];null!==t;){var r=t,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=jt(t,n))&&o.unshift(Bo(t,i,r)),null!=(i=jt(t,e))&&o.push(Bo(t,i,r))),t=t.return}return o}function Uo(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function jo(t,e,n,o,r){for(var i=e._reactName,s=[];null!==n&&n!==o;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===o)break;5===a.tag&&null!==u&&(a=u,r?null!=(l=jt(n,i))&&s.unshift(Bo(n,l,a)):r||null!=(l=jt(n,i))&&s.push(Bo(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}function Ho(){}var Wo=null,Vo=null;function Go(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function zo(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Xo="function"===typeof setTimeout?setTimeout:void 0,Yo="function"===typeof clearTimeout?clearTimeout:void 0;function Ko(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Jo(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function qo(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var $o=0;var Zo=Math.random().toString(36).slice(2),Qo="__reactFiber$"+Zo,tr="__reactProps$"+Zo,er="__reactContainer$"+Zo,nr="__reactEvents$"+Zo;function or(t){var e=t[Qo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Qo]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=qo(t);null!==t;){if(n=t[Qo])return n;t=qo(t)}return e}n=(t=n).parentNode}return null}function rr(t){return!(t=t[Qo]||t[er])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ir(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function sr(t){return t[tr]||null}function ar(t){var e=t[nr];return void 0===e&&(e=t[nr]=new Set),e}var lr=[],ur=-1;function cr(t){return{current:t}}function hr(t){0>ur||(t.current=lr[ur],lr[ur]=null,ur--)}function pr(t,e){ur++,lr[ur]=t.current,t.current=e}var dr={},fr=cr(dr),gr=cr(!1),_r=dr;function vr(t,e){var n=t.type.contextTypes;if(!n)return dr;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=e[r];return o&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function yr(){hr(gr),hr(fr)}function br(t,e,n){if(fr.current!==dr)throw Error(s(168));pr(fr,e),pr(gr,n)}function Er(t,e,n){var o=t.stateNode;if(t=e.childContextTypes,"function"!==typeof o.getChildContext)return n;for(var i in o=o.getChildContext())if(!(i in t))throw Error(s(108,Y(e)||"Unknown",i));return r({},n,o)}function Tr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,_r=fr.current,pr(fr,t),pr(gr,gr.current),!0}function Sr(t,e,n){var o=t.stateNode;if(!o)throw Error(s(169));n?(t=Er(t,e,_r),o.__reactInternalMemoizedMergedChildContext=t,hr(gr),hr(fr),pr(fr,t)):hr(gr),pr(gr,n)}var kr=null,Cr=null,Or=i.unstable_runWithPriority,Rr=i.unstable_scheduleCallback,wr=i.unstable_cancelCallback,Ir=i.unstable_shouldYield,Ar=i.unstable_requestPaint,Nr=i.unstable_now,Dr=i.unstable_getCurrentPriorityLevel,Mr=i.unstable_ImmediatePriority,Lr=i.unstable_UserBlockingPriority,xr=i.unstable_NormalPriority,Pr=i.unstable_LowPriority,Br=i.unstable_IdlePriority,Fr={},Ur=void 0!==Ar?Ar:function(){},jr=null,Hr=null,Wr=!1,Vr=Nr(),Gr=1e4>Vr?Nr:function(){return Nr()-Vr};function zr(){switch(Dr()){case Mr:return 99;case Lr:return 98;case xr:return 97;case Pr:return 96;case Br:return 95;default:throw Error(s(332))}}function Xr(t){switch(t){case 99:return Mr;case 98:return Lr;case 97:return xr;case 96:return Pr;case 95:return Br;default:throw Error(s(332))}}function Yr(t,e){return t=Xr(t),Or(t,e)}function Kr(t,e,n){return t=Xr(t),Rr(t,e,n)}function Jr(){if(null!==Hr){var t=Hr;Hr=null,wr(t)}qr()}function qr(){if(!Wr&&null!==jr){Wr=!0;var t=0;try{var e=jr;Yr(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),jr=null}catch(n){throw null!==jr&&(jr=jr.slice(t+1)),Rr(Mr,Jr),n}finally{Wr=!1}}}var $r=E.ReactCurrentBatchConfig;function Zr(t,e){if(t&&t.defaultProps){for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Qr=cr(null),ti=null,ei=null,ni=null;function oi(){ni=ei=ti=null}function ri(t){var e=Qr.current;hr(Qr),t.type._context._currentValue=e}function ii(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function si(t,e){ti=t,ni=ei=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Bs=!0),t.firstContext=null)}function ai(t,e){if(ni!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(ni=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ei){if(null===ti)throw Error(s(308));ei=e,ti.dependencies={lanes:0,firstContext:e,responders:null}}else ei=ei.next=e;return t._currentValue}var li=!1;function ui(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ci(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pi(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function di(t,e){var n=t.updateQueue,o=t.alternate;if(null!==o&&n===(o=o.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?r=i=e:i=i.next=e}else r=i=e;return n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fi(t,e,n,o){var i=t.updateQueue;li=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?s=c:a.next=c,a=u;var h=t.alternate;if(null!==h){var p=(h=h.updateQueue).lastBaseUpdate;p!==a&&(null===p?h.firstBaseUpdate=c:p.next=c,h.lastBaseUpdate=u)}}if(null!==s){for(p=i.baseState,a=0,h=c=u=null;;){l=s.lane;var d=s.eventTime;if((o&l)===l){null!==h&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,g=s;switch(l=e,d=n,g.tag){case 1:if("function"===typeof(f=g.payload)){p=f.call(d,p,l);break t}p=f;break t;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=g.payload)?f.call(d,p,l):f)||void 0===l)break t;p=r({},p,l);break t;case 2:li=!0}}null!==s.callback&&(t.flags|=32,null===(l=i.effects)?i.effects=[s]:l.push(s))}else d={eventTime:d,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(c=h=d,u=p):h=h.next=d,a|=l;if(null===(s=s.next)){if(null===(l=i.shared.pending))break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===h&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,Ha|=a,t.lanes=a,t.memoizedState=p}}function gi(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(null!==r){if(o.callback=null,o=n,"function"!==typeof r)throw Error(s(191,r));r.call(o)}}}var _i=(new o.Component).refs;function vi(t,e,n,o){n=null===(n=n(o,e=t.memoizedState))||void 0===n?e:r({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var mi={isMounted:function(t){return!!(t=t._reactInternals)&&qt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=pl(),r=dl(t),i=hi(o,r);i.payload=e,void 0!==n&&null!==n&&(i.callback=n),pi(t,i),fl(t,r,o)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=pl(),r=dl(t),i=hi(o,r);i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),pi(t,i),fl(t,r,o)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pl(),o=dl(t),r=hi(n,o);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),pi(t,r),fl(t,o,n)}};function yi(t,e,n,o,r,i,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(o,i,s):!e.prototype||!e.prototype.isPureReactComponent||(!po(n,o)||!po(r,i))}function bi(t,e,n){var o=!1,r=dr,i=e.contextType;return"object"===typeof i&&null!==i?i=ai(i):(r=mr(e)?_r:fr.current,i=(o=null!==(o=e.contextTypes)&&void 0!==o)?vr(t,r):dr),e=new e(n,i),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=mi,t.stateNode=e,e._reactInternals=t,o&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ei(t,e,n,o){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,o),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&mi.enqueueReplaceState(e,e.state,null)}function Ti(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=_i,ui(t);var i=e.contextType;"object"===typeof i&&null!==i?r.context=ai(i):(i=mr(e)?_r:fr.current,r.context=vr(t,i)),fi(t,n,r,o),r.state=t.memoizedState,"function"===typeof(i=e.getDerivedStateFromProps)&&(vi(t,e,i,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&mi.enqueueReplaceState(r,r.state,null),fi(t,n,r,o),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4)}var Si=Array.isArray;function ki(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var o=n.stateNode}if(!o)throw Error(s(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:(e=function(t){var e=o.refs;e===_i&&(e=o.refs={}),null===t?delete e[r]:e[r]=t},e._stringRef=r,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Ci(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Oi(t){function e(e,n){if(t){var o=e.lastEffect;null!==o?(o.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,o){if(!t)return null;for(;null!==o;)e(n,o),o=o.sibling;return null}function o(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Xl(t,e)).index=0,t.sibling=null,t}function i(e,n,o){return e.index=o,t?null!==(o=e.alternate)?(o=o.index)<n?(e.flags=2,n):o:(e.flags=2,n):n}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,n,o){return null===e||6!==e.tag?((e=ql(n,t.mode,o)).return=t,e):((e=r(e,n)).return=t,e)}function u(t,e,n,o){return null!==e&&e.elementType===n.type?((o=r(e,n.props)).ref=ki(t,e,n),o.return=t,o):((o=Yl(n.type,n.key,n.props,null,t.mode,o)).ref=ki(t,e,n),o.return=t,o)}function c(t,e,n,o){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=$l(n,t.mode,o)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,o,i){return null===e||7!==e.tag?((e=Kl(n,t.mode,o,i)).return=t,e):((e=r(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=ql(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case T:return(n=Yl(e.type,e.key,e.props,null,t.mode,n)).ref=ki(t,null,e),n.return=t,n;case S:return(e=$l(e,t.mode,n)).return=t,e}if(Si(e)||W(e))return(e=Kl(e,t.mode,n,null)).return=t,e;Ci(t,e)}return null}function d(t,e,n,o){var r=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(t,e,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===r?n.type===k?h(t,e,n.props.children,o,r):u(t,e,n,o):null;case S:return n.key===r?c(t,e,n,o):null}if(Si(n)||W(n))return null!==r?null:h(t,e,n,o,null);Ci(t,n)}return null}function f(t,e,n,o,r){if("string"===typeof o||"number"===typeof o)return l(e,t=t.get(n)||null,""+o,r);if("object"===typeof o&&null!==o){switch(o.$$typeof){case T:return t=t.get(null===o.key?n:o.key)||null,o.type===k?h(e,t,o.props.children,r,o.key):u(e,t,o,r);case S:return c(e,t=t.get(null===o.key?n:o.key)||null,o,r)}if(Si(o)||W(o))return h(e,t=t.get(n)||null,o,r,null);Ci(e,o)}return null}function g(r,s,a,l){for(var u=null,c=null,h=s,g=s=0,_=null;null!==h&&g<a.length;g++){h.index>g?(_=h,h=null):_=h.sibling;var v=d(r,h,a[g],l);if(null===v){null===h&&(h=_);break}t&&h&&null===v.alternate&&e(r,h),s=i(v,s,g),null===c?u=v:c.sibling=v,c=v,h=_}if(g===a.length)return n(r,h),u;if(null===h){for(;g<a.length;g++)null!==(h=p(r,a[g],l))&&(s=i(h,s,g),null===c?u=h:c.sibling=h,c=h);return u}for(h=o(r,h);g<a.length;g++)null!==(_=f(h,r,g,a[g],l))&&(t&&null!==_.alternate&&h.delete(null===_.key?g:_.key),s=i(_,s,g),null===c?u=_:c.sibling=_,c=_);return t&&h.forEach((function(t){return e(r,t)})),u}function _(r,a,l,u){var c=W(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,_=a=0,v=null,m=l.next();null!==g&&!m.done;_++,m=l.next()){g.index>_?(v=g,g=null):v=g.sibling;var y=d(r,g,m.value,u);if(null===y){null===g&&(g=v);break}t&&g&&null===y.alternate&&e(r,g),a=i(y,a,_),null===h?c=y:h.sibling=y,h=y,g=v}if(m.done)return n(r,g),c;if(null===g){for(;!m.done;_++,m=l.next())null!==(m=p(r,m.value,u))&&(a=i(m,a,_),null===h?c=m:h.sibling=m,h=m);return c}for(g=o(r,g);!m.done;_++,m=l.next())null!==(m=f(g,r,_,m.value,u))&&(t&&null!==m.alternate&&g.delete(null===m.key?_:m.key),a=i(m,a,_),null===h?c=m:h.sibling=m,h=m);return t&&g.forEach((function(t){return e(r,t)})),c}return function(t,o,i,l){var u="object"===typeof i&&null!==i&&i.type===k&&null===i.key;u&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case T:t:{for(c=i.key,u=o;null!==u;){if(u.key===c){if(7===u.tag){if(i.type===k){n(t,u.sibling),(o=r(u,i.props.children)).return=t,t=o;break t}}else if(u.elementType===i.type){n(t,u.sibling),(o=r(u,i.props)).ref=ki(t,u,i),o.return=t,t=o;break t}n(t,u);break}e(t,u),u=u.sibling}i.type===k?((o=Kl(i.props.children,t.mode,l,i.key)).return=t,t=o):((l=Yl(i.type,i.key,i.props,null,t.mode,l)).ref=ki(t,o,i),l.return=t,t=l)}return a(t);case S:t:{for(u=i.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(t,o.sibling),(o=r(o,i.children||[])).return=t,t=o;break t}n(t,o);break}e(t,o),o=o.sibling}(o=$l(i,t.mode,l)).return=t,t=o}return a(t)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==o&&6===o.tag?(n(t,o.sibling),(o=r(o,i)).return=t,t=o):(n(t,o),(o=ql(i,t.mode,l)).return=t,t=o),a(t);if(Si(i))return g(t,o,i,l);if(W(i))return _(t,o,i,l);if(c&&Ci(t,i),"undefined"===typeof i&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,Y(t.type)||"Component"))}return n(t,o)}}var Ri=Oi(!0),wi=Oi(!1),Ii={},Ai=cr(Ii),Ni=cr(Ii),Di=cr(Ii);function Mi(t){if(t===Ii)throw Error(s(174));return t}function Li(t,e){switch(pr(Di,e),pr(Ni,t),pr(Ai,Ii),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ft(null,"");break;default:e=ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}hr(Ai),pr(Ai,e)}function xi(){hr(Ai),hr(Ni),hr(Di)}function Pi(t){Mi(Di.current);var e=Mi(Ai.current),n=ft(e,t.type);e!==n&&(pr(Ni,t),pr(Ai,n))}function Bi(t){Ni.current===t&&(hr(Ai),hr(Ni))}var Fi=cr(0);function Ui(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ji=null,Hi=null,Wi=!1;function Vi(t,e){var n=Gl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Gi(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function zi(t){if(Wi){var e=Hi;if(e){var n=e;if(!Gi(t,e)){if(!(e=Jo(n.nextSibling))||!Gi(t,e))return t.flags=-1025&t.flags|2,Wi=!1,void(ji=t);Vi(ji,n)}ji=t,Hi=Jo(e.firstChild)}else t.flags=-1025&t.flags|2,Wi=!1,ji=t}}function Xi(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ji=t}function Yi(t){if(t!==ji)return!1;if(!Wi)return Xi(t),Wi=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!zo(e,t.memoizedProps))for(e=Hi;e;)Vi(t,e),e=Jo(e.nextSibling);if(Xi(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Hi=Jo(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Hi=null}}else Hi=ji?Jo(t.stateNode.nextSibling):null;return!0}function Ki(){Hi=ji=null,Wi=!1}var Ji=[];function qi(){for(var t=0;t<Ji.length;t++)Ji[t]._workInProgressVersionPrimary=null;Ji.length=0}var $i=E.ReactCurrentDispatcher,Zi=E.ReactCurrentBatchConfig,Qi=0,ts=null,es=null,ns=null,os=!1,rs=!1;function is(){throw Error(s(321))}function ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!co(t[n],e[n]))return!1;return!0}function as(t,e,n,o,r,i){if(Qi=i,ts=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$i.current=null===t||null===t.memoizedState?Ms:Ls,t=n(o,r),rs){i=0;do{if(rs=!1,!(25>i))throw Error(s(301));i+=1,ns=es=null,e.updateQueue=null,$i.current=xs,t=n(o,r)}while(rs)}if($i.current=Ds,e=null!==es&&null!==es.next,Qi=0,ns=es=ts=null,os=!1,e)throw Error(s(300));return t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ns?ts.memoizedState=ns=t:ns=ns.next=t,ns}function us(){if(null===es){var t=ts.alternate;t=null!==t?t.memoizedState:null}else t=es.next;var e=null===ns?ts.memoizedState:ns.next;if(null!==e)ns=e,es=t;else{if(null===t)throw Error(s(310));t={memoizedState:(es=t).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===ns?ts.memoizedState=ns=t:ns=ns.next=t}return ns}function cs(t,e){return"function"===typeof e?e(t):e}function hs(t){var e=us(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var o=es,r=o.baseQueue,i=n.pending;if(null!==i){if(null!==r){var a=r.next;r.next=i.next,i.next=a}o.baseQueue=r=i,n.pending=null}if(null!==r){r=r.next,o=o.baseState;var l=a=i=null,u=r;do{var c=u.lane;if((Qi&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),o=u.eagerReducer===t?u.eagerState:t(o,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,i=o):l=l.next=h,ts.lanes|=c,Ha|=c}u=u.next}while(null!==u&&u!==r);null===l?i=o:l.next=a,co(o,e.memoizedState)||(Bs=!0),e.memoizedState=o,e.baseState=i,e.baseQueue=l,n.lastRenderedState=o}return[e.memoizedState,n.dispatch]}function ps(t){var e=us(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{i=t(i,a.action),a=a.next}while(a!==r);co(i,e.memoizedState)||(Bs=!0),e.memoizedState=i,null===e.baseQueue&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function ds(t,e,n){var o=e._getVersion;o=o(e._source);var r=e._workInProgressVersionPrimary;if(null!==r?t=r===o:(t=t.mutableReadLanes,(t=(Qi&t)===t)&&(e._workInProgressVersionPrimary=o,Ji.push(e))),t)return n(e._source);throw Ji.push(e),Error(s(350))}function fs(t,e,n,o){var r=Ma;if(null===r)throw Error(s(349));var i=e._getVersion,a=i(e._source),l=$i.current,u=l.useState((function(){return ds(r,e,n)})),c=u[1],h=u[0];u=ns;var p=t.memoizedState,d=p.refs,f=d.getSnapshot,g=p.source;p=p.subscribe;var _=ts;return t.memoizedState={refs:d,source:e,subscribe:o},l.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var t=i(e._source);if(!co(a,t)){t=n(e._source),co(h,t)||(c(t),t=dl(_),r.mutableReadLanes|=t&r.pendingLanes),t=r.mutableReadLanes,r.entangledLanes|=t;for(var o=r.entanglements,s=t;0<s;){var l=31-Ge(s),u=1<<l;o[l]|=t,s&=~u}}}),[n,e,o]),l.useEffect((function(){return o(e._source,(function(){var t=d.getSnapshot,n=d.setSnapshot;try{n(t(e._source));var o=dl(_);r.mutableReadLanes|=o&r.pendingLanes}catch(i){n((function(){throw i}))}}))}),[e,o]),co(f,n)&&co(g,e)&&co(p,o)||((t={pending:null,dispatch:null,lastRenderedReducer:cs,lastRenderedState:h}).dispatch=c=Ns.bind(null,ts,t),u.queue=t,u.baseQueue=null,h=ds(r,e,n),u.memoizedState=u.baseState=h),h}function gs(t,e,n){return fs(us(),t,e,n)}function _s(t){var e=ls();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t}).dispatch=Ns.bind(null,ts,t),[e.memoizedState,t]}function vs(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},null===(e=ts.updateQueue)?(e={lastEffect:null},ts.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t),t}function ms(t){return t={current:t},ls().memoizedState=t}function ys(){return us().memoizedState}function bs(t,e,n,o){var r=ls();ts.flags|=t,r.memoizedState=vs(1|e,n,void 0,void 0===o?null:o)}function Es(t,e,n,o){var r=us();o=void 0===o?null:o;var i=void 0;if(null!==es){var s=es.memoizedState;if(i=s.destroy,null!==o&&ss(o,s.deps))return void vs(e,n,i,o)}ts.flags|=t,r.memoizedState=vs(1|e,n,i,o)}function Ts(t,e){return bs(516,4,t,e)}function Ss(t,e){return Es(516,4,t,e)}function ks(t,e){return Es(4,2,t,e)}function Cs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Os(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Es(4,2,Cs.bind(null,e,t),n)}function Rs(){}function ws(t,e){var n=us();e=void 0===e?null:e;var o=n.memoizedState;return null!==o&&null!==e&&ss(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function Is(t,e){var n=us();e=void 0===e?null:e;var o=n.memoizedState;return null!==o&&null!==e&&ss(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function As(t,e){var n=zr();Yr(98>n?98:n,(function(){t(!0)})),Yr(97<n?97:n,(function(){var n=Zi.transition;Zi.transition=1;try{t(!1),e()}finally{Zi.transition=n}}))}function Ns(t,e,n){var o=pl(),r=dl(t),i={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),e.pending=i,s=t.alternate,t===ts||null!==s&&s===ts)rs=os=!0;else{if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=s(a,n);if(i.eagerReducer=s,i.eagerState=l,co(l,a))return}catch(u){}fl(t,r,o)}}var Ds={readContext:ai,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useOpaqueIdentifier:is,unstable_isNewReconciler:!1},Ms={readContext:ai,useCallback:function(t,e){return ls().memoizedState=[t,void 0===e?null:e],t},useContext:ai,useEffect:Ts,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,bs(4,2,Cs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bs(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=ls();return e=void 0!==n?n(e):e,o.memoizedState=o.baseState=e,t=(t=o.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ns.bind(null,ts,t),[o.memoizedState,t]},useRef:ms,useState:_s,useDebugValue:Rs,useDeferredValue:function(t){var e=_s(t),n=e[0],o=e[1];return Ts((function(){var e=Zi.transition;Zi.transition=1;try{o(t)}finally{Zi.transition=e}}),[t]),n},useTransition:function(){var t=_s(!1),e=t[0];return ms(t=As.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var o=ls();return o.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},fs(o,t,e,n)},useOpaqueIdentifier:function(){if(Wi){var t=!1,e=function(t){return{$$typeof:x,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+($o++).toString(36))),Error(s(355))})),n=_s(e)[1];return 0===(2&ts.mode)&&(ts.flags|=516,vs(5,(function(){n("r:"+($o++).toString(36))}),void 0,null)),e}return _s(e="r:"+($o++).toString(36)),e},unstable_isNewReconciler:!1},Ls={readContext:ai,useCallback:ws,useContext:ai,useEffect:Ss,useImperativeHandle:Os,useLayoutEffect:ks,useMemo:Is,useReducer:hs,useRef:ys,useState:function(){return hs(cs)},useDebugValue:Rs,useDeferredValue:function(t){var e=hs(cs),n=e[0],o=e[1];return Ss((function(){var e=Zi.transition;Zi.transition=1;try{o(t)}finally{Zi.transition=e}}),[t]),n},useTransition:function(){var t=hs(cs)[0];return[ys().current,t]},useMutableSource:gs,useOpaqueIdentifier:function(){return hs(cs)[0]},unstable_isNewReconciler:!1},xs={readContext:ai,useCallback:ws,useContext:ai,useEffect:Ss,useImperativeHandle:Os,useLayoutEffect:ks,useMemo:Is,useReducer:ps,useRef:ys,useState:function(){return ps(cs)},useDebugValue:Rs,useDeferredValue:function(t){var e=ps(cs),n=e[0],o=e[1];return Ss((function(){var e=Zi.transition;Zi.transition=1;try{o(t)}finally{Zi.transition=e}}),[t]),n},useTransition:function(){var t=ps(cs)[0];return[ys().current,t]},useMutableSource:gs,useOpaqueIdentifier:function(){return ps(cs)[0]},unstable_isNewReconciler:!1},Ps=E.ReactCurrentOwner,Bs=!1;function Fs(t,e,n,o){e.child=null===t?wi(e,null,n,o):Ri(e,t.child,n,o)}function Us(t,e,n,o,r){n=n.render;var i=e.ref;return si(e,r),o=as(t,e,n,o,i,r),null===t||Bs?(e.flags|=1,Fs(t,e,o,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,ia(t,e,r))}function js(t,e,n,o,r,i){if(null===t){var s=n.type;return"function"!==typeof s||zl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Yl(n.type,null,o,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Hs(t,e,s,o,r,i))}return s=t.child,0===(r&i)&&(r=s.memoizedProps,(n=null!==(n=n.compare)?n:po)(r,o)&&t.ref===e.ref)?ia(t,e,i):(e.flags|=1,(t=Xl(s,o)).ref=e.ref,t.return=e,e.child=t)}function Hs(t,e,n,o,r,i){if(null!==t&&po(t.memoizedProps,o)&&t.ref===e.ref){if(Bs=!1,0===(i&r))return e.lanes=t.lanes,ia(t,e,i);0!==(16384&t.flags)&&(Bs=!0)}return Gs(t,e,n,o,i)}function Ws(t,e,n){var o=e.pendingProps,r=o.children,i=null!==t?t.memoizedState:null;if("hidden"===o.mode||"unstable-defer-without-hiding"===o.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},Tl(e,n);else{if(0===(1073741824&n))return t=null!==i?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Tl(e,t),null;e.memoizedState={baseLanes:0},Tl(e,null!==i?i.baseLanes:n)}else null!==i?(o=i.baseLanes|n,e.memoizedState=null):o=n,Tl(e,o);return Fs(t,e,r,n),e.child}function Vs(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Gs(t,e,n,o,r){var i=mr(n)?_r:fr.current;return i=vr(e,i),si(e,r),n=as(t,e,n,o,i,r),null===t||Bs?(e.flags|=1,Fs(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,ia(t,e,r))}function zs(t,e,n,o,r){if(mr(n)){var i=!0;Tr(e)}else i=!1;if(si(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),bi(e,n,o),Ti(e,n,o,r),o=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ai(u):u=vr(e,u=mr(n)?_r:fr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==o||l!==u)&&Ei(e,s,o,u),li=!1;var p=e.memoizedState;s.state=p,fi(e,o,s,r),l=e.memoizedState,a!==o||p!==l||gr.current||li?("function"===typeof c&&(vi(e,n,c,o),l=e.memoizedState),(a=li||yi(e,n,a,o,p,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4)):("function"===typeof s.componentDidMount&&(e.flags|=4),e.memoizedProps=o,e.memoizedState=l),s.props=o,s.state=l,s.context=u,o=a):("function"===typeof s.componentDidMount&&(e.flags|=4),o=!1)}else{s=e.stateNode,ci(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Zr(e.type,a),s.props=u,h=e.pendingProps,p=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=ai(l):l=vr(e,l=mr(n)?_r:fr.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||p!==l)&&Ei(e,s,o,l),li=!1,p=e.memoizedState,s.state=p,fi(e,o,s,r);var f=e.memoizedState;a!==h||p!==f||gr.current||li?("function"===typeof d&&(vi(e,n,d,o),f=e.memoizedState),(u=li||yi(e,n,u,o,p,f,l))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(o,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(o,f,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=256),e.memoizedProps=o,e.memoizedState=f),s.props=o,s.state=f,s.context=l,o=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=256),o=!1)}return Xs(t,e,n,o,i,r)}function Xs(t,e,n,o,r,i){Vs(t,e);var s=0!==(64&e.flags);if(!o&&!s)return r&&Sr(e,n,!1),ia(t,e,i);o=e.stateNode,Ps.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:o.render();return e.flags|=1,null!==t&&s?(e.child=Ri(e,t.child,null,i),e.child=Ri(e,null,a,i)):Fs(t,e,a,i),e.memoizedState=o.state,r&&Sr(e,n,!0),e.child}function Ys(t){var e=t.stateNode;e.pendingContext?br(0,e.pendingContext,e.pendingContext!==e.context):e.context&&br(0,e.context,!1),Li(t,e.containerInfo)}var Ks,Js,qs,$s={dehydrated:null,retryLane:0};function Zs(t,e,n){var o,r=e.pendingProps,i=Fi.current,s=!1;return(o=0!==(64&e.flags))||(o=(null===t||null!==t.memoizedState)&&0!==(2&i)),o?(s=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(i|=1),pr(Fi,1&i),null===t?(void 0!==r.fallback&&zi(e),t=r.children,i=r.fallback,s?(t=Qs(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=$s,t):"number"===typeof r.unstable_expectedLoadTime?(t=Qs(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=$s,e.lanes=33554432,t):((n=Jl({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,s?(r=ea(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=$s,r):(n=ta(t,e,r.children,n),e.memoizedState=null,n))}function Qs(t,e,n,o){var r=t.mode,i=t.child;return e={mode:"hidden",children:e},0===(2&r)&&null!==i?(i.childLanes=0,i.pendingProps=e):i=Jl(e,r,0,null),n=Kl(n,r,o,null),i.return=t,n.return=t,i.sibling=n,t.child=i,n}function ta(t,e,n,o){var r=t.child;return t=r.sibling,n=Xl(r,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=o),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function ea(t,e,n,o,r){var i=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:n};return 0===(2&i)&&e.child!==s?((n=e.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Xl(s,a),null!==t?o=Xl(t,o):(o=Kl(o,i,r,null)).flags|=2,o.return=e,n.return=e,n.sibling=o,e.child=n,o}function na(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),ii(t.return,e)}function oa(t,e,n,o,r,i){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r,lastEffect:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=n,s.tailMode=r,s.lastEffect=i)}function ra(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(Fs(t,e,o.children,n),0!==(2&(o=Fi.current)))o=1&o|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&na(t,n);else if(19===t.tag)na(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(pr(Fi,o),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===Ui(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),oa(e,!1,r,n,i,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===Ui(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}oa(e,!0,n,null,i,e.lastEffect);break;case"together":oa(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ia(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ha|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Xl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Xl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function sa(t,e){if(!Wi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?e||null===t.tail?t.tail=null:t.tail.sibling=null:o.sibling=null}}function aa(t,e,n){var o=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mr(e.type)&&yr(),null;case 3:return xi(),hr(gr),hr(fr),qi(),(o=e.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==t&&null!==t.child||(Yi(e)?e.flags|=4:o.hydrate||(e.flags|=256)),null;case 5:Bi(e);var i=Mi(Di.current);if(n=e.type,null!==t&&null!=e.stateNode)Js(t,e,n,o),t.ref!==e.ref&&(e.flags|=128);else{if(!o){if(null===e.stateNode)throw Error(s(166));return null}if(t=Mi(Ai.current),Yi(e)){o=e.stateNode,n=e.type;var a=e.memoizedProps;switch(o[Qo]=e,o[tr]=a,n){case"dialog":No("cancel",o),No("close",o);break;case"iframe":case"object":case"embed":No("load",o);break;case"video":case"audio":for(t=0;t<Ro.length;t++)No(Ro[t],o);break;case"source":No("error",o);break;case"img":case"image":case"link":No("error",o),No("load",o);break;case"details":No("toggle",o);break;case"input":tt(o,a),No("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},No("invalid",o);break;case"textarea":lt(o,a),No("invalid",o)}for(var u in kt(n,a),t=null,a)a.hasOwnProperty(u)&&(i=a[u],"children"===u?"string"===typeof i?o.textContent!==i&&(t=["children",i]):"number"===typeof i&&o.textContent!==""+i&&(t=["children",""+i]):l.hasOwnProperty(u)&&null!=i&&"onScroll"===u&&No("scroll",o));switch(n){case"input":q(o),ot(o,a,!0);break;case"textarea":q(o),ct(o);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(o.onclick=Ho)}o=t,e.updateQueue=o,null!==o&&(e.flags|=4)}else{switch(u=9===i.nodeType?i:i.ownerDocument,t===ht&&(t=dt(n)),t===ht?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof o.is?t=u.createElement(n,{is:o.is}):(t=u.createElement(n),"select"===n&&(u=t,o.multiple?u.multiple=!0:o.size&&(u.size=o.size))):t=u.createElementNS(t,n),t[Qo]=e,t[tr]=o,Ks(t,e),e.stateNode=t,u=Ct(n,o),n){case"dialog":No("cancel",t),No("close",t),i=o;break;case"iframe":case"object":case"embed":No("load",t),i=o;break;case"video":case"audio":for(i=0;i<Ro.length;i++)No(Ro[i],t);i=o;break;case"source":No("error",t),i=o;break;case"img":case"image":case"link":No("error",t),No("load",t),i=o;break;case"details":No("toggle",t),i=o;break;case"input":tt(t,o),i=Q(t,o),No("invalid",t);break;case"option":i=it(t,o);break;case"select":t._wrapperState={wasMultiple:!!o.multiple},i=r({},o,{value:void 0}),No("invalid",t);break;case"textarea":lt(t,o),i=at(t,o),No("invalid",t);break;default:i=o}kt(n,i);var c=i;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?Tt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&mt(t,h):"number"===typeof h&&mt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&No("scroll",t):null!=h&&b(t,a,h,u))}switch(n){case"input":q(t),ot(t,o,!1);break;case"textarea":q(t),ct(t);break;case"option":null!=o.value&&t.setAttribute("value",""+K(o.value));break;case"select":t.multiple=!!o.multiple,null!=(a=o.value)?st(t,!!o.multiple,a,!1):null!=o.defaultValue&&st(t,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Ho)}Go(n,o)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)qs(0,e,t.memoizedProps,o);else{if("string"!==typeof o&&null===e.stateNode)throw Error(s(166));n=Mi(Di.current),Mi(Ai.current),Yi(e)?(o=e.stateNode,n=e.memoizedProps,o[Qo]=e,o.nodeValue!==n&&(e.flags|=4)):((o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[Qo]=e,e.stateNode=o)}return null;case 13:return hr(Fi),o=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(o=null!==o,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Yi(e):n=null!==t.memoizedState,o&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Fi.current)?0===Fa&&(Fa=3):(0!==Fa&&3!==Fa||(Fa=4),null===Ma||0===(134217727&Ha)&&0===(134217727&Wa)||ml(Ma,xa))),(o||n)&&(e.flags|=4),null);case 4:return xi(),null===t&&Mo(e.stateNode.containerInfo),null;case 10:return ri(e),null;case 19:if(hr(Fi),null===(o=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(u=o.rendering))if(a)sa(o,!1);else{if(0!==Fa||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(u=Ui(t))){for(e.flags|=64,sa(o,!1),null!==(a=u.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===o.lastEffect&&(e.firstEffect=null),e.lastEffect=o.lastEffect,o=n,n=e.child;null!==n;)t=o,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pr(Fi,1&Fi.current|2),e.child}t=t.sibling}null!==o.tail&&Gr()>Xa&&(e.flags|=64,a=!0,sa(o,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=Ui(u))){if(e.flags|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),sa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Wi)return null!==(e=e.lastEffect=o.lastEffect)&&(e.nextEffect=null),null}else 2*Gr()-o.renderingStartTime>Xa&&1073741824!==n&&(e.flags|=64,a=!0,sa(o,!1),e.lanes=33554432);o.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=o.last)?n.sibling=u:e.child=u,o.last=u)}return null!==o.tail?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.lastEffect=e.lastEffect,o.renderingStartTime=Gr(),n.sibling=null,e=Fi.current,pr(Fi,a?1&e|2:1&e),n):null;case 23:case 24:return Sl(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==o.mode&&(e.flags|=4),null}throw Error(s(156,e.tag))}function la(t){switch(t.tag){case 1:mr(t.type)&&yr();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(xi(),hr(gr),hr(fr),qi(),0!==(64&(e=t.flags)))throw Error(s(285));return t.flags=-4097&e|64,t;case 5:return Bi(t),null;case 13:return hr(Fi),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return hr(Fi),null;case 4:return xi(),null;case 10:return ri(t),null;case 23:case 24:return Sl(),null;default:return null}}function ua(t,e){try{var n="",o=e;do{n+=X(o),o=o.return}while(o);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:t,source:e,stack:r}}function ca(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Ks=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Js=function(t,e,n,o){var i=t.memoizedProps;if(i!==o){t=e.stateNode,Mi(Ai.current);var s,a=null;switch(n){case"input":i=Q(t,i),o=Q(t,o),a=[];break;case"option":i=it(t,i),o=it(t,o),a=[];break;case"select":i=r({},i,{value:void 0}),o=r({},o,{value:void 0}),a=[];break;case"textarea":i=at(t,i),o=at(t,o),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof o.onClick&&(t.onclick=Ho)}for(h in kt(n,o),n=null,i)if(!o.hasOwnProperty(h)&&i.hasOwnProperty(h)&&null!=i[h])if("style"===h){var u=i[h];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in o){var c=o[h];if(u=null!=i?i[h]:void 0,o.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&No("scroll",t),a||u===c||(a=[])):"object"===typeof c&&null!==c&&c.$$typeof===x?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},qs=function(t,e,n,o){n!==o&&(e.flags|=4)};var ha="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=hi(-1,n)).tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){qa||(qa=!0,$a=o),ca(0,e)},n}function da(t,e,n){(n=hi(-1,n)).tag=3;var o=t.type.getDerivedStateFromError;if("function"===typeof o){var r=e.value;n.payload=function(){return ca(0,e),o(r)}}var i=t.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof o&&(null===Za?Za=new Set([this]):Za.add(this),ca(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var fa="function"===typeof WeakSet?WeakSet:Set;function ga(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){jl(t,n)}else e.current=null}function _a(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,o=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Zr(e.type,n),o),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Ko(e.stateNode.containerInfo))}throw Error(s(163))}function va(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var o=t.create;t.destroy=o()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var r=t;o=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Bl(n,t),Pl(n,t)),t=o}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(o=n.elementType===n.type?e.memoizedProps:Zr(n.type,e.memoizedProps),t.componentDidUpdate(o,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&gi(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}gi(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Go(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Te(n)))))}throw Error(s(163))}function ma(t,e){for(var n=t;;){if(5===n.tag){var o=n.stateNode;if(e)"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{o=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,o.style.display=Et("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ya(t,e){if(Cr&&"function"===typeof Cr.onCommitFiberUnmount)try{Cr.onCommitFiberUnmount(kr,e)}catch(i){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var o=n,r=o.destroy;if(o=o.tag,void 0!==r)if(0!==(4&o))Bl(e,n);else{o=e;try{r()}catch(i){jl(o,i)}}n=n.next}while(n!==t)}break;case 1:if(ga(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){jl(e,i)}break;case 5:ga(e);break;case 4:Ca(t,e)}}function ba(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Ea(t){return 5===t.tag||3===t.tag||4===t.tag}function Ta(t){t:{for(var e=t.return;null!==e;){if(Ea(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var o=!1;break;case 3:case 4:e=e.containerInfo,o=!0;break;default:throw Error(s(161))}16&n.flags&&(mt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||Ea(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}o?Sa(t,n,e):ka(t,n,e)}function Sa(t,e,n){var o=t.tag,r=5===o||6===o;if(r)t=r?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Ho));else if(4!==o&&null!==(t=t.child))for(Sa(t,e,n),t=t.sibling;null!==t;)Sa(t,e,n),t=t.sibling}function ka(t,e,n){var o=t.tag,r=5===o||6===o;if(r)t=r?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==o&&null!==(t=t.child))for(ka(t,e,n),t=t.sibling;null!==t;)ka(t,e,n),t=t.sibling}function Ca(t,e){for(var n,o,r=e,i=!1;;){if(!i){i=r.return;t:for(;;){if(null===i)throw Error(s(160));switch(n=i.stateNode,i.tag){case 5:o=!1;break t;case 3:case 4:n=n.containerInfo,o=!0;break t}i=i.return}i=!0}if(5===r.tag||6===r.tag){t:for(var a=t,l=r,u=l;;)if(ya(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break t;for(;null===u.sibling;){if(null===u.return||u.return===l)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}o?(a=n,l=r.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(ya(t,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(i=!1)}r.sibling.return=r.return,r=r.sibling}}function Oa(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{3===(3&o.tag)&&(t=o.destroy,o.destroy=void 0,void 0!==t&&t()),o=o.next}while(o!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=e.stateNode)){o=e.memoizedProps;var r=null!==t?t.memoizedProps:o;t=e.type;var i=e.updateQueue;if(e.updateQueue=null,null!==i){for(n[tr]=o,"input"===t&&"radio"===o.type&&null!=o.name&&et(n,o),Ct(t,r),e=Ct(t,o),r=0;r<i.length;r+=2){var a=i[r],l=i[r+1];"style"===a?Tt(n,l):"dangerouslySetInnerHTML"===a?vt(n,l):"children"===a?mt(n,l):b(n,a,l,e)}switch(t){case"input":nt(n,o);break;case"textarea":ut(n,o);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!o.multiple,null!=(i=o.value)?st(n,!!o.multiple,i,!1):t!==!!o.multiple&&(null!=o.defaultValue?st(n,!!o.multiple,o.defaultValue,!0):st(n,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,Te(n.containerInfo)));case 13:return null!==e.memoizedState&&(za=Gr(),ma(e.child,!0)),void Ra(e);case 19:return void Ra(e);case 23:case 24:return void ma(e,null!==e.memoizedState)}throw Error(s(163))}function Ra(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new fa),e.forEach((function(e){var o=Wl.bind(null,t,e);n.has(e)||(n.add(e),e.then(o,o))}))}}function wa(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ia=Math.ceil,Aa=E.ReactCurrentDispatcher,Na=E.ReactCurrentOwner,Da=0,Ma=null,La=null,xa=0,Pa=0,Ba=cr(0),Fa=0,Ua=null,ja=0,Ha=0,Wa=0,Va=0,Ga=null,za=0,Xa=1/0;function Ya(){Xa=Gr()+500}var Ka,Ja=null,qa=!1,$a=null,Za=null,Qa=!1,tl=null,el=90,nl=[],ol=[],rl=null,il=0,sl=null,al=-1,ll=0,ul=0,cl=null,hl=!1;function pl(){return 0!==(48&Da)?Gr():-1!==al?al:al=Gr()}function dl(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===zr()?1:2;if(0===ll&&(ll=ja),0!==$r.transition){0!==ul&&(ul=null!==Ga?Ga.pendingLanes:0),t=ll;var e=4186112&~ul;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=zr(),0!==(4&Da)&&98===t?t=je(12,ll):t=je(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ll),t}function fl(t,e,n){if(50<il)throw il=0,sl=null,Error(s(185));if(null===(t=gl(t,e)))return null;Ve(t,e,n),t===Ma&&(Wa|=e,4===Fa&&ml(t,xa));var o=zr();1===e?0!==(8&Da)&&0===(48&Da)?yl(t):(_l(t,n),0===Da&&(Ya(),Jr())):(0===(4&Da)||98!==o&&99!==o||(null===rl?rl=new Set([t]):rl.add(t)),_l(t,n)),Ga=t}function gl(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function _l(t,e){for(var n=t.callbackNode,o=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ge(a),u=1<<l,c=i[l];if(-1===c){if(0===(u&o)||0!==(u&r)){c=e,Be(u);var h=Pe;i[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=u);a&=~u}if(o=Fe(t,t===Ma?xa:0),e=Pe,0===o)null!==n&&(n!==Fr&&wr(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Fr&&wr(n)}15===e?(n=yl.bind(null,t),null===jr?(jr=[n],Hr=Rr(Mr,qr)):jr.push(n),n=Fr):14===e?n=Kr(99,yl.bind(null,t)):(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,t))}}(e),n=Kr(n,vl.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function vl(t){if(al=-1,ul=ll=0,0!==(48&Da))throw Error(s(327));var e=t.callbackNode;if(xl()&&t.callbackNode!==e)return null;var n=Fe(t,t===Ma?xa:0);if(0===n)return null;var o=n,r=Da;Da|=16;var i=Ol();for(Ma===t&&xa===o||(Ya(),kl(t,o));;)try{Il();break}catch(l){Cl(t,l)}if(oi(),Aa.current=i,Da=r,null!==La?o=0:(Ma=null,xa=0,o=Fa),0!==(ja&Wa))kl(t,0);else if(0!==o){if(2===o&&(Da|=64,t.hydrate&&(t.hydrate=!1,Ko(t.containerInfo)),0!==(n=Ue(t))&&(o=Rl(t,n))),1===o)throw e=Ua,kl(t,0),ml(t,n),_l(t,Gr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,o){case 0:case 1:throw Error(s(345));case 2:case 5:Dl(t);break;case 3:if(ml(t,n),(62914560&n)===n&&10<(o=za+500-Gr())){if(0!==Fe(t,0))break;if(((r=t.suspendedLanes)&n)!==n){pl(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Xo(Dl.bind(null,t),o);break}Dl(t);break;case 4:if(ml(t,n),(4186112&n)===n)break;for(o=t.eventTimes,r=-1;0<n;){var a=31-Ge(n);i=1<<a,(a=o[a])>r&&(r=a),n&=~i}if(n=r,10<(n=(120>(n=Gr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ia(n/1960))-n)){t.timeoutHandle=Xo(Dl.bind(null,t),n);break}Dl(t);break;default:throw Error(s(329))}}return _l(t,Gr()),t.callbackNode===e?vl.bind(null,t):null}function ml(t,e){for(e&=~Va,e&=~Wa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ge(e),o=1<<n;t[n]=-1,e&=~o}}function yl(t){if(0!==(48&Da))throw Error(s(327));if(xl(),t===Ma&&0!==(t.expiredLanes&xa)){var e=xa,n=Rl(t,e);0!==(ja&Wa)&&(n=Rl(t,e=Fe(t,e)))}else n=Rl(t,e=Fe(t,0));if(0!==t.tag&&2===n&&(Da|=64,t.hydrate&&(t.hydrate=!1,Ko(t.containerInfo)),0!==(e=Ue(t))&&(n=Rl(t,e))),1===n)throw n=Ua,kl(t,0),ml(t,e),_l(t,Gr()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dl(t),_l(t,Gr()),null}function bl(t,e){var n=Da;Da|=1;try{return t(e)}finally{0===(Da=n)&&(Ya(),Jr())}}function El(t,e){var n=Da;Da&=-2,Da|=8;try{return t(e)}finally{0===(Da=n)&&(Ya(),Jr())}}function Tl(t,e){pr(Ba,Pa),Pa|=e,ja|=e}function Sl(){Pa=Ba.current,hr(Ba)}function kl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Yo(n)),null!==La)for(n=La.return;null!==n;){var o=n;switch(o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&yr();break;case 3:xi(),hr(gr),hr(fr),qi();break;case 5:Bi(o);break;case 4:xi();break;case 13:case 19:hr(Fi);break;case 10:ri(o);break;case 23:case 24:Sl()}n=n.return}Ma=t,La=Xl(t.current,null),xa=Pa=ja=e,Fa=0,Ua=null,Va=Wa=Ha=0}function Cl(t,e){for(;;){var n=La;try{if(oi(),$i.current=Ds,os){for(var o=ts.memoizedState;null!==o;){var r=o.queue;null!==r&&(r.pending=null),o=o.next}os=!1}if(Qi=0,ns=es=ts=null,rs=!1,Na.current=null,null===n||null===n.return){Fa=1,Ua=e,La=null;break}t:{var i=t,s=n.return,a=n,l=e;if(e=xa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Fi.current),p=s;do{var d;if(d=13===p.tag){var f=p.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var g=p.memoizedProps;d=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(d){var _=p.updateQueue;if(null===_){var v=new Set;v.add(u),p.updateQueue=v}else _.add(u);if(0===(2&p.mode)){if(p.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var m=hi(-1,1);m.tag=2,pi(a,m)}a.lanes|=1;break t}l=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new ha,l=new Set,y.set(u,l)):void 0===(l=y.get(u))&&(l=new Set,y.set(u,l)),!l.has(a)){l.add(a);var b=Hl.bind(null,i,u,a);u.then(b,b)}p.flags|=4096,p.lanes=e;break t}p=p.return}while(null!==p);l=Error((Y(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fa&&(Fa=2),l=ua(l,a),p=s;do{switch(p.tag){case 3:i=l,p.flags|=4096,e&=-e,p.lanes|=e,di(p,pa(0,i,e));break t;case 1:i=l;var E=p.type,T=p.stateNode;if(0===(64&p.flags)&&("function"===typeof E.getDerivedStateFromError||null!==T&&"function"===typeof T.componentDidCatch&&(null===Za||!Za.has(T)))){p.flags|=4096,e&=-e,p.lanes|=e,di(p,da(p,i,e));break t}}p=p.return}while(null!==p)}Nl(n)}catch(S){e=S,La===n&&null!==n&&(La=n=n.return);continue}break}}function Ol(){var t=Aa.current;return Aa.current=Ds,null===t?Ds:t}function Rl(t,e){var n=Da;Da|=16;var o=Ol();for(Ma===t&&xa===e||kl(t,e);;)try{wl();break}catch(r){Cl(t,r)}if(oi(),Da=n,Aa.current=o,null!==La)throw Error(s(261));return Ma=null,xa=0,Fa}function wl(){for(;null!==La;)Al(La)}function Il(){for(;null!==La&&!Ir();)Al(La)}function Al(t){var e=Ka(t.alternate,t,Pa);t.memoizedProps=t.pendingProps,null===e?Nl(t):La=e,Na.current=null}function Nl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=aa(n,e,Pa)))return void(La=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Pa)||0===(4&n.mode)){for(var o=0,r=n.child;null!==r;)o|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=o}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=la(e)))return n.flags&=2047,void(La=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(La=e);La=e=t}while(null!==e);0===Fa&&(Fa=5)}function Dl(t){var e=zr();return Yr(99,Ml.bind(null,t,e)),null}function Ml(t,e){do{xl()}while(null!==tl);if(0!==(48&Da))throw Error(s(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null;var o=n.lanes|n.childLanes,r=o,i=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<i;){var u=31-Ge(i),c=1<<u;r[u]=0,a[u]=-1,l[u]=-1,i&=~c}if(null!==rl&&0===(24&o)&&rl.has(t)&&rl.delete(t),t===Ma&&(La=Ma=null,xa=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,null!==o){if(r=Da,Da|=32,Na.current=null,Wo=Je,mo(a=vo())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,i=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(O){l=null;break t}var h=0,p=-1,d=-1,f=0,g=0,_=a,v=null;e:for(;;){for(var m;_!==l||0!==i&&3!==_.nodeType||(p=h+i),_!==u||0!==c&&3!==_.nodeType||(d=h+c),3===_.nodeType&&(h+=_.nodeValue.length),null!==(m=_.firstChild);)v=_,_=m;for(;;){if(_===a)break e;if(v===l&&++f===i&&(p=h),v===u&&++g===c&&(d=h),null!==(m=_.nextSibling))break;v=(_=v).parentNode}_=m}l=-1===p||-1===d?null:{start:p,end:d}}else l=null;l=l||{start:0,end:0}}else l=null;Vo={focusedElem:a,selectionRange:l},Je=!1,cl=null,hl=!1,Ja=o;do{try{Ll()}catch(O){if(null===Ja)throw Error(s(330));jl(Ja,O),Ja=Ja.nextEffect}}while(null!==Ja);cl=null,Ja=o;do{try{for(a=t;null!==Ja;){var y=Ja.flags;if(16&y&&mt(Ja.stateNode,""),128&y){var b=Ja.alternate;if(null!==b){var E=b.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&y){case 2:Ta(Ja),Ja.flags&=-3;break;case 6:Ta(Ja),Ja.flags&=-3,Oa(Ja.alternate,Ja);break;case 1024:Ja.flags&=-1025;break;case 1028:Ja.flags&=-1025,Oa(Ja.alternate,Ja);break;case 4:Oa(Ja.alternate,Ja);break;case 8:Ca(a,l=Ja);var T=l.alternate;ba(l),null!==T&&ba(T)}Ja=Ja.nextEffect}}catch(O){if(null===Ja)throw Error(s(330));jl(Ja,O),Ja=Ja.nextEffect}}while(null!==Ja);if(E=Vo,b=vo(),y=E.focusedElem,a=E.selectionRange,b!==y&&y&&y.ownerDocument&&_o(y.ownerDocument.documentElement,y)){null!==a&&mo(y)&&(b=a.start,void 0===(E=a.end)&&(E=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(E,y.value.length)):(E=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(E=E.getSelection(),l=y.textContent.length,T=Math.min(a.start,l),a=void 0===a.end?T:Math.min(a.end,l),!E.extend&&T>a&&(l=a,a=T,T=l),l=go(y,T),i=go(y,a),l&&i&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==i.node||E.focusOffset!==i.offset)&&((b=b.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),T>a?(E.addRange(b),E.extend(i.node,i.offset)):(b.setEnd(i.node,i.offset),E.addRange(b))))),b=[];for(E=y;E=E.parentNode;)1===E.nodeType&&b.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<b.length;y++)(E=b[y]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Je=!!Wo,Vo=Wo=null,t.current=n,Ja=o;do{try{for(y=t;null!==Ja;){var S=Ja.flags;if(36&S&&va(y,Ja.alternate,Ja),128&S){b=void 0;var k=Ja.ref;if(null!==k){var C=Ja.stateNode;Ja.tag,b=C,"function"===typeof k?k(b):k.current=b}}Ja=Ja.nextEffect}}catch(O){if(null===Ja)throw Error(s(330));jl(Ja,O),Ja=Ja.nextEffect}}while(null!==Ja);Ja=null,Ur(),Da=r}else t.current=n;if(Qa)Qa=!1,tl=t,el=e;else for(Ja=o;null!==Ja;)e=Ja.nextEffect,Ja.nextEffect=null,8&Ja.flags&&((S=Ja).sibling=null,S.stateNode=null),Ja=e;if(0===(o=t.pendingLanes)&&(Za=null),1===o?t===sl?il++:(il=0,sl=t):il=0,n=n.stateNode,Cr&&"function"===typeof Cr.onCommitFiberRoot)try{Cr.onCommitFiberRoot(kr,n,void 0,64===(64&n.current.flags))}catch(O){}if(_l(t,Gr()),qa)throw qa=!1,t=$a,$a=null,t;return 0!==(8&Da)||Jr(),null}function Ll(){for(;null!==Ja;){var t=Ja.alternate;hl||null===cl||(0!==(8&Ja.flags)?te(Ja,cl)&&(hl=!0):13===Ja.tag&&wa(t,Ja)&&te(Ja,cl)&&(hl=!0));var e=Ja.flags;0!==(256&e)&&_a(t,Ja),0===(512&e)||Qa||(Qa=!0,Kr(97,(function(){return xl(),null}))),Ja=Ja.nextEffect}}function xl(){if(90!==el){var t=97<el?97:el;return el=90,Yr(t,Fl)}return!1}function Pl(t,e){nl.push(e,t),Qa||(Qa=!0,Kr(97,(function(){return xl(),null})))}function Bl(t,e){ol.push(e,t),Qa||(Qa=!0,Kr(97,(function(){return xl(),null})))}function Fl(){if(null===tl)return!1;var t=tl;if(tl=null,0!==(48&Da))throw Error(s(331));var e=Da;Da|=32;var n=ol;ol=[];for(var o=0;o<n.length;o+=2){var r=n[o],i=n[o+1],a=r.destroy;if(r.destroy=void 0,"function"===typeof a)try{a()}catch(u){if(null===i)throw Error(s(330));jl(i,u)}}for(n=nl,nl=[],o=0;o<n.length;o+=2){r=n[o],i=n[o+1];try{var l=r.create;r.destroy=l()}catch(u){if(null===i)throw Error(s(330));jl(i,u)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Da=e,Jr(),!0}function Ul(t,e,n){pi(t,e=pa(0,e=ua(n,e),1)),e=pl(),null!==(t=gl(t,1))&&(Ve(t,1,e),_l(t,e))}function jl(t,e){if(3===t.tag)Ul(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Ul(n,t,e);break}if(1===n.tag){var o=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Za||!Za.has(o))){var r=da(n,t=ua(e,t),1);if(pi(n,r),r=pl(),null!==(n=gl(n,1)))Ve(n,1,r),_l(n,r);else if("function"===typeof o.componentDidCatch&&(null===Za||!Za.has(o)))try{o.componentDidCatch(e,t)}catch(i){}break}}n=n.return}}function Hl(t,e,n){var o=t.pingCache;null!==o&&o.delete(e),e=pl(),t.pingedLanes|=t.suspendedLanes&n,Ma===t&&(xa&n)===n&&(4===Fa||3===Fa&&(62914560&xa)===xa&&500>Gr()-za?kl(t,0):Va|=n),_l(t,e)}function Wl(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===zr()?1:2:(0===ll&&(ll=ja),0===(e=He(62914560&~ll))&&(e=4194304))),n=pl(),null!==(t=gl(t,e))&&(Ve(t,e,n),_l(t,n))}function Vl(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gl(t,e,n,o){return new Vl(t,e,n,o)}function zl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Xl(t,e){var n=t.alternate;return null===n?((n=Gl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yl(t,e,n,o,r,i){var a=2;if(o=t,"function"===typeof t)zl(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case k:return Kl(n.children,r,i,e);case P:a=8,r|=16;break;case C:a=8,r|=1;break;case O:return(t=Gl(12,n,e,8|r)).elementType=O,t.type=O,t.lanes=i,t;case A:return(t=Gl(13,n,e,r)).type=A,t.elementType=A,t.lanes=i,t;case N:return(t=Gl(19,n,e,r)).elementType=N,t.lanes=i,t;case B:return Jl(n,r,i,e);case F:return(t=Gl(24,n,e,r)).elementType=F,t.lanes=i,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case R:a=10;break t;case w:a=9;break t;case I:a=11;break t;case D:a=14;break t;case M:a=16,o=null;break t;case L:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Gl(a,n,e,r)).elementType=t,e.type=o,e.lanes=i,e}function Kl(t,e,n,o){return(t=Gl(7,t,o,e)).lanes=n,t}function Jl(t,e,n,o){return(t=Gl(23,t,o,e)).elementType=B,t.lanes=n,t}function ql(t,e,n){return(t=Gl(6,t,null,e)).lanes=n,t}function $l(t,e,n){return(e=Gl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zl(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=We(0),this.expirationTimes=We(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=We(0),this.mutableSourceEagerHydrationData=null}function Ql(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==o?null:""+o,children:t,containerInfo:e,implementation:n}}function tu(t,e,n,o){var r=e.current,i=pl(),a=dl(r);t:if(n){e:{if(qt(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(mr(u)){n=Er(n,u,l);break t}}n=l}else n=dr;return null===e.context?e.context=n:e.pendingContext=n,(e=hi(i,a)).payload={element:t},null!==(o=void 0===o?null:o)&&(e.callback=o),pi(r,e),fl(r,a,i),a}function eu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function nu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ou(t,e){nu(t,e),(t=t.alternate)&&nu(t,e)}function ru(t,e,n){var o=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zl(t,e,null!=n&&!0===n.hydrate),e=Gl(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,ui(e),t[er]=n.current,Mo(8===t.nodeType?t.parentNode:t),o)for(t=0;t<o.length;t++){var r=(e=o[t])._getVersion;r=r(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,r]:n.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=n}function iu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function su(t,e,n,o,r){var i=n._reactRootContainer;if(i){var s=i._internalRoot;if("function"===typeof r){var a=r;r=function(){var t=eu(s);a.call(t)}}tu(e,s,t,r)}else{if(i=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ru(t,0,e?{hydrate:!0}:void 0)}(n,o),s=i._internalRoot,"function"===typeof r){var l=r;r=function(){var t=eu(s);l.call(t)}}El((function(){tu(e,s,t,r)}))}return eu(s)}function au(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(e))throw Error(s(200));return Ql(t,e,null,n)}Ka=function(t,e,n){var o=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||gr.current)Bs=!0;else{if(0===(n&o)){switch(Bs=!1,e.tag){case 3:Ys(e),Ki();break;case 5:Pi(e);break;case 1:mr(e.type)&&Tr(e);break;case 4:Li(e,e.stateNode.containerInfo);break;case 10:o=e.memoizedProps.value;var r=e.type._context;pr(Qr,r._currentValue),r._currentValue=o;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Zs(t,e,n):(pr(Fi,1&Fi.current),null!==(e=ia(t,e,n))?e.sibling:null);pr(Fi,1&Fi.current);break;case 19:if(o=0!==(n&e.childLanes),0!==(64&t.flags)){if(o)return ra(t,e,n);e.flags|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),pr(Fi,Fi.current),o)break;return null;case 23:case 24:return e.lanes=0,Ws(t,e,n)}return ia(t,e,n)}Bs=0!==(16384&t.flags)}else Bs=!1;switch(e.lanes=0,e.tag){case 2:if(o=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=vr(e,fr.current),si(e,n),r=as(null,e,o,t,r,n),e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(o)){var i=!0;Tr(e)}else i=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ui(e);var a=o.getDerivedStateFromProps;"function"===typeof a&&vi(e,o,a,t),r.updater=mi,e.stateNode=r,r._reactInternals=e,Ti(e,o,t,n),e=Xs(null,e,o,!0,i,n)}else e.tag=0,Fs(null,e,r,n),e=e.child;return e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return zl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===I)return 11;if(t===D)return 14}return 2}(r),t=Zr(r,t),i){case 0:e=Gs(null,e,r,t,n);break t;case 1:e=zs(null,e,r,t,n);break t;case 11:e=Us(null,e,r,t,n);break t;case 14:e=js(null,e,r,Zr(r.type,t),o,n);break t}throw Error(s(306,r,""))}return e;case 0:return o=e.type,r=e.pendingProps,Gs(t,e,o,r=e.elementType===o?r:Zr(o,r),n);case 1:return o=e.type,r=e.pendingProps,zs(t,e,o,r=e.elementType===o?r:Zr(o,r),n);case 3:if(Ys(e),o=e.updateQueue,null===t||null===o)throw Error(s(282));if(o=e.pendingProps,r=null!==(r=e.memoizedState)?r.element:null,ci(t,e),fi(e,o,null,n),(o=e.memoizedState.element)===r)Ki(),e=ia(t,e,n);else{if((i=(r=e.stateNode).hydrate)&&(Hi=Jo(e.stateNode.containerInfo.firstChild),ji=e,i=Wi=!0),i){if(null!=(t=r.mutableSourceEagerHydrationData))for(r=0;r<t.length;r+=2)(i=t[r])._workInProgressVersionPrimary=t[r+1],Ji.push(i);for(n=wi(e,null,o,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fs(t,e,o,n),Ki();e=e.child}return e;case 5:return Pi(e),null===t&&zi(e),o=e.type,r=e.pendingProps,i=null!==t?t.memoizedProps:null,a=r.children,zo(o,r)?a=null:null!==i&&zo(o,i)&&(e.flags|=16),Vs(t,e),Fs(t,e,a,n),e.child;case 6:return null===t&&zi(e),null;case 13:return Zs(t,e,n);case 4:return Li(e,e.stateNode.containerInfo),o=e.pendingProps,null===t?e.child=Ri(e,null,o,n):Fs(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,Us(t,e,o,r=e.elementType===o?r:Zr(o,r),n);case 7:return Fs(t,e,e.pendingProps,n),e.child;case 8:case 12:return Fs(t,e,e.pendingProps.children,n),e.child;case 10:t:{o=e.type._context,r=e.pendingProps,a=e.memoizedProps,i=r.value;var l=e.type._context;if(pr(Qr,l._currentValue),l._currentValue=i,null!==a)if(l=a.value,0===(i=co(l,i)?0:0|("function"===typeof o._calculateChangedBits?o._calculateChangedBits(l,i):1073741823))){if(a.children===r.children&&!gr.current){e=ia(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===o&&0!==(c.observedBits&i)){1===l.tag&&((c=hi(-1,n&-n)).tag=2,pi(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ii(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fs(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=(i=e.pendingProps).children,si(e,n),o=o(r=ai(r,i.unstable_observedBits)),e.flags|=1,Fs(t,e,o,n),e.child;case 14:return i=Zr(r=e.type,e.pendingProps),js(t,e,r,i=Zr(r.type,i),o,n);case 15:return Hs(t,e,e.type,e.pendingProps,o,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Zr(o,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,mr(o)?(t=!0,Tr(e)):t=!1,si(e,n),bi(e,o,r),Ti(e,o,r,n),Xs(null,e,o,!0,t,n);case 19:return ra(t,e,n);case 23:case 24:return Ws(t,e,n)}throw Error(s(156,e.tag))},ru.prototype.render=function(t){tu(t,this._internalRoot,null,null)},ru.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;tu(null,t,null,(function(){e[er]=null}))},ee=function(t){13===t.tag&&(fl(t,4,pl()),ou(t,4))},ne=function(t){13===t.tag&&(fl(t,67108864,pl()),ou(t,67108864))},oe=function(t){if(13===t.tag){var e=pl(),n=dl(t);fl(t,n,e),ou(t,n)}},re=function(t,e){return e()},Rt=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=sr(o);if(!r)throw Error(s(90));$(o),nt(o,r)}}}break;case"textarea":ut(t,n);break;case"select":null!=(e=n.value)&&st(t,!!n.multiple,e,!1)}},Mt=bl,Lt=function(t,e,n,o,r){var i=Da;Da|=4;try{return Yr(98,t.bind(null,e,n,o,r))}finally{0===(Da=i)&&(Ya(),Jr())}},xt=function(){0===(49&Da)&&(function(){if(null!==rl){var t=rl;rl=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,_l(t,Gr())}))}Jr()}(),xl())},Pt=function(t,e){var n=Da;Da|=2;try{return t(e)}finally{0===(Da=n)&&(Ya(),Jr())}};var lu={Events:[rr,ir,sr,Nt,Dt,xl,{current:!1}]},uu={findFiberByHostInstance:or,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Qt(t))?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{kr=hu.inject(cu),Cr=hu}catch(_t){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,e.createPortal=au,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=Qt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Da;if(0!==(48&n))return t(e);Da|=1;try{if(t)return Yr(99,t.bind(null,e))}finally{Da=n,Jr()}},e.hydrate=function(t,e,n){if(!iu(e))throw Error(s(200));return su(null,t,e,!0,n)},e.render=function(t,e,n){if(!iu(e))throw Error(s(200));return su(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!iu(t))throw Error(s(40));return!!t._reactRootContainer&&(El((function(){su(null,null,t,!1,(function(){t._reactRootContainer=null,t[er]=null}))})),!0)},e.unstable_batchedUpdates=bl,e.unstable_createPortal=function(t,e){return au(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!iu(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return su(t,e,n,!1,o)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(155)},function(t,e,n){"use strict";var o,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,p=function t(){if(null!==c)try{var n=e.unstable_now();c(!0,n),c=null}catch(o){throw setTimeout(t,0),o}};o=function(t){null!==c?setTimeout(o,0,t):(c=t,setTimeout(p,0))},r=function(t,e){h=setTimeout(t,e)},i=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var _=!1,v=null,m=-1,y=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();b=t+y;try{v(!0,t)?T.postMessage(null):(_=!1,v=null)}catch(n){throw T.postMessage(null),n}}else _=!1},o=function(t){v=t,_||(_=!0,T.postMessage(null))},r=function(t,n){m=d((function(){t(e.unstable_now())}),n)},i=function(){f(m),m=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var o=n-1>>>1,r=t[o];if(!(void 0!==r&&0<O(r,e)))break t;t[o]=e,t[n]=r,n=o}}function k(t){return void 0===(t=t[0])?null:t}function C(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var o=0,r=t.length;o<r;){var i=2*(o+1)-1,s=t[i],a=i+1,l=t[a];if(void 0!==s&&0>O(s,n))void 0!==l&&0>O(l,s)?(t[o]=l,t[a]=n,o=a):(t[o]=s,t[i]=n,o=i);else{if(!(void 0!==l&&0>O(l,n)))break t;t[o]=l,t[a]=n,o=a}}}return e}return null}function O(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var R=[],w=[],I=1,A=null,N=3,D=!1,M=!1,L=!1;function x(t){for(var e=k(w);null!==e;){if(null===e.callback)C(w);else{if(!(e.startTime<=t))break;C(w),e.sortIndex=e.expirationTime,S(R,e)}e=k(w)}}function P(t){if(L=!1,x(t),!M)if(null!==k(R))M=!0,o(B);else{var e=k(w);null!==e&&r(P,e.startTime-t)}}function B(t,n){M=!1,L&&(L=!1,i()),D=!0;var o=N;try{for(x(n),A=k(R);null!==A&&(!(A.expirationTime>n)||t&&!e.unstable_shouldYield());){var s=A.callback;if("function"===typeof s){A.callback=null,N=A.priorityLevel;var a=s(A.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?A.callback=a:A===k(R)&&C(R),x(n)}else C(R);A=k(R)}if(null!==A)var l=!0;else{var u=k(w);null!==u&&r(P,u.startTime-n),l=!1}return l}finally{A=null,N=o,D=!1}}var F=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){M||D||(M=!0,o(B))},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return k(R)},e.unstable_next=function(t){switch(N){case 1:case 2:case 3:var e=3;break;default:e=N}var n=N;N=e;try{return t()}finally{N=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=N;N=t;try{return e()}finally{N=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:I++,callback:n,priorityLevel:t,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(t.sortIndex=s,S(w,t),null===k(R)&&t===k(w)&&(L?i():L=!0,r(P,s-a))):(t.sortIndex=l,S(R,t),M||D||(M=!0,o(B))),t},e.unstable_wrapCallback=function(t){var e=N;return function(){var n=N;N=e;try{return t.apply(this,arguments)}finally{N=n}}}},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=l(n(0)),r=l(n(52)),i=l(n(83)),s=l(n(99)),a=l(n(101));function l(t){return t&&t.__esModule?t:{default:t}}function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=r.default.shape({type:r.default.string,shadow:r.default.bool,fields:r.default.object,values:r.default.object,statements:r.default.object,next:r.default.object,mutation:r.default.shape({attributes:r.default.object,innerContent:r.default.string})}),y={type:r.default.string,name:r.default.string,custom:r.default.string,colour:r.default.string,blocks:r.default.arrayOf(m)},b=r.default.shape(_(_({},y),{},{categories:r.default.arrayOf(r.default.shape(y))})),E={initialXml:r.default.string,workspaceConfiguration:r.default.object,wrapperDivClassName:r.default.string,toolboxCategories:r.default.arrayOf(b.isRequired),toolboxBlocks:r.default.arrayOf(m.isRequired),xmlDidChange:r.default.func,workspaceDidChange:r.default.func,onImportXmlError:r.default.func,processToolboxCategory:r.default.func},T=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,o=f(t);if(e()){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}(n);function n(){var t;c(this,n);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return v(d(t=e.call.apply(e,[this].concat(l))),"componentDidMount",(function(){t.toolboxDidUpdate(),t.props.xmlDidChange&&"undefined"!==typeof console&&console.error("Warning: xmlDidChange is deprecated and will be removed in future versions! Please use workspaceDidChange instead.")})),v(d(t),"componentDidUpdate",(function(e){(t.props.toolboxBlocks&&!i.default.fromJS(t.props.toolboxBlocks).equals(i.default.fromJS(e.toolboxBlocks))||t.props.toolboxCategories&&!i.default.fromJS(t.props.toolboxCategories).equals(i.default.fromJS(e.toolboxCategories)))&&t.toolboxDidUpdate()})),v(d(t),"toolboxDidUpdate",(function(){var e=t.props.workspaceConfiguration||{};t.workspace&&!e.readOnly&&t.workspace.toolboxDidUpdate(t.toolbox.getRootNode())})),v(d(t),"xmlDidChange",(function(e){t.props.xmlDidChange&&t.props.xmlDidChange(e)})),v(d(t),"workspaceDidChange",(function(e){t.props.workspaceDidChange&&t.props.workspaceDidChange(e)})),v(d(t),"importFromXml",(function(e){return t.workspace.importFromXml(e)})),v(d(t),"resize",(function(){t.workspace.resize()})),v(d(t),"render",(function(){var e;return t.props.toolboxCategories?e="CATEGORIES":t.props.toolboxBlocks&&(e="BLOCKS"),o.default.createElement("div",{className:t.props.wrapperDivClassName},o.default.createElement(s.default,{categories:i.default.fromJS(t.props.toolboxCategories),blocks:i.default.fromJS(t.props.toolboxBlocks),didUpdate:t.toolboxDidUpdate,processCategory:t.props.processToolboxCategory,ref:function(e){t.toolbox=e}}),o.default.createElement(a.default,{ref:function(e){t.workspace=e},initialXml:t.props.initialXml,onImportXmlError:t.props.onImportXmlError,toolboxMode:e,xmlDidChange:t.xmlDidChange,workspaceDidChange:t.workspaceDidChange,wrapperDivClassName:t.props.wrapperDivClassName,workspaceConfiguration:t.props.workspaceConfiguration}))})),t}return n}(o.default.Component);T.propTypes=E,T.defaultProps={initialXml:null,workspaceConfiguration:null,wrapperDivClassName:null,toolboxCategories:null,toolboxBlocks:null,xmlDidChange:null,workspaceDidChange:null,onImportXmlError:null,processToolboxCategory:null};var S=T;e.default=S},function(t,e,n){"use strict";var o=n(160);function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,i,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(0)),r=i(n(52));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function u(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,o=h(t);if(e()){var r=h(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return u(this,n)}}(n);function n(){var t;a(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return p(c(t=e.call.apply(e,[this].concat(i))),"render",(function(){return o.default.createElement("button",{text:t.props.text,callbackkey:t.props.callbackKey})})),t}return n}(o.default.PureComponent);p(d,"propTypes",{text:r.default.string.isRequired,callbackKey:r.default.string.isRequired}),p(d,"renderButton",(function(t,e){return o.default.createElement(d,{key:e,text:t.get("text"),callbackKey:t.get("callbackKey")})}));var f=d;e.default=f},function(t,e,n){var o,r,i;r=[n(86),n(164),n(165),n(167)],void 0===(i="function"===typeof(o=function(t,e,n,o){"use strict";return t.setLocale(e),t.Blocks=t.Blocks||{},Object.keys(n).forEach((function(e){t.Blocks[e]=n[e]})),t.JavaScript=o,t})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;r=[n(87)],void 0===(i="function"===typeof(o=function(t){"use strict";return t})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;r=[n(86)],void 0===(i="function"===typeof(o=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;r=[n(166)],void 0===(i="function"===typeof(o=function(t){"use strict";return t.Blocks={},t.Blocks})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;r=[n(87)],void 0===(i="function"===typeof(o=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Blocks.lists={},t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("lists_create_with_container");e.initSvg();for(var n=e.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var r=t.newBlock("lists_create_with_item");r.initSvg(),n.connect(r.previousConnection),n=r.nextConnection}return e},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n;)e.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var o=this.getInput("ADD"+n).connection.targetConnection;o&&-1==e.indexOf(o)&&o.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var n=this.getInput("ADD"+e);t.valueConnection_=n&&n.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var n=this.appendValueInput("ADD"+e).setAlign(t.ALIGN_RIGHT);0==e&&n.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var e=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(e),"END"),this.setInputsInline(!0);var n=this;this.setTooltip((function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")}))}},t.Blocks.lists_getIndex={init:function(){var e=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),e=new t.FieldDropdown(e,(function(t){t="REMOVE"==t,this.getSourceBlock().updateStatement_(t)})),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var n=this;this.setTooltip((function(){var e=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),r="";switch(e+" "+o){case"GET FROM_START":case"GET FROM_END":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":r=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(r+="  "+("FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),r}))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");e.setAttribute("statement",!this.outputConnection);var n=this.getInput("AT").type==t.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(t){var e="true"==t.getAttribute("statement");this.updateStatement_(e),t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateStatement_:function(t){t!=!this.outputConnection&&(this.unplug(!0,!0),t?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new t.FieldDropdown(this.WHERE_OPTIONS,(function(t){var n="FROM_START"==t||"FROM_END"==t;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(t,"WHERE"),null}}));this.getInput("AT").appendField(n,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var e=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var n=this;this.setTooltip((function(){var e=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),r="";switch(e+" "+o){case"SET FROM_START":case"SET FROM_END":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":r=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(r+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),r}))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT").type==t.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new t.FieldDropdown(this.WHERE_OPTIONS,(function(t){var n="FROM_START"==t||"FROM_END"==t;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(t,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(n,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==t.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type==t.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);var o=new t.FieldDropdown(this["WHERE_OPTIONS_"+e],(function(t){var o="FROM_START"==t||"FROM_END"==t;if(o!=n){var r=this.getSourceBlock();return r.updateAt_(e,o),r.setFieldValue(t,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(o,"WHERE"+e),1==e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var e=this,n=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(t){e.updateType_(t)}));this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(n,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((function(){var n=e.getFieldValue("MODE");if("SPLIT"==n)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==n)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+n)}))},updateType_:function(t){if(this.getFieldValue("MODE")!=t){var e=this.getInput("INPUT").connection;e.setShadowDom(null);var n=e.targetBlock();n&&(e.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours())}"SPLIT"==t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(t){this.updateType_(t.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=t.utils.xml.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(t){this.elseifCount_=parseInt(t.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(t.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(t){var e=t.newBlock("controls_if_if");e.initSvg();for(var n=e.nextConnection,o=1;o<=this.elseifCount_;o++){var r=t.newBlock("controls_if_elseif");r.initSvg(),n.connect(r.previousConnection),n=r.nextConnection}return this.elseCount_&&((t=t.newBlock("controls_if_else")).initSvg(),n.connect(t.previousConnection)),e},compose:function(t){t=t.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var e=[null],n=[null],o=null;t;){switch(t.type){case"controls_if_elseif":this.elseifCount_++,e.push(t.valueConnection_),n.push(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=t.statementConnection_;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(e,n,o)},saveConnections:function(t){t=t.nextConnection.targetBlock();for(var e=1;t;){switch(t.type){case"controls_if_elseif":var n=this.getInput("IF"+e),o=this.getInput("DO"+e);t.valueConnection_=n&&n.connection.targetConnection,t.statementConnection_=o&&o.connection.targetConnection,e++;break;case"controls_if_else":o=this.getInput("ELSE"),t.statementConnection_=o&&o.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}},rebuildShape_:function(){var t=[null],e=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var r=this.getInput("IF"+o),i=this.getInput("DO"+o);t.push(r.connection.targetConnection),e.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(t,e,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,n,o){for(var r=1;r<=this.elseifCount_;r++)t.Mutator.reconnect(e[r],this,"IF"+r),t.Mutator.reconnect(n[r],this,"DO"+r);t.Mutator.reconnect(o,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A"),o=this.getInputTargetBlock("B");n&&o&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,o.outputConnection)&&(t.Events.setGroup(e.group),(e=this.prevBlocks_[0])!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(n=this.prevBlocks_[1])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var n=this.getInputTargetBlock("THEN"),o=this.getInputTargetBlock("ELSE"),r=this.outputConnection.targetConnection;if((n||o)&&r)for(var i=0;2>i;i++){var s=1==i?n:o;s&&!s.workspace.connectionChecker.doTypeChecks(s.outputConnection,r)&&(t.Events.setGroup(e.group),r===this.prevParentConnection_?(this.unplug(),r.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=r}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),o=n.name;if(!this.isCollapsed()&&null!=o){var r={enabled:!0};r.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o),n=t.Variables.generateVariableFieldDom(n),(o=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.appendChild(n),r.callback=t.ContextMenu.callbackFactory(this,o),e.push(r)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(e){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()&&e.type==t.Events.BLOCK_MOVE&&e.blockId==this.id){var n=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(n?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var o=t.Events.getGroup();t.Events.setGroup(e.group),this.setEnabled(n),t.Events.setGroup(o)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",n),e},domToMutation:function(t){t="true"==t.getAttribute("divisor_input"),this.updateShape_(t)},updateShape_:function(t){var e=this.getInput("DIVISOR");t?e||this.appendValueInput("DIVISOR").setCheck("Number"):e&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator((function(t){t="DIVISIBLE_BY"==t,this.getSourceBlock().updateShape_(t)}))},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(t){"MODE"==t?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(t){this.updateType_(t.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(t){this.updateType_(t)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var e=new t.FieldTextInput("",t.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){var e="";this.arguments_.length&&(e=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(e){var n=t.utils.xml.createElement("mutation");e&&n.setAttribute("name",this.getFieldValue("NAME"));for(var o=0;o<this.argumentVarModels_.length;o++){var r=t.utils.xml.createElement("arg"),i=this.argumentVarModels_[o];r.setAttribute("name",i.name),r.setAttribute("varid",i.getId()),e&&this.paramIds_&&r.setAttribute("paramId",this.paramIds_[o]),n.appendChild(r)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(var n,o=0;n=e.childNodes[o];o++)if("arg"==n.nodeName.toLowerCase()){var r=n.getAttribute("name");n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(r),null!=(n=t.Variables.getOrCreateVariablePackage(this.workspace,n,r,""))?this.argumentVarModels_.push(n):console.log("Failed to create a variable with name "+r+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var n=t.utils.xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var o=t.utils.xml.createElement("statement");o.setAttribute("name","STACK"),n.appendChild(o);for(var r=0;r<this.arguments_.length;r++){var i=t.utils.xml.createElement("block");i.setAttribute("type","procedures_mutatorarg");var s=t.utils.xml.createElement("field");s.setAttribute("name","NAME");var a=t.utils.xml.createTextNode(this.arguments_[r]);s.appendChild(a),i.appendChild(s),s=t.utils.xml.createElement("next"),i.appendChild(s),o.appendChild(i),o=s}return e=t.Xml.domToBlock(n,e),"procedures_defreturn"==this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var n=e.getInputTargetBlock("STACK");n;){var o=n.getFieldValue("NAME");this.arguments_.push(o),o=this.workspace.getVariable(o,""),this.argumentVarModels_.push(o),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"==e,this.hasStatements_!=e)&&(e?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,n){var o=this.workspace.getVariableById(e);if(""==o.type){o=o.name,n=this.workspace.getVariableById(n);for(var r=!1,i=0;i<this.argumentVarModels_.length;i++)this.argumentVarModels_[i].getId()==e&&(this.arguments_[i]=n.name,this.argumentVarModels_[i]=n,r=!0);r&&(this.displayRenamedVar_(o,n.name),t.Procedures.mutateCallers(this))}},updateVarName:function(e){for(var n=e.name,o=!1,r=0;r<this.argumentVarModels_.length;r++)if(this.argumentVarModels_[r].getId()==e.getId()){var i=this.arguments_[r];this.arguments_[r]=n,o=!0}o&&(this.displayRenamedVar_(i,n),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(e,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var o,r=this.mutator.workspace_.getAllBlocks(!1),i=0;o=r[i];i++)"procedures_mutatorarg"==o.type&&t.Names.equals(e,o.getFieldValue("NAME"))&&o.setFieldValue(n,"NAME")},customContextMenu:function(e){if(!this.isInFlyout){var n={enabled:!0},o=this.getFieldValue("NAME");n.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",o);var r=t.utils.xml.createElement("mutation");for(r.setAttribute("name",o),o=0;o<this.arguments_.length;o++){var i=t.utils.xml.createElement("arg");i.setAttribute("name",this.arguments_[o]),r.appendChild(i)}if((o=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),o.appendChild(r),n.callback=t.ContextMenu.callbackFactory(this,o),e.push(n),!this.isCollapsed())for(o=0;o<this.argumentVarModels_.length;o++)n={enabled:!0},r=this.argumentVarModels_[o],n.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",r.name),r=t.Variables.generateVariableFieldDom(r),(i=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.appendChild(r),n.callback=t.ContextMenu.callbackFactory(this,i),e.push(n)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var e=new t.FieldTextInput("",t.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var e=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var n=this.getSourceBlock(),o=t.Mutator.findParentWs(n.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var r=(n.workspace.targetWorkspace||n.workspace).getAllBlocks(!1),i=e.toLowerCase(),s=0;s<r.length;s++)if(r[s].id!=this.getSourceBlock().id){var a=r[s].getFieldValue("NAME");if(a&&a.toLowerCase()==i)return null}return n.isInFlyout||((n=o.getVariable(e,""))&&n.name!=e&&o.renameVariableById(n.getId(),e),n||(n=o.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(n)),e},deleteIntermediateVars_:function(e){var n=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(var o=0;o<this.createdVariables_.length;o++){var r=this.createdVariables_[o];r.name!=e&&n.deleteVariableById(r.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,n){t.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(e,n){var o=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),r=o&&o.mutator&&o.mutator.isVisible();if(r||(this.quarkConnections_={},this.quarkIds_=null),n)if(e.join("\n")==this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!=e.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),o=this.rendered,this.rendered=!1;for(var i=0;i<this.arguments_.length;i++){var s=this.getInput("ARG"+i);s&&(s=s.connection.targetConnection,this.quarkConnections_[this.quarkIds_[i]]=s,r&&s&&-1==n.indexOf(this.quarkIds_[i])&&(s.disconnect(),s.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],i=0;i<this.arguments_.length;i++)e=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[i],""),this.argumentVarModels_.push(e);if(this.updateShape_(),this.quarkIds_=n)for(i=0;i<this.arguments_.length;i++)(n=this.quarkIds_[i])in this.quarkConnections_&&(s=this.quarkConnections_[n],t.Mutator.reconnect(s,this,"ARG"+i)||delete this.quarkConnections_[n]);(this.rendered=o)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var n=this.getField("ARGNAME"+e);if(n){t.Events.disable();try{n.setValue(this.arguments_[e])}finally{t.Events.enable()}}else n=new t.FieldLabel(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(t.ALIGN_RIGHT).appendField(n,"ARGNAME"+e).init()}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var n=0;n<this.arguments_.length;n++){var o=t.utils.xml.createElement("arg");o.setAttribute("name",this.arguments_[n]),e.appendChild(o)}return e},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e),e=[];for(var n,o=[],r=0;n=t.childNodes[r];r++)"arg"==n.nodeName.toLowerCase()&&(e.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(e,o)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type==t.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=t.Procedures.getDefinition(n,this.workspace))||n.type==this.defType_&&JSON.stringify(n.getVars())==JSON.stringify(this.arguments_)||(n=null),!n){t.Events.setGroup(e.group),e=t.utils.xml.createElement("xml"),(n=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var o=this.getRelativeToSurfaceXY(),r=o.y+2*t.SNAP_RADIUS;n.setAttribute("x",o.x+t.SNAP_RADIUS*(this.RTL?-1:1)),n.setAttribute("y",r),o=this.mutationToDom(),n.appendChild(o),(o=t.utils.xml.createElement("field")).setAttribute("name","NAME"),o.appendChild(t.utils.xml.createTextNode(this.getProcedureCall())),n.appendChild(o),e.appendChild(n),t.Xml.domToWorkspace(e,this.workspace),t.Events.setGroup(!1)}}else e.type==t.Events.BLOCK_DELETE?(n=this.getProcedureCall(),(n=t.Procedures.getDefinition(n,this.workspace))||(t.Events.setGroup(e.group),this.dispose(!0),t.Events.setGroup(!1))):e.type==t.Events.CHANGE&&"disabled"==e.element&&(n=this.getProcedureCall(),(n=t.Procedures.getDefinition(n,this.workspace))&&n.id==e.blockId&&((n=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(n)))},customContextMenu:function(e){if(this.workspace.isMovable()){var n={enabled:!0};n.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var o=this.getProcedureCall(),r=this.workspace;n.callback=function(){var e=t.Procedures.getDefinition(o,r);e&&(r.centerOnBlock(e.id),e.select())},e.push(n)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_=1==e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()){e=!1;var n=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(n.type)){e=!0;break}n=n.getSurroundParent()}while(n);e?("procedures_defnoreturn"==n.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=n.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==t.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type==t.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2==e&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var o=new t.FieldDropdown(this["WHERE_OPTIONS_"+e],(function(t){var o="FROM_START"==t||"FROM_END"==t;if(o!=n){var r=this.getSourceBlock();return r.updateAt_(e,o),r.setFieldValue(t,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(o,"WHERE"+e),1==e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var e=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(e),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var e=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(e),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var e=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var n=this;e=new t.FieldDropdown(e,(function(t){n.updateType_(t)})),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:function(t){this.outputConnection.setCheck("NUMBER"==t?"Number":"String")},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(t){this.updateType_(t.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var e=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],n=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),e=new t.FieldDropdown(e,(function(t){n.updateType_(t)})),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)if(t==o.name)return e.insertFieldAt(r,this.newQuote_(!0)),void e.insertFieldAt(r+2,this.newQuote_(!1));console.warn('field named "'+t+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new t.FieldImage(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("text_create_join_container");e.initSvg();for(var n=e.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var r=t.newBlock("text_create_join_item");r.initSvg(),n.connect(r.previousConnection),n=r.nextConnection}return e},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n;)e.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var o=this.getInput("ADD"+n).connection.targetConnection;o&&-1==e.indexOf(o)&&o.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var n=this.getInput("ADD"+e);t.valueConnection_=n&&n.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var n=this.appendValueInput("ADD"+e).setAlign(t.ALIGN_RIGHT);0==e&&n.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var e=this;this.setTooltip((function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")}))},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator((function(t){(t="FROM_START"==t||"FROM_END"==t)!=this.isAt_&&this.getSourceBlock().updateAt_(t)})),this.updateAt_(!0);var e=this;this.setTooltip((function(){var n=e.getFieldValue("WHERE"),o=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==n||"FROM_END"==n)&&(n="FROM_START"==n?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(o+="  "+n.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),o}))},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(n={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},i=this.getField("VAR").getText(),r={text:t.Msg.DELETE_VARIABLE.replace("%1",i),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(r));else{if("variables_get"==this.type)var n="variables_set",o=t.Msg.VARIABLES_GET_CREATE_SET;else n="variables_get",o=t.Msg.VARIABLES_SET_CREATE_GET;var r={enabled:0<this.workspace.remainingCapacity()},i=this.getField("VAR").getText();r.text=o.replace("%1",i),(o=t.utils.xml.createElement("field")).setAttribute("name","VAR"),o.appendChild(t.utils.xml.createTextNode(i)),(i=t.utils.xml.createElement("block")).setAttribute("type",n),i.appendChild(o),r.callback=t.ContextMenu.callbackFactory(this,i),e.push(r)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(e){return function(){var n=e.workspace,o=e.getField("VAR").getVariable();t.Variables.renameVariable(n,o)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();e.deleteVariableById(n.getId()),e.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(n={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},s=this.getField("VAR").getText(),i={text:t.Msg.DELETE_VARIABLE.replace("%1",s),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(i));else{var n=this.getFieldValue("VAR"),o=this.workspace.getVariableById(n).type;if("variables_get_dynamic"==this.type){n="variables_set_dynamic";var r=t.Msg.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",r=t.Msg.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()},s=this.getField("VAR").getText();i.text=r.replace("%1",s),(r=t.utils.xml.createElement("field")).setAttribute("name","VAR"),r.setAttribute("variabletype",o),r.appendChild(t.utils.xml.createTextNode(s)),(s=t.utils.xml.createElement("block")).setAttribute("type",n),s.appendChild(r),i.callback=t.ContextMenu.callbackFactory(this,s),e.push(i)}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.Variables.getVariable(this.workspace,e),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(e){return function(){var n=e.workspace,o=e.getField("VAR").getVariable();t.Variables.renameVariable(n,o)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();e.deleteVariableById(n.getId()),e.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;r=[n(86),n(168)],void 0===(i="function"===typeof(o=function(t,e){"use strict";return t.JavaScript=e,e})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;r=[n(87)],void 0===(i="function"===typeof(o=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.init=function(e){t.JavaScript.definitions_=Object.create(null),t.JavaScript.functionNames_=Object.create(null),t.JavaScript.variableDB_?t.JavaScript.variableDB_.reset():t.JavaScript.variableDB_=new t.Names(t.JavaScript.RESERVED_WORDS_),t.JavaScript.variableDB_.setVariableMap(e.getVariableMap());for(var n=[],o=t.Variables.allDeveloperVariables(e),r=0;r<o.length;r++)n.push(t.JavaScript.variableDB_.getName(o[r],t.Names.DEVELOPER_VARIABLE_TYPE));for(e=t.Variables.allUsedVarModels(e),r=0;r<e.length;r++)n.push(t.JavaScript.variableDB_.getName(e[r].getId(),t.VARIABLE_CATEGORY_NAME));n.length&&(t.JavaScript.definitions_.variables="var "+n.join(", ")+";")},t.JavaScript.finish=function(e){var n,o=[];for(n in t.JavaScript.definitions_)o.push(t.JavaScript.definitions_[n]);return delete t.JavaScript.definitions_,delete t.JavaScript.functionNames_,t.JavaScript.variableDB_.reset(),o.join("\n\n")+"\n\n\n"+e},t.JavaScript.scrubNakedValue=function(t){return t+";\n"},t.JavaScript.quote_=function(t){return"'"+(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(e){return e.split(/\n/g).map(t.JavaScript.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(e,n,o){var r="";if(!e.outputConnection||!e.outputConnection.targetConnection){var i=e.getCommentText();i&&(i=t.utils.string.wrap(i,t.JavaScript.COMMENT_WRAP-3),r+=t.JavaScript.prefixLines(i+"\n","// "));for(var s=0;s<e.inputList.length;s++)e.inputList[s].type==t.INPUT_VALUE&&(i=e.inputList[s].connection.targetBlock())&&(i=t.JavaScript.allNestedComments(i))&&(r+=t.JavaScript.prefixLines(i,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),r+n+(o=o?"":t.JavaScript.blockToCode(e))},t.JavaScript.getAdjusted=function(e,n,o,r,i){o=o||0,i=i||t.JavaScript.ORDER_NONE,e.workspace.options.oneBasedIndex&&o--;var s=e.workspace.options.oneBasedIndex?"1":"0";if(e=0<o?t.JavaScript.valueToCode(e,n,t.JavaScript.ORDER_ADDITION)||s:0>o?t.JavaScript.valueToCode(e,n,t.JavaScript.ORDER_SUBTRACTION)||s:r?t.JavaScript.valueToCode(e,n,t.JavaScript.ORDER_UNARY_NEGATION)||s:t.JavaScript.valueToCode(e,n,i)||s,t.isNumber(e))e=Number(e)+o,r&&(e=-e);else{if(0<o){e=e+" + "+o;var a=t.JavaScript.ORDER_ADDITION}else 0>o&&(e=e+" - "+-o,a=t.JavaScript.ORDER_SUBTRACTION);r&&(e=o?"-("+e+")":"-"+e,a=t.JavaScript.ORDER_UNARY_NEGATION),a=Math.floor(a),i=Math.floor(i),a&&i>=a&&(e="("+e+")")}return e},t.JavaScript.colour={},t.JavaScript.colour_picker=function(e){return[t.JavaScript.quote_(e.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(e){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(e){var n=t.JavaScript.valueToCode(e,"RED",t.JavaScript.ORDER_COMMA)||0,o=t.JavaScript.valueToCode(e,"GREEN",t.JavaScript.ORDER_COMMA)||0;return e=t.JavaScript.valueToCode(e,"BLUE",t.JavaScript.ORDER_COMMA)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+n+", "+o+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(e){var n=t.JavaScript.valueToCode(e,"COLOUR1",t.JavaScript.ORDER_COMMA)||"'#000000'",o=t.JavaScript.valueToCode(e,"COLOUR2",t.JavaScript.ORDER_COMMA)||"'#000000'";return e=t.JavaScript.valueToCode(e,"RATIO",t.JavaScript.ORDER_COMMA)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+n+", "+o+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(e){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(e){for(var n=Array(e.itemCount_),o=0;o<e.itemCount_;o++)n[o]=t.JavaScript.valueToCode(e,"ADD"+o,t.JavaScript.ORDER_COMMA)||"null";return["["+n.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(e){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(e,"ITEM",t.JavaScript.ORDER_COMMA)||"null")+", "+(e=t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_COMMA)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(e){return[(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(e){return["!"+(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(e){var n="FIRST"==e.getFieldValue("END")?"indexOf":"lastIndexOf",o=t.JavaScript.valueToCode(e,"FIND",t.JavaScript.ORDER_NONE)||"''";return n=(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+n+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.JavaScript.ORDER_ADDITION]:[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(e){var n=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FROM_START",r=t.JavaScript.valueToCode(e,"VALUE","RANDOM"==o?t.JavaScript.ORDER_COMMA:t.JavaScript.ORDER_MEMBER)||"[]";switch(o){case"FIRST":if("GET"==n)return[r+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==n)return[r+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==n)return r+".shift();\n";break;case"LAST":if("GET"==n)return[r+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==n)return[r+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==n)return r+".pop();\n";break;case"FROM_START":if(e=t.JavaScript.getAdjusted(e,"AT"),"GET"==n)return[r+"["+e+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==n)return[r+".splice("+e+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==n)return r+".splice("+e+", 1);\n";break;case"FROM_END":if(e=t.JavaScript.getAdjusted(e,"AT",1,!0),"GET"==n)return[r+".slice("+e+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==n)return[r+".splice("+e+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==n)return r+".splice("+e+", 1);";break;case"RANDOM":if(r=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+r+", "+("GET"!=n)+")","GET"==n||"GET_REMOVE"==n)return[r,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==n)return r+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(e){function n(){if(o.match(/^\w+$/))return"";var e=t.JavaScript.variableDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),n="var "+e+" = "+o+";\n";return o=e,n}var o=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",r=e.getFieldValue("MODE")||"GET",i=e.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(i){case"FIRST":if("SET"==r)return o+"[0] = "+s+";\n";if("INSERT"==r)return o+".unshift("+s+");\n";break;case"LAST":if("SET"==r)return(e=n())+(o+"[")+o+".length - 1] = "+s+";\n";if("INSERT"==r)return o+".push("+s+");\n";break;case"FROM_START":if(i=t.JavaScript.getAdjusted(e,"AT"),"SET"==r)return o+"["+i+"] = "+s+";\n";if("INSERT"==r)return o+".splice("+i+", 0, "+s+");\n";break;case"FROM_END":if(i=t.JavaScript.getAdjusted(e,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),e=n(),"SET"==r)return e+(o+"[")+o+".length - "+i+"] = "+s+";\n";if("INSERT"==r)return e+(o+".splice(")+o+".length - "+i+", 0, "+s+");\n";break;case"RANDOM":if(e=n(),e+="var "+(i=t.JavaScript.variableDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+o+".length);\n","SET"==r)return e+(o+"[")+i+"] = "+s+";\n";if("INSERT"==r)return e+(o+".splice(")+i+", 0, "+s+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(t,e,n){return"FIRST"==e?"0":"FROM_END"==e?t+".length - 1 - "+n:"LAST"==e?t+".length - 1":n},t.JavaScript.lists_getSublist=function(e){var n=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",o=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2");if("FIRST"==o&&"LAST"==r)n+=".slice(0)";else if(n.match(/^\w+$/)||"FROM_END"!=o&&"FROM_START"==r){switch(o){case"FROM_START":var i=t.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":i=n+".length - "+(i=t.JavaScript.getAdjusted(e,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(r){case"FROM_START":e=t.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":e=n+".length - "+(e=t.JavaScript.getAdjusted(e,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":e=n+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}n=n+".slice("+i+", "+e+")"}else{i=t.JavaScript.getAdjusted(e,"AT1"),e=t.JavaScript.getAdjusted(e,"AT2");var s=t.JavaScript.lists.getIndex_,a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};n=t.JavaScript.provideFunction_("subsequence"+a[o]+a[r],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==r||"FROM_START"==r?", at2":"")+") {","  var start = "+s("sequence",o,"at1")+";","  var end = "+s("sequence",r,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+n+("FROM_END"==o||"FROM_START"==o?", "+i:"")+("FROM_END"==r||"FROM_START"==r?", "+e:"")+")"}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(e){var n=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",o="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[n+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+e+'", '+o+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(e){var n=t.JavaScript.valueToCode(e,"INPUT",t.JavaScript.ORDER_MEMBER),o=t.JavaScript.valueToCode(e,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(e=e.getFieldValue("MODE")))n||(n="''"),e="split";else{if("JOIN"!=e)throw Error("Unknown mode: "+e);n||(n="[]"),e="join"}return[n+"."+e+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(e){return[(t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(e){var n=0,o="";t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,e));do{var r=t.JavaScript.valueToCode(e,"IF"+n,t.JavaScript.ORDER_NONE)||"false",i=t.JavaScript.statementToCode(e,"DO"+n);t.JavaScript.STATEMENT_SUFFIX&&(i=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e),t.JavaScript.INDENT)+i),o+=(0<n?" else ":"")+"if ("+r+") {\n"+i+"}",++n}while(e.getInput("IF"+n));return(e.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(i=t.JavaScript.statementToCode(e,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(i=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e),t.JavaScript.INDENT)+i),o+=" else {\n"+i+"}"),o+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(e){var n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],o="=="==n||"!="==n?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(e,"A",o)||"0")+" "+n+" "+(e=t.JavaScript.valueToCode(e,"B",o)||"0"),o]},t.JavaScript.logic_operation=function(e){var n="AND"==e.getFieldValue("OP")?"&&":"||",o="&&"==n?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,r=t.JavaScript.valueToCode(e,"A",o);if(e=t.JavaScript.valueToCode(e,"B",o),r||e){var i="&&"==n?"true":"false";r||(r=i),e||(e=i)}else e=r="false";return[r+" "+n+" "+e,o]},t.JavaScript.logic_negate=function(e){var n=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(e,"BOOL",n)||"true"),n]},t.JavaScript.logic_boolean=function(e){return["TRUE"==e.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(e){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(e){return[(t.JavaScript.valueToCode(e,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(e,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(e=t.JavaScript.valueToCode(e,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(e){var n=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):t.JavaScript.valueToCode(e,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",o=t.JavaScript.statementToCode(e,"DO");o=t.JavaScript.addLoopTrap(o,e),e="";var r=t.JavaScript.variableDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),i=n;return n.match(/^\w+$/)||t.isNumber(n)||(e+="var "+(i=t.JavaScript.variableDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+n+";\n"),e+"for (var "+r+" = 0; "+r+" < "+i+"; "+r+"++) {\n"+o+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(e){var n="UNTIL"==e.getFieldValue("MODE"),o=t.JavaScript.valueToCode(e,"BOOL",n?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",r=t.JavaScript.statementToCode(e,"DO");return n&&(o="!"+o),"while ("+o+") {\n"+(r=t.JavaScript.addLoopTrap(r,e))+"}\n"},t.JavaScript.controls_for=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),o=t.JavaScript.valueToCode(e,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",r=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",i=t.JavaScript.valueToCode(e,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",s=t.JavaScript.statementToCode(e,"DO");if(s=t.JavaScript.addLoopTrap(s,e),t.isNumber(o)&&t.isNumber(r)&&t.isNumber(i)){var a=Number(o)<=Number(r);e="for ("+n+" = "+o+"; "+n+(a?" <= ":" >= ")+r+"; "+n,e=(1==(n=Math.abs(Number(i)))?e+(a?"++":"--"):e+(a?" += ":" -= ")+n)+") {\n"+s+"}\n"}else e="",a=o,o.match(/^\w+$/)||t.isNumber(o)||(e+="var "+(a=t.JavaScript.variableDB_.getDistinctName(n+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),o=r,r.match(/^\w+$/)||t.isNumber(r)||(e+="var "+(o=t.JavaScript.variableDB_.getDistinctName(n+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),e+="var "+(r=t.JavaScript.variableDB_.getDistinctName(n+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",e=(e=t.isNumber(i)?e+(Math.abs(i)+";\n"):e+"Math.abs("+i+");\n")+"if ("+a+" > "+o+") {\n"+(t.JavaScript.INDENT+r)+" = -"+r+";\n",e+="}\n",e+="for ("+n+" = "+a+"; "+r+" >= 0 ? "+n+" <= "+o+" : "+n+" >= "+o+"; "+n+" += "+r+") {\n"+s+"}\n";return e},t.JavaScript.controls_forEach=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),o=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",r=t.JavaScript.statementToCode(e,"DO");r=t.JavaScript.addLoopTrap(r,e),e="";var i=o;return o.match(/^\w+$/)||(e+="var "+(i=t.JavaScript.variableDB_.getDistinctName(n+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),e+"for (var "+(o=t.JavaScript.variableDB_.getDistinctName(n+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+i+") {\n"+(r=t.JavaScript.INDENT+n+" = "+i+"["+o+"];\n"+r)+"}\n"},t.JavaScript.controls_flow_statements=function(e){var n="";if(t.JavaScript.STATEMENT_PREFIX&&(n+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,e)),t.JavaScript.STATEMENT_SUFFIX&&(n+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e)),t.JavaScript.STATEMENT_PREFIX){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(e);o&&!o.suppressPrefixSuffix&&(n+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,o))}switch(e.getFieldValue("FLOW")){case"BREAK":return n+"break;\n";case"CONTINUE":return n+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(e){return[e=Number(e.getFieldValue("NUM")),0<=e?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(e){var n={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_COMMA]}[e.getFieldValue("OP")],o=n[0];n=n[1];var r=t.JavaScript.valueToCode(e,"A",n)||"0";return e=t.JavaScript.valueToCode(e,"B",n)||"0",o?[r+o+e,n]:["Math.pow("+r+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(e){var n=e.getFieldValue("OP");if("NEG"==n)return"-"==(e=t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,t.JavaScript.ORDER_UNARY_NEGATION];switch(e="SIN"==n||"COS"==n||"TAN"==n?t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_NONE)||"0",n){case"ABS":var o="Math.abs("+e+")";break;case"ROOT":o="Math.sqrt("+e+")";break;case"LN":o="Math.log("+e+")";break;case"EXP":o="Math.exp("+e+")";break;case"POW10":o="Math.pow(10,"+e+")";break;case"ROUND":o="Math.round("+e+")";break;case"ROUNDUP":o="Math.ceil("+e+")";break;case"ROUNDDOWN":o="Math.floor("+e+")";break;case"SIN":o="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":o="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":o="Math.tan("+e+" / 180 * Math.PI)"}if(o)return[o,t.JavaScript.ORDER_FUNCTION_CALL];switch(n){case"LOG10":o="Math.log("+e+") / Math.log(10)";break;case"ASIN":o="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":o="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":o="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+n)}return[o,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(e){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[e.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(e){var n=t.JavaScript.valueToCode(e,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",o=e.getFieldValue("PROPERTY");if("PRIME"==o)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"EVEN":var r=n+" % 2 == 0";break;case"ODD":r=n+" % 2 == 1";break;case"WHOLE":r=n+" % 1 == 0";break;case"POSITIVE":r=n+" > 0";break;case"NEGATIVE":r=n+" < 0";break;case"DIVISIBLE_BY":r=n+" % "+(e=t.JavaScript.valueToCode(e,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[r,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(e){var n=t.JavaScript.valueToCode(e,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(e=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+e+" == 'number' ? "+e+" : 0) + "+n+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(e){var n=e.getFieldValue("OP");switch(n){case"SUM":e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",e+=".reduce(function(x, y) {return x + y;})";break;case"MIN":e="Math.min.apply(null, "+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_COMMA)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_COMMA)||"[]")+")";break;case"AVERAGE":e=(n=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":e=(n=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":e=(n=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":e=(n=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":e=(n=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+n)}return[e,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(e){return[(t.JavaScript.valueToCode(e,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(e=t.JavaScript.valueToCode(e,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(e){return["Math.min(Math.max("+(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_COMMA)||"0")+", "+(t.JavaScript.valueToCode(e,"LOW",t.JavaScript.ORDER_COMMA)||"0")+"), "+(e=t.JavaScript.valueToCode(e,"HIGH",t.JavaScript.ORDER_COMMA)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(e){var n=t.JavaScript.valueToCode(e,"FROM",t.JavaScript.ORDER_COMMA)||"0";return e=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_COMMA)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+n+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(e){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(e){var n=t.JavaScript.valueToCode(e,"X",t.JavaScript.ORDER_COMMA)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(e,"Y",t.JavaScript.ORDER_COMMA)||"0")+", "+n+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),o="";t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,e)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e)),o&&(o=t.JavaScript.prefixLines(o,t.JavaScript.INDENT));var r="";t.JavaScript.INFINITE_LOOP_TRAP&&(r=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,e),t.JavaScript.INDENT));var i=t.JavaScript.statementToCode(e,"STACK"),s=t.JavaScript.valueToCode(e,"RETURN",t.JavaScript.ORDER_NONE)||"",a="";i&&s&&(a=o),s&&(s=t.JavaScript.INDENT+"return "+s+";\n");for(var l=[],u=e.getVars(),c=0;c<u.length;c++)l[c]=t.JavaScript.variableDB_.getName(u[c],t.VARIABLE_CATEGORY_NAME);return o="function "+n+"("+l.join(", ")+") {\n"+o+r+i+a+s+"}",o=t.JavaScript.scrub_(e,o),t.JavaScript.definitions_["%"+n]=o,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(e){for(var n=t.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),o=[],r=e.getVars(),i=0;i<r.length;i++)o[i]=t.JavaScript.valueToCode(e,"ARG"+i,t.JavaScript.ORDER_COMMA)||"null";return[n+"("+o.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(e){return t.JavaScript.procedures_callreturn(e)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(e){var n="if ("+(t.JavaScript.valueToCode(e,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(n+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e),t.JavaScript.INDENT)),e.hasReturnValue_?(e=t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_NONE)||"null",n+=t.JavaScript.INDENT+"return "+e+";\n"):n+=t.JavaScript.INDENT+"return;\n",n+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(e){return[t.JavaScript.quote_(e.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(e){return-1!=(e=t.JavaScript.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("\n")&&(e="("+e+")"),[e,t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text.forceString_=function(e){return t.JavaScript.text.forceString_.strRegExp.test(e)?e:"String("+e+")"},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(e){switch(e.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return e=t.JavaScript.valueToCode(e,"ADD0",t.JavaScript.ORDER_NONE)||"''",[e=t.JavaScript.text.forceString_(e),t.JavaScript.ORDER_FUNCTION_CALL];case 2:var n=t.JavaScript.valueToCode(e,"ADD0",t.JavaScript.ORDER_NONE)||"''";return e=t.JavaScript.valueToCode(e,"ADD1",t.JavaScript.ORDER_NONE)||"''",[e=t.JavaScript.text.forceString_(n)+" + "+t.JavaScript.text.forceString_(e),t.JavaScript.ORDER_ADDITION];default:n=Array(e.itemCount_);for(var o=0;o<e.itemCount_;o++)n[o]=t.JavaScript.valueToCode(e,"ADD"+o,t.JavaScript.ORDER_COMMA)||"''";return[e="["+n.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return e=t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''",n+" += "+t.JavaScript.text.forceString_(e)+";\n"},t.JavaScript.text_length=function(e){return[(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_FUNCTION_CALL)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(e){return["!"+(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(e){var n="FIRST"==e.getFieldValue("END")?"indexOf":"lastIndexOf",o=t.JavaScript.valueToCode(e,"FIND",t.JavaScript.ORDER_NONE)||"''";return n=(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+n+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.JavaScript.ORDER_ADDITION]:[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(e){var n=e.getFieldValue("WHERE")||"FROM_START",o=t.JavaScript.valueToCode(e,"VALUE","RANDOM"==n?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(n){case"FIRST":return[o+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[o+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[o+".charAt("+(e=t.JavaScript.getAdjusted(e,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[o+".slice("+(e=t.JavaScript.getAdjusted(e,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(t,e,n){return"FIRST"==e?"0":"FROM_END"==e?t+".length - 1 - "+n:"LAST"==e?t+".length - 1":n},t.JavaScript.text_getSubstring=function(e){var n=t.JavaScript.valueToCode(e,"STRING",t.JavaScript.ORDER_FUNCTION_CALL)||"''",o=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2");if("FIRST"!=o||"LAST"!=r)if(n.match(/^'?\w+'?$/)||"FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=r&&"LAST"!=r){switch(o){case"FROM_START":var i=t.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":i=n+".length - "+(i=t.JavaScript.getAdjusted(e,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(r){case"FROM_START":e=t.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":e=n+".length - "+(e=t.JavaScript.getAdjusted(e,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":e=n+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}n=n+".slice("+i+", "+e+")"}else{i=t.JavaScript.getAdjusted(e,"AT1"),e=t.JavaScript.getAdjusted(e,"AT2");var s=t.JavaScript.text.getIndex_,a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};n=t.JavaScript.provideFunction_("subsequence"+a[o]+a[r],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==r||"FROM_START"==r?", at2":"")+") {","  var start = "+s("sequence",o,"at1")+";","  var end = "+s("sequence",r,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+n+("FROM_END"==o||"FROM_START"==o?", "+i:"")+("FROM_END"==r||"FROM_START"==r?", "+e:"")+")"}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(e){var n={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=t.JavaScript.valueToCode(e,"TEXT",n?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[n?e+n:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(e){var n={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(e){return"window.alert("+(t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(e){var n="window.prompt("+(e.getField("TEXT")?t.JavaScript.quote_(e.getFieldValue("TEXT")):t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==e.getFieldValue("TYPE")&&(n="Number("+n+")"),[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(e){var n=t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_MEMBER)||"''";return e=t.JavaScript.valueToCode(e,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+n+", "+e+")",t.JavaScript.ORDER_SUBTRACTION]},t.JavaScript.text_replace=function(e){var n=t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_MEMBER)||"''",o=t.JavaScript.valueToCode(e,"FROM",t.JavaScript.ORDER_NONE)||"''";return e=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+n+", "+o+", "+e+")",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_reverse=function(e){return[(t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_MEMBER]},t.JavaScript.variables={},t.JavaScript.variables_get=function(e){return[t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(e){var n=t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+n+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){(function(e){t.exports=c;var o=n(172),r=n(88).AbstractLevelDOWN,i=n(39),s=n(178),a=n(180),l=n(181),u=n(187);function c(t){if(!(this instanceof c))return new c(t);if(!t)throw new Error("constructor requires at least a location argument");this.IDBOptions={},this.location=t}i.inherits(c,r),c.prototype._open=function(t,e){var n=this,r={storeName:this.location,autoIncrement:!1,keyPath:null,onStoreReady:function(){e&&e(null,n.idb)},onError:function(t){e&&e(t)}};l(r,t),this.IDBOptions=r,this.idb=new o(r)},c.prototype._get=function(t,n,o){this.idb.get(t,(function(r){if(void 0===r)return o(new Error("NotFound"));var i=!0;return!1===n.asBuffer&&(i=!1),n.raw&&(i=!1),i&&(r=r instanceof Uint8Array?u(r):new e(String(r))),o(null,r,t)}),o)},c.prototype._del=function(t,e,n){this.idb.remove(t,n,n)},c.prototype._put=function(t,n,o,r){n instanceof ArrayBuffer&&(n=u(new Uint8Array(n)));var i=this.convertEncoding(t,n,o);e.isBuffer(i.value)&&("function"===typeof n.toArrayBuffer?i.value=new Uint8Array(n.toArrayBuffer()):i.value=new Uint8Array(n)),this.idb.put(i.key,i.value,(function(){r()}),r)},c.prototype.convertEncoding=function(t,e,n){if(n.raw)return{key:t,value:e};if(e){var o=e.toString();"NaN"===o&&(e="NaN")}var r=n.valueEncoding,i={key:t,value:e};return!e||r&&"binary"===r||"object"!==typeof i.value&&(i.value=o),i},c.prototype.iterator=function(t){return"object"!==typeof t&&(t={}),new s(this.idb,t)},c.prototype._batch=function(t,e,n){var o,r,i,s,a=[];if(0===t.length)return setTimeout(n,0);for(o=0;o<t.length;o++){i={},s=t[o],a[o]=i;var l=this.convertEncoding(s.key,s.value,e);for(r in s.key=l.key,s.value=l.value,s)"type"===r&&"del"==s[r]?i[r]="remove":i[r]=s[r]}return this.idb.batch(a,(function(){n()}),n)},c.prototype._close=function(t){this.idb.db.close(),t()},c.prototype._approximateSize=function(t,e,n){var o=new Error("Not implemented");if(n)return n(o);throw o},c.prototype._isBuffer=function(t){return e.isBuffer(t)},c.destroy=function(t,e){if("object"===typeof t)var n=t.IDBOptions.storePrefix||"IDBWrapper-",o=t.location;else n="IDBWrapper-",o=t;var r=indexedDB.deleteDatabase(n+o);r.onsuccess=function(){e()},r.onerror=function(t){e(t)}};c.prototype._checkKeyValue=function(t,e){return null===t||void 0===t||null===t||void 0===t?new Error(e+" cannot be `null` or `undefined`"):a(t)&&0===t.byteLength?new Error(e+" cannot be an empty ArrayBuffer"):""===String(t)?new Error(e+" cannot be an empty String"):0===t.length?new Error(e+" cannot be an empty Array"):void 0}}).call(this,n(13).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],o=e[1];return 3*(n+o)/4-o},e.toByteArray=function(t){var e,n,o=u(t),s=o[0],a=o[1],l=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,l=n-r;a<l;a+=s)i.push(c(t,a,a+s>l?l:a+s));1===r?(e=t[n-1],i.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"="));return i.join("")};for(var o=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)o[a]=s[a],r[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,i,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,o,r){var i,s,a=8*r-o-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?r-1:0,p=n?-1:1,d=t[e+h];for(h+=p,i=d&(1<<-c)-1,d>>=-c,c+=a;c>0;i=256*i+t[e+h],h+=p,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=o;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,o),i-=u}return(d?-1:1)*s*Math.pow(2,i-o)},e.write=function(t,e,n,o,r,i){var s,a,l,u=8*i-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=o?0:i-1,f=o?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;t[n+d]=255&s,d+=f,s/=256,u-=8);t[n+d-f]|=128*g}},function(t,e,n){var o,r;!function(i,s,a){"use strict";o=function(){var t=function(t){throw t},e=function(){},n={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:t,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},o=function(t,e){for(var o in"undefined"==typeof e&&"function"==typeof t&&(e=t),"[object Object]"!=Object.prototype.toString.call(t)&&(t={}),n)this[o]="undefined"!=typeof t[o]?t[o]:n[o];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,e&&(this.onStoreReady=e);var r="object"==typeof window?window:self,i=this.implementationPreference.filter((function(t){return t in r}));this.implementation=i[0],this.idb=r[this.implementation],this.keyRange=r.IDBKeyRange||r.webkitIDBKeyRange||r.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},r={constructor:o,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var t=this.idb.open(this.dbName,this.dbVersion),e=!1;t.onerror=function(t){if(a(t))this.onError(new Error("The version number provided is lower than the existing one."));else{var e;if(t.target.error)e=t.target.error;else{var n="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in t.target&&(n+=" with error code "+t.target.errorCode),e=new Error(n)}this.onError(e)}}.bind(this),t.onsuccess=function(t){if(!e)if(this.db)this.onStoreReady();else if(this.db=t.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var n=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=n.objectStore(this.storeName);var o=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach((function(t){var n=t.name;if(!n)return e=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(t),this.hasIndex(n)){var r=this.store.index(n);this.indexComplies(r,t)||(e=!0,this.onError(new Error('Cannot modify index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),o.splice(o.indexOf(n),1)}else e=!0,this.onError(new Error('Cannot create new index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))}),this),o.length&&(e=!0,this.onError(new Error('Cannot delete index(es) "'+o.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),e||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),t.onupgradeneeded=function(t){if(this.db=t.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=t.target.transaction.objectStore(this.storeName);else{var n={autoIncrement:this.autoIncrement};null!==this.keyPath&&(n.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,n)}var o=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach((function(t){var n=t.name;if(n||(e=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(t),this.hasIndex(n)){var r=this.store.index(n);this.indexComplies(r,t)||(this.store.deleteIndex(n),this.store.createIndex(n,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})),o.splice(o.indexOf(n),1)}else this.store.createIndex(n,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})}),this),o.length&&o.forEach((function(t){this.store.deleteIndex(t)}),this)}.bind(this)},deleteDatabase:function(t,e){if(this.idb.deleteDatabase){this.db.close();var n=this.idb.deleteDatabase(this.dbName);n.onsuccess=t,n.onerror=e}else e(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(n,o,r,i){null!==this.keyPath&&(i=r,r=o,o=n),i||(i=t),r||(r=e);var s,a=!1,l=null,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);return u.oncomplete=function(){(a?r:i)(l)},u.onabort=i,u.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(o),s=u.objectStore(this.storeName).put(o)):s=u.objectStore(this.storeName).put(o,n),s.onsuccess=function(t){a=!0,l=t.target.result},s.onerror=i,u},get:function(n,o,r){r||(r=t),o||(o=e);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(i?o:r)(s)},a.onabort=r,a.onerror=r;var l=a.objectStore(this.storeName).get(n);return l.onsuccess=function(t){i=!0,s=t.target.result},l.onerror=r,a},remove:function(n,o,r){r||(r=t),o||(o=e);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){(i?o:r)(s)},a.onabort=r,a.onerror=r;var l=a.objectStore(this.storeName).delete(n);return l.onsuccess=function(t){i=!0,s=t.target.result},l.onerror=r,a},batch:function(n,o,r){if(r||(r=t),o||(o=e),"[object Array]"!=Object.prototype.toString.call(n))r(new Error("dataArray argument must be of type Array."));else if(0===n.length)return o(!0);var i=n.length,s=!1,a=!1,l=this.db.transaction([this.storeName],this.consts.READ_WRITE);l.oncomplete=function(){(a?o:r)(a)},l.onabort=r,l.onerror=r;var u=function(){0!==--i||s||(s=!0,a=!0)};return n.forEach((function(t){var e=t.type,n=t.key,o=t.value,i=function(t){l.abort(),s||(s=!0,r(t,e,n))};if("remove"==e){var a=l.objectStore(this.storeName).delete(n);a.onsuccess=u,a.onerror=i}else if("put"==e){var c;null!==this.keyPath?(this._addIdPropertyIfNeeded(o),c=l.objectStore(this.storeName).put(o)):c=l.objectStore(this.storeName).put(o,n),c.onsuccess=u,c.onerror=i}}),this),l},putBatch:function(t,e,n){var o=t.map((function(t){return{type:"put",value:t}}));return this.batch(o,e,n)},upsertBatch:function(n,o,r,i){"function"==typeof o&&(i=r=o,o={}),i||(i=t),r||(r=e),o||(o={}),"[object Array]"!=Object.prototype.toString.call(n)&&i(new Error("dataArray argument must be of type Array."));var s=o.keyField||this.keyPath,a=n.length,l=!1,u=!1,c=0,h=this.db.transaction([this.storeName],this.consts.READ_WRITE);h.oncomplete=function(){u?r(n):i(!1)},h.onabort=i,h.onerror=i;var p=function(t){n[c++][s]=t.target.result,0!==--a||l||(l=!0,u=!0)};return n.forEach((function(t){var e,n=t.key,o=function(t){h.abort(),l||(l=!0,i(t))};null!==this.keyPath?(this._addIdPropertyIfNeeded(t),e=h.objectStore(this.storeName).put(t)):e=h.objectStore(this.storeName).put(t,n),e.onsuccess=p,e.onerror=o}),this),h},removeBatch:function(t,e,n){var o=t.map((function(t){return{type:"remove",key:t}}));return this.batch(o,e,n)},getBatch:function(n,o,r,i){if(r||(r=t),o||(o=e),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(n))r(new Error("keyArray argument must be of type Array."));else if(0===n.length)return o([]);var s=[],a=n.length,l=!1,u=null,c=this.db.transaction([this.storeName],this.consts.READ_ONLY);c.oncomplete=function(){(l?o:r)(u)},c.onabort=r,c.onerror=r;var h=function(t){t.target.result||"dense"==i?s.push(t.target.result):"sparse"==i&&s.length++,0===--a&&(!0,l=!0,u=s)};return n.forEach((function(t){var e=function(t){!0,u=t,r(t),c.abort()},n=c.objectStore(this.storeName).get(t);n.onsuccess=h,n.onerror=e}),this),c},getAll:function(n,o){o||(o=t),n||(n=e);var r=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=r.objectStore(this.storeName);return i.getAll?this._getAllNative(r,i,n,o):this._getAllCursor(r,i,n,o),r},_getAllNative:function(t,e,n,o){var r=!1,i=null;t.oncomplete=function(){(r?n:o)(i)},t.onabort=o,t.onerror=o;var s=e.getAll();s.onsuccess=function(t){r=!0,i=t.target.result},s.onerror=o},_getAllCursor:function(t,e,n,o){var r=[],i=!1,s=null;t.oncomplete=function(){(i?n:o)(s)},t.onabort=o,t.onerror=o;var a=e.openCursor();a.onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):(i=!0,s=r)},a.onError=o},clear:function(n,o){o||(o=t),n||(n=e);var r=!1,i=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){(r?n:o)(i)},s.onabort=o,s.onerror=o;var a=s.objectStore(this.storeName).clear();return a.onsuccess=function(t){r=!0,i=t.target.result},a.onerror=o,s},_addIdPropertyIfNeeded:function(t){"undefined"==typeof t[this.keyPath]&&(t[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(t){return this.store.indexNames.contains(t)},normalizeIndexData:function(t){t.keyPath=t.keyPath||t.name,t.unique=!!t.unique,t.multiEntry=!!t.multiEntry},indexComplies:function(t,e){return["keyPath","unique","multiEntry"].every((function(n){if("multiEntry"==n&&void 0===t[n]&&!1===e[n])return!0;if("keyPath"==n&&"[object Array]"==Object.prototype.toString.call(e[n])){var o=e.keyPath,r=t.keyPath;if("string"==typeof r)return o.toString()==r;if("function"!=typeof r.contains&&"function"!=typeof r.indexOf)return!1;if(r.length!==o.length)return!1;for(var i=0,s=o.length;i<s;i++)if(!(r.contains&&r.contains(o[i])||r.indexOf(-1!==o[i])))return!1;return!0}return e[n]==t[n]}))},iterate:function(e,n){var o="desc"==(n=s({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:t,limit:1/0,offset:0,allowItemRejection:!1},n||{})).order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(o+="_NO_DUPLICATE");var r=!1,i=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),a=i.objectStore(this.storeName);n.index&&(a=a.index(n.index));var l=0;i.oncomplete=function(){r?n.onEnd?n.onEnd():e(null):n.onError(null)},i.onabort=n.onError,i.onerror=n.onError;var u=a.openCursor(n.keyRange,this.consts[o]);return u.onerror=n.onError,u.onsuccess=function(t){var o=t.target.result;if(o)if(n.offset)o.advance(n.offset),n.offset=0;else{var s=e(o.value,o,i);n.allowItemRejection&&!1===s||l++,n.autoContinue&&(l+n.offset<n.limit?o.continue():r=!0)}else r=!0},i},query:function(t,e){var n=[],o=0;return(e=e||{}).autoContinue=!0,e.writeAccess=!1,e.allowItemRejection=!!e.filter,e.onEnd=function(){t(n,o)},this.iterate((function(t){o++;var r=!e.filter||e.filter(t);return!1!==r&&n.push(t),r}),e)},count:function(e,n){var o=(n=s({index:null,keyRange:null},n||{})).onError||t,r=!1,i=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(r?e:o)(i)},a.onabort=o,a.onerror=o;var l=a.objectStore(this.storeName);n.index&&(l=l.index(n.index));var u=l.count(n.keyRange);return u.onsuccess=function(t){r=!0,i=t.target.result},u.onError=o,a},makeKeyRange:function(t){var e,n="undefined"!=typeof t.lower,o="undefined"!=typeof t.upper;switch(!0){case"undefined"!=typeof t.only:e=this.keyRange.only(t.only);break;case n&&o:e=this.keyRange.bound(t.lower,t.upper,t.excludeLower,t.excludeUpper);break;case n:e=this.keyRange.lowerBound(t.lower,t.excludeLower);break;case o:e=this.keyRange.upperBound(t.upper,t.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return e}},i={};function s(t,e){var n,o;for(n in e)(o=e[n])!==i[n]&&o!==t[n]&&(t[n]=o);return t}function a(t){return"error"in t.target?"VersionError"==t.target.error.name:"errorCode"in t.target&&12==t.target.errorCode}return o.prototype=r,o.version=r.version,o},void 0===(r="function"===typeof o?o.call(e,n,e,t):o)||(t.exports=r)}()},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t}},function(t,e,n){(function(e){function n(t){this.db=t,this._ended=!1,this._nexting=!1}n.prototype.next=function(t){var n=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return n._ended?t(new Error("cannot call next() after end()")):n._nexting?t(new Error("cannot call next() before previous next() has completed")):(n._nexting=!0,"function"==typeof n._next?n._next((function(){n._nexting=!1,t.apply(null,arguments)})):void e.nextTick((function(){n._nexting=!1,t()})))},n.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=n}).call(this,n(9))},function(t,e,n){(function(e){function n(t){this._db=t,this._operations=[],this._written=!1}n.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},n.prototype.put=function(t,e){this._checkWritten();var n=this._db._checkKeyValue(t,"key",this._db._isBuffer);if(n)throw n;if(n=this._db._checkKeyValue(e,"value",this._db._isBuffer))throw n;return this._db._isBuffer(t)||(t=String(t)),this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._put?this._put(t,e):this._operations.push({type:"put",key:t,value:e}),this},n.prototype.del=function(t){this._checkWritten();var e=this._db._checkKeyValue(t,"key",this._db._isBuffer);if(e)throw e;return this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._del?this._del(t):this._operations.push({type:"del",key:t}),this},n.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},n.prototype.write=function(t,n){if(this._checkWritten(),"function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(n):"function"==typeof this._db._batch?this._db._batch(this._operations,t,n):void e.nextTick(n)},t.exports=n}).call(this,n(9))},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var o=n(39),r=n(88).AbstractIterator,i=n(179);function s(t,e){e||(e={}),this.options=e,r.call(this,t),this._order=e.reverse?"DESC":"ASC",this._limit=e.limit,this._count=0,this._done=!1;var n=i.lowerBound(e),o=i.upperBound(e);try{this._keyRange=n||o?this.db.makeKeyRange({lower:n,upper:o,excludeLower:i.lowerBoundExclusive(e),excludeUpper:i.upperBoundExclusive(e)}):null}catch(s){this._keyRangeError=!0}this.callback=null}t.exports=s,o.inherits(s,r),s.prototype.createIterator=function(){var t=this;t.iterator=t.db.iterate((function(){t.onItem.apply(t,arguments)}),{keyRange:t._keyRange,autoContinue:!1,order:t._order,onError:function(t){console.log("horrible error",t)}})},s.prototype.onItem=function(t,e,n){if(!e&&this.callback)return this.callback(),void(this.callback=!1);var o=!0;this._limit&&this._limit>0&&this._count++>=this._limit&&(o=!1),o&&this.callback(!1,e.key,e.value),e&&e.continue()},s.prototype._next=function(t){return t?this._keyRangeError?t():(this._started||(this.createIterator(),this._started=!0),void(this.callback=t)):new Error("next() requires a callback argument")}},function(t,e,n){(function(t){function n(t){return void 0!==t&&""!==t}function o(t,e){return Object.hasOwnProperty.call(t,e)}function r(t,e){return Object.hasOwnProperty.call(t,e)&&e}e.compare=function(e,n){if(t.isBuffer(e)){for(var o=Math.min(e.length,n.length),r=0;r<o;r++){var i=e[r]-n[r];if(i)return i}return e.length-n.length}return e<n?-1:e>n?1:0};var i=e.lowerBoundKey=function(t){return r(t,"gt")||r(t,"gte")||r(t,"min")||(t.reverse?r(t,"end"):r(t,"start"))||void 0},s=e.lowerBound=function(t,e){var n=i(t);return n?t[n]:e},a=e.lowerBoundInclusive=function(t){return!o(t,"gt")},l=e.upperBoundInclusive=function(t){return!o(t,"lt")},u=e.lowerBoundExclusive=function(t){return!a(t)},c=e.upperBoundExclusive=function(t){return!l(t)},h=e.upperBoundKey=function(t){return r(t,"lt")||r(t,"lte")||r(t,"max")||(t.reverse?r(t,"start"):r(t,"end"))||void 0},p=e.upperBound=function(t,e){var n=h(t);return n?t[n]:e};function d(t){return t}e.start=function(t,e){return t.reverse?p(t,e):s(t,e)},e.end=function(t,e){return t.reverse?s(t,e):p(t,e)},e.startInclusive=function(t){return t.reverse?l(t):a(t)},e.endInclusive=function(t){return t.reverse?a(t):l(t)},e.toLtgt=function(t,n,r,i,s){n=n||{},r=r||d;var a=arguments.length>3,l=e.lowerBoundKey(t),u=e.upperBoundKey(t);return l?"gt"===l?n.gt=r(t.gt,!1):n.gte=r(t[l],!1):a&&(n.gte=r(i,!1)),u?"lt"===u?n.lt=r(t.lt,!0):n.lte=r(t[u],!0):a&&(n.lte=r(s,!0)),null!=t.reverse&&(n.reverse=!!t.reverse),o(n,"max")&&delete n.max,o(n,"min")&&delete n.min,o(n,"start")&&delete n.start,o(n,"end")&&delete n.end,n},e.contains=function(t,o,r){r=r||e.compare;var i=s(t);if(n(i)&&((a=r(o,i))<0||0===a&&u(t)))return!1;var a,l=p(t);if(n(l)&&((a=r(o,l))>0||0===a&&c(t)))return!1;return!0},e.filter=function(t,n){return function(o){return e.contains(t,o,n)}}}).call(this,n(13).Buffer)},function(t,e,n){var o=n(13).Buffer;t.exports=function(t){return o.isBuffer(t)||/\[object (.+Array|Array.+)\]/.test(Object.prototype.toString.call(t))}},function(t,e,n){var o=n(182),r=n(186);t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];if(r(n))for(var i=o(n),s=0;s<i.length;s++){var a=i[s];t[a]=n[a]}}return t}},function(t,e,n){t.exports=Object.keys||n(183)},function(t,e,n){!function(){"use strict";var e,o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=n(184),s=n(185),a=!{toString:null}.propertyIsEnumerable("toString"),l=function(){}.propertyIsEnumerable("prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];e=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===r.call(t),c=s(t),h=[];if(!e&&!n&&!c)throw new TypeError("Object.keys called on a non-object");if(c)i(t,(function(t){h.push(t)}));else{var p,d=l&&n;for(p in t)d&&"prototype"===p||!o.call(t,p)||h.push(p)}if(a){var f=t.constructor,g=f&&f.prototype===t;i(u,(function(e){g&&"constructor"===e||!o.call(t,e)||h.push(e)}))}return h},t.exports=e}()},function(t,e){var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=function(t){var e="function"===typeof t&&!(t instanceof RegExp)||"[object Function]"===o.call(t);return e||"undefined"===typeof window||(e=t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt),e};t.exports=function(t,e){if(!r(e))throw new TypeError("iterator must be a function");var o,i,s="string"===typeof t,a=t.length,l=arguments.length>2?arguments[2]:null;if(a===+a)for(o=0;o<a;o++)null===l?e(s?t.charAt(o):t[o],o,t):e.call(l,s?t.charAt(o):t[o],o,t);else for(i in t)n.call(t,i)&&(null===l?e(t[i],i,t):e.call(l,t[i],i,t))}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),o="[object Arguments]"===e;return o||(o="[object Array]"!==e&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),o}},function(t,e){t.exports=function(t){return null!==t&&("object"===typeof t||"function"===typeof t)}},function(t,e,n){(function(e){t.exports=function(t){return"function"===typeof e._augment&&e.TYPED_ARRAY_SUPPORT?e._augment(t):new e(t)}}).call(this,n(13).Buffer)},function(t,e,n){(function(e){var o=n(33).EventEmitter,r=n(39).inherits,i=n(59),s=n(189),a=n(190),l=n(40).WriteError,u=n(40).ReadError,c=n(40).NotFoundError,h=n(40).OpenError,p=n(40).EncodingError,d=n(40).InitializationError,f=n(193),g=n(212),_=n(63),v=n(217),m=_.getOptions,y=_.defaultOptions,b=_.getLevelDOWN,E=_.dispatchError;function T(t,e){return"function"==typeof t?t:e}function S(t,n,r){if(!(this instanceof S))return new S(t,n,r);var a;if(o.call(this),this.setMaxListeners(1/0),"function"==typeof t?((n="object"==typeof n?n:{}).db=t,t=null):"object"==typeof t&&"function"==typeof t.db&&(n=t,t=null),"function"==typeof n&&(r=n,n={}),(!n||"function"!=typeof n.db)&&"string"!=typeof t){if(a=new d("Must provide a location for the database"),r)return e.nextTick((function(){r(a)}));throw a}n=m(this,n),this.options=i(y,n),this._status="new",s(this,"location",t,"e"),this.open(r)}function k(t){return function(e,n){b()[t](e,n||function(){})}}r(S,o),S.prototype.open=function(t){var n,o,r=this;return this.isOpen()?(t&&e.nextTick((function(){t(null,r)})),this):this._isOpening()?t&&this.once("open",(function(){t(null,r)})):(this.emit("opening"),this._status="opening",this.db=new a(this.location),n=this.options.db||b(),void(o=n(this.location)).open(this.options,(function(e){if(e)return E(r,new h(e),t);r.db.setDb(o),r.db=o,r._status="open",t&&t(null,r),r.emit("open"),r.emit("ready")})))},S.prototype.close=function(t){var n=this;if(this.isOpen())this._status="closing",this.db.close((function(){n._status="closed",n.emit("closed"),t&&t.apply(null,arguments)})),this.emit("closing"),this.db=null;else{if("closed"==this._status&&t)return e.nextTick(t);"closing"==this._status&&t?this.once("closed",t):this._isOpening()&&this.once("open",(function(){n.close(t)}))}},S.prototype.isOpen=function(){return"open"==this._status},S.prototype._isOpening=function(){return"opening"==this._status},S.prototype.isClosed=function(){return/^clos/.test(this._status)},S.prototype.get=function(t,e,n){var o,r=this;return"function"!=typeof(n=T(e,n))?E(this,new u("get() requires key and callback arguments")):this._isOpening()||this.isOpen()?(e=_.getOptions(this,e),o=_.encodeKey(t,e),e.asBuffer=_.isValueAsBuffer(e),void this.db.get(o,e,(function(o,i){if(o)return o=/notfound/i.test(o)?new c("Key not found in database ["+t+"]",o):new u(o),E(r,o,n);if(n){try{i=_.decodeValue(i,e)}catch(s){return n(new p(s))}n(null,i)}}))):E(this,new u("Database is not open"),n)},S.prototype.put=function(t,e,n,o){var r,i,s=this;return o=T(n,o),null===t||void 0===t||null===e||void 0===e?E(this,new l("put() requires key and value arguments"),o):this._isOpening()||this.isOpen()?(n=m(this,n),r=_.encodeKey(t,n),i=_.encodeValue(e,n),void this.db.put(r,i,n,(function(n){if(n)return E(s,new l(n),o);s.emit("put",t,e),o&&o()}))):E(this,new l("Database is not open"),o)},S.prototype.del=function(t,e,n){var o,r=this;return n=T(e,n),null===t||void 0===t?E(this,new l("del() requires a key argument"),n):this._isOpening()||this.isOpen()?(e=m(this,e),o=_.encodeKey(t,e),void this.db.del(o,e,(function(e){if(e)return E(r,new l(e),n);r.emit("del",t),n&&n()}))):E(this,new l("Database is not open"),n)},S.prototype.batch=function(t,e,n){var o,r,i,s=this;return arguments.length?(n=T(e,n),Array.isArray(t)?this._isOpening()||this.isOpen()?(e=m(this,e),o=e.keyEncoding,r=e.valueEncoding,i=t.map((function(t){if(void 0===t.type||void 0===t.key)return{};var n,i=t.keyEncoding||o,s=t.valueEncoding||t.encoding||r;return"utf8"!=i&&"binary"!=i||"utf8"!=s&&"binary"!=s?(n={type:t.type,key:_.encodeKey(t.key,e,t)},void 0!==t.value&&(n.value=_.encodeValue(t.value,e,t)),n):t})),void this.db.batch(i,e,(function(e){if(e)return E(s,new l(e),n);s.emit("batch",t),n&&n()}))):E(this,new l("Database is not open"),n):E(this,new l("batch() requires an array argument"),n)):new v(this)},S.prototype.approximateSize=function(t,e,n){var o,r,i=this;return null===t||void 0===t||null===e||void 0===e||"function"!=typeof n?E(this,new u("approximateSize() requires start, end and callback arguments"),n):(o=_.encodeKey(t,this.options),r=_.encodeKey(e,this.options),this._isOpening()||this.isOpen()?void this.db.approximateSize(o,r,(function(t,e){if(t)return E(i,new h(t),n);n&&n(null,e)})):E(this,new l("Database is not open"),n))},S.prototype.readStream=S.prototype.createReadStream=function(t){var e=this;return t=i(this.options,t),new f(t,this,(function(t){return e.db.iterator(t)}))},S.prototype.keyStream=S.prototype.createKeyStream=function(t){return this.createReadStream(i(t,{keys:!0,values:!1}))},S.prototype.valueStream=S.prototype.createValueStream=function(t){return this.createReadStream(i(t,{keys:!1,values:!0}))},S.prototype.writeStream=S.prototype.createWriteStream=function(t){return new g(i(t),this)},S.prototype.toString=function(){return"LevelUP"},t.exports=S,t.exports.copy=_.copy,t.exports.destroy=k("destroy"),t.exports.repair=k("repair")}).call(this,n(9))},function(t,e,n){var o,r;o=this,r=function(){var t="function"==typeof Object.defineProperty?function(t,e,n){return Object.defineProperty(t,e,n),t}:function(t,e,n){return t[e]=n.value,t};return function(e,n,o,r){var i;if(r=function(t,e){var n="object"==typeof e,o=!n&&"string"==typeof e,r=function(t){return n?!!e[t]:!!o&&e.indexOf(t[0])>-1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:t}}(o,r),"object"==typeof n){for(i in n)Object.hasOwnProperty.call(n,i)&&(r.value=n[i],t(e,i,r));return e}return t(e,n,r)}},t.exports?t.exports=r():o.prr=r()},function(t,e,n){(function(e,o){var r=n(39),i=n(88).AbstractLevelDOWN;function s(t){i.call(this,"string"==typeof t?t:""),this._db=void 0,this._operations=[]}r.inherits(s,i),s.prototype.setDb=function(t){this._db=t,this._operations.forEach((function(e){t[e.method].apply(t,e.args)}))},s.prototype._open=function(t,n){return e.nextTick(n)},s.prototype._operation=function(t,e){if(this._db)return this._db[t].apply(this._db,e);this._operations.push({method:t,args:e})},"put get del batch approximateSize".split(" ").forEach((function(t){s.prototype["_"+t]=function(){this._operation(t,arguments)}})),s.prototype._isBuffer=function(t){return o.isBuffer(t)},s.prototype._iterator=function(){throw new TypeError("not implemented")},t.exports=s}).call(this,n(9),n(13).Buffer)},function(t,e,n){var o=n(192);function r(t,e,n){e&&"string"!=typeof e&&(e=e.message||e.name),o(this,{type:t,name:t,cause:"string"!=typeof e?e:n,message:e},"ewr")}function i(t,e){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),r.call(this,"CustomError",t,e)}i.prototype=new Error,t.exports=function(t){var e=function(e,n){return function(t,e,n){var o=function n(o,i){r.call(this,e,o,i),"FilesystemError"==e&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(t.errno[this.cause.errno]?t.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return o.prototype=n?new n:new i,o}(t,e,n)};return{CustomError:i,FilesystemError:e("FilesystemError"),createError:e}}},function(t,e,n){var o,r;o=this,r=function(){var t="function"==typeof Object.defineProperty?function(t,e,n){return Object.defineProperty(t,e,n),t}:function(t,e,n){return t[e]=n.value,t};return function(e,n,o,r){var i;if(r=function(t,e){var n="object"==typeof e,o=!n&&"string"==typeof e,r=function(t){return n?!!e[t]:!!o&&e.indexOf(t[0])>-1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:t}}(o,r),"object"==typeof n){for(i in n)Object.hasOwnProperty.call(n,i)&&(r.value=n[i],t(e,i,r));return e}return t(e,n,r)}},t.exports?t.exports=r():o.prr=r()},function(t,e,n){var o=n(194).Readable,r=n(39).inherits,i=n(59),s=n(40).EncodingError,a=n(63),l={keys:!0,values:!0},u=function(t,e){return{key:a.decodeKey(t,this._options),value:a.decodeValue(e,this._options)}},c=function(t){return a.decodeKey(t,this._options)},h=function(t,e){return a.decodeValue(e,this._options)},p=function(){return null};function d(t,e,n){if(!(this instanceof d))return new d(t,e,n);o.call(this,{objectMode:!0,highWaterMark:t.highWaterMark}),this._db=e,t=this._options=i(l,t),this._keyEncoding=t.keyEncoding||t.encoding,this._valueEncoding=t.valueEncoding||t.encoding,"undefined"!=typeof this._options.start&&(this._options.start=a.encodeKey(this._options.start,this._options)),"undefined"!=typeof this._options.end&&(this._options.end=a.encodeKey(this._options.end,this._options)),"number"!=typeof this._options.limit&&(this._options.limit=-1),this._options.keyAsBuffer=a.isKeyAsBuffer(this._options),this._options.valueAsBuffer=a.isValueAsBuffer(this._options),this._makeData=this._options.keys&&this._options.values?u:this._options.keys?c:this._options.values?h:p;var r=this;this._db.isOpen()?this._iterator=n(this._options):this._db.once("ready",(function(){r._destroyed||(r._iterator=n(r._options))}))}r(d,o),d.prototype._read=function t(){var e=this;if(!e._db.isOpen())return e._db.once("ready",(function(){t.call(e)}));e._destroyed||e._iterator.next((function(t,n,o){if(t||void 0===n&&void 0===o)return t||e._destroyed||e.push(null),e._cleanup(t);try{o=e._makeData(n,o)}catch(r){return e._cleanup(new s(r))}e._destroyed||e.push(o)}))},d.prototype._cleanup=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;t&&e.emit("error",t),e._iterator?e._iterator.end((function(){e._iterator=null,e.emit("close")})):e.emit("close")}},d.prototype.destroy=function(){this._cleanup()},d.prototype.toString=function(){return"LevelUP.ReadStream"},t.exports=d},function(t,e,n){(function(o){var r=n(23);(e=t.exports=n(108)).Stream=r,e.Readable=e,e.Writable=n(109),e.Duplex=n(90),e.Transform=n(110),e.PassThrough=n(207),o.browser||"disable"!==Object({NODE_ENV:"production",PUBLIC_URL:"/pl_project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).READABLE_STREAM||(t.exports=n(23))}).call(this,n(9))},,function(t,e,n){"use strict";var o=n(62).Buffer,r=n(197);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,i=o.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=i,r=a,e.copy(n,r),a+=s.data.length,s=s.next;return i},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},,function(t,e,n){(function(t){var o="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(199),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(36))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var o,r=1,i={},s=!1,a=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick((function(){c(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&c(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),o=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},o=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;o=function(e){var n=a.createElement("script");n.onreadystatechange=function(){c(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():o=function(t){setTimeout(c,0,t)},l.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return i[r]=s,o(r),r++},l.clearImmediate=u}function u(t){delete i[t]}function c(t){if(s)setTimeout(c,0,t);else{var e=i[t];if(e){s=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{u(t),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(36),n(9))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(o){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var o=!1;return function(){if(!o){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return t.apply(this,arguments)}}}).call(this,n(36))},function(t,e,n){"use strict";t.exports=i;var o=n(107),r=Object.create(n(12));function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r.inherits=n(10),r.inherits(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(89)},function(t,e,n){t.exports=n(48)},function(t,e,n){t.exports=n(60).Transform},function(t,e,n){t.exports=n(60).PassThrough},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){t.exports=i;var o=n(110),r=n(12);function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r.inherits=n(10),r.inherits(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},function(t){t.exports=JSON.parse('{"name":"levelup","description":"Fast & simple storage - a Node.js-style LevelDB wrapper","version":"0.18.6","contributors":["Rod Vagg <r@va.gg> (https://github.com/rvagg)","John Chesley <john@chesl.es> (https://github.com/chesles/)","Jake Verbaten <raynos2@gmail.com> (https://github.com/raynos)","Dominic Tarr <dominic.tarr@gmail.com> (https://github.com/dominictarr)","Max Ogden <max@maxogden.com> (https://github.com/maxogden)","Lars-Magnus Skog <lars.magnus.skog@gmail.com> (https://github.com/ralphtheninja)","David Bj\xf6rklund <david.bjorklund@gmail.com> (https://github.com/kesla)","Julian Gruber <julian@juliangruber.com> (https://github.com/juliangruber)","Paolo Fragomeni <paolo@async.ly> (https://github.com/hij1nx)","Anton Whalley <anton.whalley@nearform.com> (https://github.com/No9)","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Pedro Teixeira <pedro.teixeira@gmail.com> (https://github.com/pgte)","James Halliday <mail@substack.net> (https://github.com/substack)"],"repository":{"type":"git","url":"https://github.com/rvagg/node-levelup.git"},"homepage":"https://github.com/rvagg/node-levelup","keywords":["leveldb","stream","database","db","store","storage","json"],"main":"lib/levelup.js","dependencies":{"bl":"~0.8.1","deferred-leveldown":"~0.2.0","errno":"~0.1.1","prr":"~0.0.0","readable-stream":"~1.0.26","semver":"~2.3.1","xtend":"~3.0.0"},"devDependencies":{"leveldown":"~0.10.0","bustermove":"*","tap":"*","referee":"*","rimraf":"*","async":"*","fstream":"*","tar":"*","mkfiletree":"*","readfiletree":"*","slow-stream":">=0.0.4","delayed":"*","boganipsum":"*","du":"*","memdown":"*","msgpack-js":"*"},"browser":{"leveldown":false,"leveldown/package":false,"semver":false},"scripts":{"test":"tap test/*-test.js --stderr","functionaltests":"node ./test/functional/fstream-test.js && node ./test/functional/binary-data-test.js && node ./test/functional/compat-test.js","alltests":"npm test && npm run-script functionaltests"},"license":"MIT"}')},,,,function(t,e,n){(function(e,o){var r=n(23).Stream,i=n(39).inherits,s=n(59),a=n(213),l=e.setImmediate||o.nextTick,u=n(63).getOptions,c={type:"put"};function h(t,e){if(!(this instanceof h))return new h(t,e);r.call(this),this._options=s(c,u(e,t)),this._db=e,this._buffer=[],this._status="init",this._end=!1,this.writable=!0,this.readable=!1;var n=this,o=function(){n.writable&&(n._status="ready",n.emit("ready"),n._process())};e.isOpen()?l(o):e.once("ready",o)}i(h,r),h.prototype.write=function(t){return!!this.writable&&(this._buffer.push(t),"init"!=this._status&&this._processDelayed(),!(this._options.maxBufferLength&&this._buffer.length>this._options.maxBufferLength)||(this._writeBlock=!0,!1))},h.prototype.end=function(t){var e=this;t&&this.write(t),l((function(){e._end=!0,e._process()}))},h.prototype.destroy=function(){this.writable=!1,this.end()},h.prototype.destroySoon=function(){this.end()},h.prototype.add=function(t){if(t.props)return t.props.Directory?t.pipe(this._db.writeStream(this._options)):(t.props.File||t.File||"File"==t.type)&&this._write(t),!0},h.prototype._processDelayed=function(){var t=this;l((function(){t._process()}))},h.prototype._process=function(){var t,e=this;if("ready"==e._status||!e.writable)return e._buffer.length&&e.writable?(e._status="writing",t=e._buffer,e._buffer=[],e._db.batch(t.map((function(t){return{type:t.type||e._options.type,key:t.key,value:t.value,keyEncoding:t.keyEncoding||e._options.keyEncoding,valueEncoding:t.valueEncoding||t.encoding||e._options.valueEncoding}})),(function(t){if(e.writable){if("closed"!=e._status&&(e._status="ready"),t)return e.writable=!1,e.emit("error",t);e._process()}})),void(e._writeBlock&&(e._writeBlock=!1,e.emit("drain")))):void(e._end&&"closed"!=e._status&&(e._status="closed",e.writable=!1,e.emit("close")));e._buffer.length&&"closed"!=e._status&&e._processDelayed()},h.prototype._write=function(t){var e=t.path||t.props.path,n=this;e&&t.pipe(a((function(t,o){if(t)return n.writable=!1,n.emit("error",t);n._options.fstreamRoot&&e.indexOf(n._options.fstreamRoot)>-1&&(e=e.substr(n._options.fstreamRoot.length+1)),n.write({key:e,value:o.slice(0)})})))},h.prototype.toString=function(){return"LevelUP.WriteStream"},t.exports=h}).call(this,n(36),n(9))},function(t,e,n){(function(e){var o=n(214).Duplex;function r(t){if(!(this instanceof r))return new r(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var n=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",(function(t){t.on("error",n)})),this.on("unpipe",(function(t){t.removeListener("error",n)}))}else e.isBuffer(t)?this.append(t):Array.isArray(t)&&t.forEach(function(t){e.isBuffer(t)&&this.append(t)}.bind(this));o.call(this)}n(39).inherits(r,o),r.prototype._offset=function(t){for(var e,n=0,o=0;o<this._bufs.length;o++){if(t<(e=n+this._bufs[o].length))return[o,t-n];n=e}},r.prototype.append=function(t){return this._bufs.push(e.isBuffer(t)?t:new e(t)),this.length+=t.length,this},r.prototype._write=function(t,e,n){this.append(t),n&&n()},r.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},r.prototype.end=function(t){o.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(t){return this.slice(t,t+1)[0]},r.prototype.slice=function(t,e){return this.copy(null,0,t,e)},r.prototype.copy=function(t,n,o,r){if(("number"!=typeof o||o<0)&&(o=0),("number"!=typeof r||r>this.length)&&(r=this.length),o>=this.length)return t||new e(0);if(r<=0)return t||new e(0);var i,s,a=!!t,l=this._offset(o),u=r-o,c=u,h=a&&n||0,p=l[1];if(0===o&&r==this.length){if(!a)return e.concat(this._bufs);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,h),h+=this._bufs[s].length;return t}if(c<=this._bufs[l[0]].length-p)return a?this._bufs[l[0]].copy(t,n,p,p+c):this._bufs[l[0]].slice(p,p+c);for(a||(t=new e(u)),s=l[0];s<this._bufs.length;s++){if(!(c>(i=this._bufs[s].length-p))){this._bufs[s].copy(t,h,p,p+c);break}this._bufs[s].copy(t,h,p),h+=i,c-=i,p&&(p=0)}return t},r.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},r.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var t=0,e=new r;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},r.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){r.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=r}).call(this,n(13).Buffer)},function(t,e,n){(function(o){var r=n(23);(e=t.exports=n(111)).Stream=r,e.Readable=e,e.Writable=n(112),e.Duplex=n(91),e.Transform=n(113),e.PassThrough=n(216),o.browser||"disable"!==Object({NODE_ENV:"production",PUBLIC_URL:"/pl_project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).READABLE_STREAM||(t.exports=n(23))}).call(this,n(9))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){t.exports=i;var o=n(113),r=n(12);function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r.inherits=n(10),r.inherits(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var o=n(63),r=n(40).WriteError,i=o.getOptions,s=o.dispatchError;function a(t){this._levelup=t,this.batch=t.db.batch(),this.ops=[]}a.prototype.put=function(t,e,n){n=i(this._levelup,n);var s=o.encodeKey(t,n),a=o.encodeValue(e,n);try{this.batch.put(s,a)}catch(l){throw new r(l)}return this.ops.push({type:"put",key:s,value:a}),this},a.prototype.del=function(t,e){e=i(this._levelup,e);var n=o.encodeKey(t,e);try{this.batch.del(n)}catch(s){throw new r(s)}return this.ops.push({type:"del",key:n}),this},a.prototype.clear=function(){try{this.batch.clear()}catch(t){throw new r(t)}return this.ops=[],this},a.prototype.write=function(t){var e=this._levelup,n=this.ops;try{this.batch.write((function(o){if(o)return s(e,new r(o),t);e.emit("batch",n),t&&t()}))}catch(o){throw new r(o)}},t.exports=a},function(t,e,n){(function(e,o){var r=n(219),i=n(225),s=n(235),a=n(121),l=n(94),u=n(122),c=n(123),h=n(243),p=n(251),d=function(t,n,o){e.nextTick((function(){t(n,o)}))},f=function(){};t.exports=function(t,n){var g={};t=i(t);var _=s(t.sublevel("blobs"),n),v=h(t.sublevel("stats")),m=t.sublevel("links"),y=p(),b=[],E=Date.now();g.mkdir=function(t,e,n){if("function"===typeof e)return g.mkdir(t,null,e);e||(e=u(777)),n||(n=f),v.follow(t,(function(t,o,r){return t&&"ENOENT"!==t.code?n(t):o?n(c.EEXIST(r)):void v.put(r,{type:"directory",mode:e,size:4096},y.cb(r,n))}))},g.rmdir=function(t,e){e||(e=f),v.follow(t,(function(t,n,o){if(t)return e(t);g.readdir(o,(function(t,n){return t?e(t):n.length?e(c.ENOTEMPTY(o)):void v.del(o,y.cb(o,e))}))}))},g.readdir=function(t,e){v.follow(t,(function(t,n,o){return t?e(t):n?n.isDirectory()?void v.list(o,e):e(c.ENOTDIR(o)):e(c.ENOENT(o))}))};var T=function(t,e,n){e(t,(function(t,e,o){if(t)return n(t);if(!e.isFile())return n(null,e);var r=e&&e.blob||o;_.size(r,(function(t,o){if(t)return n(t);e.size=o,n(null,e)}))}))};g.stat=function(t,e){T(t,v.follow,e)},g.lstat=function(t,e){T(t,v.get,e)},g.exists=function(t,e){v.follow(t,(function(t){e(!t)}))};var S=function(t,e,n,o){o||(o=f),e(t,(function(t,e,r){if(t)return o(t);v.update(r,{mode:n},y.cb(r,o))}))};g.chmod=function(t,e,n){S(t,v.follow,e,n)},g.lchmod=function(t,e,n){S(t,v.get,e,n)};var k=function(t,e,n,o,r){r||(r=f),e(t,(function(t,e,i){if(t)return r(t);v.update(i,{uid:n,gid:o},y.cb(i,r))}))};return g.chown=function(t,e,n,o){k(t,v.follow,e,n,o)},g.lchown=function(t,e,n,o){k(t,v.get,e,n,o)},g.utimes=function(t,e,n,o){o||(o=f),v.follow(t,(function(t,r,i){if(t)return o(t);var s={};e&&(s.atime=e),n&&(s.mtime=n),v.update(i,s,y.cb(i,o))}))},g.rename=function(t,e,n){n||(n=f),v.follow(t,(function(t,o,r){if(t)return n(t);var i=function(){n=y.cb(e,y.cb(r,n)),v.put(e,o,(function(t){if(t)return n(t);v.del(r,n)}))};v.follow(e,(function(t,e,s){return t&&"ENOENT"!==t.code?n(t):e?o.isDirectory()!==e.isDirectory()?n(c.EISDIR(r)):void(e.isDirectory()?g.readdir(s,(function(t,e){return t?n(t):e.length?n(c.ENOTEMPTY(r)):void i()})):i()):i()}))}))},g.realpath=function(t,e,n){if("function"===typeof e)return g.realpath(t,null,e);v.follow(t,(function(t,e,o){if(t)return n(t);n(null,o)}))},g.writeFile=function(t,e,n,r){if("function"===typeof n)return g.writeFile(t,e,null,n);"string"===typeof n&&(n={encoding:n}),n||(n={}),r||(r=f),o.isBuffer(e)||(e=new o(e,n.encoding||"utf-8"));var i=n.flags||"w";n.append="w"!==i[0],v.follow(t,(function(t,o,s){if(t&&"ENOENT"!==t.code)return r(t);if(o&&o.isDirectory())return r(c.EISDIR(s));if(o&&"x"===i[1])return r(c.EEXIST(s));var a=o&&o.blob||s;v.writable(s,(function(t){if(t)return r(t);_.write(a,e,n,(function(t){if(t)return r(t);v.put(s,{ctime:o&&o.ctime,mtime:new Date,mode:n.mode||u(666),type:"file"},y.cb(s,r))}))}))}))},g.appendFile=function(t,e,n,o){if("function"===typeof n)return g.appendFile(t,e,null,n);"string"===typeof n&&(n={encoding:n}),n||(n={}),n.flags="a",g.writeFile(t,e,n,o)},g.unlink=function(t,e){e||(e=f),v.get(t,(function(t,n,o){if(t)return e(t);if(n.isDirectory())return e(c.EISDIR(o));var r=function(t){a(m,{start:t+"\xff",end:t+"\xff\xff"},(function(n){if(n)return _.remove(t,e);e()}))};v.del(o,y.cb(o,(function(t){return t?e(t):n.link?function(){var t=n.link.slice(0,n.link.indexOf("\xff"));m.del(n.link,(function(n){if(n)return e(n);r(t)}))}():void m.del(o+"\xff",(function(t){if(t)return e(t);r(o)}))})))}))},g.readFile=function(t,e,n){if("function"===typeof e)return g.readFile(t,null,e);"string"===typeof e&&(e={encoding:e}),e||(e={});e.encoding,e.flag;v.follow(t,(function(t,o,r){if(t)return n(t);if(o.isDirectory())return n(c.EISDIR(r));var i=o&&o.blob||r;_.read(i,(function(t,o){if(t)return n(t);n(null,e.encoding?o.toString(e.encoding):o)}))}))},g.createReadStream=function(t,n){n||(n={});var o=!1,i=r.readable((function(r){v.follow(t,(function(t,s,a){if(t)return r(t);if(s.isDirectory())return r(c.EISDIR(a));var l=s&&s.blob||a,u=_.createReadStream(l,n);i.emit("open"),u.on("end",(function(){e.nextTick((function(){o||i.emit("close")}))})),r(null,u)}))}));return i.on("close",(function(){o=!0})),i},g.createWriteStream=function(t,e){e||(e={});var n=e.flags||"w",o=!1,i=e.mode||u(666);e.append="a"===n[0];var s=r.writable((function(r){v.follow(t,(function(t,a,l){if(t&&"ENOENT"!==t.code)return r(t);if(a&&a.isDirectory())return r(c.EISDIR(l));if(a&&"x"===n[1])return r(c.EEXIST(l));var u=a&&a.blob||l;v.writable(u,(function(t){if(t)return r(t);var n={ctime:a?a.ctime:new Date,mtime:new Date,mode:i,type:"file"};v.put(l,n,(function(t){if(t)return r(t);var i=_.createWriteStream(u,e);s.emit("open"),i.on("finish",(function(){n.mtime=new Date,v.put(l,n,(function(){y.change(l),o||s.emit("close")}))})),r(null,i)}))}))}))}));return s.on("close",(function(){o=!0})),s},g.truncate=function(t,e,n){v.follow(t,(function(t,r,i){if(t)return n(t);var s=r&&r.blob||i;_.size(s,(function(t,r){if(t)return n(t);v.writable(i,(function(t){if(t)return n(t);if(n=l(y.cb(i,n)),!e)return _.remove(s,n);var a=_.createWriteStream(s,{start:r<e?e-1:e});a.on("error",n),a.on("finish",n),r<e&&a.write(new o([0])),a.end()}))}))}))},g.watchFile=function(t,e,n){return"function"===typeof e?g.watchFile(t,null,e):y.watch(v.normalize(t),n)},g.unwatchFile=function(t,e){y.unwatch(v.normalize(t),e)},g.watch=function(t,e,n){return"function"===typeof e?g.watch(t,null,e):y.watcher(v.normalize(t),n)},g.notify=function(t){y.on("change",t)},g.open=function(t,e,n,o){if("function"===typeof n)return g.open(t,e,null,n);v.follow(t,(function(t,r,i){if(t&&"ENOENT"!==t.code)return o(t);var s=e[0],a="+"===e[1]||"+"===e[2],l=r&&r.blob||i,h={key:i,blob:l,mode:n||u(666),readable:"r"===s||("w"===s||"a"===s)&&a,writable:"w"===s||"a"===s||"r"===s&&a,append:"a"===s};return"r"===s&&t?o(t):"x"===e[1]&&r?o(c.EEXIST(i)):r&&r.isDirectory()?o(c.EISDIR(i)):void _.size(l,(function(t,e){if(t)return o(t);h.append&&(h.writePos=e),v.writable(i,(function(t){if(t)return o(t);var e=function(t){if(t)return o(t);var e=b.indexOf(null);-1===e&&(e=10+b.push(b.length+10)-1),h.fd=e,b[e]=h,y.change(i),o(null,h.fd)},n=function(t){return t?o(t):r?e():void v.put(l,{ctime:r&&r.ctime,type:"file"},e)};if(!h.append&&h.writable)return _.remove(l,n);n()}))}))}))},g.close=function(t,e){var n=b[t];if(!n)return d(e,c.EBADF());b[t]=null,d(y.cb(n.key,e))},g.write=function(t,e,n,o,r,i){var s=b[t];if(i||(i=f),!s||!s.writable)return d(i,c.EBADF());null===r&&(r=s.writePos||0);var a=e.slice(n,n+o);s.writePos=r+a.length,_.write(s.blob,a,{start:r,append:!0},(function(t){if(t)return i(t);i(null,o,e)}))},g.read=function(t,e,n,o,r,i){var s=b[t];if(i||(i=f),!s||!s.readable)return d(i,c.EBADF());null===r&&(r=g.readPos||0),_.read(s.blob,{start:r,end:r+o-1},(function(t,s){if(t)return i(t);var a=s.slice(0,o);a.copy(e,n),g.readPos=r+a.length,i(null,a.length,e)}))},g.fsync=function(t,e){var n=b[t];if(e||(e=f),!n||!n.writable)return d(e,c.EBADF());d(e)},g.ftruncate=function(t,e,n){var o=b[t];if(n||(n=f),!o)return d(n,c.EBADF());g.truncate(o.blob,e,n)},g.fchown=function(t,e,n,o){var r=b[t];if(o||(o=f),!r)return d(o,c.EBADF());g.chown(r.key,e,n,o)},g.fchmod=function(t,e,n){var o=b[t];if(n||(n=f),!o)return d(n,c.EBADF());g.chmod(o.key,e,n)},g.futimes=function(t,e,n,o){var r=b[t];if(o||(o=f),!r)return d(o,c.EBADF());g.utimes(r.key,e,n,o)},g.fstat=function(t,e){var n=b[t];if(!n)return d(e,c.EBADF());g.stat(n.key,e)},g.symlink=function(t,e,n){n||(n=f),v.follow(t,(function(t,o,r){if(t)return n(t);v.get(e,(function(t,o){return t&&"ENOENT"!==t.code?n(t):o?n(c.EEXIST(e)):void v.put(e,{type:"symlink",target:r,mode:u(777)},n)}))}))},g.readlink=function(t,e){v.get(t,(function(n,o){return n?e(n):o.target?void e(null,o.target):e(c.EINVAL(t))}))},g.link=function(t,e,n){n||(n=f),v.follow(t,(function(t,o,r){return t?n(t):o.isFile()?void v.get(e,(function(t,i){if(t&&"ENOENT"!==t.code)return n(t);if(i)return n(c.EEXIST(e));var s=r+"\xff"+ ++E;m.put(r+"\xff",r,(function(t){if(t)return n(t);m.put(s,r,(function(t){if(t)return n(t);v.put(e,{type:"file",link:s,blob:r,mode:o.mode},n)}))}))})):n(c.EINVAL(r))}))},g}}).call(this,n(9),n(13).Buffer)},function(t,e,n){(function(t,o){var r=n(220),i=n(222),s=n(224),a=new t(0),l=function(){},u=function(t){return"function"===typeof t?t:function(e){e(null,t)}},c=function(t,e){var n=!1,r=!1;return t._read=function(){n=!0},t.destroy=function(){r=!0},e((function(e,i){if(e)return t.emit("error",e);var s=function(){for(var e;null!==(e=i.read());)n=!1,t.push(e)};if(i.on("readable",(function(){n&&s()})),i.on("end",(function(){s(),t.push(null)})),i.on("error",(function(e){t.emit("error",e)})),i.on("close",(function(){s(),o.nextTick((function(){t.emit("close")}))})),t._read=function(){n=!0,s()},t.destroy=function(){r||(r=!0,i.destroy&&i.destroy())},r)return r=!1,void t.destroy();n&&s()})),t},h=function(t,e){var n=l,o=!1;return t._write=function(t,e,o){n=o},t.destroy=function(){o=!0},t.write(a),e((function(e,r){if(e)return t.emit("error",e);r.on("close",(function(){t.emit("close")})),r.on("error",(function(e){t.emit("error",e)})),t._write=function(t,e,n){if(t===a)return n();r.write(t,e,n)};var i=t.emit;if(r.on("finish",(function(){i.call(t,"finish")})),t.destroy=function(){o||(o=!0,r.destroy&&r.destroy())},t.emit=function(e){if("finish"!==e)return i.apply(t,arguments);r.end()},o)return o=!1,void t.destroy();n()})),t};e.readable=function(t,n){return 1===arguments.length?e.readable(null,t):(t||(t={}),c(new i(t),u(n)))},e.writable=function(t,n){return 1===arguments.length?e.writable(null,t):(t||(t={}),h(new r(t),u(n)))},e.duplex=function(t,n,o){if(2===arguments.length)return e.duplex(null,t,n);t||(t={});var r=new s(t);return h(r,u(n)),c(r,u(o)),r}}).call(this,n(13).Buffer,n(9))},function(t,e,n){t.exports=n(92)},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(o){var r=n(23);(e=t.exports=n(114)).Stream=r,e.Readable=e,e.Writable=n(92),e.Duplex=n(64),e.Transform=n(115),e.PassThrough=n(223),o.browser||"disable"!==Object({NODE_ENV:"production",PUBLIC_URL:"/pl_project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).READABLE_STREAM||(t.exports=n(23))}).call(this,n(9))},function(t,e,n){t.exports=i;var o=n(115),r=n(12);function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r.inherits=n(10),r.inherits(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(64)},function(t,e,n){(function(e){n(33).EventEmitter,e.nextTick;var o=n(226),r=n(118),i=n(117),s=n(234);t.exports=function(t,e){function n(){}n.prototype=t;var a=new n;if(a.sublevel)return a;var l=(e=e||{}).sep=e.sep||"\xff";function u(t){return function(e){return(e=i(e=e||{})).reverse?e.start=e.start||l:e.end=e.end||l,t.call(a,e)}}a._options=e,s(a),a.sublevels={},a.sublevel=function(t,e){return a.sublevels[t]?a.sublevels[t]:new o(a,t,e||this._options)},a.methods={},a.prefix=function(t){return""+(t||"")},a.pre=function(t,e){return e||(e=t,t={max:l}),a.hooks.pre(t,e)},a.post=function(t,e){return e||(e=t,t={max:l}),a.hooks.post(t,e)},a.readStream=a.createReadStream=u(a.createReadStream),a.keyStream=a.createKeyStream=u(a.createKeyStream),a.valuesStream=a.createValueStream=u(a.createValueStream);var c=a.batch;return a.batch=function(t,e,n){if(!Array.isArray(t))return new r(a);t.forEach((function(t){t.prefix&&("function"===typeof t.prefix.prefix?t.key=t.prefix.prefix(t.key):"string"===typeof t.prefix&&(t.key=t.prefix+t.key))})),c.call(a,t,e,n)},a}}).call(this,n(9))},function(t,e,n){var o=n(33).EventEmitter,r=n(39).inherits,i=n(116),s=n(117),a=n(228),l=n(118);function u(t,e,n){if("string"===typeof n&&(console.error("db.sublevel(name, seperator<string>) is depreciated"),console.error("use db.sublevel(name, {sep: separator})) if you must"),n={sep:n}),!(this instanceof u))return new u(t,e,n);if(!t)throw new Error("must provide db");if(!e)throw new Error("must provide prefix");(n=n||{}).sep=n.sep||"\xff",this._parent=t,this._options=n,this.options=n,this._prefix=e,this._root=h(this),t.sublevels[e]=this,this.sublevels={},this.methods={};var o=this;this.hooks={pre:function(){return o.pre.apply(o,arguments)},post:function(){return o.post.apply(o,arguments)}}}r(u,o);var c=u.prototype;function h(t){return t._parent?h(t._parent):t}c._key=function(t){var e=this._options.sep;return e+this._prefix+e+t},c._getOptsAndCb=function(t,e){return"function"==typeof t&&(e=t,t={}),{opts:a(t,this._options),cb:e}},c.sublevel=function(t,e){return this.sublevels[t]?this.sublevels[t]:new u(this,t,e||this._options)},c.put=function(t,e,n,o){var r=this._getOptsAndCb(n,o);this._root.put(this.prefix(t),e,r.opts,r.cb)},c.get=function(t,e,n){var o=this._getOptsAndCb(e,n);this._root.get(this.prefix(t),o.opts,o.cb)},c.del=function(t,e,n){var o=this._getOptsAndCb(e,n);this._root.del(this.prefix(t),o.opts,o.cb)},c.batch=function(t,e,n){if(!Array.isArray(t))return new l(this);var o=this,r=this._getOptsAndCb(e,n);t.forEach((function(t){"string"===typeof t.prefix?t.key=t.prefix+t.key:t.key=(t.prefix||o).prefix(t.key),t.prefix&&(t.prefix=null)})),this._root.batch(t,r.opts,r.cb)},c._getKeyEncoding=function(){return this.options.keyEncoding?this.options.keyEncoding:this._parent&&this._parent._getKeyEncoding?this._parent._getKeyEncoding():void 0},c._getValueEncoding=function(){return this.options.valueEncoding?this.options.valueEncoding:this._parent&&this._parent._getValueEncoding?this._parent._getValueEncoding():void 0},c.prefix=function(t){var e=this._options.sep;return this._parent.prefix()+e+this._prefix+e+(t||"")},c.keyStream=c.createKeyStream=function(t){return(t=t||{}).keys=!0,t.values=!1,this.createReadStream(t)},c.valueStream=c.createValueStream=function(t){return(t=t||{}).keys=!1,t.values=!0,t.keys=!1,this.createReadStream(t)},c.readStream=c.createReadStream=function(t){t=t||{};var e=h(this),n=this.prefix(),o=i.prefix(t,n);!function(t,e){["valueEncoding","encoding","keyEncoding","reverse","values","keys","limit","fillCache"].forEach((function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}))}(o,a(t,this._options));var r=e.createReadStream(o);if(!1===o.values){var s;if(s=r.read)r.read=function(t){var e=s.call(this,t);return e&&(e=e.substring(n.length)),e};else{var l=r.emit;r.emit=function(t,e){"data"===t?l.call(this,"data",e.substring(n.length)):l.call(this,t,e)}}return r}return!1===o.keys||((s=r.read)?r.read=function(t){var e=s.call(this,t);return e&&(e.key=e.key.substring(n.length)),e}:r.on("data",(function(t){t.key=t.key.substring(n.length)}))),r},c.writeStream=c.createWriteStream=function(){var t=h(this),e=this.prefix(),n=t.createWriteStream.apply(t,arguments),o=n.write,r=this._options.encoding,i=this._options.valueEncoding,s=this._options.keyEncoding,a=!r&&!i&&!s;return n.write=a?function(t){return t.key=e+t.key,o.call(n,t)}:function(t){return t.key=e+t.key,r&&"undefined"===typeof t.encoding&&(t.encoding=r),i&&"undefined"===typeof t.valueEncoding&&(t.valueEncoding=i),s&&"undefined"===typeof t.keyEncoding&&(t.keyEncoding=s),o.call(n,t)},n},c.approximateSize=function(){var t=h(db);return t.approximateSize.apply(t,arguments)},c.pre=function(t,e){e||(e=t,t=null),t=i.prefix(t,this.prefix(),this._options.sep);var n=h(this._parent),o=this.prefix();return n.hooks.pre(s(t),(function(t,n,r){e({key:t.key.substring(o.length),value:t.value,type:t.type},(function(t,e){n(t,t.prefix?e:e||o)}),r)}))},c.post=function(t,e){e||(e=t,t=null);var n=h(this._parent),o=this.prefix();return t=i.prefix(t,o,this._options.sep),n.hooks.post(s(t),(function(t){e({key:t.key.substring(o.length),value:t.value,type:t.type})}))};t.exports=u},function(t,e,n){"use strict";(function(e){function n(t){return Object.prototype.toString.call(t)}var o=function(t){return Array.isArray(t)||"object"===typeof t&&"[object Array]"===n(t)},r=function(t){return"object"===typeof t&&"[object Date]"===n(t)},i=function(t){return"object"===typeof t&&"[object RegExp]"===n(t)},s=function(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e};function a(t,n,a,l){var u=[],c=[],h="undefined"!=typeof e;return"undefined"==typeof n&&(n=!0),"undefined"==typeof a&&(a=1/0),function t(a,p){if(null===a)return null;if(0==p)return a;var d,f;if("object"!=typeof a)return a;if(o(a))d=[];else if(i(a))d=new RegExp(a.source,s(a)),a.lastIndex&&(d.lastIndex=a.lastIndex);else if(r(a))d=new Date(a.getTime());else{if(h&&e.isBuffer(a))return d=new e(a.length),a.copy(d),d;"undefined"==typeof l?(f=Object.getPrototypeOf(a),d=Object.create(f)):(d=Object.create(l),f=l)}if(n){var g=u.indexOf(a);if(-1!=g)return c[g];u.push(a),c.push(d)}for(var _ in a){var v;f&&(v=Object.getOwnPropertyDescriptor(f,_)),v&&null==v.set||(d[_]=t(a[_],p-1))}return d}(t,a)}t.exports=a,a.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e}}).call(this,n(13).Buffer)},function(t,e,n){var o=n(229),r=n(233);t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];if(r(n))for(var i=o(n),s=0;s<i.length;s++){var a=i[s];t[a]=n[a]}}return t}},function(t,e,n){t.exports=Object.keys||n(230)},function(t,e,n){!function(){"use strict";var e,o=Object.prototype.hasOwnProperty,r=n(231),i=n(232),s=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];e=function(t){if(!r.object(t)&&!r.array(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)o.call(t,e)&&n.push(e);return s&&i(a,(function(e){o.call(t,e)&&n.push(e)})),n},t.exports=e}()},function(t,e){var n=Object.prototype,o=n.hasOwnProperty,r=n.toString,i=function(t){return t!==t},s={boolean:1,number:1,string:1,undefined:1},a=t.exports={};a.a=a.type=function(t,e){return typeof t===e},a.defined=function(t){return void 0!==t},a.empty=function(t){var e,n=r.call(t);if("[object Array]"===n||"[object Arguments]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(o.call(t,e))return!1;return!0}return"[object String]"===n&&""===t},a.equal=function(t,e){var n,o=r.call(t);if(o!==r.call(e))return!1;if("[object Object]"===o){for(n in t)if(!a.equal(t[n],e[n]))return!1;return!0}if("[object Array]"===o){if((n=t.length)!==e.length)return!1;for(;--n;)if(!a.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===o?t.prototype===e.prototype:"[object Date]"===o?t.getTime()===e.getTime():t===e},a.hosted=function(t,e){var n=typeof e[t];return"object"===n?!!e[t]:!s[n]},a.instance=a.instanceof=function(t,e){return t instanceof e},a.null=function(t){return null===t},a.undefined=function(t){return void 0===t},a.arguments=function(t){var e="[object Arguments]"===r.call(t),n=!a.array(t)&&a.arraylike(t)&&a.object(t)&&a.fn(t.callee);return e||n},a.array=function(t){return"[object Array]"===r.call(t)},a.arguments.empty=function(t){return a.arguments(t)&&0===t.length},a.array.empty=function(t){return a.array(t)&&0===t.length},a.arraylike=function(t){return!!t&&!a.boolean(t)&&o.call(t,"length")&&isFinite(t.length)&&a.number(t.length)&&t.length>=0},a.boolean=function(t){return"[object Boolean]"===r.call(t)},a.false=function(t){return a.boolean(t)&&(!1===t||!1===t.valueOf())},a.true=function(t){return a.boolean(t)&&(!0===t||!0===t.valueOf())},a.date=function(t){return"[object Date]"===r.call(t)},a.element=function(t){return void 0!==t&&"undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},a.error=function(t){return"[object Error]"===r.call(t)},a.fn=a.function=function(t){return"undefined"!==typeof window&&t===window.alert||"[object Function]"===r.call(t)},a.number=function(t){return"[object Number]"===r.call(t)},a.infinite=function(t){return t===1/0||t===-1/0},a.decimal=function(t){return a.number(t)&&!i(t)&&!a.infinite(t)&&t%1!==0},a.divisibleBy=function(t,e){var n=a.infinite(t),o=a.infinite(e),r=a.number(t)&&!i(t)&&a.number(e)&&!i(e)&&0!==e;return n||o||r&&t%e===0},a.int=function(t){return a.number(t)&&!i(t)&&t%1===0},a.maximum=function(t,e){if(i(t))throw new TypeError("NaN is not a valid value");if(!a.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t<e[n])return!1;return!0},a.minimum=function(t,e){if(i(t))throw new TypeError("NaN is not a valid value");if(!a.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t>e[n])return!1;return!0},a.nan=function(t){return!a.number(t)||t!==t},a.even=function(t){return a.infinite(t)||a.number(t)&&t===t&&t%2===0},a.odd=function(t){return a.infinite(t)||a.number(t)&&t===t&&t%2!==0},a.ge=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!a.infinite(t)&&!a.infinite(e)&&t>=e},a.gt=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!a.infinite(t)&&!a.infinite(e)&&t>e},a.le=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!a.infinite(t)&&!a.infinite(e)&&t<=e},a.lt=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!a.infinite(t)&&!a.infinite(e)&&t<e},a.within=function(t,e,n){if(i(t)||i(e)||i(n))throw new TypeError("NaN is not a valid value");if(!a.number(t)||!a.number(e)||!a.number(n))throw new TypeError("all arguments must be numbers");return a.infinite(t)||a.infinite(e)||a.infinite(n)||t>=e&&t<=n},a.object=function(t){return t&&"[object Object]"===r.call(t)},a.hash=function(t){return a.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},a.regexp=function(t){return"[object RegExp]"===r.call(t)},a.string=function(t){return"[object String]"===r.call(t)}},function(t,e){var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=function(t,e,r){if("[object Function]"!==o.call(e))throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var s=0;s<i;s++)e.call(r,t[s],s,t);else for(var a in t)n.call(t,a)&&e.call(r,t[a],a,t)}},function(t,e){t.exports=function(t){return null!==t&&("object"===typeof t||"function"===typeof t)}},function(t,e,n){var o=n(116);t.exports=function(t){if(!t.hooks){var e=[],n=[];t.hooks={post:function(t,n){n||(n=t,t="");var r={test:o.checker(t),hook:n};return e.push(r),l(e,r)},pre:function(t,e){e||(e=t,t="");var r={test:o.checker(t),hook:e,safe:!1!==t.safe};return n.push(r),l(n,r)},posthooks:e,prehooks:n},t.on("put",(function(t,e){u({type:"put",key:t,value:e})})),t.on("del",(function(t,e){u({type:"del",key:t,value:e})})),t.on("batch",(function(t){t.forEach(u)}));var r=t.put,i=t.del,s=t.batch;t.put=function(t,e,n,o){return c(!1,[{key:t,value:e,type:"put"}],n,o)},t.del=function(t,e,n){return c(!1,[{key:t,type:"del"}],e,n)},t.batch=function(t,e,n){return c(!0,t,e,n)}}function a(t){return t&&("string"===typeof t?t:"string"===typeof t.prefix?t.prefix:"function"===typeof t.prefix?t.prefix():"")}function l(t,e){return function(){var n=t.indexOf(e);return!!~n&&(t.splice(n,1),!0)}}function u(t){t&&t.type&&e.forEach((function(e){e.test(t.key)&&e.hook(t)}))}function c(e,o,l,u){try{o.forEach((function t(e,r){n.forEach((function(n){if(n.test(String(e.key))){var i={add:function(e,i){if("undefined"===typeof e)return this;if(!1===e)return delete o[r];var s=a(e.prefix)||a(i)||n.prefix||"";if(s&&(e.prefix=s),e.key=s+e.key,n.safe&&n.test(String(e.key)))throw new Error("prehook cannot insert into own range");var l=e.keyEncoding||function(t){if(t&&t._getKeyEncoding)return t._getKeyEncoding(t)}(e.prefix),u=e.valueEncoding||function(t){if(t&&t._getValueEncoding)return t._getValueEncoding(t)}(e.prefix);return l&&(e.keyEncoding=l),u&&(e.valueEncoding=u),o.push(e),t(e,o.length-1),this},put:function(t,e){return"object"===typeof t&&(t.type="put"),this.add(t,e)},del:function(t,e){return"object"===typeof t&&(t.type="del"),this.add(t,e)},veto:function(){return this.add(!1)}};n.hook.call(i,e,i.add,o)}}))}))}catch(h){return(u||l)(h)}if(1==(o=o.filter((function(t){return t&&t.type}))).length&&!e){var c=o[0];return"put"==c.type?r.call(t,c.key,c.value,l,u):i.call(t,c.key,l,u)}return s.call(t,o,l,u)}}},function(t,e,n){(function(e,o){var r=n(236),i=n(239),s=n(121),a=n(39),l=n(94),u=new e(0),c={encode:function(t){return"string"===typeof t?t=new e(t):t},decode:function(t){return e.isBuffer(t)?t:new e(t)},buffer:!0,type:"raw"},h=function(){},p=function(t){return t=t.toString(16),"00000000".slice(0,-t.length)+t};t.exports=function(t,n){n||(n={});var d={},f=n.blockSize||65536,g=n.batch||100,_=new e(f);t.put("\0","ignore",h);var v={},m=function(n,o,r,i,s){var a=function(){--v[n].locks||delete v[n]},l=function(t){if(t.locks++,!t.block&&!o)return t.block=r,void s(null,t.block,a);t.block||(t.block=new e(f)),t.block.length<o+r.length&&(t.block=function(t,n){var o=new e(n);return t.copy(o),o}(t.block,o+r.length)),r.copy(t.block,o),!i&&o+r.length<t.block.length&&(t.block=t.block.slice(0,o+r.length)),s(null,t.block,a)};if(v[n])return l(v[n]);t.get(n,{valueEncoding:c},(function(t,e){if(t&&!t.notFound)return s(t);v[n]||(v[n]={locks:0,block:e}),l(v[n])}))},y=function t(e,n){if(!(this instanceof t))return new t(e,n);n||(n={}),this.name=e,this.blocks=[],this.batch=[],this.bytesWritten=0,this.truncate=!n.append,this.append=n.append,this._shouldInitAppend=this.append&&void 0===n.start,this._destroyed=!1,this._init(n.start||0),r.call(this)};a.inherits(y,r),y.prototype._init=function(t){this.blockIndex=t/f|0,this.blockOffset=t-this.blockIndex*f,this.blockLength=this.blockOffset},y.prototype._flush=function(e){if(!this.batch.length)return e();var n=this.batch[this.batch.length-1].key,o=this.batch;if(this.batch=[],!this.truncate)return t.batch(o,e);this.truncate=!1,this._truncate(o,n,e)},y.prototype._truncate=function(e,n,o){o=l(o);var r=[],i=t.createKeyStream({start:n,end:this.name+"\xff\xff"});i.on("error",o),i.on("data",(function(t){r.push({type:"del",key:t})})),i.on("end",(function(){r.push.apply(r,e),t.batch(r,o)}))},y.prototype._writeBlock=function(t){var n=1===this.blocks.length?this.blocks[0]:e.concat(this.blocks,this.blockLength-this.blockOffset),o=this.blockIndex,r=this.blockOffset,i=this;this.blockOffset=0,this.blockLength=0,this.blockIndex++,this.blocks=[];var s=this.name+"\xff"+p(o),a=function(t,e,n){return t.length&&i.batch.push({type:"put",key:s,value:t,valueEncoding:c}),!e&&i.batch.length<g?n():i._flush(n)};return(r||n.length!==f)&&(r||this.append)?void m(s,r,n,this.append,(function(e,n,o){if(e)return t(e);a(n,!0,(function(e){o(),t(e)}))})):a(n,!1,t)},y.prototype._initAppend=function(t,e,n){var o=this;this._shouldInitAppend=!1,d.size(this.name,(function(r,i){if(r)return n(r);o._init(i),o._write(t,e,n)}))},y.prototype._write=function(t,e,n){if(!t.length||this._destroyed)return n();if(this._shouldInitAppend)return this._initAppend(t,e,n);var o,r=this,i=f-this.blockLength,s=function(t){return t?n(t):o?r._write(o,e,n):void n()};if(t.length>i&&(o=t.slice(i),t=t.slice(0,i)),this.bytesWritten+=t.length,this.blockLength+=t.length,this.blocks.push(t),t.length<i)return s();this._writeBlock(s)},y.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,o.nextTick(this.emit.bind(this,"close")))},y.prototype.end=function(t){var e=this,n=arguments;t&&"function"!==typeof t&&(this.write(t),t=u),this.write(u,(function(){e._writeBlock((function(t){if(t)return e.emit("error",t);e._flush((function(t){if(t)return e.emit("error",t);r.prototype.end.apply(e,n)}))}))}))};var b=function(e,n){n||(n={});var o=this,r=n.start||0,s=r/f|0,a=r-s*f,l=e+"\xff"+p(s);this.name=e,this._missing=("number"===typeof n.end?n.end:1/0)-r+1,this._paused=!1,this._destroyed=!1,this._reader=t.createReadStream({start:l,end:e+"\xff\xff",valueEncoding:c});var u=function(t){return l=e+"\xff"+p(++s),!!o._missing&&(!(!a||(t=t.slice(a),a=0,t.length))||(t.length>o._missing&&(t=t.slice(0,o._missing)),o._missing-=t.length,o._pause(!o.push(t)),!!o._missing))};this._reader.on("data",(function(t){for(;t.key>l;)if(!u(_))return;u(t.value)})),this._reader.on("error",(function(t){o.emit("error",t)})),this._reader.on("end",(function(){o.push(null)})),i.call(this)};return a.inherits(b,i),b.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._reader.destroy(),o.nextTick(this.emit.bind(this,"close")))},b.prototype._pause=function(t){this._paused!==t&&(this._paused=t,this._paused?this._reader.pause():this._reader.resume())},b.prototype._read=function(){this._pause(!1)},d.remove=function(e,n){n=l(n||h);var o=[],r=t.createKeyStream({start:e+"\xff",end:e+"\xff\xff"});r.on("error",n),r.on("data",(function(t){o.push({type:"del",key:t})})),r.on("end",(function(){t.batch(o,n)}))},d.size=function(e,n){s.last(t,{start:e+"\xff",end:e+"\xff\xff",valueEncoding:c},(function(t,o,r){return t&&"range not found"===t.message?n(null,0):t?n(t):o.slice(0,e.length+1)!==e+"\xff"?n(null,0):void n(null,parseInt(o.toString().slice(e.length+1),16)*f+r.length)}))},d.write=function(t,e,n,o){if("function"===typeof n)return d.write(t,e,null,n);n||(n={}),o||(o=h);var r=d.createWriteStream(t,n);r.on("error",o),r.on("finish",(function(){o()})),r.write(e),r.end()},d.read=function(t,n,o){if("function"===typeof n)return d.read(t,null,n);n||(n={});var r=d.createReadStream(t,n),i=[];r.on("error",o),r.on("data",(function(t){i.push(t)})),r.on("end",(function(){o(null,1===i.length?i[0]:e.concat(i))}))},d.createReadStream=function(t,e){return new b(t,e)},d.createWriteStream=function(t,e){return new y(t,e)},d}}).call(this,n(13).Buffer,n(9))},function(t,e,n){t.exports=n(93)},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},,function(t,e,n){(function(o){(e=t.exports=n(119)).Stream=n(23),e.Readable=e,e.Writable=n(93),e.Duplex=n(53),e.Transform=n(120),e.PassThrough=n(240),o.browser||"disable"!==Object({NODE_ENV:"production",PUBLIC_URL:"/pl_project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).READABLE_STREAM||(t.exports=n(23))}).call(this,n(9))},function(t,e,n){t.exports=i;var o=n(120),r=n(12);function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r.inherits=n(10),r.inherits(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e){t.exports=function(t){var e=t.reverse,n=t.end,o=t.start,r=[o,n];return null!=o&&null!=n&&r.sort(),e&&(r=r.reverse()),t.start=r[0],t.end=r[1],t}},function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!==typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){o[t]=e[t]})),o;function o(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var o=e.apply(this,t),r=t[t.length-1];return"function"===typeof o&&o!==r&&Object.keys(r).forEach((function(t){o[t]=r[t]})),o}}},function(t,e,n){(function(e){var o=n(244),r=n(94),i=n(245),s=n(122),a=n(248),l=n(249),u=n(123),c=a({type:"directory",mode:s(777),size:4096}),h=function(t){return t="/"===t[0]?t:"/"+t,"/"===(t=o.normalize(t))?t:"/"===t[t.length-1]?t.slice(0,-1):t},p=function(t){var e=t.split("/").length.toString(36);return"0000000000".slice(e.length)+e+t};t.exports=function(t){var n={};n.normalize=h,n.get=function(n,o){if("/"===(n=h(n)))return e.nextTick(o.bind(null,null,c,"/"));t.get(p(n),{valueEncoding:"json"},(function(t,e){return t&&t.notFound?o(u.ENOENT(n),null,n):t?o(t,null,n):void o(null,a(e),n)}))},n.writable=function(t,r){if("/"===(t=h(t)))return e.nextTick(r.bind(null,u.EPERM(t)));n.follow(o.dirname(t),(function(e,n){return e?r(e):n.isDirectory()?void r(null,t):r(u.ENOTDIR(t))}))},n.list=function(e,n){e=h(e);var o=p("/"===e?e:e+"/"),s=t.createKeyStream({start:o,end:o+"\xff"});n=r(n),s.on("error",n),s.pipe(i({encoding:"object"},(function(t){t=t.map((function(t){return t.split("/").pop()})),n(null,t)})))};return n.follow=function(t,e){!function(t,e){var r="/",i=t.split("/").slice(1);!function s(){n.get(o.join(r,i.shift()),(function(n,o,a){return n?e(n,o,t):(r=o.target||a,i.length?void s():e(null,o,a))}))}()}(h(t),(function t(o,r,i){return o?e(o,null,i):r.target?n.get(r.target,t):void e(null,a(r),i)}))},n.update=function(t,e,o){n.get(t,(function(t,r,i){return t?o(t):"/"===i?o(u.EPERM(i)):void n.put(i,l(r,e),o)}))},n.put=function(e,o,r){n.writable(e,(function(e,n){if(e)return r(e);t.put(p(n),a(o),{valueEncoding:"json"},r)}))},n.del=function(n,o){if("/"===(n=h(n)))return e.nextTick(o.bind(null,u.EPERM(n)));t.del(p(n),o)},n}}).call(this,n(9))},function(t,e,n){(function(t){function n(t,e){for(var n=0,o=t.length-1;o>=0;o--){var r=t[o];"."===r?t.splice(o,1):".."===r?(t.splice(o,1),n++):n&&(t.splice(o,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function o(t,e){if(t.filter)return t.filter(e);for(var n=[],o=0;o<t.length;o++)e(t[o],o,t)&&n.push(t[o]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=n(o(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var i=e.isAbsolute(t),s="/"===r(t,-1);return(t=n(o(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&s&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function o(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=o(t.split("/")),i=o(n.split("/")),s=Math.min(r.length,i.length),a=s,l=0;l<s;l++)if(r[l]!==i[l]){a=l;break}var u=[];for(l=a;l<r.length;l++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,o=-1,r=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!r){o=i;break}}else r=!1;return-1===o?n?"/":".":n&&1===o?"/":t.slice(0,o)},e.basename=function(t,e){var n=function(t){"string"!==typeof t&&(t+="");var e,n=0,o=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===o&&(r=!1,o=e+1);return-1===o?"":t.slice(n,o)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,o=-1,r=!0,i=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===o&&(r=!1,o=s+1),46===a?-1===e?e=s:1!==i&&(i=1):-1!==e&&(i=-1);else if(!r){n=s+1;break}}return-1===e||-1===o||0===i||1===i&&e===o-1&&e===n+1?"":t.slice(e,o)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(9))},function(t,e,n){(function(e){var o=n(60).Writable,r=n(10),i=n(246);if("undefined"===typeof Uint8Array)var s=n(247).Uint8Array;else s=Uint8Array;function a(t,e){if(!(this instanceof a))return new a(t,e);"function"===typeof t&&(e=t,t={}),t||(t={});var n=t.encoding,r=!1;n?"u8"!==(n=String(n).toLowerCase())&&"uint8"!==n||(n="uint8array"):r=!0,o.call(this,{objectMode:!0}),this.encoding=n,this.shouldInferEncoding=r,e&&this.on("finish",(function(){e(this.getBody())})),this.body=[]}t.exports=a,r(a,o),a.prototype._write=function(t,e,n){this.body.push(t),n()},a.prototype.inferEncoding=function(t){var n=void 0===t?this.body[0]:t;return e.isBuffer(n)?"buffer":"undefined"!==typeof Uint8Array&&n instanceof Uint8Array?"uint8array":Array.isArray(n)?"array":"string"===typeof n?"string":"[object Object]"===Object.prototype.toString.call(n)?"object":"buffer"},a.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(t){for(var e=[],n=0;n<t.length;n++)e.push.apply(e,t[n]);return e}(this.body):"string"===this.encoding?function(t){for(var n=[],o=0;o<t.length;o++){var r=t[o];"string"===typeof r||e.isBuffer(r)?n.push(r):l(r)?n.push(i(r)):n.push(i(String(r)))}n=e.isBuffer(t[0])?(n=e.concat(n)).toString("utf8"):n.join("");return n}(this.body):"buffer"===this.encoding?function(t){for(var n=[],o=0;o<t.length;o++){var r=t[o];e.isBuffer(r)?n.push(r):l(r)?n.push(i(r)):n.push(i(String(r)))}return e.concat(n)}(this.body):"uint8array"===this.encoding?function(t){for(var e=0,n=0;n<t.length;n++)"string"===typeof t[n]&&(t[n]=i(t[n])),e+=t[n].length;for(var o=new s(e),r=(n=0,0);n<t.length;n++)for(var a=t[n],l=0;l<a.length;l++)o[r++]=a[l];return o}(this.body):this.body):[]};Array.isArray;function l(t){return"string"===typeof t||(e=t,/Array\]$/.test(Object.prototype.toString.call(e)))||t&&"function"===typeof t.subarray;var e}}).call(this,n(13).Buffer)},function(t,e,n){(function(e){var n=Object.prototype.toString,o="undefined"!==typeof e&&"function"===typeof e.alloc&&"function"===typeof e.allocUnsafe&&"function"===typeof e.from;t.exports=function(t,r,i){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return s=t,"ArrayBuffer"===n.call(s).slice(8,-1)?function(t,n,r){n>>>=0;var i=t.byteLength-n;if(i<0)throw new RangeError("'offset' is out of bounds");if(void 0===r)r=i;else if((r>>>=0)>i)throw new RangeError("'length' is out of bounds");return o?e.from(t.slice(n,n+r)):new e(new Uint8Array(t.slice(n,n+r)))}(t,r,i):"string"===typeof t?function(t,n){if("string"===typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');return o?e.from(t,n):new e(t,n)}(t,r):o?e.from(t):new e(t);var s}}).call(this,n(13).Buffer)},function(t,e){var n,o=void 0,r=function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(e){return t.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(t,e){return e in t},HasOwnProperty:function(t,n){return e.call(t,n)},IsCallable:function(t){return"function"===typeof t},ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}}}(),i=Math.LN2,s=Math.abs,a=Math.floor,l=Math.log,u=Math.min,c=Math.pow,h=Math.round;function p(t){if(d&&n){var e,o=d(t);for(e=0;e<o.length;e+=1)n(t,o[e],{value:t[o[e]],writable:!1,enumerable:!1,configurable:!1})}}n=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()?Object.defineProperty:function(t,e,n){if(!t===Object(t))throw new TypeError("Object.defineProperty called on non-object");return r.HasProperty(n,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(t,e,n.get),r.HasProperty(n,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(t,e,n.set),r.HasProperty(n,"value")&&(t[e]=n.value),t};var d=Object.getOwnPropertyNames||function(t){if(t!==Object(t))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e,n=[];for(e in t)r.HasOwnProperty(t,e)&&n.push(e);return n};function f(t){if(n){if(t.length>1e5)throw new RangeError("Array too large for polyfill");var e;for(e=0;e<t.length;e+=1)o(e)}function o(e){n(t,e,{get:function(){return t._getter(e)},set:function(n){t._setter(e,n)},enumerable:!0,configurable:!1})}}function g(t,e){var n=32-e;return t<<n>>n}function _(t,e){var n=32-e;return t<<n>>>n}function v(t){return[255&t]}function m(t){return g(t[0],8)}function y(t){return[255&t]}function b(t){return _(t[0],8)}function E(t){return[(t=h(Number(t)))<0?0:t>255?255:255&t]}function T(t){return[t>>8&255,255&t]}function S(t){return g(t[0]<<8|t[1],16)}function k(t){return[t>>8&255,255&t]}function C(t){return _(t[0]<<8|t[1],16)}function O(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function R(t){return g(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function w(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function I(t){return _(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function A(t,e,n){var o,r,h,p,d,f,g,_=(1<<e-1)-1;function v(t){var e=a(t),n=t-e;return n<.5?e:n>.5||e%2?e+1:e}for(t!==t?(r=(1<<e)-1,h=c(2,n-1),o=0):t===1/0||t===-1/0?(r=(1<<e)-1,h=0,o=t<0?1:0):0===t?(r=0,h=0,o=1/t===-1/0?1:0):(o=t<0,(t=s(t))>=c(2,1-_)?(r=u(a(l(t)/i),1023),(h=v(t/c(2,r)*c(2,n)))/c(2,n)>=2&&(r+=1,h=1),r>_?(r=(1<<e)-1,h=0):(r+=_,h-=c(2,n))):(r=0,h=v(t/c(2,1-_-n)))),d=[],p=n;p;p-=1)d.push(h%2?1:0),h=a(h/2);for(p=e;p;p-=1)d.push(r%2?1:0),r=a(r/2);for(d.push(o?1:0),d.reverse(),f=d.join(""),g=[];f.length;)g.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return g}function N(t,e,n){var o,r,i,s,a,l,u,h,p=[];for(o=t.length;o;o-=1)for(i=t[o-1],r=8;r;r-=1)p.push(i%2?1:0),i>>=1;return p.reverse(),s=p.join(""),a=(1<<e-1)-1,l=parseInt(s.substring(0,1),2)?-1:1,u=parseInt(s.substring(1,1+e),2),h=parseInt(s.substring(1+e),2),u===(1<<e)-1?0!==h?NaN:l*(1/0):u>0?l*c(2,u-a)*(1+h/c(2,n)):0!==h?l*c(2,-(a-1))*(h/c(2,n)):l<0?-0:0}function D(t){return N(t,11,52)}function M(t){return A(t,11,52)}function L(t){return N(t,8,23)}function x(t){return A(t,8,23)}!function(){var t=function(t){if((t=r.ToInt32(t))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var e;for(this.byteLength=t,this._bytes=[],this._bytes.length=t,e=0;e<this.byteLength;e+=1)this._bytes[e]=0;p(this)};e.ArrayBuffer=e.ArrayBuffer||t;var n=function(){};function i(e,i,s){var a;return a=function(e,n,o){var i,s,l,u;if(arguments.length&&"number"!==typeof arguments[0])if("object"===typeof arguments[0]&&arguments[0].constructor===a)for(i=arguments[0],this.length=i.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)this._setter(l,i._getter(l));else if("object"!==typeof arguments[0]||(arguments[0]instanceof t||"ArrayBuffer"===r.Class(arguments[0]))){if("object"!==typeof arguments[0]||!(arguments[0]instanceof t||"ArrayBuffer"===r.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=e,this.byteOffset=r.ToUint32(n),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=r.ToUint32(o),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(s=arguments[0],this.length=r.ToUint32(s.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)u=s[l],this._setter(l,Number(u));else{if(this.length=r.ToInt32(arguments[0]),o<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0}this.constructor=a,p(this),f(this)},a.prototype=new n,a.prototype.BYTES_PER_ELEMENT=e,a.prototype._pack=i,a.prototype._unpack=s,a.BYTES_PER_ELEMENT=e,a.prototype._getter=function(t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((t=r.ToUint32(t))>=this.length)return o;var e,n,i=[];for(e=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,n+=1)i.push(this.buffer._bytes[n]);return this._unpack(i)},a.prototype.get=a.prototype._getter,a.prototype._setter=function(t,e){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((t=r.ToUint32(t))>=this.length)return o;var n,i,s=this._pack(e);for(n=0,i=this.byteOffset+t*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,i+=1)this.buffer._bytes[i]=s[n]},a.prototype.set=function(t,e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var n,o,i,s,a,l,u,c,h,p;if("object"===typeof arguments[0]&&arguments[0].constructor===this.constructor){if(n=arguments[0],(i=r.ToUint32(arguments[1]))+n.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(c=this.byteOffset+i*this.BYTES_PER_ELEMENT,h=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){for(p=[],a=0,l=n.byteOffset;a<h;a+=1,l+=1)p[a]=n.buffer._bytes[l];for(a=0,u=c;a<h;a+=1,u+=1)this.buffer._bytes[u]=p[a]}else for(a=0,l=n.byteOffset,u=c;a<h;a+=1,l+=1,u+=1)this.buffer._bytes[u]=n.buffer._bytes[l]}else{if("object"!==typeof arguments[0]||"undefined"===typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(o=arguments[0],s=r.ToUint32(o.length),(i=r.ToUint32(arguments[1]))+s>this.length)throw new RangeError("Offset plus length of array is out of range");for(a=0;a<s;a+=1)l=o[a],this._setter(i+a,Number(l))}},a.prototype.subarray=function(t,e){function n(t,e,n){return t<e?e:t>n?n:t}t=r.ToInt32(t),e=r.ToInt32(e),arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),t<0&&(t=this.length+t),e<0&&(e=this.length+e),t=n(t,0,this.length);var o=(e=n(e,0,this.length))-t;return o<0&&(o=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,o)},a}var s=i(1,v,m),a=i(1,y,b),l=i(1,E,b),u=i(2,T,S),c=i(2,k,C),h=i(4,O,R),d=i(4,w,I),g=i(4,x,L),_=i(8,M,D);e.Int8Array=e.Int8Array||s,e.Uint8Array=e.Uint8Array||a,e.Uint8ClampedArray=e.Uint8ClampedArray||l,e.Int16Array=e.Int16Array||u,e.Uint16Array=e.Uint16Array||c,e.Int32Array=e.Int32Array||h,e.Uint32Array=e.Uint32Array||d,e.Float32Array=e.Float32Array||g,e.Float64Array=e.Float64Array||_}(),function(){function t(t,e){return r.IsCallable(t.get)?t.get(e):t[e]}var n=function(){var n=new e.Uint16Array([4660]);return 18===t(new e.Uint8Array(n.buffer),0)}(),o=function(t,n,o){if(0===arguments.length)t=new e.ArrayBuffer(0);else if(!(t instanceof e.ArrayBuffer||"ArrayBuffer"===r.Class(t)))throw new TypeError("TypeError");if(this.buffer=t||new e.ArrayBuffer(0),this.byteOffset=r.ToUint32(n),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:r.ToUint32(o),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");p(this)};function i(o){return function(i,s){if((i=r.ToUint32(i))+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");i+=this.byteOffset;var a,l=new e.Uint8Array(this.buffer,i,o.BYTES_PER_ELEMENT),u=[];for(a=0;a<o.BYTES_PER_ELEMENT;a+=1)u.push(t(l,a));return Boolean(s)===Boolean(n)&&u.reverse(),t(new o(new e.Uint8Array(u).buffer),0)}}function s(o){return function(i,s,a){if((i=r.ToUint32(i))+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var l,u=new o([s]),c=new e.Uint8Array(u.buffer),h=[];for(l=0;l<o.BYTES_PER_ELEMENT;l+=1)h.push(t(c,l));Boolean(a)===Boolean(n)&&h.reverse(),new e.Uint8Array(this.buffer,i,o.BYTES_PER_ELEMENT).set(h)}}o.prototype.getUint8=i(e.Uint8Array),o.prototype.getInt8=i(e.Int8Array),o.prototype.getUint16=i(e.Uint16Array),o.prototype.getInt16=i(e.Int16Array),o.prototype.getUint32=i(e.Uint32Array),o.prototype.getInt32=i(e.Int32Array),o.prototype.getFloat32=i(e.Float32Array),o.prototype.getFloat64=i(e.Float64Array),o.prototype.setUint8=s(e.Uint8Array),o.prototype.setInt8=s(e.Int8Array),o.prototype.setUint16=s(e.Uint16Array),o.prototype.setInt16=s(e.Int16Array),o.prototype.setUint32=s(e.Uint32Array),o.prototype.setInt32=s(e.Int32Array),o.prototype.setFloat32=s(e.Float32Array),o.prototype.setFloat64=s(e.Float64Array),e.DataView=e.DataView||o}()},function(t,e){var n=function(t){return t?"string"===typeof t?new Date(t):t:new Date},o=function(t){this.uid=t.uid||0,this.gid=t.gid||0,this.mode=t.mode||0,this.size=t.size||0,this.mtime=n(t.mtime),this.atime=n(t.atime),this.ctime=n(t.ctime),this.type=t.type,this.target=t.target,this.link=t.link,this.blob=t.blob};o.prototype.isDirectory=function(){return"directory"===this.type},o.prototype.isFile=function(){return"file"===this.type},o.prototype.isBlockDevice=function(){return!1},o.prototype.isCharacterDevice=function(){return!1},o.prototype.isSymbolicLink=function(){return"symlink"===this.type},o.prototype.isFIFO=function(){return!1},o.prototype.isSocket=function(){return!1},t.exports=function(t){return new o(t)}},function(t,e,n){var o=n(250);t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];if(o(n))for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}},function(t,e){t.exports=function(t){return null!==t&&("object"===typeof t||"function"===typeof t)}},function(t,e,n){var o=n(33);t.exports=function(){var t={},e=new o.EventEmitter;return e.watch=function(e,n){return t[e]||(t[e]=new o.EventEmitter,t[e].setMaxListeners(0)),n&&t[e].on("change",n),t[e]},e.watcher=function(t,n){var r=new o.EventEmitter,i=function(){r.emit("change","change",t)};return e.watch(t,i),n&&r.on("change",n),r.close=function(){e.unwatch(t,i)},r},e.unwatch=function(e,n){t[e]&&(n?t[e].removeListener("change",n):t[e].removeAllListeners("change"),t[e].listeners("change").length||delete t[e])},e.change=function(n){t[n]&&t[n].emit("change"),e.emit("change",n)},e.cb=function(t,n){return function(o,r){t&&e.change(t),n&&n(o,r)}},e}},function(t,e,n){"use strict";n(82);var o=n(0),r=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;r=i("react.element"),e.Fragment=i("react.fragment")}var s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var o,i={},u=null,c=null;for(o in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,o)&&!l.hasOwnProperty(o)&&(i[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===i[o]&&(i[o]=e[o]);return{$$typeof:r,type:t,key:u,ref:c,props:i,_owner:s.current}}e.jsx=u,e.jsxs=u},function(t,e,n){"use strict";var o="function"===typeof Symbol&&Symbol.for,r=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,s=o?Symbol.for("react.fragment"):60107,a=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,c=o?Symbol.for("react.context"):60110,h=o?Symbol.for("react.async_mode"):60111,p=o?Symbol.for("react.concurrent_mode"):60111,d=o?Symbol.for("react.forward_ref"):60112,f=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.suspense_list"):60120,_=o?Symbol.for("react.memo"):60115,v=o?Symbol.for("react.lazy"):60116,m=o?Symbol.for("react.block"):60121,y=o?Symbol.for("react.fundamental"):60117,b=o?Symbol.for("react.responder"):60118,E=o?Symbol.for("react.scope"):60119;function T(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case p:case s:case l:case a:case f:return t;default:switch(t=t&&t.$$typeof){case c:case d:case v:case _:case u:return t;default:return e}}case i:return e}}}function S(t){return T(t)===p}e.AsyncMode=h,e.ConcurrentMode=p,e.ContextConsumer=c,e.ContextProvider=u,e.Element=r,e.ForwardRef=d,e.Fragment=s,e.Lazy=v,e.Memo=_,e.Portal=i,e.Profiler=l,e.StrictMode=a,e.Suspense=f,e.isAsyncMode=function(t){return S(t)||T(t)===h},e.isConcurrentMode=S,e.isContextConsumer=function(t){return T(t)===c},e.isContextProvider=function(t){return T(t)===u},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return T(t)===d},e.isFragment=function(t){return T(t)===s},e.isLazy=function(t){return T(t)===v},e.isMemo=function(t){return T(t)===_},e.isPortal=function(t){return T(t)===i},e.isProfiler=function(t){return T(t)===l},e.isStrictMode=function(t){return T(t)===a},e.isSuspense=function(t){return T(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===p||t===l||t===a||t===f||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===_||t.$$typeof===u||t.$$typeof===c||t.$$typeof===d||t.$$typeof===y||t.$$typeof===b||t.$$typeof===E||t.$$typeof===m)},e.typeOf=T},function(t,e,n){var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(N){l=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var r=e&&e.prototype instanceof _?e:_,i=Object.create(r.prototype),s=new w(o||[]);return i._invoke=function(t,e,n){var o=h;return function(r,i){if(o===d)throw new Error("Generator is already running");if(o===f){if("throw"===r)throw i;return A()}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=c(t,e,n);if("normal"===l.type){if(o=n.done?f:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=f,n.method="throw",n.arg=l.arg)}}}(t,n,s),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",d="executing",f="completed",g={};function _(){}function v(){}function m(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(I([])));E&&E!==n&&o.call(E,i)&&(y=E);var T=m.prototype=_.prototype=Object.create(y);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(r,i,s,a){var l=c(t[r],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===typeof h&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,a)}))}a(l.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function C(t,n){var o=t.iterator[n.method];if(o===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=c(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var i=r.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:e,done:!0}}return v.prototype=m,l(T,"constructor",m),l(m,"constructor",v),v.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var s=new k(u(e,n,o,r),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),l(T,a,"Generator"),l(T,i,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=I,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return a.type="throw",a.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=o.call(s,"catchLoc"),u=o.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;R(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:I(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=o}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],o=0;o<t.rangeCount;o++)n.push(t.getRangeAt(o));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},function(t,e,n){var o=n(257),r=n(70);t.exports=function t(e,n,i,s,a){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!==e&&n!==n:o(e,n,i,s,t,a))}},function(t,e,n){var o=n(258),r=n(131),i=n(292),s=n(296),a=n(318),l=n(97),u=n(132),c=n(134),h="[object Arguments]",p="[object Array]",d="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,_,v){var m=l(t),y=l(e),b=m?p:a(t),E=y?p:a(e),T=(b=b==h?d:b)==d,S=(E=E==h?d:E)==d,k=b==E;if(k&&u(t)){if(!u(e))return!1;m=!0,T=!1}if(k&&!T)return v||(v=new o),m||c(t)?r(t,e,n,g,_,v):i(t,e,b,n,g,_,v);if(!(1&n)){var C=T&&f.call(t,"__wrapped__"),O=S&&f.call(e,"__wrapped__");if(C||O){var R=C?t.value():t,w=O?e.value():e;return v||(v=new o),_(R,w,n,g,v)}}return!!k&&(v||(v=new o),s(t,e,n,g,_,v))}},function(t,e,n){var o=n(65),r=n(264),i=n(265),s=n(266),a=n(267),l=n(268);function u(t){var e=this.__data__=new o(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=l,t.exports=u},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var o=n(66),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():r.call(e,n,1),--this.size,!0)}},function(t,e,n){var o=n(66);t.exports=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var o=n(66);t.exports=function(t){return o(this.__data__,t)>-1}},function(t,e,n){var o=n(66);t.exports=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var o=n(65);t.exports=function(){this.__data__=new o,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var o=n(65),r=n(95),i=n(130);t.exports=function(t,e){var n=this.__data__;if(n instanceof o){var s=n.__data__;if(!r||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var o=n(126),r=n(272),i=n(128),s=n(129),a=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||r(t))&&(o(t)?p:a).test(s(t))}},function(t,e,n){var o=n(96),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,a=o?o.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var o=!0}catch(l){}var r=s.call(t);return o&&(e?t[a]=n:delete t[a]),r}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var o=n(273),r=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!r&&r in t}},function(t,e,n){var o=n(41)["__core-js_shared__"];t.exports=o},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var o=n(276),r=n(65),i=n(95);t.exports=function(){this.size=0,this.__data__={hash:new o,map:new(i||r),string:new o}}},function(t,e,n){var o=n(277),r=n(278),i=n(279),s=n(280),a=n(281);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}l.prototype.clear=o,l.prototype.delete=r,l.prototype.get=i,l.prototype.has=s,l.prototype.set=a,t.exports=l},function(t,e,n){var o=n(68);t.exports=function(){this.__data__=o?o(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var o=n(68),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(o){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},function(t,e,n){var o=n(68),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return o?void 0!==e[t]:r.call(e,t)}},function(t,e,n){var o=n(68);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var o=n(69);t.exports=function(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var o=n(69);t.exports=function(t){return o(this,t).get(t)}},function(t,e,n){var o=n(69);t.exports=function(t){return o(this,t).has(t)}},function(t,e,n){var o=n(69);t.exports=function(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},function(t,e,n){var o=n(130),r=n(288),i=n(289);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new o;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=r,s.prototype.has=i,t.exports=s},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var o=n(96),r=n(293),i=n(125),s=n(131),a=n(294),l=n(295),u=o?o.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(t,e,n,o,u,h,p){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=a;case"[object Set]":var f=1&o;if(d||(d=l),t.size!=e.size&&!f)return!1;var g=p.get(t);if(g)return g==e;o|=2,p.set(t,e);var _=s(d(t),d(e),o,u,h,p);return p.delete(t),_;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var o=n(41).Uint8Array;t.exports=o},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var o=n(297),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,s,a){var l=1&n,u=o(t),c=u.length;if(c!=o(e).length&&!l)return!1;for(var h=c;h--;){var p=u[h];if(!(l?p in e:r.call(e,p)))return!1}var d=a.get(t),f=a.get(e);if(d&&f)return d==e&&f==t;var g=!0;a.set(t,e),a.set(e,t);for(var _=l;++h<c;){var v=t[p=u[h]],m=e[p];if(i)var y=l?i(m,v,p,e,t,a):i(v,m,p,t,e,a);if(!(void 0===y?v===m||s(v,m,n,i,a):y)){g=!1;break}_||(_="constructor"==p)}if(g&&!_){var b=t.constructor,E=e.constructor;b==E||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E||(g=!1)}return a.delete(t),a.delete(e),g}},function(t,e,n){var o=n(298),r=n(300),i=n(303);t.exports=function(t){return o(t,i,r)}},function(t,e,n){var o=n(299),r=n(97);t.exports=function(t,e,n){var i=e(t);return r(t)?i:o(i,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}},function(t,e,n){var o=n(301),r=n(302),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),o(s(t),(function(e){return i.call(t,e)})))}:r;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,o=null==t?0:t.length,r=0,i=[];++n<o;){var s=t[n];e(s,n,t)&&(i[r++]=s)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var o=n(304),r=n(313),i=n(317);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e,n){var o=n(305),r=n(306),i=n(97),s=n(132),a=n(309),l=n(134),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),c=!n&&r(t),h=!n&&!c&&s(t),p=!n&&!c&&!h&&l(t),d=n||c||h||p,f=d?o(t.length,String):[],g=f.length;for(var _ in t)!e&&!u.call(t,_)||d&&("length"==_||h&&("offset"==_||"parent"==_)||p&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||a(_,g))||f.push(_);return f}},function(t,e){t.exports=function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}},function(t,e,n){var o=n(307),r=n(70),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,l=o(function(){return arguments}())?o:function(t){return r(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},function(t,e,n){var o=n(67),r=n(70);t.exports=function(t){return r(t)&&"[object Arguments]"==o(t)}},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var o=n(67),r=n(135),i=n(70),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&r(t.length)&&!!s[o(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var o=n(127),r=e&&!e.nodeType&&e,i=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===r&&o.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=a}).call(this,n(133)(t))},function(t,e,n){var o=n(314),r=n(315),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!o(t))return r(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var o=n(316)(Object.keys,Object);t.exports=o},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var o=n(126),r=n(135);t.exports=function(t){return null!=t&&r(t.length)&&!o(t)}},function(t,e,n){var o=n(319),r=n(95),i=n(320),s=n(321),a=n(322),l=n(67),u=n(129),c="[object Map]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",f="[object DataView]",g=u(o),_=u(r),v=u(i),m=u(s),y=u(a),b=l;(o&&b(new o(new ArrayBuffer(1)))!=f||r&&b(new r)!=c||i&&b(i.resolve())!=h||s&&b(new s)!=p||a&&b(new a)!=d)&&(b=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,o=n?u(n):"";if(o)switch(o){case g:return f;case _:return c;case v:return h;case m:return p;case y:return d}return e}),t.exports=b},function(t,e,n){var o=n(54)(n(41),"DataView");t.exports=o},function(t,e,n){var o=n(54)(n(41),"Promise");t.exports=o},function(t,e,n){var o=n(54)(n(41),"Set");t.exports=o},function(t,e,n){var o=n(54)(n(41),"WeakMap");t.exports=o},,,,function(t,e,n){"use strict";var o=n(4),r=n(3),i=n(0),s=n(6),a=n.n(s),l=n(16),u=n(328),c=n(27),h=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},p=function(t,e){var n=t.prefixCls,s=t.component,p=void 0===s?"article":s,d=t.className,f=t["aria-label"],g=t.setContentRef,_=t.children,v=h(t,["prefixCls","component","className","aria-label","setContentRef","children"]),m=i.useContext(u.b),y=m.getPrefixCls,b=m.direction,E=e;g&&(Object(c.a)(!1,"Typography","`setContentRef` is deprecated. Please use `ref` instead."),E=Object(l.a)(e,g));var T=p,S=y("typography",n),k=a()(S,Object(r.a)({},"".concat(S,"-rtl"),"rtl"===b),d);return i.createElement(T,Object(o.a)({className:k,"aria-label":f,ref:E},v),_)},d=i.forwardRef(p);d.displayName="Typography";var f=d,g=n(7),_=n(25),v=n(5),m=n(43),y=n(46),b=n(143),E=n.n(b),T=n(2),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},k=n(21),C=function(t,e){return i.createElement(k.a,Object(T.a)(Object(T.a)({},t),{},{ref:e,icon:S}))};C.displayName="EditOutlined";var O=i.forwardRef(C),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},w=function(t,e){return i.createElement(k.a,Object(T.a)(Object(T.a)({},t),{},{ref:e,icon:R}))};w.displayName="CheckOutlined";var I=i.forwardRef(w),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},N=function(t,e){return i.createElement(k.a,Object(T.a)(Object(T.a)({},t),{},{ref:e,icon:A}))};N.displayName="CopyOutlined";var D=i.forwardRef(N),M=n(79),L=n(42),x=n(78),P=n(56),B=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},F={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},U=i.forwardRef((function(t,e){var n=t.style,r=t.noStyle,s=t.disabled,a=B(t,["style","noStyle","disabled"]),l={};return r||(l=Object(o.a)({},F)),s&&(l.pointerEvents="none"),l=Object(o.a)(Object(o.a)({},l),n),i.createElement("div",Object(o.a)({role:"button",tabIndex:0,ref:e},a,{onKeyDown:function(t){t.keyCode===P.a.ENTER&&t.preventDefault()},onKeyUp:function(e){var n=e.keyCode,o=t.onClick;n===P.a.ENTER&&o&&o()},style:l}))})),j=n(124),H=n(17),W=n(148),V={adjustX:1,adjustY:1},G=[0,0],z={left:{points:["cr","cl"],overflow:V,offset:[-4,0],targetOffset:G},right:{points:["cl","cr"],overflow:V,offset:[4,0],targetOffset:G},top:{points:["bc","tc"],overflow:V,offset:[0,-4],targetOffset:G},bottom:{points:["tc","bc"],overflow:V,offset:[0,4],targetOffset:G},topLeft:{points:["bl","tl"],overflow:V,offset:[0,-4],targetOffset:G},leftTop:{points:["tr","tl"],overflow:V,offset:[-4,0],targetOffset:G},topRight:{points:["br","tr"],overflow:V,offset:[0,-4],targetOffset:G},rightTop:{points:["tl","tr"],overflow:V,offset:[4,0],targetOffset:G},bottomRight:{points:["tr","br"],overflow:V,offset:[0,4],targetOffset:G},rightBottom:{points:["bl","br"],overflow:V,offset:[4,0],targetOffset:G},bottomLeft:{points:["tl","bl"],overflow:V,offset:[0,4],targetOffset:G},leftBottom:{points:["br","bl"],overflow:V,offset:[-4,0],targetOffset:G}},X=function(t){var e=t.overlay,n=t.prefixCls,o=t.id,r=t.overlayInnerStyle;return i.createElement("div",{className:"".concat(n,"-inner"),id:o,role:"tooltip",style:r},"function"===typeof e?e():e)},Y=function(t,e){var n=t.overlayClassName,r=t.trigger,s=void 0===r?["hover"]:r,a=t.mouseEnterDelay,l=void 0===a?0:a,u=t.mouseLeaveDelay,c=void 0===u?.1:u,h=t.overlayStyle,p=t.prefixCls,d=void 0===p?"rc-tooltip":p,f=t.children,_=t.onVisibleChange,v=t.afterVisibleChange,m=t.transitionName,y=t.animation,b=t.motion,E=t.placement,S=void 0===E?"right":E,k=t.align,C=void 0===k?{}:k,O=t.destroyTooltipOnHide,R=void 0!==O&&O,w=t.defaultVisible,I=t.getTooltipContainer,A=t.overlayInnerStyle,N=Object(H.a)(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),D=Object(i.useRef)(null);Object(i.useImperativeHandle)(e,(function(){return D.current}));var M=Object(T.a)({},N);"visible"in t&&(M.popupVisible=t.visible);var L=!1,x=!1;if("boolean"===typeof R)L=R;else if(R&&"object"===Object(g.a)(R)){var P=R.keepParent;L=!0===P,x=!1===P}return i.createElement(W.a,Object(o.a)({popupClassName:n,prefixCls:d,popup:function(){var e=t.arrowContent,n=void 0===e?null:e,o=t.overlay,r=t.id;return[i.createElement("div",{className:"".concat(d,"-arrow"),key:"arrow"},n),i.createElement(X,{key:"content",prefixCls:d,id:r,overlay:o,overlayInnerStyle:A})]},action:s,builtinPlacements:z,popupPlacement:S,ref:D,popupAlign:C,getPopupContainer:I,onPopupVisibleChange:_,afterPopupVisibleChange:v,popupTransitionName:m,popupAnimation:y,popupMotion:b,defaultPopupVisible:w,destroyPopupOnHide:L,autoDestroy:x,mouseLeaveDelay:c,popupStyle:h,mouseEnterDelay:l},M),f)},K=Object(i.forwardRef)(Y),J={adjustX:1,adjustY:1},q={adjustX:0,adjustY:0},$=[0,0];function Z(t){return"boolean"===typeof t?t?J:q:Object(o.a)(Object(o.a)({},q),t)}var Q=n(26),tt=n(22),et=(Object(tt.a)("success","processing","error","default","warning"),Object(tt.a)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")),nt=(Object(tt.a)("bottomLeft","bottomRight","topLeft","topRight"),function(t,e,n){return void 0!==n?n:"".concat(t,"-").concat(e)}),ot=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},rt=new RegExp("^(".concat(et.join("|"),")(-inverse)?$"));function it(t,e){var n=t.type;if((!0===n.__ANT_BUTTON||"button"===t.type)&&t.props.disabled||!0===n.__ANT_SWITCH&&(t.props.disabled||t.props.loading)){var r=function(t,e){var n={},r=Object(o.a)({},t);return e.forEach((function(e){t&&e in t&&(n[e]=t[e],delete r[e])})),{picked:n,omitted:r}}(t.props.style,["position","left","right","top","bottom","float","display","zIndex"]),s=r.picked,l=r.omitted,u=Object(o.a)(Object(o.a)({display:"inline-block"},s),{cursor:"not-allowed",width:t.props.block?"100%":null}),c=Object(o.a)(Object(o.a)({},l),{pointerEvents:"none"}),h=Object(Q.a)(t,{style:c,className:null});return i.createElement("span",{style:u,className:a()(t.props.className,"".concat(e,"-disabled-compatible-wrapper"))},h)}return t}var st=i.forwardRef((function(t,e){var n,s=i.useContext(u.b),l=s.getPopupContainer,c=s.getPrefixCls,h=s.direction,p=Object(m.a)(!1,{value:t.visible,defaultValue:t.defaultVisible}),d=Object(v.a)(p,2),f=d[0],g=d[1],_=function(){var e=t.title,n=t.overlay;return!e&&!n&&0!==e},y=function(){var e=t.builtinPlacements,n=t.arrowPointAtCenter,r=t.autoAdjustOverflow;return e||function(t){var e=t.arrowWidth,n=void 0===e?4:e,r=t.horizontalArrowShift,i=void 0===r?16:r,s=t.verticalArrowShift,a=void 0===s?8:s,l=t.autoAdjustOverflow,u=t.arrowPointAtCenter,c={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(i+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(a+n)]},topRight:{points:["br","tc"],offset:[i+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(a+n)]},bottomRight:{points:["tr","bc"],offset:[i+n,4]},rightBottom:{points:["bl","cr"],offset:[4,a+n]},bottomLeft:{points:["tl","bc"],offset:[-(i+n),4]},leftBottom:{points:["br","cl"],offset:[-4,a+n]}};return Object.keys(c).forEach((function(t){c[t]=u?Object(o.a)(Object(o.a)({},c[t]),{overflow:Z(l),targetOffset:$}):Object(o.a)(Object(o.a)({},z[t]),{overflow:Z(l)}),c[t].ignoreShake=!0})),c}({arrowPointAtCenter:n,autoAdjustOverflow:r})},b=t.getPopupContainer,E=ot(t,["getPopupContainer"]),T=t.prefixCls,S=t.openClassName,k=t.getTooltipContainer,C=t.overlayClassName,O=t.color,R=t.overlayInnerStyle,w=t.children,I=c("tooltip",T),A=c(),N=f;!("visible"in t)&&_()&&(N=!1);var D,M=it(Object(Q.b)(w)?w:i.createElement("span",null,w),I),L=M.props,x=a()(L.className,Object(r.a)({},S||"".concat(I,"-open"),!0)),P=a()(C,(n={},Object(r.a)(n,"".concat(I,"-rtl"),"rtl"===h),Object(r.a)(n,"".concat(I,"-").concat(O),O&&rt.test(O)),n)),B=R;return O&&!rt.test(O)&&(B=Object(o.a)(Object(o.a)({},R),{background:O}),D={"--antd-arrow-background-color":O}),i.createElement(K,Object(o.a)({},E,{prefixCls:I,overlayClassName:P,getTooltipContainer:b||k||l,ref:e,builtinPlacements:y(),overlay:function(){var e=t.title,n=t.overlay;return 0===e?e:n||e||""}(),visible:N,onVisibleChange:function(e){var n;g(!_()&&e),_()||null===(n=t.onVisibleChange)||void 0===n||n.call(t,e)},onPopupAlign:function(t,e){var n=y(),o=Object.keys(n).find((function(t){return n[t].points[0]===e.points[0]&&n[t].points[1]===e.points[1]}));if(o){var r=t.getBoundingClientRect(),i={top:"50%",left:"50%"};o.indexOf("top")>=0||o.indexOf("Bottom")>=0?i.top="".concat(r.height-e.offset[1],"px"):(o.indexOf("Top")>=0||o.indexOf("bottom")>=0)&&(i.top="".concat(-e.offset[1],"px")),o.indexOf("left")>=0||o.indexOf("Right")>=0?i.left="".concat(r.width-e.offset[0],"px"):(o.indexOf("right")>=0||o.indexOf("Left")>=0)&&(i.left="".concat(-e.offset[0],"px")),t.style.transformOrigin="".concat(i.left," ").concat(i.top)}},overlayInnerStyle:B,arrowContent:i.createElement("span",{className:"".concat(I,"-arrow-content"),style:D}),motion:{motionName:nt(A,"zoom-big-fast",t.transitionName),motionDeadline:1e3}}),N?Object(Q.a)(M,{className:x}):M)}));st.displayName="Tooltip",st.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};var at=st,lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},ut=function(t,e){return i.createElement(k.a,Object(T.a)(Object(T.a)({},t),{},{ref:e,icon:lt}))};ut.displayName="EnterOutlined";var ct=i.forwardRef(ut),ht=n(81),pt=function(t){var e=t.prefixCls,n=t["aria-label"],o=t.className,s=t.style,l=t.direction,u=t.maxLength,c=t.autoSize,h=void 0===c||c,p=t.value,d=t.onSave,f=t.onCancel,g=t.onEnd,_=t.component,m=t.enterIcon,y=void 0===m?i.createElement(ct,null):m,b=i.useRef(),E=i.useRef(!1),T=i.useRef(),S=i.useState(p),k=Object(v.a)(S,2),C=k[0],O=k[1];i.useEffect((function(){O(p)}),[p]),i.useEffect((function(){if(b.current&&b.current.resizableTextArea){var t=b.current.resizableTextArea.textArea;t.focus();var e=t.value.length;t.setSelectionRange(e,e)}}),[]);var R=function(){d(C.trim())},w=_?"".concat(e,"-").concat(_):"",I=a()(e,"".concat(e,"-edit-content"),Object(r.a)({},"".concat(e,"-rtl"),"rtl"===l),o,w);return i.createElement("div",{className:I,style:s},i.createElement(ht.a,{ref:b,maxLength:u,value:C,onChange:function(t){var e=t.target;O(e.value.replace(/[\n\r]/g,""))},onKeyDown:function(t){var e=t.keyCode;E.current||(T.current=e)},onKeyUp:function(t){var e=t.keyCode,n=t.ctrlKey,o=t.altKey,r=t.metaKey,i=t.shiftKey;T.current!==e||E.current||n||o||r||i||(e===P.a.ENTER?(R(),null===g||void 0===g||g()):e===P.a.ESC&&f())},onCompositionStart:function(){E.current=!0},onCompositionEnd:function(){E.current=!1},onBlur:function(){R()},"aria-label":n,rows:1,autoSize:h}),null!==y?Object(Q.a)(y,{className:"".concat(e,"-edit-content-confirm")}):null)};function dt(t,e){return i.useMemo((function(){var n=!!t;return[n,Object(o.a)(Object(o.a)({},e),n&&"object"===Object(g.a)(t)?t:null)]}),[t])}function ft(t){var e=Object(g.a)(t);return"string"===e||"number"===e}function gt(t,e){for(var n=0,o=[],r=0;r<t.length;r+=1){if(n===e)return o;var i=t[r],s=n+(ft(i)?String(i).length:1);if(s>e){var a=e-n;return o.push(String(i).slice(0,a)),o}o.push(i),n=s}return t}var _t=function(t){var e=t.enabledMeasure,n=t.children,r=t.text,s=t.width,a=t.rows,l=t.onEllipsis,u=i.useState([0,0,0]),c=Object(v.a)(u,2),h=c[0],p=c[1],d=i.useState(0),f=Object(v.a)(d,2),g=f[0],_=f[1],m=Object(v.a)(h,3),b=m[0],E=m[1],T=m[2],S=i.useState(0),k=Object(v.a)(S,2),C=k[0],O=k[1],R=i.useRef(null),w=i.useRef(null),I=i.useMemo((function(){return Object(y.a)(r)}),[r]),A=i.useMemo((function(){return function(t){var e=0;return t.forEach((function(t){ft(t)?e+=String(t).length:e+=1})),e}(I)}),[I]),N=i.useMemo((function(){return e&&3===g?n(gt(I,E),E<A):n(I,!1)}),[e,g,n,I,E,A]);Object(L.a)((function(){e&&s&&A&&(_(1),p([0,Math.ceil(A/2),A]))}),[e,s,r,A,a]),Object(L.a)((function(){var t;1===g&&O((null===(t=R.current)||void 0===t?void 0:t.offsetHeight)||0)}),[g]),Object(L.a)((function(){var t,e;if(C)if(1===g)((null===(t=w.current)||void 0===t?void 0:t.offsetHeight)||0)<=a*C?(_(4),l(!1)):_(2);else if(2===g)if(b!==T){var n=(null===(e=w.current)||void 0===e?void 0:e.offsetHeight)||0,o=b,r=T;b===T-1?r=b:n<=a*C?o=E:r=E;var i=Math.ceil((o+r)/2);p([o,i,r])}else _(3),l(!0)}),[g,b,T,a,C]);var D={width:s,whiteSpace:"normal",margin:0,padding:0},M=function(t,e,n){return i.createElement("span",{"aria-hidden":!0,ref:e,style:Object(o.a)({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none"},n)},t)};return i.createElement(i.Fragment,null,N,e&&3!==g&&4!==g&&i.createElement(i.Fragment,null,M("lg",R,{wordBreak:"keep-all",whiteSpace:"nowrap"}),1===g?M(n(I,!1),w,D):function(t,e){var o=gt(I,t);return M(n(o,!0),e,D)}(E,w)))};var vt=function(t){var e=t.title,n=t.enabledEllipsis,o=t.isEllipsis,r=t.children;return e&&n?i.createElement(at,{title:e,visible:!!o&&void 0},r):r},mt=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n};function yt(t,e,n){return!0===t||void 0===t?e:t||n&&e}function bt(t){return Array.isArray(t)?t:[t]}var Et=i.forwardRef((function(t,e){var n=t.prefixCls,s=t.className,c=t.style,h=t.type,p=t.disabled,d=t.children,b=t.ellipsis,T=t.editable,S=t.copyable,k=t.component,C=t.title,R=mt(t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),w=i.useContext(u.b),A=w.getPrefixCls,N=w.direction,P=Object(x.b)("Text")[0],B=i.useRef(null),F=i.useRef(null),H=A("typography",n),W=Object(_.a)(R,["mark","code","delete","underline","strong","keyboard","italic"]),V=dt(T),G=Object(v.a)(V,2),z=G[0],X=G[1],Y=Object(m.a)(!1,{value:X.editing}),K=Object(v.a)(Y,2),J=K[0],q=K[1],$=X.triggerType,Z=void 0===$?["icon"]:$,Q=function(t){var e;t&&(null===(e=X.onStart)||void 0===e||e.call(X)),q(t)};!function(t,e){var n=i.useRef(!1);i.useEffect((function(){n.current?t():n.current=!0}),e)}((function(){var t;J||null===(t=F.current)||void 0===t||t.focus()}),[J]);var tt=function(t){null===t||void 0===t||t.preventDefault(),Q(!0)},et=dt(S),nt=Object(v.a)(et,2),ot=nt[0],rt=nt[1],it=i.useState(!1),st=Object(v.a)(it,2),lt=st[0],ut=st[1],ct=i.useRef(),ht=function(){clearTimeout(ct.current)},ft=function(t){var e;null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),E()(rt.text||String(d)||""),ut(!0),ht(),ct.current=setTimeout((function(){ut(!1)}),3e3),null===(e=rt.onCopy)||void 0===e||e.call(rt,t)};i.useEffect((function(){return ht}),[]);var gt=i.useState(!1),Et=Object(v.a)(gt,2),Tt=Et[0],St=Et[1],kt=i.useState(!1),Ct=Object(v.a)(kt,2),Ot=Ct[0],Rt=Ct[1],wt=i.useState(!1),It=Object(v.a)(wt,2),At=It[0],Nt=It[1],Dt=i.useState(!1),Mt=Object(v.a)(Dt,2),Lt=Mt[0],xt=Mt[1],Pt=i.useState(!1),Bt=Object(v.a)(Pt,2),Ft=Bt[0],Ut=Bt[1],jt=dt(b,{expandable:!1}),Ht=Object(v.a)(jt,2),Wt=Ht[0],Vt=Ht[1],Gt=Wt&&!At,zt=Vt.rows,Xt=void 0===zt?1:zt,Yt=i.useMemo((function(){return!Gt||void 0!==Vt.suffix||Vt.onEllipsis||Vt.expandable||z||ot}),[Gt,Vt,z,ot]);Object(L.a)((function(){Wt&&!Yt&&(St(Object(j.a)("webkitLineClamp")),Rt(Object(j.a)("textOverflow")))}),[Yt,Wt]);var Kt=i.useMemo((function(){return!Yt&&(1===Xt?Ot:Tt)}),[Yt,Ot,Tt]),Jt=Gt&&(Kt?Ft:Lt),qt=Gt&&1===Xt&&Kt,$t=Gt&&Xt>1&&Kt,Zt=function(t){var e;Nt(!0),null===(e=Vt.onExpand)||void 0===e||e.call(Vt,t)},Qt=i.useState(0),te=Object(v.a)(Qt,2),ee=te[0],ne=te[1],oe=function(t){var e;xt(t),Lt!==t&&(null===(e=Vt.onEllipsis)||void 0===e||e.call(Vt,t))};i.useEffect((function(){var t=B.current;if(Wt&&Kt&&t){var e=$t?t.offsetHeight<t.scrollHeight:t.offsetWidth<t.scrollWidth;Ft!==e&&Ut(e)}}),[Wt,Kt,d,$t]);var re=!0===Vt.tooltip?d:Vt.tooltip,ie=i.useMemo((function(){var t=function(t){return["string","number"].includes(Object(g.a)(t))};if(Wt&&!Kt)return t(d)?d:t(C)?C:t(re)?re:void 0}),[Wt,Kt,C,re,Jt]);if(J)return i.createElement(pt,{value:"string"===typeof d?d:"",onSave:function(t){var e;null===(e=X.onChange)||void 0===e||e.call(X,t),Q(!1)},onCancel:function(){var t;null===(t=X.onCancel)||void 0===t||t.call(X),Q(!1)},onEnd:X.onEnd,prefixCls:H,className:s,style:c,direction:N,component:k,maxLength:X.maxLength,autoSize:X.autoSize,enterIcon:X.enterIcon});var se=function(){var t,e=Vt.expandable,n=Vt.symbol;return e?(t=n||P.expand,i.createElement("a",{key:"expand",className:"".concat(H,"-expand"),onClick:Zt,"aria-label":P.expand},t)):null},ae=function(){if(z){var t=X.icon,e=X.tooltip,n=Object(y.a)(e)[0]||P.edit,o="string"===typeof n?n:"";return Z.includes("icon")?i.createElement(at,{key:"edit",title:!1===e?"":n},i.createElement(U,{ref:F,className:"".concat(H,"-edit"),onClick:tt,"aria-label":o},t||i.createElement(O,{role:"button"}))):null}},le=function(){if(ot){var t=rt.tooltips,e=rt.icon,n=bt(t),o=bt(e),r=lt?yt(n[1],P.copied):yt(n[0],P.copy),s=lt?P.copied:P.copy,l="string"===typeof r?r:s;return i.createElement(at,{key:"copy",title:r},i.createElement(U,{className:a()("".concat(H,"-copy"),lt&&"".concat(H,"-copy-success")),onClick:ft,"aria-label":l},lt?yt(o[1],i.createElement(I,null),!0):yt(o[0],i.createElement(D,null),!0)))}};return i.createElement(M.a,{onResize:function(t){var e=t.offsetWidth;ne(e)},disabled:!Gt||Kt},(function(n){var u;return i.createElement(vt,{title:re,enabledEllipsis:Gt,isEllipsis:Jt},i.createElement(f,Object(o.a)({className:a()((u={},Object(r.a)(u,"".concat(H,"-").concat(h),h),Object(r.a)(u,"".concat(H,"-disabled"),p),Object(r.a)(u,"".concat(H,"-ellipsis"),Wt),Object(r.a)(u,"".concat(H,"-single-line"),Gt&&1===Xt),Object(r.a)(u,"".concat(H,"-ellipsis-single-line"),qt),Object(r.a)(u,"".concat(H,"-ellipsis-multiple-line"),$t),u),s),style:Object(o.a)(Object(o.a)({},c),{WebkitLineClamp:$t?Xt:void 0}),component:k,ref:Object(l.a)(n,B,e),direction:N,onClick:Z.includes("text")?tt:null,"aria-label":ie,title:C},W),i.createElement(_t,{enabledMeasure:Gt&&!Kt,text:d,rows:Xt,width:ee,onEllipsis:oe},(function(e,n){var o=e;e.length&&n&&ie&&(o=i.createElement("span",{key:"show-content","aria-hidden":!0},o));var r=function(t,e){var n=t.mark,o=t.code,r=t.underline,s=t.delete,a=t.strong,l=t.keyboard,u=t.italic,c=e;function h(t,e){t&&(c=i.createElement(e,{},c))}return h(a,"strong"),h(r,"u"),h(s,"del"),h(o,"code"),h(n,"mark"),h(l,"kbd"),h(u,"i"),c}(t,i.createElement(i.Fragment,null,o,function(t){return[t&&i.createElement("span",{"aria-hidden":!0,key:"ellipsis"},"..."),Vt.suffix,(e=t,[e&&se(),ae(),le()])];var e}(n)));return r}))))}))})),Tt=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},St=function(t,e){var n=t.ellipsis,r=Tt(t,["ellipsis"]),s=i.useMemo((function(){return n&&"object"===Object(g.a)(n)?Object(_.a)(n,["expandable","rows"]):n}),[n]);return Object(c.a)("object"!==Object(g.a)(n)||!n||!("expandable"in n)&&!("rows"in n),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props."),i.createElement(Et,Object(o.a)({ref:e},r,{ellipsis:s,component:"span"}))},kt=i.forwardRef(St),Ct=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},Ot=function(t,e){var n=t.ellipsis,r=t.rel,s=Ct(t,["ellipsis","rel"]);Object(c.a)("object"!==Object(g.a)(n),"Typography.Link","`ellipsis` only supports boolean value.");var a=i.useRef(null);i.useImperativeHandle(e,(function(){return a.current}));var l=Object(o.a)(Object(o.a)({},s),{rel:void 0===r&&"_blank"===s.target?"noopener noreferrer":r});return delete l.navigate,i.createElement(Et,Object(o.a)({},l,{ref:a,ellipsis:!!n,component:"a"}))},Rt=i.forwardRef(Ot),wt=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},It=Object(tt.b)(1,2,3,4,5),At=function(t,e){var n,r=t.level,s=void 0===r?1:r,a=wt(t,["level"]);return-1!==It.indexOf(s)?n="h".concat(s):(Object(c.a)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),n="h1"),i.createElement(Et,Object(o.a)({ref:e},a,{component:n}))},Nt=i.forwardRef(At),Dt=function(t,e){return i.createElement(Et,Object(o.a)({ref:e},t,{component:"div"}))},Mt=i.forwardRef(Dt),Lt=f;Lt.Text=kt,Lt.Link=Rt,Lt.Title=Nt,Lt.Paragraph=Mt;e.a=Lt},function(t,e,n){"use strict";var o=n(30),r=n(4),i=n(3),s=n(0),a=n(6),l=n.n(a),u=n(328),c=n(35),h=function(t){var e,n=Object(s.useContext)(u.b),o=n.getPrefixCls,a=n.direction,h=t.prefixCls,p=t.className,d=void 0===p?"":p,f=o("input-group",h),g=l()(f,(e={},Object(i.a)(e,"".concat(f,"-lg"),"large"===t.size),Object(i.a)(e,"".concat(f,"-sm"),"small"===t.size),Object(i.a)(e,"".concat(f,"-compact"),t.compact),Object(i.a)(e,"".concat(f,"-rtl"),"rtl"===a),e),d),_=Object(s.useContext)(c.a),v=Object(s.useMemo)((function(){return Object(r.a)(Object(r.a)({},_),{isFormItemInput:!1})}),[_]);return s.createElement("span",{className:g,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},s.createElement(c.a.Provider,{value:v},t.children))},p=n(16),d=n(2),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},g=n(21),_=function(t,e){return s.createElement(g.a,Object(d.a)(Object(d.a)({},t),{},{ref:e,icon:f}))};_.displayName="SearchOutlined";var v=s.forwardRef(_),m=n(149),y=n(45),b=n(26),E=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},T=s.forwardRef((function(t,e){var n,a,c=t.prefixCls,h=t.inputPrefixCls,d=t.className,f=t.size,g=t.suffix,_=t.enterButton,T=void 0!==_&&_,S=t.addonAfter,k=t.loading,C=t.disabled,O=t.onSearch,R=t.onChange,w=t.onCompositionStart,I=t.onCompositionEnd,A=E(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),N=s.useContext(u.b),D=N.getPrefixCls,M=N.direction,L=s.useContext(y.a),x=s.useRef(!1),P=f||L,B=s.useRef(null),F=function(t){var e;document.activeElement===(null===(e=B.current)||void 0===e?void 0:e.input)&&t.preventDefault()},U=function(t){var e,n;O&&O(null===(n=null===(e=B.current)||void 0===e?void 0:e.input)||void 0===n?void 0:n.value,t)},j=D("input-search",c),H=D("input",h),W="boolean"===typeof T?s.createElement(v,null):null,V="".concat(j,"-button"),G=T||{},z=G.type&&!0===G.type.__ANT_BUTTON;a=z||"button"===G.type?Object(b.a)(G,Object(r.a)({onMouseDown:F,onClick:function(t){var e,n;null===(n=null===(e=null===G||void 0===G?void 0:G.props)||void 0===e?void 0:e.onClick)||void 0===n||n.call(e,t),U(t)},key:"enterButton"},z?{className:V,size:P}:{})):s.createElement(m.a,{className:V,type:T?"primary":void 0,size:P,disabled:C,key:"enterButton",onMouseDown:F,onClick:U,loading:k,icon:W},T),S&&(a=[a,Object(b.a)(S,{key:"addonAfter"})]);var X=l()(j,(n={},Object(i.a)(n,"".concat(j,"-rtl"),"rtl"===M),Object(i.a)(n,"".concat(j,"-").concat(P),!!P),Object(i.a)(n,"".concat(j,"-with-button"),!!T),n),d);return s.createElement(o.a,Object(r.a)({ref:Object(p.a)(B,e),onPressEnter:function(t){x.current||U(t)}},A,{size:P,onCompositionStart:function(t){x.current=!0,null===w||void 0===w||w(t)},onCompositionEnd:function(t){x.current=!1,null===I||void 0===I||I(t)},prefixCls:H,addonAfter:a,suffix:g,onChange:function(t){t&&t.target&&"click"===t.type&&O&&O(t.target.value,t),R&&R(t)},className:X,disabled:C}))}));T.displayName="Search";var S=T,k=n(81),C=n(5),O=n(25),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},w=function(t,e){return s.createElement(g.a,Object(d.a)(Object(d.a)({},t),{},{ref:e,icon:R}))};w.displayName="EyeOutlined";var I=s.forwardRef(w),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},N=function(t,e){return s.createElement(g.a,Object(d.a)(Object(d.a)({},t),{},{ref:e,icon:A}))};N.displayName="EyeInvisibleOutlined";var D=s.forwardRef(N),M=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},L={click:"onClick",hover:"onMouseOver"},x=s.forwardRef((function(t,e){var n=Object(s.useState)(!1),a=Object(C.a)(n,2),c=a[0],h=a[1],p=function(){t.disabled||h(!c)},d=function(n){var a=n.getPrefixCls,u=t.className,h=t.prefixCls,d=t.inputPrefixCls,f=t.size,g=t.visibilityToggle,_=M(t,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),v=a("input",d),m=a("input-password",h),y=g&&function(e){var n,o=t.action,r=t.iconRender,a=L[o]||"",l=(void 0===r?function(){return null}:r)(c),u=(n={},Object(i.a)(n,a,p),Object(i.a)(n,"className","".concat(e,"-icon")),Object(i.a)(n,"key","passwordIcon"),Object(i.a)(n,"onMouseDown",(function(t){t.preventDefault()})),Object(i.a)(n,"onMouseUp",(function(t){t.preventDefault()})),n);return s.cloneElement(s.isValidElement(l)?l:s.createElement("span",null,l),u)}(m),b=l()(m,u,Object(i.a)({},"".concat(m,"-").concat(f),!!f)),E=Object(r.a)(Object(r.a)({},Object(O.a)(_,["suffix","iconRender"])),{type:c?"text":"password",className:b,prefixCls:v,suffix:y});return f&&(E.size=f),s.createElement(o.a,Object(r.a)({ref:e},E))};return s.createElement(u.a,null,d)}));x.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(t){return t?s.createElement(I,null):s.createElement(D,null)}},x.displayName="Password";var P=x,B=o.a;B.Group=h,B.Search=S,B.TextArea=k.a,B.Password=P;e.a=B},function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return m}));var o=n(4),r=n(0),i=n(3),s=n(6),a=n.n(s),l=n(78),u=function(){var t=(0,r.useContext(v).getPrefixCls)("empty-img-default");return r.createElement("svg",{className:t,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("g",{transform:"translate(24 31.67)"},r.createElement("ellipse",{className:"".concat(t,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),r.createElement("path",{className:"".concat(t,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),r.createElement("path",{className:"".concat(t,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),r.createElement("path",{className:"".concat(t,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),r.createElement("path",{className:"".concat(t,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),r.createElement("path",{className:"".concat(t,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),r.createElement("g",{className:"".concat(t,"-g"),transform:"translate(149.65 15.383)"},r.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),r.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},c=function(){var t=(0,r.useContext(v).getPrefixCls)("empty-img-simple");return r.createElement("svg",{className:t,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},r.createElement("ellipse",{className:"".concat(t,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),r.createElement("g",{className:"".concat(t,"-g"),fillRule:"nonzero"},r.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),r.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(t,"-path")}))))},h=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},p=r.createElement(u,null),d=r.createElement(c,null),f=function(t){var e=t.className,n=t.prefixCls,s=t.image,u=void 0===s?p:s,c=t.description,f=t.children,g=t.imageStyle,_=h(t,["className","prefixCls","image","description","children","imageStyle"]),m=r.useContext(v),y=m.getPrefixCls,b=m.direction;return r.createElement(l.a,{componentName:"Empty"},(function(t){var s,l=y("empty",n),h="undefined"!==typeof c?c:t.description,p="string"===typeof h?h:"empty",v=null;return v="string"===typeof u?r.createElement("img",{alt:p,src:u}):u,r.createElement("div",Object(o.a)({className:a()(l,(s={},Object(i.a)(s,"".concat(l,"-normal"),u===d),Object(i.a)(s,"".concat(l,"-rtl"),"rtl"===b),s),e)},_),r.createElement("div",{className:"".concat(l,"-image"),style:g},v),h&&r.createElement("div",{className:"".concat(l,"-description")},h),f&&r.createElement("div",{className:"".concat(l,"-footer")},f))}))};f.PRESENTED_IMAGE_DEFAULT=p,f.PRESENTED_IMAGE_SIMPLE=d;var g=f,_=function(t){return r.createElement(m,null,(function(e){var n=(0,e.getPrefixCls)("empty");switch(t){case"Table":case"List":return r.createElement(g,{image:g.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return r.createElement(g,{image:g.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return r.createElement(g,null)}}))},v=r.createContext({getPrefixCls:function(t,e){return e||(t?"ant-".concat(t):"ant")},renderEmpty:_}),m=v.Consumer},function(t,e,n){"use strict";var o=n(4),r=n(3),i=n(7),s=n(5),a=n(0),l=n(6),u=n.n(l),c=n(328),h=n(77),p=n(22),d=["xxl","xl","lg","md","sm","xs"],f={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},g=new Map,_=-1,v={},m={matchHandlers:{},dispatch:function(t){return v=t,g.forEach((function(t){return t(v)})),g.size>=1},subscribe:function(t){return g.size||this.register(),_+=1,g.set(_,t),t(v),_},unsubscribe:function(t){g.delete(t),g.size||this.unregister()},unregister:function(){var t=this;Object.keys(f).forEach((function(e){var n=f[e],o=t.matchHandlers[n];null===o||void 0===o||o.mql.removeListener(null===o||void 0===o?void 0:o.listener)})),g.clear()},register:function(){var t=this;Object.keys(f).forEach((function(e){var n=f[e],i=function(n){var i=n.matches;t.dispatch(Object(o.a)(Object(o.a)({},v),Object(r.a)({},e,i)))},s=window.matchMedia(n);s.addListener(i),t.matchHandlers[n]={mql:s,listener:i},i(s)}))}},y=n(98),b=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},E=(Object(p.a)("top","middle","bottom","stretch"),Object(p.a)("start","end","center","space-around","space-between","space-evenly"),a.forwardRef((function(t,e){var n,l=t.prefixCls,p=t.justify,f=t.align,g=t.className,_=t.style,v=t.children,E=t.gutter,T=void 0===E?0:E,S=t.wrap,k=b(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),C=a.useContext(c.b),O=C.getPrefixCls,R=C.direction,w=a.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),I=Object(s.a)(w,2),A=I[0],N=I[1],D=function(){var t=a.useState(!1),e=Object(s.a)(t,2),n=e[0],o=e[1];return a.useEffect((function(){o(Object(y.a)())}),[]),n}(),M=a.useRef(T);a.useEffect((function(){var t=m.subscribe((function(t){var e=M.current||0;(!Array.isArray(e)&&"object"===Object(i.a)(e)||Array.isArray(e)&&("object"===Object(i.a)(e[0])||"object"===Object(i.a)(e[1])))&&N(t)}));return function(){return m.unsubscribe(t)}}),[]);var L=O("row",l),x=function(){var t=[0,0];return(Array.isArray(T)?T:[T,0]).forEach((function(e,n){if("object"===Object(i.a)(e))for(var o=0;o<d.length;o++){var r=d[o];if(A[r]&&void 0!==e[r]){t[n]=e[r];break}}else t[n]=e||0})),t}(),P=u()(L,(n={},Object(r.a)(n,"".concat(L,"-no-wrap"),!1===S),Object(r.a)(n,"".concat(L,"-").concat(p),p),Object(r.a)(n,"".concat(L,"-").concat(f),f),Object(r.a)(n,"".concat(L,"-rtl"),"rtl"===R),n),g),B={},F=x[0]>0?x[0]/-2:void 0,U=x[1]>0?x[1]/-2:void 0;if(F&&(B.marginLeft=F,B.marginRight=F),D){var j=Object(s.a)(x,2);B.rowGap=j[1]}else U&&(B.marginTop=U,B.marginBottom=U);var H=Object(s.a)(x,2),W=H[0],V=H[1],G=a.useMemo((function(){return{gutter:[W,V],wrap:S,supportFlexGap:D}}),[W,V,S,D]);return a.createElement(h.a.Provider,{value:G},a.createElement("div",Object(o.a)({},k,{className:P,style:Object(o.a)(Object(o.a)({},B),_),ref:e}),v))})));E.displayName="Row";var T=E;e.a=T},function(t,e,n){"use strict";var o=n(3),r=n(4),i=n(7),s=n(0),a=n(6),l=n.n(a),u=n(77),c=n(328),h=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n};var p=["xs","sm","md","lg","xl","xxl"],d=s.forwardRef((function(t,e){var n,a=s.useContext(c.b),d=a.getPrefixCls,f=a.direction,g=s.useContext(u.a),_=g.gutter,v=g.wrap,m=g.supportFlexGap,y=t.prefixCls,b=t.span,E=t.order,T=t.offset,S=t.push,k=t.pull,C=t.className,O=t.children,R=t.flex,w=t.style,I=h(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),A=d("col",y),N={};p.forEach((function(e){var n,s={},a=t[e];"number"===typeof a?s.span=a:"object"===Object(i.a)(a)&&(s=a||{}),delete I[e],N=Object(r.a)(Object(r.a)({},N),(n={},Object(o.a)(n,"".concat(A,"-").concat(e,"-").concat(s.span),void 0!==s.span),Object(o.a)(n,"".concat(A,"-").concat(e,"-order-").concat(s.order),s.order||0===s.order),Object(o.a)(n,"".concat(A,"-").concat(e,"-offset-").concat(s.offset),s.offset||0===s.offset),Object(o.a)(n,"".concat(A,"-").concat(e,"-push-").concat(s.push),s.push||0===s.push),Object(o.a)(n,"".concat(A,"-").concat(e,"-pull-").concat(s.pull),s.pull||0===s.pull),Object(o.a)(n,"".concat(A,"-rtl"),"rtl"===f),n))}));var D=l()(A,(n={},Object(o.a)(n,"".concat(A,"-").concat(b),void 0!==b),Object(o.a)(n,"".concat(A,"-order-").concat(E),E),Object(o.a)(n,"".concat(A,"-offset-").concat(T),T),Object(o.a)(n,"".concat(A,"-push-").concat(S),S),Object(o.a)(n,"".concat(A,"-pull-").concat(k),k),n),C,N),M={};if(_&&_[0]>0){var L=_[0]/2;M.paddingLeft=L,M.paddingRight=L}if(_&&_[1]>0&&!m){var x=_[1]/2;M.paddingTop=x,M.paddingBottom=x}return R&&(M.flex=function(t){return"number"===typeof t?"".concat(t," ").concat(t," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?"0 0 ".concat(t):t}(R),!1!==v||M.minWidth||(M.minWidth=0)),s.createElement("div",Object(r.a)({},I,{style:Object(r.a)(Object(r.a)({},M),w),className:D,ref:e}),O)}));d.displayName="Col";var f=d;e.a=f}]]);
//# sourceMappingURL=2.88089d33.chunk.js.map